(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ap={exports:{}},nd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function Dx(){if(H0)return nd;H0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:o}}return nd.Fragment=e,nd.jsx=n,nd.jsxs=n,nd}var V0;function Px(){return V0||(V0=1,ap.exports=Dx()),ap.exports}var f=Px(),sp={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function Ux(){if(J0)return Ft;J0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=w&&H[w]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function C(H,L,J){this.props=H,this.context=L,this.refs=E,this.updater=J||I}C.prototype.isReactComponent={},C.prototype.setState=function(H,L){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,L,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function R(){}R.prototype=C.prototype;function D(H,L,J){this.props=H,this.context=L,this.refs=E,this.updater=J||I}var z=D.prototype=new R;z.constructor=D,A(z,C.prototype),z.isPureReactComponent=!0;var B=Array.isArray;function se(){}var q={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function Q(H,L,J){var K=J.ref;return{$$typeof:t,type:H,key:L,ref:K!==void 0?K:null,props:J}}function ne(H,L){return Q(H.type,L,H.props)}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function j(H){var L={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(J){return L[J]})}var W=/\/+/g;function M(H,L){return typeof H=="object"&&H!==null&&H.key!=null?j(""+H.key):L.toString(36)}function ce(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(se,se):(H.status="pending",H.then(function(L){H.status==="pending"&&(H.status="fulfilled",H.value=L)},function(L){H.status==="pending"&&(H.status="rejected",H.reason=L)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ee(H,L,J,K,ie){var xe=typeof H;(xe==="undefined"||xe==="boolean")&&(H=null);var Ae=!1;if(H===null)Ae=!0;else switch(xe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(H.$$typeof){case t:case e:Ae=!0;break;case m:return Ae=H._init,ee(Ae(H._payload),L,J,K,ie)}}if(Ae)return ie=ie(H),Ae=K===""?"."+M(H,0):K,B(ie)?(J="",Ae!=null&&(J=Ae.replace(W,"$&/")+"/"),ee(ie,L,J,"",function(Re){return Re})):ie!=null&&(F(ie)&&(ie=ne(ie,J+(ie.key==null||H&&H.key===ie.key?"":(""+ie.key).replace(W,"$&/")+"/")+Ae)),L.push(ie)),1;Ae=0;var Ce=K===""?".":K+":";if(B(H))for(var Ee=0;Ee<H.length;Ee++)K=H[Ee],xe=Ce+M(K,Ee),Ae+=ee(K,L,J,xe,ie);else if(Ee=v(H),typeof Ee=="function")for(H=Ee.call(H),Ee=0;!(K=H.next()).done;)K=K.value,xe=Ce+M(K,Ee++),Ae+=ee(K,L,J,xe,ie);else if(xe==="object"){if(typeof H.then=="function")return ee(ce(H),L,J,K,ie);throw L=String(H),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ae(H,L,J){if(H==null)return H;var K=[],ie=0;return ee(H,K,"","",function(xe){return L.call(J,xe,ie++)}),K}function me(H){if(H._status===-1){var L=H._result;L=L(),L.then(function(J){(H._status===0||H._status===-1)&&(H._status=1,H._result=J)},function(J){(H._status===0||H._status===-1)&&(H._status=2,H._result=J)}),H._status===-1&&(H._status=0,H._result=L)}if(H._status===1)return H._result.default;throw H._result}var pe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ve={map:ae,forEach:function(H,L,J){ae(H,function(){L.apply(this,arguments)},J)},count:function(H){var L=0;return ae(H,function(){L++}),L},toArray:function(H){return ae(H,function(L){return L})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ft.Activity=x,Ft.Children=ve,Ft.Component=C,Ft.Fragment=n,Ft.Profiler=s,Ft.PureComponent=D,Ft.StrictMode=i,Ft.Suspense=d,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(H){return q.H.useMemoCache(H)}},Ft.cache=function(H){return function(){return H.apply(null,arguments)}},Ft.cacheSignal=function(){return null},Ft.cloneElement=function(H,L,J){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var K=A({},H.props),ie=H.key;if(L!=null)for(xe in L.key!==void 0&&(ie=""+L.key),L)!G.call(L,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&L.ref===void 0||(K[xe]=L[xe]);var xe=arguments.length-2;if(xe===1)K.children=J;else if(1<xe){for(var Ae=Array(xe),Ce=0;Ce<xe;Ce++)Ae[Ce]=arguments[Ce+2];K.children=Ae}return Q(H.type,ie,K)},Ft.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Ft.createElement=function(H,L,J){var K,ie={},xe=null;if(L!=null)for(K in L.key!==void 0&&(xe=""+L.key),L)G.call(L,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ie[K]=L[K]);var Ae=arguments.length-2;if(Ae===1)ie.children=J;else if(1<Ae){for(var Ce=Array(Ae),Ee=0;Ee<Ae;Ee++)Ce[Ee]=arguments[Ee+2];ie.children=Ce}if(H&&H.defaultProps)for(K in Ae=H.defaultProps,Ae)ie[K]===void 0&&(ie[K]=Ae[K]);return Q(H,xe,ie)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(H){return{$$typeof:c,render:H}},Ft.isValidElement=F,Ft.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:me}},Ft.memo=function(H,L){return{$$typeof:h,type:H,compare:L===void 0?null:L}},Ft.startTransition=function(H){var L=q.T,J={};q.T=J;try{var K=H(),ie=q.S;ie!==null&&ie(J,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(se,pe)}catch(xe){pe(xe)}finally{L!==null&&J.types!==null&&(L.types=J.types),q.T=L}},Ft.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ft.use=function(H){return q.H.use(H)},Ft.useActionState=function(H,L,J){return q.H.useActionState(H,L,J)},Ft.useCallback=function(H,L){return q.H.useCallback(H,L)},Ft.useContext=function(H){return q.H.useContext(H)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(H,L){return q.H.useDeferredValue(H,L)},Ft.useEffect=function(H,L){return q.H.useEffect(H,L)},Ft.useEffectEvent=function(H){return q.H.useEffectEvent(H)},Ft.useId=function(){return q.H.useId()},Ft.useImperativeHandle=function(H,L,J){return q.H.useImperativeHandle(H,L,J)},Ft.useInsertionEffect=function(H,L){return q.H.useInsertionEffect(H,L)},Ft.useLayoutEffect=function(H,L){return q.H.useLayoutEffect(H,L)},Ft.useMemo=function(H,L){return q.H.useMemo(H,L)},Ft.useOptimistic=function(H,L){return q.H.useOptimistic(H,L)},Ft.useReducer=function(H,L,J){return q.H.useReducer(H,L,J)},Ft.useRef=function(H){return q.H.useRef(H)},Ft.useState=function(H){return q.H.useState(H)},Ft.useSyncExternalStore=function(H,L,J){return q.H.useSyncExternalStore(H,L,J)},Ft.useTransition=function(){return q.H.useTransition()},Ft.version="19.2.0",Ft}var Y0;function Zp(){return Y0||(Y0=1,sp.exports=Ux()),sp.exports}var ue=Zp();const ec=Xp(ue);var op={exports:{}},rd={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Ox(){return W0||(W0=1,(function(t){function e(ee,ae){var me=ee.length;ee.push(ae);e:for(;0<me;){var pe=me-1>>>1,ve=ee[pe];if(0<s(ve,ae))ee[pe]=ae,ee[me]=ve,me=pe;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ae=ee[0],me=ee.pop();if(me!==ae){ee[0]=me;e:for(var pe=0,ve=ee.length,H=ve>>>1;pe<H;){var L=2*(pe+1)-1,J=ee[L],K=L+1,ie=ee[K];if(0>s(J,me))K<ve&&0>s(ie,J)?(ee[pe]=ie,ee[K]=me,pe=K):(ee[pe]=J,ee[L]=me,pe=L);else if(K<ve&&0>s(ie,me))ee[pe]=ie,ee[K]=me,pe=K;else break e}}return ae}function s(ee,ae){var me=ee.sortIndex-ae.sortIndex;return me!==0?me:ee.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],m=1,x=null,w=3,v=!1,I=!1,A=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(ee){for(var ae=n(h);ae!==null;){if(ae.callback===null)i(h);else if(ae.startTime<=ee)i(h),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=n(h)}}function B(ee){if(A=!1,z(ee),!I)if(n(d)!==null)I=!0,se||(se=!0,j());else{var ae=n(h);ae!==null&&ce(B,ae.startTime-ee)}}var se=!1,q=-1,G=5,Q=-1;function ne(){return E?!0:!(t.unstable_now()-Q<G)}function F(){if(E=!1,se){var ee=t.unstable_now();Q=ee;var ae=!0;try{e:{I=!1,A&&(A=!1,R(q),q=-1),v=!0;var me=w;try{t:{for(z(ee),x=n(d);x!==null&&!(x.expirationTime>ee&&ne());){var pe=x.callback;if(typeof pe=="function"){x.callback=null,w=x.priorityLevel;var ve=pe(x.expirationTime<=ee);if(ee=t.unstable_now(),typeof ve=="function"){x.callback=ve,z(ee),ae=!0;break t}x===n(d)&&i(d),z(ee)}else i(d);x=n(d)}if(x!==null)ae=!0;else{var H=n(h);H!==null&&ce(B,H.startTime-ee),ae=!1}}break e}finally{x=null,w=me,v=!1}ae=void 0}}finally{ae?j():se=!1}}}var j;if(typeof D=="function")j=function(){D(F)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,M=W.port2;W.port1.onmessage=F,j=function(){M.postMessage(null)}}else j=function(){C(F,0)};function ce(ee,ae){q=C(function(){ee(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var me=w;w=ae;try{return ee()}finally{w=me}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=w;w=ee;try{return ae()}finally{w=me}},t.unstable_scheduleCallback=function(ee,ae,me){var pe=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?pe+me:pe):me=pe,ee){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=me+ve,ee={id:m++,callback:ae,priorityLevel:ee,startTime:me,expirationTime:ve,sortIndex:-1},me>pe?(ee.sortIndex=me,e(h,ee),n(d)===null&&ee===n(h)&&(A?(R(q),q=-1):A=!0,ce(B,me-pe))):(ee.sortIndex=ve,e(d,ee),I||v||(I=!0,se||(se=!0,j()))),ee},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(ee){var ae=w;return function(){var me=w;w=ae;try{return ee.apply(this,arguments)}finally{w=me}}}})(up)),up}var $0;function Bx(){return $0||($0=1,lp.exports=Ox()),lp.exports}var cp={exports:{}},li={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Fx(){if(K0)return li;K0=1;var t=Zp();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:d,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return li.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,li.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},li.flushSync=function(d){var h=l.T,m=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=m,i.d.f()}},li.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},li.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},li.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,x=c(m,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:v}):m==="script"&&i.d.X(d,{crossOrigin:x,integrity:w,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},li.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},li.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,x=c(m,h.crossOrigin);i.d.L(d,m,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},li.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},li.requestFormReset=function(d){i.d.r(d)},li.unstable_batchedUpdates=function(d,h){return d(h)},li.useFormState=function(d,h,m){return l.H.useFormState(d,h,m)},li.useFormStatus=function(){return l.H.useHostTransitionStatus()},li.version="19.2.0",li}var X0;function sy(){if(X0)return cp.exports;X0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cp.exports=Fx(),cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function zx(){if(Z0)return rd;Z0=1;var t=Bx(),e=Zp(),n=sy();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function c(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,p=a;;){var S=u.return;if(S===null)break;var _=S.alternate;if(_===null){if(p=S.return,p!==null){u=p;continue}break}if(S.child===_.child){for(_=S.child;_;){if(_===u)return d(S),r;if(_===p)return d(S),a;_=_.sibling}throw Error(i(188))}if(u.return!==p.return)u=S,p=_;else{for(var O=!1,re=S.child;re;){if(re===u){O=!0,u=S,p=_;break}if(re===p){O=!0,p=S,u=_;break}re=re.sibling}if(!O){for(re=_.child;re;){if(re===u){O=!0,u=_,p=S;break}if(re===p){O=!0,p=_,u=S;break}re=re.sibling}if(!O)throw Error(i(189))}}if(u.alternate!==p)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function m(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=m(r),a!==null)return a;r=r.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var W=Symbol.for("react.client.reference");function M(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===W?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case B:return"Suspense";case se:return"SuspenseList";case Q:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case I:return"Portal";case D:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case z:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case q:return a=r.displayName||null,a!==null?a:M(r.type)||"Memo";case G:a=r._payload,r=r._init;try{return M(r(a))}catch{}}return null}var ce=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},pe=[],ve=-1;function H(r){return{current:r}}function L(r){0>ve||(r.current=pe[ve],pe[ve]=null,ve--)}function J(r,a){ve++,pe[ve]=r.current,r.current=a}var K=H(null),ie=H(null),xe=H(null),Ae=H(null);function Ce(r,a){switch(J(xe,a),J(ie,r),J(K,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?h0(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=h0(a),r=p0(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}L(K),J(K,r)}function Ee(){L(K),L(ie),L(xe)}function Re(r){r.memoizedState!==null&&J(Ae,r);var a=K.current,u=p0(a,r.type);a!==u&&(J(ie,r),J(K,u))}function De(r){ie.current===r&&(L(K),L(ie)),Ae.current===r&&(L(Ae),Zc._currentValue=me)}var He,Xe;function U(r){if(He===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);He=a&&a[1]||"",Xe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+He+r+Xe}var ye=!1;function $(r,a){if(!r||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ve){var Ge=Ve}Reflect.construct(r,[],tt)}else{try{tt.call()}catch(Ve){Ge=Ve}r.call(tt.prototype)}}else{try{throw Error()}catch(Ve){Ge=Ve}(tt=r())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ve){if(Ve&&Ge&&typeof Ve.stack=="string")return[Ve.stack,Ge.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=p.DetermineComponentFrameRoot(),O=_[0],re=_[1];if(O&&re){var we=O.split(`
`),qe=re.split(`
`);for(S=p=0;p<we.length&&!we[p].includes("DetermineComponentFrameRoot");)p++;for(;S<qe.length&&!qe[S].includes("DetermineComponentFrameRoot");)S++;if(p===we.length||S===qe.length)for(p=we.length-1,S=qe.length-1;1<=p&&0<=S&&we[p]!==qe[S];)S--;for(;1<=p&&0<=S;p--,S--)if(we[p]!==qe[S]){if(p!==1||S!==1)do if(p--,S--,0>S||we[p]!==qe[S]){var $e=`
`+we[p].replace(" at new "," at ");return r.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",r.displayName)),$e}while(1<=p&&0<=S);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?U(u):""}function de(r,a){switch(r.tag){case 26:case 27:case 5:return U(r.type);case 16:return U("Lazy");case 13:return r.child!==a&&a!==null?U("Suspense Fallback"):U("Suspense");case 19:return U("SuspenseList");case 0:case 15:return $(r.type,!1);case 11:return $(r.type.render,!1);case 1:return $(r.type,!0);case 31:return U("Activity");default:return""}}function oe(r){try{var a="",u=null;do a+=de(r,u),u=r,r=r.return;while(r);return a}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var he=Object.prototype.hasOwnProperty,Ie=t.unstable_scheduleCallback,Le=t.unstable_cancelCallback,be=t.unstable_shouldYield,je=t.unstable_requestPaint,Oe=t.unstable_now,Je=t.unstable_getCurrentPriorityLevel,at=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,pt=t.unstable_NormalPriority,mt=t.unstable_LowPriority,Rt=t.unstable_IdlePriority,st=t.log,Rn=t.unstable_setDisableYieldValue,gt=null,on=null;function Ot(r){if(typeof st=="function"&&Rn(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(gt,r)}catch{}}var Ct=Math.clz32?Math.clz32:pi,Gr=Math.log,Jt=Math.LN2;function pi(r){return r>>>=0,r===0?32:31-(Gr(r)/Jt|0)|0}var jt=256,Gn=262144,tr=4194304;function Yt(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Et(r,a,u){var p=r.pendingLanes;if(p===0)return 0;var S=0,_=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var re=p&134217727;return re!==0?(p=re&~_,p!==0?S=Yt(p):(O&=re,O!==0?S=Yt(O):u||(u=re&~r,u!==0&&(S=Yt(u))))):(re=p&~_,re!==0?S=Yt(re):O!==0?S=Yt(O):u||(u=p&~r,u!==0&&(S=Yt(u)))),S===0?0:a!==0&&a!==S&&(a&_)===0&&(_=S&-S,u=a&-a,_>=u||_===32&&(u&4194048)!==0)?a:S}function Vt(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function ka(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nr(){var r=tr;return tr<<=1,(tr&62914560)===0&&(tr=4194304),r}function Zr(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function Lr(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function At(r,a,u,p,S,_){var O=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var re=r.entanglements,we=r.expirationTimes,qe=r.hiddenUpdates;for(u=O&~u;0<u;){var $e=31-Ct(u),tt=1<<$e;re[$e]=0,we[$e]=-1;var Ge=qe[$e];if(Ge!==null)for(qe[$e]=null,$e=0;$e<Ge.length;$e++){var Ve=Ge[$e];Ve!==null&&(Ve.lane&=-536870913)}u&=~tt}p!==0&&Qr(r,p,0),_!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=_&~(O&~a))}function Qr(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var p=31-Ct(a);r.entangledLanes|=a,r.entanglements[p]=r.entanglements[p]|1073741824|u&261930}function mi(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var p=31-Ct(u),S=1<<p;S&a|r[p]&a&&(r[p]|=a),u&=~S}}function hr(r,a){var u=a&-a;return u=(u&42)!==0?1:mn(u),(u&(r.suspendedLanes|a))!==0?0:u}function mn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Nr(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:U0(r.type))}function Qi(r,a){var u=ae.p;try{return ae.p=r,a()}finally{ae.p=u}}var pr=Math.random().toString(36).slice(2),fn="__reactFiber$"+pr,wn="__reactProps$"+pr,mr="__reactContainer$"+pr,gn="__reactEvents$"+pr,ei="__reactListeners$"+pr,Ti="__reactHandles$"+pr,ea="__reactResources$"+pr,gi="__reactMarker$"+pr;function ti(r){delete r[fn],delete r[wn],delete r[gn],delete r[ei],delete r[Ti]}function ni(r){var a=r[fn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[mr]||u[fn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=w0(r);r!==null;){if(u=r[fn])return u;r=w0(r)}return a}r=u,u=r.parentNode}return null}function rt(r){if(r=r[fn]||r[mr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function lt(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function rn(r){var a=r[ea];return a||(a=r[ea]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(r){r[gi]=!0}var sn=new Set,Rr={};function Tn(r,a){rr(r,a),rr(r+"Capture",a)}function rr(r,a){for(Rr[r]=a,r=0;r<a.length;r++)sn.add(a[r])}var xc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ml={},ru={};function vo(r){return he.call(ru,r)?!0:he.call(ml,r)?!1:xc.test(r)?ru[r]=!0:(ml[r]=!0,!1)}function xo(r,a,u){if(vo(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function jn(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Ei(r,a,u,p){if(p===null)r.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+p)}}function Hr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gl(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yl(r,a,u){var p=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,_=p.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return S.call(this)},set:function(O){u=""+O,_.call(this,O)}}),Object.defineProperty(r,a,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function vl(r){if(!r._valueTracker){var a=gl(r)?"checked":"value";r._valueTracker=yl(r,a,""+r[a])}}function Ii(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return r&&(p=gl(r)?r.checked?"true":"false":r.value),r=p,r!==u?(a.setValue(r),!0):!1}function La(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ri=/[\n"\\]/g;function Mr(r){return r.replace(ri,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bo(r,a,u,p,S,_,O,re){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Hr(a)):r.value!==""+Hr(a)&&(r.value=""+Hr(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?wo(r,O,Hr(a)):u!=null?wo(r,O,Hr(u)):p!=null&&r.removeAttribute("value"),S==null&&_!=null&&(r.defaultChecked=!!_),S!=null&&(r.checked=S&&typeof S!="function"&&typeof S!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?r.name=""+Hr(re):r.removeAttribute("name")}function iu(r,a,u,p,S,_,O,re){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),a!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){vl(r);return}u=u!=null?""+Hr(u):"",a=a!=null?""+Hr(a):u,re||a===r.value||(r.value=a),r.defaultValue=a}p=p??S,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=re?r.checked:!!p,r.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),vl(r)}function wo(r,a,u){a==="number"&&La(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function rs(r,a,u,p){if(r=r.options,a){a={};for(var S=0;S<u.length;S++)a["$"+u[S]]=!0;for(u=0;u<r.length;u++)S=a.hasOwnProperty("$"+r[u].value),r[u].selected!==S&&(r[u].selected=S),S&&p&&(r[u].defaultSelected=!0)}else{for(u=""+Hr(u),a=null,S=0;S<r.length;S++){if(r[S].value===u){r[S].selected=!0,p&&(r[S].defaultSelected=!0);return}a!==null||r[S].disabled||(a=r[S])}a!==null&&(a.selected=!0)}}function xl(r,a,u){if(a!=null&&(a=""+Hr(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+Hr(u):""}function au(r,a,u,p){if(a==null){if(p!=null){if(u!=null)throw Error(i(92));if(ce(p)){if(1<p.length)throw Error(i(93));p=p[0]}u=p}u==null&&(u=""),a=u}u=Hr(a),r.defaultValue=u,p=r.textContent,p===u&&p!==""&&p!==null&&(r.value=p),vl(r)}function pa(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(r,a,u){var p=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":p?r.setProperty(a,u):typeof u!="number"||u===0||bc.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function ou(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var S in a)p=a[S],a.hasOwnProperty(S)&&u[S]!==p&&su(r,S,p)}else for(var _ in a)a.hasOwnProperty(_)&&su(r,_,a[_])}function ta(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),No=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ds(r){return No.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Dn(){}var bl=null;function _o(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tt=null,is=null;function lu(r){var a=rt(r);if(a&&(r=a.stateNode)){var u=r[wn]||null;e:switch(r=a.stateNode,a.type){case"input":if(bo(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Mr(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==r&&p.form===r.form){var S=p[wn]||null;if(!S)throw Error(i(90));bo(p,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(a=0;a<u.length;a++)p=u[a],p.form===r.form&&Ii(p)}break e;case"textarea":xl(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&rs(r,!!u.multiple,a,!1)}}}var ki=!1;function wl(r,a,u){if(ki)return r(a,u);ki=!0;try{var p=r(a);return p}finally{if(ki=!1,(Tt!==null||is!==null)&&(Fd(),Tt&&(a=Tt,r=is,is=Tt=null,lu(a),r)))for(a=0;a<r.length;a++)lu(r[a])}}function as(r,a){var u=r.stateNode;if(u===null)return null;var p=u[wn]||null;if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(ii)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Ps=!1}var ma=null,Sl=null,ss=null;function os(){if(ss)return ss;var r,a=Sl,u=a.length,p,S="value"in ma?ma.value:ma.textContent,_=S.length;for(r=0;r<u&&a[r]===S[r];r++);var O=u-r;for(p=1;p<=O&&a[u-p]===S[_-p];p++);return ss=S.slice(r,1<p?1-p:void 0)}function na(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ao(){return!0}function ls(){return!1}function gr(r){function a(u,p,S,_,O){this._reactName=u,this._targetInst=S,this.type=p,this.nativeEvent=_,this.target=O,this.currentTarget=null;for(var re in r)r.hasOwnProperty(re)&&(u=r[re],this[re]=u?u(_):_[re]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ao:ls,this.isPropagationStopped=ls,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),a}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=gr(Li),us=x({},Li,{view:0,detail:0}),uu=gr(us),Co,ra,Ri,To=x({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ri&&(Ri&&r.type==="mousemove"?(Co=r.screenX-Ri.screenX,ra=r.screenY-Ri.screenY):ra=Co=0,Ri=r),Co)},movementY:function(r){return"movementY"in r?r.movementY:ra}}),Ra=gr(To),ia=x({},To,{dataTransfer:0}),Nl=gr(ia),Bs=x({},us,{relatedTarget:0}),_l=gr(Bs),Eo=x({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=gr(Eo),Al=x({},Li,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Cl=gr(Al),cu=x({},Li,{data:0}),Fs=gr(cu),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},El={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=du[r])?!!a[r]:!1}function cs(){return Sc}var zs=x({},us,{key:function(r){if(r.key){var a=Tl[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=na(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?El[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(r){return r.type==="keypress"?na(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?na(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Il=gr(zs),ds=x({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Io=gr(ds),T=x({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),Y=gr(T),ge=x({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Se=gr(ge),Ue=x({},To,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),We=gr(Ue),it=x({},Li,{newState:0,oldState:0}),ft=gr(it),St=[9,13,27,32],Dt=ii&&"CompositionEvent"in window,Ut=null;ii&&"documentMode"in document&&(Ut=document.documentMode);var Zt=ii&&"TextEvent"in window&&!Ut,Pn=ii&&(!Dt||Ut&&8<Ut&&11>=Ut),Un=" ",Xn=!1;function _r(r,a){switch(r){case"keyup":return St.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lr(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jr=!1;function yi(r,a){switch(r){case"compositionend":return lr(a);case"keypress":return a.which!==32?null:(Xn=!0,Un);case"textInput":return r=a.data,r===Un&&Xn?null:r;default:return null}}function Ma(r,a){if(jr)return r==="compositionend"||!Dt&&_r(r,a)?(r=os(),ss=Sl=ma=null,jr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Pn&&a.locale!=="ko"?null:a.data;default:return null}}var fu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ko(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!fu[r.type]:a==="textarea"}function Lo(r,a,u,p){Tt?is?is.push(p):is=[p]:Tt=p,a=Yd(a,"onChange"),0<a.length&&(u=new Os("onChange","change",null,u,p),r.push({event:u,listeners:a}))}var ga=null,ja=null;function kl(r){o0(r,0)}function Da(r){var a=lt(r);if(Ii(a))return r}function Vr(r,a){if(r==="change")return a}var qs=!1;if(ii){var fs;if(ii){var hs="oninput"in document;if(!hs){var Ro=document.createElement("div");Ro.setAttribute("oninput","return;"),hs=typeof Ro.oninput=="function"}fs=hs}else fs=!1;qs=fs&&(!document.documentMode||9<document.documentMode)}function Jr(){ga&&(ga.detachEvent("onpropertychange",hu),ja=ga=null)}function hu(r){if(r.propertyName==="value"&&Da(ja)){var a=[];Lo(a,ja,r,_o(r)),wl(kl,a)}}function Ll(r,a,u){r==="focusin"?(Jr(),ga=a,ja=u,ga.attachEvent("onpropertychange",hu)):r==="focusout"&&Jr()}function pu(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Da(ja)}function aa(r,a){if(r==="click")return Da(a)}function Rl(r,a){if(r==="input"||r==="change")return Da(a)}function Nc(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Yr=typeof Object.is=="function"?Object.is:Nc;function Mi(r,a){if(Yr(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var S=u[p];if(!he.call(a,S)||!Yr(r[S],a[S]))return!1}return!0}function vi(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ji(r,a){var u=vi(r);r=0;for(var p;u;){if(u.nodeType===3){if(p=r+u.textContent.length,r<=a&&p>=a)return{node:u,offset:a-r};r=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=vi(u)}}function Pa(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Pa(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function sa(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=La(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=La(r.document)}return a}function oa(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var Mo=ii&&"documentMode"in document&&11>=document.documentMode,Dr=null,ps=null,Ua=null,ya=!1;function Di(r,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ya||Dr==null||Dr!==La(p)||(p=Dr,"selectionStart"in p&&oa(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ua&&Mi(Ua,p)||(Ua=p,p=Yd(ps,"onSelect"),0<p.length&&(a=new Os("onSelect","select",null,a,u),r.push({event:a,listeners:p}),a.target=Dr)))}function Wr(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var Pi={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},ms={},gs={};ii&&(gs=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function ai(r){if(ms[r])return ms[r];if(!Pi[r])return r;var a=Pi[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in gs)return ms[r]=a[u];return r}var jo=ai("animationend"),xi=ai("animationiteration"),va=ai("animationstart"),Sn=ai("transitionrun"),Nn=ai("transitionstart"),Zn=ai("transitioncancel"),ir=ai("transitionend"),xa=new Map,ba="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ba.push("scrollEnd");function Pr(r,a){xa.set(r,a),Tn(a,[r])}var Gs=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},bi=[],Hs=0,mu=0;function Ml(){for(var r=Hs,a=mu=Hs=0;a<r;){var u=bi[a];bi[a++]=null;var p=bi[a];bi[a++]=null;var S=bi[a];bi[a++]=null;var _=bi[a];if(bi[a++]=null,p!==null&&S!==null){var O=p.pending;O===null?S.next=S:(S.next=O.next,O.next=S),p.pending=S}_!==0&&Dl(u,S,_)}}function jl(r,a,u,p){bi[Hs++]=r,bi[Hs++]=a,bi[Hs++]=u,bi[Hs++]=p,mu|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function gu(r,a,u,p){return jl(r,a,u,p),Ur(r)}function Oa(r,a){return jl(r,null,null,a),Ur(r)}function Dl(r,a,u){r.lanes|=u;var p=r.alternate;p!==null&&(p.lanes|=u);for(var S=!1,_=r.return;_!==null;)_.childLanes|=u,p=_.alternate,p!==null&&(p.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(S=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,S&&a!==null&&(S=31-Ct(u),r=_.hiddenUpdates,p=r[S],p===null?r[S]=[a]:p.push(a),a.lane=u|536870912),_):null}function Ur(r){if(50<Vc)throw Vc=0,Ih=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Ar={};function yu(r,a,u,p){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(r,a,u,p){return new yu(r,a,u,p)}function vu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ui(r,a){var u=r.alternate;return u===null?(u=Or(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Pl(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Do(r,a,u,p,S,_){var O=0;if(p=r,typeof r=="function")vu(r)&&(O=1);else if(typeof r=="string")O=Nx(r,u,K.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case Q:return r=Or(31,u,a,S),r.elementType=Q,r.lanes=_,r;case A:return ys(u.children,S,_,a);case E:O=8,S|=24;break;case C:return r=Or(12,u,a,S|2),r.elementType=C,r.lanes=_,r;case B:return r=Or(13,u,a,S),r.elementType=B,r.lanes=_,r;case se:return r=Or(19,u,a,S),r.elementType=se,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:O=10;break e;case R:O=9;break e;case z:O=11;break e;case q:O=14;break e;case G:O=16,p=null;break e}O=29,u=Error(i(130,r===null?"null":typeof r,"")),p=null}return a=Or(O,u,a,S),a.elementType=r,a.type=p,a.lanes=_,a}function ys(r,a,u,p){return r=Or(7,r,p,a),r.lanes=u,r}function Ul(r,a,u){return r=Or(6,r,null,a),r.lanes=u,r}function xu(r){var a=Or(18,null,null,0);return a.stateNode=r,a}function Po(r,a,u){return a=Or(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var bu=new WeakMap;function Oi(r,a){if(typeof r=="object"&&r!==null){var u=bu.get(r);return u!==void 0?u:(a={value:r,source:a,stack:oe(a)},bu.set(r,a),a)}return{value:r,source:a,stack:oe(a)}}var Uo=[],Vs=0,wu=null,Ol=0,Bi=[],Fi=0,vs=null,zi=1,qi="";function wi(r,a){Uo[Vs++]=Ol,Uo[Vs++]=wu,wu=r,Ol=a}function xd(r,a,u){Bi[Fi++]=zi,Bi[Fi++]=qi,Bi[Fi++]=vs,vs=r;var p=zi;r=qi;var S=32-Ct(p)-1;p&=~(1<<S),u+=1;var _=32-Ct(a)+S;if(30<_){var O=S-S%5;_=(p&(1<<O)-1).toString(32),p>>=O,S-=O,zi=1<<32-Ct(a)+S|u<<S|p,qi=_+r}else zi=1<<_|u<<S|p,qi=r}function _c(r){r.return!==null&&(wi(r,1),xd(r,1,0))}function Su(r){for(;r===wu;)wu=Uo[--Vs],Uo[Vs]=null,Ol=Uo[--Vs],Uo[Vs]=null;for(;r===vs;)vs=Bi[--Fi],Bi[Fi]=null,qi=Bi[--Fi],Bi[Fi]=null,zi=Bi[--Fi],Bi[Fi]=null}function bd(r,a){Bi[Fi++]=zi,Bi[Fi++]=qi,Bi[Fi++]=vs,zi=a.id,qi=a.overflow,vs=r}var Cr=null,En=null,Wt=!1,$r=null,Hn=!1,la=Error(i(519));function xs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(Oi(a,r)),la}function Ac(r){var a=r.stateNode,u=r.type,p=r.memoizedProps;switch(a[fn]=r,a[wn]=p,u){case"dialog":Xt("cancel",a),Xt("close",a);break;case"iframe":case"object":case"embed":Xt("load",a);break;case"video":case"audio":for(u=0;u<Yc.length;u++)Xt(Yc[u],a);break;case"source":Xt("error",a);break;case"img":case"image":case"link":Xt("error",a),Xt("load",a);break;case"details":Xt("toggle",a);break;case"input":Xt("invalid",a),iu(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Xt("invalid",a);break;case"textarea":Xt("invalid",a),au(a,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||p.suppressHydrationWarning===!0||d0(a.textContent,u)?(p.popover!=null&&(Xt("beforetoggle",a),Xt("toggle",a)),p.onScroll!=null&&Xt("scroll",a),p.onScrollEnd!=null&&Xt("scrollend",a),p.onClick!=null&&(a.onclick=Dn),a=!0):a=!1,a||xs(r,!0)}function Ba(r){for(Cr=r.return;Cr;)switch(Cr.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Cr=Cr.return}}function Tr(r){if(r!==Cr)return!1;if(!Wt)return Ba(r),Wt=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Hh(r.type,r.memoizedProps)),u=!u),u&&En&&xs(r),Ba(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));En=b0(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));En=b0(r)}else a===27?(a=En,Zo(r.type)?(r=$h,$h=null,En=r):En=a):En=Cr?Ta(r.stateNode.nextSibling):null;return!0}function Js(){En=Cr=null,Wt=!1}function Cc(){var r=$r;return r!==null&&(Wi===null?Wi=r:Wi.push.apply(Wi,r),$r=null),r}function Oo(r){$r===null?$r=[r]:$r.push(r)}var Nu=H(null),bs=null,wa=null;function ws(r,a,u){J(Nu,a._currentValue),a._currentValue=u}function Gi(r){r._currentValue=Nu.current,L(Nu)}function Bo(r,a,u){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),r===u)break;r=r.return}}function Ys(r,a,u,p){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var _=S.dependencies;if(_!==null){var O=S.child;_=_.firstContext;e:for(;_!==null;){var re=_;_=S;for(var we=0;we<a.length;we++)if(re.context===a[we]){_.lanes|=u,re=_.alternate,re!==null&&(re.lanes|=u),Bo(_.return,u,r),p||(O=null);break e}_=re.next}}else if(S.tag===18){if(O=S.return,O===null)throw Error(i(341));O.lanes|=u,_=O.alternate,_!==null&&(_.lanes|=u),Bo(O,u,r),O=null}else O=S.child;if(O!==null)O.return=S;else for(O=S;O!==null;){if(O===r){O=null;break}if(S=O.sibling,S!==null){S.return=O.return,O=S;break}O=O.return}S=O}}function Ss(r,a,u,p){r=null;for(var S=a,_=!1;S!==null;){if(!_){if((S.flags&524288)!==0)_=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var O=S.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var re=S.type;Yr(S.pendingProps.value,O.value)||(r!==null?r.push(re):r=[re])}}else if(S===Ae.current){if(O=S.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(Zc):r=[Zc])}S=S.return}r!==null&&Ys(a,r,u,p),a.flags|=262144}function _u(r){for(r=r.firstContext;r!==null;){if(!Yr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ns(r){bs=r,wa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Er(r){return wd(bs,r)}function Au(r,a){return bs===null&&Ns(r),wd(r,a)}function wd(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},wa===null){if(r===null)throw Error(i(308));wa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else wa=wa.next=a;return u}var Wf=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,p){r.push(p)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},$f=t.unstable_scheduleCallback,Kf=t.unstable_NormalPriority,Qn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fo(){return{controller:new Wf,data:new Map,refCount:0}}function Bl(r){r.refCount--,r.refCount===0&&$f(Kf,function(){r.controller.abort()})}var Fl=null,Cu=0,y=0,N=null;function k(r,a){if(Fl===null){var u=Fl=[];Cu=0,y=Dh(),N={status:"pending",value:void 0,then:function(p){u.push(p)}}}return Cu++,a.then(P,P),a}function P(){if(--Cu===0&&Fl!==null){N!==null&&(N.status="fulfilled");var r=Fl;Fl=null,y=0,N=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function V(r,a){var u=[],p={status:"pending",value:null,reason:null,then:function(S){u.push(S)}};return r.then(function(){p.status="fulfilled",p.value=a;for(var S=0;S<u.length;S++)(0,u[S])(a)},function(S){for(p.status="rejected",p.reason=S,S=0;S<u.length;S++)(0,u[S])(void 0)}),p}var X=ee.S;ee.S=function(r,a){Dg=Oe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&k(r,a),X!==null&&X(r,a)};var Z=H(null);function te(){var r=Z.current;return r!==null?r:kn.pooledCache}function le(r,a){a===null?J(Z,Z.current):J(Z,a.pool)}function fe(){var r=te();return r===null?null:{parent:Qn._currentValue,pool:r}}var Ne=Error(i(460)),Fe=Error(i(474)),Be=Error(i(542)),Me={then:function(){}};function et(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ye(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(Dn,Dn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,nt(r),r;default:if(typeof a.status=="string")a.then(Dn,Dn);else{if(r=kn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(p){if(a.status==="pending"){var S=a;S.status="fulfilled",S.value=p}},function(p){if(a.status==="pending"){var S=a;S.status="rejected",S.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,nt(r),r}throw ke=a,Ne}}function _e(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ke=u,Ne):u}}var ke=null;function Ze(){if(ke===null)throw Error(i(459));var r=ke;return ke=null,r}function nt(r){if(r===Ne||r===Be)throw Error(i(483))}var Ke=null,ct=0;function ot(r){var a=ct;return ct+=1,Ke===null&&(Ke=[]),Ye(Ke,r,a)}function wt(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function ut(r,a){throw a.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function an(r){function a(Pe,Te){if(r){var ze=Pe.deletions;ze===null?(Pe.deletions=[Te],Pe.flags|=16):ze.push(Te)}}function u(Pe,Te){if(!r)return null;for(;Te!==null;)a(Pe,Te),Te=Te.sibling;return null}function p(Pe){for(var Te=new Map;Pe!==null;)Pe.key!==null?Te.set(Pe.key,Pe):Te.set(Pe.index,Pe),Pe=Pe.sibling;return Te}function S(Pe,Te){return Pe=Ui(Pe,Te),Pe.index=0,Pe.sibling=null,Pe}function _(Pe,Te,ze){return Pe.index=ze,r?(ze=Pe.alternate,ze!==null?(ze=ze.index,ze<Te?(Pe.flags|=67108866,Te):ze):(Pe.flags|=67108866,Te)):(Pe.flags|=1048576,Te)}function O(Pe){return r&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function re(Pe,Te,ze,Qe){return Te===null||Te.tag!==6?(Te=Ul(ze,Pe.mode,Qe),Te.return=Pe,Te):(Te=S(Te,ze),Te.return=Pe,Te)}function we(Pe,Te,ze,Qe){var Nt=ze.type;return Nt===A?$e(Pe,Te,ze.props.children,Qe,ze.key):Te!==null&&(Te.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===G&&_e(Nt)===Te.type)?(Te=S(Te,ze.props),wt(Te,ze),Te.return=Pe,Te):(Te=Do(ze.type,ze.key,ze.props,null,Pe.mode,Qe),wt(Te,ze),Te.return=Pe,Te)}function qe(Pe,Te,ze,Qe){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==ze.containerInfo||Te.stateNode.implementation!==ze.implementation?(Te=Po(ze,Pe.mode,Qe),Te.return=Pe,Te):(Te=S(Te,ze.children||[]),Te.return=Pe,Te)}function $e(Pe,Te,ze,Qe,Nt){return Te===null||Te.tag!==7?(Te=ys(ze,Pe.mode,Qe,Nt),Te.return=Pe,Te):(Te=S(Te,ze),Te.return=Pe,Te)}function tt(Pe,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=Ul(""+Te,Pe.mode,ze),Te.return=Pe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:return ze=Do(Te.type,Te.key,Te.props,null,Pe.mode,ze),wt(ze,Te),ze.return=Pe,ze;case I:return Te=Po(Te,Pe.mode,ze),Te.return=Pe,Te;case G:return Te=_e(Te),tt(Pe,Te,ze)}if(ce(Te)||j(Te))return Te=ys(Te,Pe.mode,ze,null),Te.return=Pe,Te;if(typeof Te.then=="function")return tt(Pe,ot(Te),ze);if(Te.$$typeof===D)return tt(Pe,Au(Pe,Te),ze);ut(Pe,Te)}return null}function Ge(Pe,Te,ze,Qe){var Nt=Te!==null?Te.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return Nt!==null?null:re(Pe,Te,""+ze,Qe);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case v:return ze.key===Nt?we(Pe,Te,ze,Qe):null;case I:return ze.key===Nt?qe(Pe,Te,ze,Qe):null;case G:return ze=_e(ze),Ge(Pe,Te,ze,Qe)}if(ce(ze)||j(ze))return Nt!==null?null:$e(Pe,Te,ze,Qe,null);if(typeof ze.then=="function")return Ge(Pe,Te,ot(ze),Qe);if(ze.$$typeof===D)return Ge(Pe,Te,Au(Pe,ze),Qe);ut(Pe,ze)}return null}function Ve(Pe,Te,ze,Qe,Nt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Pe=Pe.get(ze)||null,re(Te,Pe,""+Qe,Nt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case v:return Pe=Pe.get(Qe.key===null?ze:Qe.key)||null,we(Te,Pe,Qe,Nt);case I:return Pe=Pe.get(Qe.key===null?ze:Qe.key)||null,qe(Te,Pe,Qe,Nt);case G:return Qe=_e(Qe),Ve(Pe,Te,ze,Qe,Nt)}if(ce(Qe)||j(Qe))return Pe=Pe.get(ze)||null,$e(Te,Pe,Qe,Nt,null);if(typeof Qe.then=="function")return Ve(Pe,Te,ze,ot(Qe),Nt);if(Qe.$$typeof===D)return Ve(Pe,Te,ze,Au(Te,Qe),Nt);ut(Te,Qe)}return null}function yt(Pe,Te,ze,Qe){for(var Nt=null,un=null,bt=Te,Gt=Te=0,tn=null;bt!==null&&Gt<ze.length;Gt++){bt.index>Gt?(tn=bt,bt=null):tn=bt.sibling;var cn=Ge(Pe,bt,ze[Gt],Qe);if(cn===null){bt===null&&(bt=tn);break}r&&bt&&cn.alternate===null&&a(Pe,bt),Te=_(cn,Te,Gt),un===null?Nt=cn:un.sibling=cn,un=cn,bt=tn}if(Gt===ze.length)return u(Pe,bt),Wt&&wi(Pe,Gt),Nt;if(bt===null){for(;Gt<ze.length;Gt++)bt=tt(Pe,ze[Gt],Qe),bt!==null&&(Te=_(bt,Te,Gt),un===null?Nt=bt:un.sibling=bt,un=bt);return Wt&&wi(Pe,Gt),Nt}for(bt=p(bt);Gt<ze.length;Gt++)tn=Ve(bt,Pe,Gt,ze[Gt],Qe),tn!==null&&(r&&tn.alternate!==null&&bt.delete(tn.key===null?Gt:tn.key),Te=_(tn,Te,Gt),un===null?Nt=tn:un.sibling=tn,un=tn);return r&&bt.forEach(function(rl){return a(Pe,rl)}),Wt&&wi(Pe,Gt),Nt}function kt(Pe,Te,ze,Qe){if(ze==null)throw Error(i(151));for(var Nt=null,un=null,bt=Te,Gt=Te=0,tn=null,cn=ze.next();bt!==null&&!cn.done;Gt++,cn=ze.next()){bt.index>Gt?(tn=bt,bt=null):tn=bt.sibling;var rl=Ge(Pe,bt,cn.value,Qe);if(rl===null){bt===null&&(bt=tn);break}r&&bt&&rl.alternate===null&&a(Pe,bt),Te=_(rl,Te,Gt),un===null?Nt=rl:un.sibling=rl,un=rl,bt=tn}if(cn.done)return u(Pe,bt),Wt&&wi(Pe,Gt),Nt;if(bt===null){for(;!cn.done;Gt++,cn=ze.next())cn=tt(Pe,cn.value,Qe),cn!==null&&(Te=_(cn,Te,Gt),un===null?Nt=cn:un.sibling=cn,un=cn);return Wt&&wi(Pe,Gt),Nt}for(bt=p(bt);!cn.done;Gt++,cn=ze.next())cn=Ve(bt,Pe,Gt,cn.value,Qe),cn!==null&&(r&&cn.alternate!==null&&bt.delete(cn.key===null?Gt:cn.key),Te=_(cn,Te,Gt),un===null?Nt=cn:un.sibling=cn,un=cn);return r&&bt.forEach(function(jx){return a(Pe,jx)}),Wt&&wi(Pe,Gt),Nt}function Cn(Pe,Te,ze,Qe){if(typeof ze=="object"&&ze!==null&&ze.type===A&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case v:e:{for(var Nt=ze.key;Te!==null;){if(Te.key===Nt){if(Nt=ze.type,Nt===A){if(Te.tag===7){u(Pe,Te.sibling),Qe=S(Te,ze.props.children),Qe.return=Pe,Pe=Qe;break e}}else if(Te.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===G&&_e(Nt)===Te.type){u(Pe,Te.sibling),Qe=S(Te,ze.props),wt(Qe,ze),Qe.return=Pe,Pe=Qe;break e}u(Pe,Te);break}else a(Pe,Te);Te=Te.sibling}ze.type===A?(Qe=ys(ze.props.children,Pe.mode,Qe,ze.key),Qe.return=Pe,Pe=Qe):(Qe=Do(ze.type,ze.key,ze.props,null,Pe.mode,Qe),wt(Qe,ze),Qe.return=Pe,Pe=Qe)}return O(Pe);case I:e:{for(Nt=ze.key;Te!==null;){if(Te.key===Nt)if(Te.tag===4&&Te.stateNode.containerInfo===ze.containerInfo&&Te.stateNode.implementation===ze.implementation){u(Pe,Te.sibling),Qe=S(Te,ze.children||[]),Qe.return=Pe,Pe=Qe;break e}else{u(Pe,Te);break}else a(Pe,Te);Te=Te.sibling}Qe=Po(ze,Pe.mode,Qe),Qe.return=Pe,Pe=Qe}return O(Pe);case G:return ze=_e(ze),Cn(Pe,Te,ze,Qe)}if(ce(ze))return yt(Pe,Te,ze,Qe);if(j(ze)){if(Nt=j(ze),typeof Nt!="function")throw Error(i(150));return ze=Nt.call(ze),kt(Pe,Te,ze,Qe)}if(typeof ze.then=="function")return Cn(Pe,Te,ot(ze),Qe);if(ze.$$typeof===D)return Cn(Pe,Te,Au(Pe,ze),Qe);ut(Pe,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Te!==null&&Te.tag===6?(u(Pe,Te.sibling),Qe=S(Te,ze),Qe.return=Pe,Pe=Qe):(u(Pe,Te),Qe=Ul(ze,Pe.mode,Qe),Qe.return=Pe,Pe=Qe),O(Pe)):u(Pe,Te)}return function(Pe,Te,ze,Qe){try{ct=0;var Nt=Cn(Pe,Te,ze,Qe);return Ke=null,Nt}catch(bt){if(bt===Ne||bt===Be)throw bt;var un=Or(29,bt,null,Pe.mode);return un.lanes=Qe,un.return=Pe,un}finally{}}}var $t=an(!0),Qt=an(!1),Bt=!1;function hn(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ln(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function It(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function yn(r,a,u){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(pn&2)!==0){var S=p.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),p.pending=a,a=Ur(r),Dl(r,null,u),a}return jl(r,p,a,u),Ur(r)}function yr(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var p=a.lanes;p&=r.pendingLanes,u|=p,a.lanes=u,mi(r,u)}}function Vn(r,a){var u=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var S=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?S=_=O:_=_.next=O,u=u.next}while(u!==null);_===null?S=_=a:_=_.next=a}else S=_=a;u={baseState:p.baseState,firstBaseUpdate:S,lastBaseUpdate:_,shared:p.shared,callbacks:p.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Br=!1;function nn(){if(Br){var r=N;if(r!==null)throw r}}function Ir(r,a,u,p){Br=!1;var S=r.updateQueue;Bt=!1;var _=S.firstBaseUpdate,O=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var we=re,qe=we.next;we.next=null,O===null?_=qe:O.next=qe,O=we;var $e=r.alternate;$e!==null&&($e=$e.updateQueue,re=$e.lastBaseUpdate,re!==O&&(re===null?$e.firstBaseUpdate=qe:re.next=qe,$e.lastBaseUpdate=we))}if(_!==null){var tt=S.baseState;O=0,$e=qe=we=null,re=_;do{var Ge=re.lane&-536870913,Ve=Ge!==re.lane;if(Ve?(en&Ge)===Ge:(p&Ge)===Ge){Ge!==0&&Ge===y&&(Br=!0),$e!==null&&($e=$e.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var yt=r,kt=re;Ge=a;var Cn=u;switch(kt.tag){case 1:if(yt=kt.payload,typeof yt=="function"){tt=yt.call(Cn,tt,Ge);break e}tt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=kt.payload,Ge=typeof yt=="function"?yt.call(Cn,tt,Ge):yt,Ge==null)break e;tt=x({},tt,Ge);break e;case 2:Bt=!0}}Ge=re.callback,Ge!==null&&(r.flags|=64,Ve&&(r.flags|=8192),Ve=S.callbacks,Ve===null?S.callbacks=[Ge]:Ve.push(Ge))}else Ve={lane:Ge,tag:re.tag,payload:re.payload,callback:re.callback,next:null},$e===null?(qe=$e=Ve,we=tt):$e=$e.next=Ve,O|=Ge;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;Ve=re,re=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);$e===null&&(we=tt),S.baseState=we,S.firstBaseUpdate=qe,S.lastBaseUpdate=$e,_===null&&(S.shared.lanes=0),Yo|=O,r.lanes=O,r.memoizedState=tt}}function si(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function ur(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)si(u[r],a)}var Jn=H(null),vr=H(0);function Si(r,a){r=ao,J(vr,r),J(Jn,a),ao=r|a.baseLanes}function Hi(){J(vr,ao),J(Jn,Jn.current)}function ar(){ao=vr.current,L(Jn),L(vr)}var er=H(null),xr=null;function Ni(r){var a=r.alternate;J(Yn,Yn.current&1),J(er,r),xr===null&&(a===null||Jn.current!==null||a.memoizedState!==null)&&(xr=r)}function Sa(r){J(Yn,Yn.current),J(er,r),xr===null&&(xr=r)}function On(r){r.tag===22?(J(Yn,Yn.current),J(er,r),xr===null&&(xr=r)):Na()}function Na(){J(Yn,Yn.current),J(er,er.current)}function oi(r){L(er),xr===r&&(xr=null),L(Yn)}var Yn=H(0);function Ws(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Yh(u)||Wh(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _i=0,Pt=null,Ht=null,In=null,Fa=!1,$s=!1,_a=!1,zl=0,_s=0,As=null,Tu=0;function _n(){throw Error(i(321))}function Tc(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!Yr(r[u],a[u]))return!1;return!0}function Ec(r,a,u,p,S,_){return _i=_,Pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=r===null||r.memoizedState===null?Jm:ih,_a=!1,_=u(p,S),_a=!1,$s&&(_=za(a,u,p,S)),Eu(r),_}function Eu(r){ee.H=Pc;var a=Ht!==null&&Ht.next!==null;if(_i=0,In=Ht=Pt=null,Fa=!1,_s=0,As=null,a)throw Error(i(300));r===null||wr||(r=r.dependencies,r!==null&&_u(r)&&(wr=!0))}function za(r,a,u,p){Pt=r;var S=0;do{if($s&&(As=null),_s=0,$s=!1,25<=S)throw Error(i(301));if(S+=1,In=Ht=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=Ym,_=a(u,p)}while($s);return _}function Xf(){var r=ee.H,a=r.useState()[0];return a=typeof a.then=="function"?Cs(a):a,r=r.useState()[0],(Ht!==null?Ht.memoizedState:null)!==r&&(Pt.flags|=1024),a}function Ic(){var r=zl!==0;return zl=0,r}function kc(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function Iu(r){if(Fa){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Fa=!1}_i=0,In=Ht=Pt=null,$s=!1,_s=zl=0,As=null}function br(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Pt.memoizedState=In=r:In=In.next=r,In}function Wn(){if(Ht===null){var r=Pt.alternate;r=r!==null?r.memoizedState:null}else r=Ht.next;var a=In===null?Pt.memoizedState:In.next;if(a!==null)In=a,Ht=r;else{if(r===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));Ht=r,r={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},In===null?Pt.memoizedState=In=r:In=In.next=r}return In}function ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cs(r){var a=_s;return _s+=1,As===null&&(As=[]),r=Ye(As,r,a),a=Pt,(In===null?a.memoizedState:In.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?Jm:ih),r}function zo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Cs(r);if(r.$$typeof===D)return Er(r)}throw Error(i(438,String(r)))}function Ks(r){var a=null,u=Pt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var p=Pt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(S){return S.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=ql(),Pt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),p=0;p<r;p++)u[p]=ne;return a.index++,u}function Aa(r,a){return typeof a=="function"?a(r):a}function ku(r){var a=Wn();return qo(a,Ht,r)}function qo(r,a,u){var p=r.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=u;var S=r.baseQueue,_=p.pending;if(_!==null){if(S!==null){var O=S.next;S.next=_.next,_.next=O}a.baseQueue=S=_,p.pending=null}if(_=r.baseState,S===null)r.memoizedState=_;else{a=S.next;var re=O=null,we=null,qe=a,$e=!1;do{var tt=qe.lane&-536870913;if(tt!==qe.lane?(en&tt)===tt:(_i&tt)===tt){var Ge=qe.revertLane;if(Ge===0)we!==null&&(we=we.next={lane:0,revertLane:0,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),tt===y&&($e=!0);else if((_i&Ge)===Ge){qe=qe.next,Ge===y&&($e=!0);continue}else tt={lane:0,revertLane:qe.revertLane,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},we===null?(re=we=tt,O=_):we=we.next=tt,Pt.lanes|=Ge,Yo|=Ge;tt=qe.action,_a&&u(_,tt),_=qe.hasEagerState?qe.eagerState:u(_,tt)}else Ge={lane:tt,revertLane:qe.revertLane,gesture:qe.gesture,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},we===null?(re=we=Ge,O=_):we=we.next=Ge,Pt.lanes|=tt,Yo|=tt;qe=qe.next}while(qe!==null&&qe!==a);if(we===null?O=_:we.next=re,!Yr(_,r.memoizedState)&&(wr=!0,$e&&(u=N,u!==null)))throw u;r.memoizedState=_,r.baseState=O,r.baseQueue=we,p.lastRenderedState=_}return S===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function Lu(r){var a=Wn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var p=u.dispatch,S=u.pending,_=a.memoizedState;if(S!==null){u.pending=null;var O=S=S.next;do _=r(_,O.action),O=O.next;while(O!==S);Yr(_,a.memoizedState)||(wr=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,p]}function Ru(r,a,u){var p=Pt,S=Wn(),_=Wt;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=a();var O=!Yr((Ht||S).memoizedState,u);if(O&&(S.memoizedState=u,wr=!0),S=S.queue,Zf(Rc.bind(null,p,S,r),[r]),S.getSnapshot!==a||O||In!==null&&In.memoizedState.tag&1){if(p.flags|=2048,Zs(9,{destroy:void 0},Lc.bind(null,p,S,u,a),null),kn===null)throw Error(i(349));_||(_i&127)!==0||qa(p,a,u)}return u}function qa(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Pt.updateQueue,a===null?(a=ql(),Pt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function Lc(r,a,u,p){a.value=u,a.getSnapshot=p,Sd(a)&&Mc(r)}function Rc(r,a,u){return u(function(){Sd(a)&&Mc(r)})}function Sd(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!Yr(r,u)}catch{return!0}}function Mc(r){var a=Oa(r,2);a!==null&&$i(a,r,2)}function Ts(r){var a=br();if(typeof r=="function"){var u=r;if(r=u(),_a){Ot(!0);try{u()}finally{Ot(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:r},a}function Nd(r,a,u,p){return r.baseState=u,qo(r,Ht,typeof p=="function"?p:Aa)}function _d(r,a,u,p,S){if(Ed(r))throw Error(i(485));if(r=a.action,r!==null){var _={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){_.listeners.push(O)}};ee.T!==null?u(!0):_.isTransition=!1,p(_),u=a.pending,u===null?(_.next=a.pending=_,Ad(a,_)):(_.next=u.next,a.pending=u.next=_)}}function Ad(r,a){var u=a.action,p=a.payload,S=r.state;if(a.isTransition){var _=ee.T,O={};ee.T=O;try{var re=u(S,p),we=ee.S;we!==null&&we(O,re),jc(r,a,re)}catch(qe){Xs(r,a,qe)}finally{_!==null&&O.types!==null&&(_.types=O.types),ee.T=_}}else try{_=u(S,p),jc(r,a,_)}catch(qe){Xs(r,a,qe)}}function jc(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){Cd(r,a,p)},function(p){return Xs(r,a,p)}):Cd(r,a,u)}function Cd(r,a,u){a.status="fulfilled",a.value=u,Mu(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,Ad(r,u)))}function Xs(r,a,u){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=u,Mu(a),a=a.next;while(a!==p)}r.action=null}function Mu(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Gl(r,a){return a}function Ca(r,a){if(Wt){var u=kn.formState;if(u!==null){e:{var p=Pt;if(Wt){if(En){t:{for(var S=En,_=Hn;S.nodeType!==8;){if(!_){S=null;break t}if(S=Ta(S.nextSibling),S===null){S=null;break t}}_=S.data,S=_==="F!"||_==="F"?S:null}if(S){En=Ta(S.nextSibling),p=S.data==="F!";break e}}xs(p)}p=!1}p&&(a=u[0])}}return u=br(),u.memoizedState=u.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:a},u.queue=p,u=Gm.bind(null,Pt,p),p.dispatch=u,p=Ts(!1),_=rh.bind(null,Pt,!1,p.queue),p=br(),S={state:a,dispatch:null,action:r,pending:null},p.queue=S,u=_d.bind(null,Pt,S,_,u),S.dispatch=u,p.memoizedState=r,[a,u,!1]}function Ga(r){var a=Wn();return Ha(a,Ht,r)}function Ha(r,a,u){if(a=qo(r,a,Gl)[0],r=ku(Aa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=Cs(a)}catch(O){throw O===Ne?Be:O}else p=a;a=Wn();var S=a.queue,_=S.dispatch;return u!==a.memoizedState&&(Pt.flags|=2048,Zs(9,{destroy:void 0},ju.bind(null,S,u),null)),[p,_,r]}function ju(r,a){r.action=a}function Du(r){var a=Wn(),u=Ht;if(u!==null)return Ha(a,u,r);Wn(),a=a.memoizedState,u=Wn();var p=u.queue.dispatch;return u.memoizedState=r,[a,p,!1]}function Zs(r,a,u,p){return r={tag:r,create:u,deps:p,inst:a,next:null},a=Pt.updateQueue,a===null&&(a=ql(),Pt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(p=u.next,u.next=r,r.next=p,a.lastEffect=r),r}function Td(){return Wn().memoizedState}function Go(r,a,u,p){var S=br();Pt.flags|=r,S.memoizedState=Zs(1|a,{destroy:void 0},u,p===void 0?null:p)}function Ho(r,a,u,p){var S=Wn();p=p===void 0?null:p;var _=S.memoizedState.inst;Ht!==null&&p!==null&&Tc(p,Ht.memoizedState.deps)?S.memoizedState=Zs(a,_,u,p):(Pt.flags|=r,S.memoizedState=Zs(1|a,_,u,p))}function Im(r,a){Go(8390656,8,r,a)}function Zf(r,a){Ho(2048,8,r,a)}function Ev(r){Pt.flags|=4;var a=Pt.updateQueue;if(a===null)a=ql(),Pt.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function km(r){var a=Wn().memoizedState;return Ev({ref:a,nextImpl:r}),function(){if((pn&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Lm(r,a){return Ho(4,2,r,a)}function Rm(r,a){return Ho(4,4,r,a)}function Mm(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function jm(r,a,u){u=u!=null?u.concat([r]):null,Ho(4,4,Mm.bind(null,a,r),u)}function Qf(){}function Dm(r,a){var u=Wn();a=a===void 0?null:a;var p=u.memoizedState;return a!==null&&Tc(a,p[1])?p[0]:(u.memoizedState=[r,a],r)}function Pm(r,a){var u=Wn();a=a===void 0?null:a;var p=u.memoizedState;if(a!==null&&Tc(a,p[1]))return p[0];if(p=r(),_a){Ot(!0);try{r()}finally{Ot(!1)}}return u.memoizedState=[p,a],p}function eh(r,a,u){return u===void 0||(_i&1073741824)!==0&&(en&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=Ug(),Pt.lanes|=r,Yo|=r,u)}function Um(r,a,u,p){return Yr(u,a)?u:Jn.current!==null?(r=eh(r,u,p),Yr(r,a)||(wr=!0),r):(_i&42)===0||(_i&1073741824)!==0&&(en&261930)===0?(wr=!0,r.memoizedState=u):(r=Ug(),Pt.lanes|=r,Yo|=r,a)}function Om(r,a,u,p,S){var _=ae.p;ae.p=_!==0&&8>_?_:8;var O=ee.T,re={};ee.T=re,rh(r,!1,a,u);try{var we=S(),qe=ee.S;if(qe!==null&&qe(re,we),we!==null&&typeof we=="object"&&typeof we.then=="function"){var $e=V(we,p);Dc(r,a,$e,da(r))}else Dc(r,a,p,da(r))}catch(tt){Dc(r,a,{then:function(){},status:"rejected",reason:tt},da())}finally{ae.p=_,O!==null&&re.types!==null&&(O.types=re.types),ee.T=O}}function Iv(){}function th(r,a,u,p){if(r.tag!==5)throw Error(i(476));var S=Bm(r).queue;Om(r,S,a,me,u===null?Iv:function(){return Fm(r),u(p)})}function Bm(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Fm(r){var a=Bm(r);a.next===null&&(a=r.alternate.memoizedState),Dc(r,a.next.queue,{},da())}function nh(){return Er(Zc)}function zm(){return Wn().memoizedState}function qm(){return Wn().memoizedState}function kv(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=da();r=It(u);var p=yn(a,r,u);p!==null&&($i(p,a,u),yr(p,a,u)),a={cache:Fo()},r.payload=a;return}a=a.return}}function Lv(r,a,u){var p=da();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ed(r)?Hm(a,u):(u=gu(r,a,u,p),u!==null&&($i(u,r,p),Vm(u,a,p)))}function Gm(r,a,u){var p=da();Dc(r,a,u,p)}function Dc(r,a,u,p){var S={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ed(r))Hm(a,S);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var O=a.lastRenderedState,re=_(O,u);if(S.hasEagerState=!0,S.eagerState=re,Yr(re,O))return jl(r,a,S,0),kn===null&&Ml(),!1}catch{}finally{}if(u=gu(r,a,S,p),u!==null)return $i(u,r,p),Vm(u,a,p),!0}return!1}function rh(r,a,u,p){if(p={lane:2,revertLane:Dh(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ed(r)){if(a)throw Error(i(479))}else a=gu(r,u,p,2),a!==null&&$i(a,r,2)}function Ed(r){var a=r.alternate;return r===Pt||a!==null&&a===Pt}function Hm(r,a){$s=Fa=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function Vm(r,a,u){if((u&4194048)!==0){var p=a.lanes;p&=r.pendingLanes,u|=p,a.lanes=u,mi(r,u)}}var Pc={readContext:Er,use:zo,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};Pc.useEffectEvent=_n;var Jm={readContext:Er,use:zo,useCallback:function(r,a){return br().memoizedState=[r,a===void 0?null:a],r},useContext:Er,useEffect:Im,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Go(4194308,4,Mm.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Go(4194308,4,r,a)},useInsertionEffect:function(r,a){Go(4,2,r,a)},useMemo:function(r,a){var u=br();a=a===void 0?null:a;var p=r();if(_a){Ot(!0);try{r()}finally{Ot(!1)}}return u.memoizedState=[p,a],p},useReducer:function(r,a,u){var p=br();if(u!==void 0){var S=u(a);if(_a){Ot(!0);try{u(a)}finally{Ot(!1)}}}else S=a;return p.memoizedState=p.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},p.queue=r,r=r.dispatch=Lv.bind(null,Pt,r),[p.memoizedState,r]},useRef:function(r){var a=br();return r={current:r},a.memoizedState=r},useState:function(r){r=Ts(r);var a=r.queue,u=Gm.bind(null,Pt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Qf,useDeferredValue:function(r,a){var u=br();return eh(u,r,a)},useTransition:function(){var r=Ts(!1);return r=Om.bind(null,Pt,r.queue,!0,!1),br().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var p=Pt,S=br();if(Wt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),kn===null)throw Error(i(349));(en&127)!==0||qa(p,a,u)}S.memoizedState=u;var _={value:u,getSnapshot:a};return S.queue=_,Im(Rc.bind(null,p,_,r),[r]),p.flags|=2048,Zs(9,{destroy:void 0},Lc.bind(null,p,_,u,a),null),u},useId:function(){var r=br(),a=kn.identifierPrefix;if(Wt){var u=qi,p=zi;u=(p&~(1<<32-Ct(p)-1)).toString(32)+u,a="_"+a+"R_"+u,u=zl++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Tu++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:nh,useFormState:Ca,useActionState:Ca,useOptimistic:function(r){var a=br();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=rh.bind(null,Pt,!0,u),u.dispatch=a,[r,a]},useMemoCache:Ks,useCacheRefresh:function(){return br().memoizedState=kv.bind(null,Pt)},useEffectEvent:function(r){var a=br(),u={impl:r};return a.memoizedState=u,function(){if((pn&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},ih={readContext:Er,use:zo,useCallback:Dm,useContext:Er,useEffect:Zf,useImperativeHandle:jm,useInsertionEffect:Lm,useLayoutEffect:Rm,useMemo:Pm,useReducer:ku,useRef:Td,useState:function(){return ku(Aa)},useDebugValue:Qf,useDeferredValue:function(r,a){var u=Wn();return Um(u,Ht.memoizedState,r,a)},useTransition:function(){var r=ku(Aa)[0],a=Wn().memoizedState;return[typeof r=="boolean"?r:Cs(r),a]},useSyncExternalStore:Ru,useId:zm,useHostTransitionStatus:nh,useFormState:Ga,useActionState:Ga,useOptimistic:function(r,a){var u=Wn();return Nd(u,Ht,r,a)},useMemoCache:Ks,useCacheRefresh:qm};ih.useEffectEvent=km;var Ym={readContext:Er,use:zo,useCallback:Dm,useContext:Er,useEffect:Zf,useImperativeHandle:jm,useInsertionEffect:Lm,useLayoutEffect:Rm,useMemo:Pm,useReducer:Lu,useRef:Td,useState:function(){return Lu(Aa)},useDebugValue:Qf,useDeferredValue:function(r,a){var u=Wn();return Ht===null?eh(u,r,a):Um(u,Ht.memoizedState,r,a)},useTransition:function(){var r=Lu(Aa)[0],a=Wn().memoizedState;return[typeof r=="boolean"?r:Cs(r),a]},useSyncExternalStore:Ru,useId:zm,useHostTransitionStatus:nh,useFormState:Du,useActionState:Du,useOptimistic:function(r,a){var u=Wn();return Ht!==null?Nd(u,Ht,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Ks,useCacheRefresh:qm};Ym.useEffectEvent=km;function ah(r,a,u,p){a=r.memoizedState,u=u(p,a),u=u==null?a:x({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var sh={enqueueSetState:function(r,a,u){r=r._reactInternals;var p=da(),S=It(p);S.payload=a,u!=null&&(S.callback=u),a=yn(r,S,p),a!==null&&($i(a,r,p),yr(a,r,p))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var p=da(),S=It(p);S.tag=1,S.payload=a,u!=null&&(S.callback=u),a=yn(r,S,p),a!==null&&($i(a,r,p),yr(a,r,p))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=da(),p=It(u);p.tag=2,a!=null&&(p.callback=a),a=yn(r,p,u),a!==null&&($i(a,r,u),yr(a,r,u))}};function Wm(r,a,u,p,S,_,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,_,O):a.prototype&&a.prototype.isPureReactComponent?!Mi(u,p)||!Mi(S,_):!0}function $m(r,a,u,p){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==r&&sh.enqueueReplaceState(a,a.state,null)}function Hl(r,a){var u=a;if("ref"in a){u={};for(var p in a)p!=="ref"&&(u[p]=a[p])}if(r=r.defaultProps){u===a&&(u=x({},u));for(var S in r)u[S]===void 0&&(u[S]=r[S])}return u}function Km(r){Gs(r)}function Xm(r){console.error(r)}function Zm(r){Gs(r)}function Id(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function Qm(r,a,u){try{var p=r.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function oh(r,a,u){return u=It(u),u.tag=3,u.payload={element:null},u.callback=function(){Id(r,a)},u}function eg(r){return r=It(r),r.tag=3,r}function tg(r,a,u,p){var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var _=p.value;r.payload=function(){return S(_)},r.callback=function(){Qm(a,u,p)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){Qm(a,u,p),typeof S!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var re=p.stack;this.componentDidCatch(p.value,{componentStack:re!==null?re:""})})}function Rv(r,a,u,p,S){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=u.alternate,a!==null&&Ss(a,u,S,!0),u=er.current,u!==null){switch(u.tag){case 31:case 13:return xr===null?zd():u.alternate===null&&sr===0&&(sr=3),u.flags&=-257,u.flags|=65536,u.lanes=S,p===Me?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([p]):a.add(p),Rh(r,p,S)),!1;case 22:return u.flags|=65536,p===Me?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([p]):u.add(p)),Rh(r,p,S)),!1}throw Error(i(435,u.tag))}return Rh(r,p,S),zd(),!1}if(Wt)return a=er.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=S,p!==la&&(r=Error(i(422),{cause:p}),Oo(Oi(r,u)))):(p!==la&&(a=Error(i(423),{cause:p}),Oo(Oi(a,u))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,p=Oi(p,u),S=oh(r.stateNode,p,S),Vn(r,S),sr!==4&&(sr=2)),!1;var _=Error(i(520),{cause:p});if(_=Oi(_,u),Hc===null?Hc=[_]:Hc.push(_),sr!==4&&(sr=2),a===null)return!0;p=Oi(p,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=S&-S,u.lanes|=r,r=oh(u.stateNode,p,r),Vn(u,r),!1;case 1:if(a=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Wo===null||!Wo.has(_))))return u.flags|=65536,S&=-S,u.lanes|=S,S=eg(S),tg(S,r,u,p),Vn(u,S),!1}u=u.return}while(u!==null);return!1}var lh=Error(i(461)),wr=!1;function Kr(r,a,u,p){a.child=r===null?Qt(a,null,u,p):$t(a,r.child,u,p)}function ng(r,a,u,p,S){u=u.render;var _=a.ref;if("ref"in p){var O={};for(var re in p)re!=="ref"&&(O[re]=p[re])}else O=p;return Ns(a),p=Ec(r,a,u,O,_,S),re=Ic(),r!==null&&!wr?(kc(r,a,S),Qs(r,a,S)):(Wt&&re&&_c(a),a.flags|=1,Kr(r,a,p,S),a.child)}function rg(r,a,u,p,S){if(r===null){var _=u.type;return typeof _=="function"&&!vu(_)&&_.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=_,ig(r,a,_,p,S)):(r=Do(u.type,null,p,a,a.mode,S),r.ref=a.ref,r.return=a,a.child=r)}if(_=r.child,!gh(r,S)){var O=_.memoizedProps;if(u=u.compare,u=u!==null?u:Mi,u(O,p)&&r.ref===a.ref)return Qs(r,a,S)}return a.flags|=1,r=Ui(_,p),r.ref=a.ref,r.return=a,a.child=r}function ig(r,a,u,p,S){if(r!==null){var _=r.memoizedProps;if(Mi(_,p)&&r.ref===a.ref)if(wr=!1,a.pendingProps=p=_,gh(r,S))(r.flags&131072)!==0&&(wr=!0);else return a.lanes=r.lanes,Qs(r,a,S)}return uh(r,a,u,p,S)}function ag(r,a,u,p){var S=p.children,_=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(p=a.child=r.child,S=0;p!==null;)S=S|p.lanes|p.childLanes,p=p.sibling;p=S&~_}else p=0,a.child=null;return sg(r,a,_,u,p)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&le(a,_!==null?_.cachePool:null),_!==null?Si(a,_):Hi(),On(a);else return p=a.lanes=536870912,sg(r,a,_!==null?_.baseLanes|u:u,u,p)}else _!==null?(le(a,_.cachePool),Si(a,_),Na(),a.memoizedState=null):(r!==null&&le(a,null),Hi(),Na());return Kr(r,a,S,u),a.child}function Uc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function sg(r,a,u,p,S){var _=te();return _=_===null?null:{parent:Qn._currentValue,pool:_},a.memoizedState={baseLanes:u,cachePool:_},r!==null&&le(a,null),Hi(),On(a),r!==null&&Ss(r,a,p,!0),a.childLanes=S,null}function kd(r,a){return a=Rd({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function og(r,a,u){return $t(a,r.child,null,u),r=kd(a,a.pendingProps),r.flags|=2,oi(a),a.memoizedState=null,r}function Mv(r,a,u){var p=a.pendingProps,S=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Wt){if(p.mode==="hidden")return r=kd(a,p),a.lanes=536870912,Uc(null,r);if(Sa(a),(r=En)?(r=x0(r,Hn),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:vs!==null?{id:zi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},u=xu(r),u.return=a,a.child=u,Cr=a,En=null)):r=null,r===null)throw xs(a);return a.lanes=536870912,null}return kd(a,p)}var _=r.memoizedState;if(_!==null){var O=_.dehydrated;if(Sa(a),S)if(a.flags&256)a.flags&=-257,a=og(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(wr||Ss(r,a,u,!1),S=(u&r.childLanes)!==0,wr||S){if(p=kn,p!==null&&(O=hr(p,u),O!==0&&O!==_.retryLane))throw _.retryLane=O,Oa(r,O),$i(p,r,O),lh;zd(),a=og(r,a,u)}else r=_.treeContext,En=Ta(O.nextSibling),Cr=a,Wt=!0,$r=null,Hn=!1,r!==null&&bd(a,r),a=kd(a,p),a.flags|=4096;return a}return r=Ui(r.child,{mode:p.mode,children:p.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Ld(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function uh(r,a,u,p,S){return Ns(a),u=Ec(r,a,u,p,void 0,S),p=Ic(),r!==null&&!wr?(kc(r,a,S),Qs(r,a,S)):(Wt&&p&&_c(a),a.flags|=1,Kr(r,a,u,S),a.child)}function lg(r,a,u,p,S,_){return Ns(a),a.updateQueue=null,u=za(a,p,u,S),Eu(r),p=Ic(),r!==null&&!wr?(kc(r,a,_),Qs(r,a,_)):(Wt&&p&&_c(a),a.flags|=1,Kr(r,a,u,_),a.child)}function ug(r,a,u,p,S){if(Ns(a),a.stateNode===null){var _=Ar,O=u.contextType;typeof O=="object"&&O!==null&&(_=Er(O)),_=new u(p,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=sh,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=p,_.state=a.memoizedState,_.refs={},hn(a),O=u.contextType,_.context=typeof O=="object"&&O!==null?Er(O):Ar,_.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(ah(a,u,O,p),_.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(O=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),O!==_.state&&sh.enqueueReplaceState(_,_.state,null),Ir(a,p,_,S),nn(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(r===null){_=a.stateNode;var re=a.memoizedProps,we=Hl(u,re);_.props=we;var qe=_.context,$e=u.contextType;O=Ar,typeof $e=="object"&&$e!==null&&(O=Er($e));var tt=u.getDerivedStateFromProps;$e=typeof tt=="function"||typeof _.getSnapshotBeforeUpdate=="function",re=a.pendingProps!==re,$e||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(re||qe!==O)&&$m(a,_,p,O),Bt=!1;var Ge=a.memoizedState;_.state=Ge,Ir(a,p,_,S),nn(),qe=a.memoizedState,re||Ge!==qe||Bt?(typeof tt=="function"&&(ah(a,u,tt,p),qe=a.memoizedState),(we=Bt||Wm(a,u,we,p,Ge,qe,O))?($e||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=qe),_.props=p,_.state=qe,_.context=O,p=we):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{_=a.stateNode,ln(r,a),O=a.memoizedProps,$e=Hl(u,O),_.props=$e,tt=a.pendingProps,Ge=_.context,qe=u.contextType,we=Ar,typeof qe=="object"&&qe!==null&&(we=Er(qe)),re=u.getDerivedStateFromProps,(qe=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==tt||Ge!==we)&&$m(a,_,p,we),Bt=!1,Ge=a.memoizedState,_.state=Ge,Ir(a,p,_,S),nn();var Ve=a.memoizedState;O!==tt||Ge!==Ve||Bt||r!==null&&r.dependencies!==null&&_u(r.dependencies)?(typeof re=="function"&&(ah(a,u,re,p),Ve=a.memoizedState),($e=Bt||Wm(a,u,$e,p,Ge,Ve,we)||r!==null&&r.dependencies!==null&&_u(r.dependencies))?(qe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,Ve,we),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,Ve,we)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===r.memoizedProps&&Ge===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ge===r.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ve),_.props=p,_.state=Ve,_.context=we,p=$e):(typeof _.componentDidUpdate!="function"||O===r.memoizedProps&&Ge===r.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ge===r.memoizedState||(a.flags|=1024),p=!1)}return _=p,Ld(r,a),p=(a.flags&128)!==0,_||p?(_=a.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,r!==null&&p?(a.child=$t(a,r.child,null,S),a.child=$t(a,null,u,S)):Kr(r,a,u,S),a.memoizedState=_.state,r=a.child):r=Qs(r,a,S),r}function cg(r,a,u,p){return Js(),a.flags|=256,Kr(r,a,u,p),a.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dh(r){return{baseLanes:r,cachePool:fe()}}function fh(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=ca),r}function dg(r,a,u){var p=a.pendingProps,S=!1,_=(a.flags&128)!==0,O;if((O=_)||(O=r!==null&&r.memoizedState===null?!1:(Yn.current&2)!==0),O&&(S=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(Wt){if(S?Ni(a):Na(),(r=En)?(r=x0(r,Hn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:vs!==null?{id:zi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},u=xu(r),u.return=a,a.child=u,Cr=a,En=null)):r=null,r===null)throw xs(a);return Wh(r)?a.lanes=32:a.lanes=536870912,null}var re=p.children;return p=p.fallback,S?(Na(),S=a.mode,re=Rd({mode:"hidden",children:re},S),p=ys(p,S,u,null),re.return=a,p.return=a,re.sibling=p,a.child=re,p=a.child,p.memoizedState=dh(u),p.childLanes=fh(r,O,u),a.memoizedState=ch,Uc(null,p)):(Ni(a),hh(a,re))}var we=r.memoizedState;if(we!==null&&(re=we.dehydrated,re!==null)){if(_)a.flags&256?(Ni(a),a.flags&=-257,a=ph(r,a,u)):a.memoizedState!==null?(Na(),a.child=r.child,a.flags|=128,a=null):(Na(),re=p.fallback,S=a.mode,p=Rd({mode:"visible",children:p.children},S),re=ys(re,S,u,null),re.flags|=2,p.return=a,re.return=a,p.sibling=re,a.child=p,$t(a,r.child,null,u),p=a.child,p.memoizedState=dh(u),p.childLanes=fh(r,O,u),a.memoizedState=ch,a=Uc(null,p));else if(Ni(a),Wh(re)){if(O=re.nextSibling&&re.nextSibling.dataset,O)var qe=O.dgst;O=qe,p=Error(i(419)),p.stack="",p.digest=O,Oo({value:p,source:null,stack:null}),a=ph(r,a,u)}else if(wr||Ss(r,a,u,!1),O=(u&r.childLanes)!==0,wr||O){if(O=kn,O!==null&&(p=hr(O,u),p!==0&&p!==we.retryLane))throw we.retryLane=p,Oa(r,p),$i(O,r,p),lh;Yh(re)||zd(),a=ph(r,a,u)}else Yh(re)?(a.flags|=192,a.child=r.child,a=null):(r=we.treeContext,En=Ta(re.nextSibling),Cr=a,Wt=!0,$r=null,Hn=!1,r!==null&&bd(a,r),a=hh(a,p.children),a.flags|=4096);return a}return S?(Na(),re=p.fallback,S=a.mode,we=r.child,qe=we.sibling,p=Ui(we,{mode:"hidden",children:p.children}),p.subtreeFlags=we.subtreeFlags&65011712,qe!==null?re=Ui(qe,re):(re=ys(re,S,u,null),re.flags|=2),re.return=a,p.return=a,p.sibling=re,a.child=p,Uc(null,p),p=a.child,re=r.child.memoizedState,re===null?re=dh(u):(S=re.cachePool,S!==null?(we=Qn._currentValue,S=S.parent!==we?{parent:we,pool:we}:S):S=fe(),re={baseLanes:re.baseLanes|u,cachePool:S}),p.memoizedState=re,p.childLanes=fh(r,O,u),a.memoizedState=ch,Uc(r.child,p)):(Ni(a),u=r.child,r=u.sibling,u=Ui(u,{mode:"visible",children:p.children}),u.return=a,u.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=u,a.memoizedState=null,u)}function hh(r,a){return a=Rd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Rd(r,a){return r=Or(22,r,null,a),r.lanes=0,r}function ph(r,a,u){return $t(a,r.child,null,u),r=hh(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function fg(r,a,u){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),Bo(r.return,a,u)}function mh(r,a,u,p,S,_){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:S,treeForkCount:_}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=p,O.tail=u,O.tailMode=S,O.treeForkCount=_)}function hg(r,a,u){var p=a.pendingProps,S=p.revealOrder,_=p.tail;p=p.children;var O=Yn.current,re=(O&2)!==0;if(re?(O=O&1|2,a.flags|=128):O&=1,J(Yn,O),Kr(r,a,p,u),p=Wt?Ol:0,!re&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fg(r,u,a);else if(r.tag===19)fg(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(S){case"forwards":for(u=a.child,S=null;u!==null;)r=u.alternate,r!==null&&Ws(r)===null&&(S=u),u=u.sibling;u=S,u===null?(S=a.child,a.child=null):(S=u.sibling,u.sibling=null),mh(a,!1,S,u,_,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,S=a.child,a.child=null;S!==null;){if(r=S.alternate,r!==null&&Ws(r)===null){a.child=S;break}r=S.sibling,S.sibling=u,u=S,S=r}mh(a,!0,u,null,_,p);break;case"together":mh(a,!1,null,null,void 0,p);break;default:a.memoizedState=null}return a.child}function Qs(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),Yo|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Ss(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=Ui(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Ui(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function gh(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&_u(r)))}function jv(r,a,u){switch(a.tag){case 3:Ce(a,a.stateNode.containerInfo),ws(a,Qn,r.memoizedState.cache),Js();break;case 27:case 5:Re(a);break;case 4:Ce(a,a.stateNode.containerInfo);break;case 10:ws(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Sa(a),null;break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(Ni(a),a.flags|=128,null):(u&a.child.childLanes)!==0?dg(r,a,u):(Ni(a),r=Qs(r,a,u),r!==null?r.sibling:null);Ni(a);break;case 19:var S=(r.flags&128)!==0;if(p=(u&a.childLanes)!==0,p||(Ss(r,a,u,!1),p=(u&a.childLanes)!==0),S){if(p)return hg(r,a,u);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),J(Yn,Yn.current),p)break;return null;case 22:return a.lanes=0,ag(r,a,u,a.pendingProps);case 24:ws(a,Qn,r.memoizedState.cache)}return Qs(r,a,u)}function pg(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)wr=!0;else{if(!gh(r,u)&&(a.flags&128)===0)return wr=!1,jv(r,a,u);wr=(r.flags&131072)!==0}else wr=!1,Wt&&(a.flags&1048576)!==0&&xd(a,Ol,a.index);switch(a.lanes=0,a.tag){case 16:e:{var p=a.pendingProps;if(r=_e(a.elementType),a.type=r,typeof r=="function")vu(r)?(p=Hl(r,p),a.tag=1,a=ug(null,a,r,p,u)):(a.tag=0,a=uh(null,a,r,p,u));else{if(r!=null){var S=r.$$typeof;if(S===z){a.tag=11,a=ng(null,a,r,p,u);break e}else if(S===q){a.tag=14,a=rg(null,a,r,p,u);break e}}throw a=M(r)||r,Error(i(306,a,""))}}return a;case 0:return uh(r,a,a.type,a.pendingProps,u);case 1:return p=a.type,S=Hl(p,a.pendingProps),ug(r,a,p,S,u);case 3:e:{if(Ce(a,a.stateNode.containerInfo),r===null)throw Error(i(387));p=a.pendingProps;var _=a.memoizedState;S=_.element,ln(r,a),Ir(a,p,null,u);var O=a.memoizedState;if(p=O.cache,ws(a,Qn,p),p!==_.cache&&Ys(a,[Qn],u,!0),nn(),p=O.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=cg(r,a,p,u);break e}else if(p!==S){S=Oi(Error(i(424)),a),Oo(S),a=cg(r,a,p,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(En=Ta(r.firstChild),Cr=a,Wt=!0,$r=null,Hn=!0,u=Qt(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Js(),p===S){a=Qs(r,a,u);break e}Kr(r,a,p,u)}a=a.child}return a;case 26:return Ld(r,a),r===null?(u=A0(a.type,null,a.pendingProps,null))?a.memoizedState=u:Wt||(u=a.type,r=a.pendingProps,p=Wd(xe.current).createElement(u),p[fn]=a,p[wn]=r,Xr(p,u,r),qt(p),a.stateNode=p):a.memoizedState=A0(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Re(a),r===null&&Wt&&(p=a.stateNode=S0(a.type,a.pendingProps,xe.current),Cr=a,Hn=!0,S=En,Zo(a.type)?($h=S,En=Ta(p.firstChild)):En=S),Kr(r,a,a.pendingProps.children,u),Ld(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Wt&&((S=p=En)&&(p=cx(p,a.type,a.pendingProps,Hn),p!==null?(a.stateNode=p,Cr=a,En=Ta(p.firstChild),Hn=!1,S=!0):S=!1),S||xs(a)),Re(a),S=a.type,_=a.pendingProps,O=r!==null?r.memoizedProps:null,p=_.children,Hh(S,_)?p=null:O!==null&&Hh(S,O)&&(a.flags|=32),a.memoizedState!==null&&(S=Ec(r,a,Xf,null,null,u),Zc._currentValue=S),Ld(r,a),Kr(r,a,p,u),a.child;case 6:return r===null&&Wt&&((r=u=En)&&(u=dx(u,a.pendingProps,Hn),u!==null?(a.stateNode=u,Cr=a,En=null,r=!0):r=!1),r||xs(a)),null;case 13:return dg(r,a,u);case 4:return Ce(a,a.stateNode.containerInfo),p=a.pendingProps,r===null?a.child=$t(a,null,p,u):Kr(r,a,p,u),a.child;case 11:return ng(r,a,a.type,a.pendingProps,u);case 7:return Kr(r,a,a.pendingProps,u),a.child;case 8:return Kr(r,a,a.pendingProps.children,u),a.child;case 12:return Kr(r,a,a.pendingProps.children,u),a.child;case 10:return p=a.pendingProps,ws(a,a.type,p.value),Kr(r,a,p.children,u),a.child;case 9:return S=a.type._context,p=a.pendingProps.children,Ns(a),S=Er(S),p=p(S),a.flags|=1,Kr(r,a,p,u),a.child;case 14:return rg(r,a,a.type,a.pendingProps,u);case 15:return ig(r,a,a.type,a.pendingProps,u);case 19:return hg(r,a,u);case 31:return Mv(r,a,u);case 22:return ag(r,a,u,a.pendingProps);case 24:return Ns(a),p=Er(Qn),r===null?(S=te(),S===null&&(S=kn,_=Fo(),S.pooledCache=_,_.refCount++,_!==null&&(S.pooledCacheLanes|=u),S=_),a.memoizedState={parent:p,cache:S},hn(a),ws(a,Qn,S)):((r.lanes&u)!==0&&(ln(r,a),Ir(a,null,null,u),nn()),S=r.memoizedState,_=a.memoizedState,S.parent!==p?(S={parent:p,cache:p},a.memoizedState=S,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=S),ws(a,Qn,p)):(p=_.cache,ws(a,Qn,p),p!==S.cache&&Ys(a,[Qn],u,!0))),Kr(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function eo(r){r.flags|=4}function yh(r,a,u,p,S){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(S&335544128)===S)if(r.stateNode.complete)r.flags|=8192;else if(zg())r.flags|=8192;else throw ke=Me,Fe}else r.flags&=-16777217}function mg(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!k0(a))if(zg())r.flags|=8192;else throw ke=Me,Fe}function Md(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?nr():536870912,r.lanes|=a,Bu|=a)}function Oc(r,a){if(!Wt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function Bn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,p=0;if(a)for(var S=r.child;S!==null;)u|=S.lanes|S.childLanes,p|=S.subtreeFlags&65011712,p|=S.flags&65011712,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)u|=S.lanes|S.childLanes,p|=S.subtreeFlags,p|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=p,r.childLanes=u,a}function Dv(r,a,u){var p=a.pendingProps;switch(Su(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(a),null;case 1:return Bn(a),null;case 3:return u=a.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),Gi(Qn),Ee(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Tr(a)?eo(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cc())),Bn(a),null;case 26:var S=a.type,_=a.memoizedState;return r===null?(eo(a),_!==null?(Bn(a),mg(a,_)):(Bn(a),yh(a,S,null,p,u))):_?_!==r.memoizedState?(eo(a),Bn(a),mg(a,_)):(Bn(a),a.flags&=-16777217):(r=r.memoizedProps,r!==p&&eo(a),Bn(a),yh(a,S,r,p,u)),null;case 27:if(De(a),u=xe.current,S=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&eo(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return Bn(a),null}r=K.current,Tr(a)?Ac(a):(r=S0(S,p,u),a.stateNode=r,eo(a))}return Bn(a),null;case 5:if(De(a),S=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&eo(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return Bn(a),null}if(_=K.current,Tr(a))Ac(a);else{var O=Wd(xe.current);switch(_){case 1:_=O.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:_=O.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":_=O.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":_=O.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":_=O.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof p.is=="string"?O.createElement("select",{is:p.is}):O.createElement("select"),p.multiple?_.multiple=!0:p.size&&(_.size=p.size);break;default:_=typeof p.is=="string"?O.createElement(S,{is:p.is}):O.createElement(S)}}_[fn]=a,_[wn]=p;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)_.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=_;e:switch(Xr(_,S,p),S){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&eo(a)}}return Bn(a),yh(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==p&&eo(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(i(166));if(r=xe.current,Tr(a)){if(r=a.stateNode,u=a.memoizedProps,p=null,S=Cr,S!==null)switch(S.tag){case 27:case 5:p=S.memoizedProps}r[fn]=a,r=!!(r.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||d0(r.nodeValue,u)),r||xs(a,!0)}else r=Wd(r).createTextNode(p),r[fn]=a,a.stateNode=r}return Bn(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(p=Tr(a),u!==null){if(r===null){if(!p)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[fn]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bn(a),r=!1}else u=Cc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(oi(a),a):(oi(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bn(a),null;case 13:if(p=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=Tr(a),p!==null&&p.dehydrated!==null){if(r===null){if(!S)throw Error(i(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[fn]=a}else Js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bn(a),S=!1}else S=Cc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=S),S=!0;if(!S)return a.flags&256?(oi(a),a):(oi(a),null)}return oi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=p!==null,r=r!==null&&r.memoizedState!==null,u&&(p=a.child,S=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(S=p.alternate.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==S&&(p.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),Md(a,a.updateQueue),Bn(a),null);case 4:return Ee(),r===null&&Bh(a.stateNode.containerInfo),Bn(a),null;case 10:return Gi(a.type),Bn(a),null;case 19:if(L(Yn),p=a.memoizedState,p===null)return Bn(a),null;if(S=(a.flags&128)!==0,_=p.rendering,_===null)if(S)Oc(p,!1);else{if(sr!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(_=Ws(r),_!==null){for(a.flags|=128,Oc(p,!1),r=_.updateQueue,a.updateQueue=r,Md(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Pl(u,r),u=u.sibling;return J(Yn,Yn.current&1|2),Wt&&wi(a,p.treeForkCount),a.child}r=r.sibling}p.tail!==null&&Oe()>Od&&(a.flags|=128,S=!0,Oc(p,!1),a.lanes=4194304)}else{if(!S)if(r=Ws(_),r!==null){if(a.flags|=128,S=!0,r=r.updateQueue,a.updateQueue=r,Md(a,r),Oc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Wt)return Bn(a),null}else 2*Oe()-p.renderingStartTime>Od&&u!==536870912&&(a.flags|=128,S=!0,Oc(p,!1),a.lanes=4194304);p.isBackwards?(_.sibling=a.child,a.child=_):(r=p.last,r!==null?r.sibling=_:a.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Oe(),r.sibling=null,u=Yn.current,J(Yn,S?u&1|2:u&1),Wt&&wi(a,p.treeForkCount),r):(Bn(a),null);case 22:case 23:return oi(a),ar(),p=a.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(u&536870912)!==0&&(a.flags&128)===0&&(Bn(a),a.subtreeFlags&6&&(a.flags|=8192)):Bn(a),u=a.updateQueue,u!==null&&Md(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==u&&(a.flags|=2048),r!==null&&L(Z),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Gi(Qn),Bn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Pv(r,a){switch(Su(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Gi(Qn),Ee(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return De(a),null;case 31:if(a.memoizedState!==null){if(oi(a),a.alternate===null)throw Error(i(340));Js()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(oi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Js()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return L(Yn),null;case 4:return Ee(),null;case 10:return Gi(a.type),null;case 22:case 23:return oi(a),ar(),r!==null&&L(Z),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Gi(Qn),null;case 25:return null;default:return null}}function gg(r,a){switch(Su(a),a.tag){case 3:Gi(Qn),Ee();break;case 26:case 27:case 5:De(a);break;case 4:Ee();break;case 31:a.memoizedState!==null&&oi(a);break;case 13:oi(a);break;case 19:L(Yn);break;case 10:Gi(a.type);break;case 22:case 23:oi(a),ar(),r!==null&&L(Z);break;case 24:Gi(Qn)}}function Bc(r,a){try{var u=a.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var S=p.next;u=S;do{if((u.tag&r)===r){p=void 0;var _=u.create,O=u.inst;p=_(),O.destroy=p}u=u.next}while(u!==S)}}catch(re){xn(a,a.return,re)}}function Vo(r,a,u){try{var p=a.updateQueue,S=p!==null?p.lastEffect:null;if(S!==null){var _=S.next;p=_;do{if((p.tag&r)===r){var O=p.inst,re=O.destroy;if(re!==void 0){O.destroy=void 0,S=a;var we=u,qe=re;try{qe()}catch($e){xn(S,we,$e)}}}p=p.next}while(p!==_)}}catch($e){xn(a,a.return,$e)}}function yg(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{ur(a,u)}catch(p){xn(r,r.return,p)}}}function vg(r,a,u){u.props=Hl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(p){xn(r,a,p)}}function Fc(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof u=="function"?r.refCleanup=u(p):u.current=p}}catch(S){xn(r,a,S)}}function Es(r,a){var u=r.ref,p=r.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(S){xn(r,a,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(S){xn(r,a,S)}else u.current=null}function xg(r){var a=r.type,u=r.memoizedProps,p=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(S){xn(r,r.return,S)}}function vh(r,a,u){try{var p=r.stateNode;ix(p,r.type,u,a),p[wn]=a}catch(S){xn(r,r.return,S)}}function bg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Zo(r.type)||r.tag===4}function xh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||bg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Zo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bh(r,a,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Dn));else if(p!==4&&(p===27&&Zo(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(bh(r,a,u),r=r.sibling;r!==null;)bh(r,a,u),r=r.sibling}function jd(r,a,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(p!==4&&(p===27&&Zo(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(jd(r,a,u),r=r.sibling;r!==null;)jd(r,a,u),r=r.sibling}function wg(r){var a=r.stateNode,u=r.memoizedProps;try{for(var p=r.type,S=a.attributes;S.length;)a.removeAttributeNode(S[0]);Xr(a,p,u),a[fn]=r,a[wn]=u}catch(_){xn(r,r.return,_)}}var to=!1,Sr=!1,wh=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function Uv(r,a){if(r=r.containerInfo,qh=tf,r=sa(r),oa(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var S=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var O=0,re=-1,we=-1,qe=0,$e=0,tt=r,Ge=null;t:for(;;){for(var Ve;tt!==u||S!==0&&tt.nodeType!==3||(re=O+S),tt!==_||p!==0&&tt.nodeType!==3||(we=O+p),tt.nodeType===3&&(O+=tt.nodeValue.length),(Ve=tt.firstChild)!==null;)Ge=tt,tt=Ve;for(;;){if(tt===r)break t;if(Ge===u&&++qe===S&&(re=O),Ge===_&&++$e===p&&(we=O),(Ve=tt.nextSibling)!==null)break;tt=Ge,Ge=tt.parentNode}tt=Ve}u=re===-1||we===-1?null:{start:re,end:we}}else u=null}u=u||{start:0,end:0}}else u=null;for(Gh={focusedElem:r,selectionRange:u},tf=!1,Fr=a;Fr!==null;)if(a=Fr,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Fr=r;else for(;Fr!==null;){switch(a=Fr,_=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)S=r[u],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=a,S=_.memoizedProps,_=_.memoizedState,p=u.stateNode;try{var yt=Hl(u.type,S);r=p.getSnapshotBeforeUpdate(yt,_),p.__reactInternalSnapshotBeforeUpdate=r}catch(kt){xn(u,u.return,kt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)Jh(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Jh(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Fr=r;break}Fr=a.return}}function Ng(r,a,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:ro(r,u),p&4&&Bc(5,u);break;case 1:if(ro(r,u),p&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(O){xn(u,u.return,O)}else{var S=Hl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(S,a,r.__reactInternalSnapshotBeforeUpdate)}catch(O){xn(u,u.return,O)}}p&64&&yg(u),p&512&&Fc(u,u.return);break;case 3:if(ro(r,u),p&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{ur(r,a)}catch(O){xn(u,u.return,O)}}break;case 27:a===null&&p&4&&wg(u);case 26:case 5:ro(r,u),a===null&&p&4&&xg(u),p&512&&Fc(u,u.return);break;case 12:ro(r,u);break;case 31:ro(r,u),p&4&&Cg(r,u);break;case 13:ro(r,u),p&4&&Tg(r,u),p&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=Jv.bind(null,u),fx(r,u))));break;case 22:if(p=u.memoizedState!==null||to,!p){a=a!==null&&a.memoizedState!==null||Sr,S=to;var _=Sr;to=p,(Sr=a)&&!_?io(r,u,(u.subtreeFlags&8772)!==0):ro(r,u),to=S,Sr=_}break;case 30:break;default:ro(r,u)}}function _g(r){var a=r.alternate;a!==null&&(r.alternate=null,_g(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ti(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var $n=null,Vi=!1;function no(r,a,u){for(u=u.child;u!==null;)Ag(r,a,u),u=u.sibling}function Ag(r,a,u){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(gt,u)}catch{}switch(u.tag){case 26:Sr||Es(u,a),no(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Sr||Es(u,a);var p=$n,S=Vi;Zo(u.type)&&($n=u.stateNode,Vi=!1),no(r,a,u),$c(u.stateNode),$n=p,Vi=S;break;case 5:Sr||Es(u,a);case 6:if(p=$n,S=Vi,$n=null,no(r,a,u),$n=p,Vi=S,$n!==null)if(Vi)try{($n.nodeType===9?$n.body:$n.nodeName==="HTML"?$n.ownerDocument.body:$n).removeChild(u.stateNode)}catch(_){xn(u,a,_)}else try{$n.removeChild(u.stateNode)}catch(_){xn(u,a,_)}break;case 18:$n!==null&&(Vi?(r=$n,y0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Yu(r)):y0($n,u.stateNode));break;case 4:p=$n,S=Vi,$n=u.stateNode.containerInfo,Vi=!0,no(r,a,u),$n=p,Vi=S;break;case 0:case 11:case 14:case 15:Vo(2,u,a),Sr||Vo(4,u,a),no(r,a,u);break;case 1:Sr||(Es(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"&&vg(u,a,p)),no(r,a,u);break;case 21:no(r,a,u);break;case 22:Sr=(p=Sr)||u.memoizedState!==null,no(r,a,u),Sr=p;break;default:no(r,a,u)}}function Cg(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Yu(r)}catch(u){xn(a,a.return,u)}}}function Tg(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Yu(r)}catch(u){xn(a,a.return,u)}}function Ov(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Sg),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Sg),a;default:throw Error(i(435,r.tag))}}function Dd(r,a){var u=Ov(r);a.forEach(function(p){if(!u.has(p)){u.add(p);var S=Yv.bind(null,r,p);p.then(S,S)}})}function Ji(r,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var S=u[p],_=r,O=a,re=O;e:for(;re!==null;){switch(re.tag){case 27:if(Zo(re.type)){$n=re.stateNode,Vi=!1;break e}break;case 5:$n=re.stateNode,Vi=!1;break e;case 3:case 4:$n=re.stateNode.containerInfo,Vi=!0;break e}re=re.return}if($n===null)throw Error(i(160));Ag(_,O,S),$n=null,Vi=!1,_=S.alternate,_!==null&&(_.return=null),S.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Eg(a,r),a=a.sibling}var Va=null;function Eg(r,a){var u=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ji(a,r),Yi(r),p&4&&(Vo(3,r,r.return),Bc(3,r),Vo(5,r,r.return));break;case 1:Ji(a,r),Yi(r),p&512&&(Sr||u===null||Es(u,u.return)),p&64&&to&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var S=Va;if(Ji(a,r),Yi(r),p&512&&(Sr||u===null||Es(u,u.return)),p&4){var _=u!==null?u.memoizedState:null;if(p=r.memoizedState,u===null)if(p===null)if(r.stateNode===null){e:{p=r.type,u=r.memoizedProps,S=S.ownerDocument||S;t:switch(p){case"title":_=S.getElementsByTagName("title")[0],(!_||_[gi]||_[fn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=S.createElement(p),S.head.insertBefore(_,S.querySelector("head > title"))),Xr(_,p,u),_[fn]=r,qt(_),p=_;break e;case"link":var O=E0("link","href",S).get(p+(u.href||""));if(O){for(var re=0;re<O.length;re++)if(_=O[re],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(re,1);break t}}_=S.createElement(p),Xr(_,p,u),S.head.appendChild(_);break;case"meta":if(O=E0("meta","content",S).get(p+(u.content||""))){for(re=0;re<O.length;re++)if(_=O[re],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(re,1);break t}}_=S.createElement(p),Xr(_,p,u),S.head.appendChild(_);break;default:throw Error(i(468,p))}_[fn]=r,qt(_),p=_}r.stateNode=p}else I0(S,r.type,r.stateNode);else r.stateNode=T0(S,p,r.memoizedProps);else _!==p?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,p===null?I0(S,r.type,r.stateNode):T0(S,p,r.memoizedProps)):p===null&&r.stateNode!==null&&vh(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ji(a,r),Yi(r),p&512&&(Sr||u===null||Es(u,u.return)),u!==null&&p&4&&vh(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ji(a,r),Yi(r),p&512&&(Sr||u===null||Es(u,u.return)),r.flags&32){S=r.stateNode;try{pa(S,"")}catch(yt){xn(r,r.return,yt)}}p&4&&r.stateNode!=null&&(S=r.memoizedProps,vh(r,S,u!==null?u.memoizedProps:S)),p&1024&&(wh=!0);break;case 6:if(Ji(a,r),Yi(r),p&4){if(r.stateNode===null)throw Error(i(162));p=r.memoizedProps,u=r.stateNode;try{u.nodeValue=p}catch(yt){xn(r,r.return,yt)}}break;case 3:if(Xd=null,S=Va,Va=$d(a.containerInfo),Ji(a,r),Va=S,Yi(r),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Yu(a.containerInfo)}catch(yt){xn(r,r.return,yt)}wh&&(wh=!1,Ig(r));break;case 4:p=Va,Va=$d(r.stateNode.containerInfo),Ji(a,r),Yi(r),Va=p;break;case 12:Ji(a,r),Yi(r);break;case 31:Ji(a,r),Yi(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Dd(r,p)));break;case 13:Ji(a,r),Yi(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ud=Oe()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Dd(r,p)));break;case 22:S=r.memoizedState!==null;var we=u!==null&&u.memoizedState!==null,qe=to,$e=Sr;if(to=qe||S,Sr=$e||we,Ji(a,r),Sr=$e,to=qe,Yi(r),p&8192)e:for(a=r.stateNode,a._visibility=S?a._visibility&-2:a._visibility|1,S&&(u===null||we||to||Sr||Vl(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){we=u=a;try{if(_=we.stateNode,S)O=_.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{re=we.stateNode;var tt=we.memoizedProps.style,Ge=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;re.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(yt){xn(we,we.return,yt)}}}else if(a.tag===6){if(u===null){we=a;try{we.stateNode.nodeValue=S?"":we.memoizedProps}catch(yt){xn(we,we.return,yt)}}}else if(a.tag===18){if(u===null){we=a;try{var Ve=we.stateNode;S?v0(Ve,!0):v0(we.stateNode,!1)}catch(yt){xn(we,we.return,yt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=r.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Dd(r,u))));break;case 19:Ji(a,r),Yi(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Dd(r,p)));break;case 30:break;case 21:break;default:Ji(a,r),Yi(r)}}function Yi(r){var a=r.flags;if(a&2){try{for(var u,p=r.return;p!==null;){if(bg(p)){u=p;break}p=p.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var S=u.stateNode,_=xh(r);jd(r,_,S);break;case 5:var O=u.stateNode;u.flags&32&&(pa(O,""),u.flags&=-33);var re=xh(r);jd(r,re,O);break;case 3:case 4:var we=u.stateNode.containerInfo,qe=xh(r);bh(r,qe,we);break;default:throw Error(i(161))}}catch($e){xn(r,r.return,$e)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Ig(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Ig(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ro(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ng(r,a.alternate,a),a=a.sibling}function Vl(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Vo(4,a,a.return),Vl(a);break;case 1:Es(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&vg(a,a.return,u),Vl(a);break;case 27:$c(a.stateNode);case 26:case 5:Es(a,a.return),Vl(a);break;case 22:a.memoizedState===null&&Vl(a);break;case 30:Vl(a);break;default:Vl(a)}r=r.sibling}}function io(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,S=r,_=a,O=_.flags;switch(_.tag){case 0:case 11:case 15:io(S,_,u),Bc(4,_);break;case 1:if(io(S,_,u),p=_,S=p.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(qe){xn(p,p.return,qe)}if(p=_,S=p.updateQueue,S!==null){var re=p.stateNode;try{var we=S.shared.hiddenCallbacks;if(we!==null)for(S.shared.hiddenCallbacks=null,S=0;S<we.length;S++)si(we[S],re)}catch(qe){xn(p,p.return,qe)}}u&&O&64&&yg(_),Fc(_,_.return);break;case 27:wg(_);case 26:case 5:io(S,_,u),u&&p===null&&O&4&&xg(_),Fc(_,_.return);break;case 12:io(S,_,u);break;case 31:io(S,_,u),u&&O&4&&Cg(S,_);break;case 13:io(S,_,u),u&&O&4&&Tg(S,_);break;case 22:_.memoizedState===null&&io(S,_,u),Fc(_,_.return);break;case 30:break;default:io(S,_,u)}a=a.sibling}}function Sh(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Bl(u))}function Nh(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Bl(r))}function Ja(r,a,u,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)kg(r,a,u,p),a=a.sibling}function kg(r,a,u,p){var S=a.flags;switch(a.tag){case 0:case 11:case 15:Ja(r,a,u,p),S&2048&&Bc(9,a);break;case 1:Ja(r,a,u,p);break;case 3:Ja(r,a,u,p),S&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Bl(r)));break;case 12:if(S&2048){Ja(r,a,u,p),r=a.stateNode;try{var _=a.memoizedProps,O=_.id,re=_.onPostCommit;typeof re=="function"&&re(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(we){xn(a,a.return,we)}}else Ja(r,a,u,p);break;case 31:Ja(r,a,u,p);break;case 13:Ja(r,a,u,p);break;case 23:break;case 22:_=a.stateNode,O=a.alternate,a.memoizedState!==null?_._visibility&2?Ja(r,a,u,p):zc(r,a):_._visibility&2?Ja(r,a,u,p):(_._visibility|=2,Pu(r,a,u,p,(a.subtreeFlags&10256)!==0||!1)),S&2048&&Sh(O,a);break;case 24:Ja(r,a,u,p),S&2048&&Nh(a.alternate,a);break;default:Ja(r,a,u,p)}}function Pu(r,a,u,p,S){for(S=S&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=r,O=a,re=u,we=p,qe=O.flags;switch(O.tag){case 0:case 11:case 15:Pu(_,O,re,we,S),Bc(8,O);break;case 23:break;case 22:var $e=O.stateNode;O.memoizedState!==null?$e._visibility&2?Pu(_,O,re,we,S):zc(_,O):($e._visibility|=2,Pu(_,O,re,we,S)),S&&qe&2048&&Sh(O.alternate,O);break;case 24:Pu(_,O,re,we,S),S&&qe&2048&&Nh(O.alternate,O);break;default:Pu(_,O,re,we,S)}a=a.sibling}}function zc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,p=a,S=p.flags;switch(p.tag){case 22:zc(u,p),S&2048&&Sh(p.alternate,p);break;case 24:zc(u,p),S&2048&&Nh(p.alternate,p);break;default:zc(u,p)}a=a.sibling}}var qc=8192;function Uu(r,a,u){if(r.subtreeFlags&qc)for(r=r.child;r!==null;)Lg(r,a,u),r=r.sibling}function Lg(r,a,u){switch(r.tag){case 26:Uu(r,a,u),r.flags&qc&&r.memoizedState!==null&&_x(u,Va,r.memoizedState,r.memoizedProps);break;case 5:Uu(r,a,u);break;case 3:case 4:var p=Va;Va=$d(r.stateNode.containerInfo),Uu(r,a,u),Va=p;break;case 22:r.memoizedState===null&&(p=r.alternate,p!==null&&p.memoizedState!==null?(p=qc,qc=16777216,Uu(r,a,u),qc=p):Uu(r,a,u));break;default:Uu(r,a,u)}}function Rg(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Gc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var p=a[u];Fr=p,jg(p,r)}Rg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Mg(r),r=r.sibling}function Mg(r){switch(r.tag){case 0:case 11:case 15:Gc(r),r.flags&2048&&Vo(9,r,r.return);break;case 3:Gc(r);break;case 12:Gc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Pd(r)):Gc(r);break;default:Gc(r)}}function Pd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var p=a[u];Fr=p,jg(p,r)}Rg(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Vo(8,a,a.return),Pd(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Pd(a));break;default:Pd(a)}r=r.sibling}}function jg(r,a){for(;Fr!==null;){var u=Fr;switch(u.tag){case 0:case 11:case 15:Vo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Bl(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Fr=p;else e:for(u=r;Fr!==null;){p=Fr;var S=p.sibling,_=p.return;if(_g(p),p===u){Fr=null;break e}if(S!==null){S.return=_,Fr=S;break e}Fr=_}}}var Bv={getCacheForType:function(r){var a=Er(Qn),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Er(Qn).controller.signal}},Fv=typeof WeakMap=="function"?WeakMap:Map,pn=0,kn=null,Kt=null,en=0,vn=0,ua=null,Jo=!1,Ou=!1,_h=!1,ao=0,sr=0,Yo=0,Jl=0,Ah=0,ca=0,Bu=0,Hc=null,Wi=null,Ch=!1,Ud=0,Dg=0,Od=1/0,Bd=null,Wo=null,kr=0,$o=null,Fu=null,so=0,Th=0,Eh=null,Pg=null,Vc=0,Ih=null;function da(){return(pn&2)!==0&&en!==0?en&-en:ee.T!==null?Dh():Nr()}function Ug(){if(ca===0)if((en&536870912)===0||Wt){var r=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),ca=r}else ca=536870912;return r=er.current,r!==null&&(r.flags|=32),ca}function $i(r,a,u){(r===kn&&(vn===2||vn===9)||r.cancelPendingCommit!==null)&&(zu(r,0),Ko(r,en,ca,!1)),Lr(r,u),((pn&2)===0||r!==kn)&&(r===kn&&((pn&2)===0&&(Jl|=u),sr===4&&Ko(r,en,ca,!1)),Is(r))}function Og(r,a,u){if((pn&6)!==0)throw Error(i(327));var p=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Vt(r,a),S=p?Gv(r,a):Lh(r,a,!0),_=p;do{if(S===0){Ou&&!p&&Ko(r,a,0,!1);break}else{if(u=r.current.alternate,_&&!zv(u)){S=Lh(r,a,!1),_=!1;continue}if(S===2){if(_=a,r.errorRecoveryDisabledLanes&_)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var re=r;S=Hc;var we=re.current.memoizedState.isDehydrated;if(we&&(zu(re,O).flags|=256),O=Lh(re,O,!1),O!==2){if(_h&&!we){re.errorRecoveryDisabledLanes|=_,Jl|=_,S=4;break e}_=Wi,Wi=S,_!==null&&(Wi===null?Wi=_:Wi.push.apply(Wi,_))}S=O}if(_=!1,S!==2)continue}}if(S===1){zu(r,0),Ko(r,a,0,!0);break}e:{switch(p=r,_=S,_){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ko(p,a,ca,!Jo);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(S=Ud+300-Oe(),10<S)){if(Ko(p,a,ca,!Jo),Et(p,0,!0)!==0)break e;so=a,p.timeoutHandle=m0(Bg.bind(null,p,u,Wi,Bd,Ch,a,ca,Jl,Bu,Jo,_,"Throttled",-0,0),S);break e}Bg(p,u,Wi,Bd,Ch,a,ca,Jl,Bu,Jo,_,null,-0,0)}}break}while(!0);Is(r)}function Bg(r,a,u,p,S,_,O,re,we,qe,$e,tt,Ge,Ve){if(r.timeoutHandle=-1,tt=a.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},Lg(a,_,tt);var yt=(_&62914560)===_?Ud-Oe():(_&4194048)===_?Dg-Oe():0;if(yt=Ax(tt,yt),yt!==null){so=_,r.cancelPendingCommit=yt(Yg.bind(null,r,a,_,u,p,S,O,re,we,$e,tt,null,Ge,Ve)),Ko(r,_,O,!qe);return}}Yg(r,a,_,u,p,S,O,re,we)}function zv(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var S=u[p],_=S.getSnapshot;S=S.value;try{if(!Yr(_(),S))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ko(r,a,u,p){a&=~Ah,a&=~Jl,r.suspendedLanes|=a,r.pingedLanes&=~a,p&&(r.warmLanes|=a),p=r.expirationTimes;for(var S=a;0<S;){var _=31-Ct(S),O=1<<_;p[_]=-1,S&=~O}u!==0&&Qr(r,u,a)}function Fd(){return(pn&6)===0?(Jc(0),!1):!0}function kh(){if(Kt!==null){if(vn===0)var r=Kt.return;else r=Kt,wa=bs=null,Iu(r),Ke=null,ct=0,r=Kt;for(;r!==null;)gg(r.alternate,r),r=r.return;Kt=null}}function zu(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,ox(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),so=0,kh(),kn=r,Kt=u=Ui(r.current,null),en=a,vn=0,ua=null,Jo=!1,Ou=Vt(r,a),_h=!1,Bu=ca=Ah=Jl=Yo=sr=0,Wi=Hc=null,Ch=!1,(a&8)!==0&&(a|=a&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=a;0<p;){var S=31-Ct(p),_=1<<S;a|=r[S],p&=~_}return ao=a,Ml(),u}function Fg(r,a){Pt=null,ee.H=Pc,a===Ne||a===Be?(a=Ze(),vn=3):a===Fe?(a=Ze(),vn=4):vn=a===lh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ua=a,Kt===null&&(sr=1,Id(r,Oi(a,r.current)))}function zg(){var r=er.current;return r===null?!0:(en&4194048)===en?xr===null:(en&62914560)===en||(en&536870912)!==0?r===xr:!1}function qg(){var r=ee.H;return ee.H=Pc,r===null?Pc:r}function Gg(){var r=ee.A;return ee.A=Bv,r}function zd(){sr=4,Jo||(en&4194048)!==en&&er.current!==null||(Ou=!0),(Yo&134217727)===0&&(Jl&134217727)===0||kn===null||Ko(kn,en,ca,!1)}function Lh(r,a,u){var p=pn;pn|=2;var S=qg(),_=Gg();(kn!==r||en!==a)&&(Bd=null,zu(r,a)),a=!1;var O=sr;e:do try{if(vn!==0&&Kt!==null){var re=Kt,we=ua;switch(vn){case 8:kh(),O=6;break e;case 3:case 2:case 9:case 6:er.current===null&&(a=!0);var qe=vn;if(vn=0,ua=null,qu(r,re,we,qe),u&&Ou){O=0;break e}break;default:qe=vn,vn=0,ua=null,qu(r,re,we,qe)}}qv(),O=sr;break}catch($e){Fg(r,$e)}while(!0);return a&&r.shellSuspendCounter++,wa=bs=null,pn=p,ee.H=S,ee.A=_,Kt===null&&(kn=null,en=0,Ml()),O}function qv(){for(;Kt!==null;)Hg(Kt)}function Gv(r,a){var u=pn;pn|=2;var p=qg(),S=Gg();kn!==r||en!==a?(Bd=null,Od=Oe()+500,zu(r,a)):Ou=Vt(r,a);e:do try{if(vn!==0&&Kt!==null){a=Kt;var _=ua;t:switch(vn){case 1:vn=0,ua=null,qu(r,a,_,1);break;case 2:case 9:if(et(_)){vn=0,ua=null,Vg(a);break}a=function(){vn!==2&&vn!==9||kn!==r||(vn=7),Is(r)},_.then(a,a);break e;case 3:vn=7;break e;case 4:vn=5;break e;case 7:et(_)?(vn=0,ua=null,Vg(a)):(vn=0,ua=null,qu(r,a,_,7));break;case 5:var O=null;switch(Kt.tag){case 26:O=Kt.memoizedState;case 5:case 27:var re=Kt;if(O?k0(O):re.stateNode.complete){vn=0,ua=null;var we=re.sibling;if(we!==null)Kt=we;else{var qe=re.return;qe!==null?(Kt=qe,qd(qe)):Kt=null}break t}}vn=0,ua=null,qu(r,a,_,5);break;case 6:vn=0,ua=null,qu(r,a,_,6);break;case 8:kh(),sr=6;break e;default:throw Error(i(462))}}Hv();break}catch($e){Fg(r,$e)}while(!0);return wa=bs=null,ee.H=p,ee.A=S,pn=u,Kt!==null?0:(kn=null,en=0,Ml(),sr)}function Hv(){for(;Kt!==null&&!be();)Hg(Kt)}function Hg(r){var a=pg(r.alternate,r,ao);r.memoizedProps=r.pendingProps,a===null?qd(r):Kt=a}function Vg(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=lg(u,a,a.pendingProps,a.type,void 0,en);break;case 11:a=lg(u,a,a.pendingProps,a.type.render,a.ref,en);break;case 5:Iu(a);default:gg(u,a),a=Kt=Pl(a,ao),a=pg(u,a,ao)}r.memoizedProps=r.pendingProps,a===null?qd(r):Kt=a}function qu(r,a,u,p){wa=bs=null,Iu(a),Ke=null,ct=0;var S=a.return;try{if(Rv(r,S,a,u,en)){sr=1,Id(r,Oi(u,r.current)),Kt=null;return}}catch(_){if(S!==null)throw Kt=S,_;sr=1,Id(r,Oi(u,r.current)),Kt=null;return}a.flags&32768?(Wt||p===1?r=!0:Ou||(en&536870912)!==0?r=!1:(Jo=r=!0,(p===2||p===9||p===3||p===6)&&(p=er.current,p!==null&&p.tag===13&&(p.flags|=16384))),Jg(a,r)):qd(a)}function qd(r){var a=r;do{if((a.flags&32768)!==0){Jg(a,Jo);return}r=a.return;var u=Dv(a.alternate,a,ao);if(u!==null){Kt=u;return}if(a=a.sibling,a!==null){Kt=a;return}Kt=a=r}while(a!==null);sr===0&&(sr=5)}function Jg(r,a){do{var u=Pv(r.alternate,r);if(u!==null){u.flags&=32767,Kt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Kt=r;return}Kt=r=u}while(r!==null);sr=6,Kt=null}function Yg(r,a,u,p,S,_,O,re,we){r.cancelPendingCommit=null;do Gd();while(kr!==0);if((pn&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(_=a.lanes|a.childLanes,_|=mu,At(r,u,_,O,re,we),r===kn&&(Kt=kn=null,en=0),Fu=a,$o=r,so=u,Th=_,Eh=S,Pg=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Wv(pt,function(){return Zg(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=ee.T,ee.T=null,S=ae.p,ae.p=2,O=pn,pn|=4;try{Uv(r,a,u)}finally{pn=O,ae.p=S,ee.T=p}}kr=1,Wg(),$g(),Kg()}}function Wg(){if(kr===1){kr=0;var r=$o,a=Fu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var p=ae.p;ae.p=2;var S=pn;pn|=4;try{Eg(a,r);var _=Gh,O=sa(r.containerInfo),re=_.focusedElem,we=_.selectionRange;if(O!==re&&re&&re.ownerDocument&&Pa(re.ownerDocument.documentElement,re)){if(we!==null&&oa(re)){var qe=we.start,$e=we.end;if($e===void 0&&($e=qe),"selectionStart"in re)re.selectionStart=qe,re.selectionEnd=Math.min($e,re.value.length);else{var tt=re.ownerDocument||document,Ge=tt&&tt.defaultView||window;if(Ge.getSelection){var Ve=Ge.getSelection(),yt=re.textContent.length,kt=Math.min(we.start,yt),Cn=we.end===void 0?kt:Math.min(we.end,yt);!Ve.extend&&kt>Cn&&(O=Cn,Cn=kt,kt=O);var Pe=ji(re,kt),Te=ji(re,Cn);if(Pe&&Te&&(Ve.rangeCount!==1||Ve.anchorNode!==Pe.node||Ve.anchorOffset!==Pe.offset||Ve.focusNode!==Te.node||Ve.focusOffset!==Te.offset)){var ze=tt.createRange();ze.setStart(Pe.node,Pe.offset),Ve.removeAllRanges(),kt>Cn?(Ve.addRange(ze),Ve.extend(Te.node,Te.offset)):(ze.setEnd(Te.node,Te.offset),Ve.addRange(ze))}}}}for(tt=[],Ve=re;Ve=Ve.parentNode;)Ve.nodeType===1&&tt.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<tt.length;re++){var Qe=tt[re];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}tf=!!qh,Gh=qh=null}finally{pn=S,ae.p=p,ee.T=u}}r.current=a,kr=2}}function $g(){if(kr===2){kr=0;var r=$o,a=Fu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var p=ae.p;ae.p=2;var S=pn;pn|=4;try{Ng(r,a.alternate,a)}finally{pn=S,ae.p=p,ee.T=u}}kr=3}}function Kg(){if(kr===4||kr===3){kr=0,je();var r=$o,a=Fu,u=so,p=Pg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?kr=5:(kr=0,Fu=$o=null,Xg(r,r.pendingLanes));var S=r.pendingLanes;if(S===0&&(Wo=null),Mn(u),a=a.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(gt,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=ee.T,S=ae.p,ae.p=2,ee.T=null;try{for(var _=r.onRecoverableError,O=0;O<p.length;O++){var re=p[O];_(re.value,{componentStack:re.stack})}}finally{ee.T=a,ae.p=S}}(so&3)!==0&&Gd(),Is(r),S=r.pendingLanes,(u&261930)!==0&&(S&42)!==0?r===Ih?Vc++:(Vc=0,Ih=r):Vc=0,Jc(0)}}function Xg(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Bl(a)))}function Gd(){return Wg(),$g(),Kg(),Zg()}function Zg(){if(kr!==5)return!1;var r=$o,a=Th;Th=0;var u=Mn(so),p=ee.T,S=ae.p;try{ae.p=32>u?32:u,ee.T=null,u=Eh,Eh=null;var _=$o,O=so;if(kr=0,Fu=$o=null,so=0,(pn&6)!==0)throw Error(i(331));var re=pn;if(pn|=4,Mg(_.current),kg(_,_.current,O,u),pn=re,Jc(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(gt,_)}catch{}return!0}finally{ae.p=S,ee.T=p,Xg(r,a)}}function Qg(r,a,u){a=Oi(u,a),a=oh(r.stateNode,a,2),r=yn(r,a,2),r!==null&&(Lr(r,2),Is(r))}function xn(r,a,u){if(r.tag===3)Qg(r,r,u);else for(;a!==null;){if(a.tag===3){Qg(a,r,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Wo===null||!Wo.has(p))){r=Oi(u,r),u=eg(2),p=yn(a,u,2),p!==null&&(tg(u,p,a,r),Lr(p,2),Is(p));break}}a=a.return}}function Rh(r,a,u){var p=r.pingCache;if(p===null){p=r.pingCache=new Fv;var S=new Set;p.set(a,S)}else S=p.get(a),S===void 0&&(S=new Set,p.set(a,S));S.has(u)||(_h=!0,S.add(u),r=Vv.bind(null,r,a,u),a.then(r,r))}function Vv(r,a,u){var p=r.pingCache;p!==null&&p.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,kn===r&&(en&u)===u&&(sr===4||sr===3&&(en&62914560)===en&&300>Oe()-Ud?(pn&2)===0&&zu(r,0):Ah|=u,Bu===en&&(Bu=0)),Is(r)}function e0(r,a){a===0&&(a=nr()),r=Oa(r,a),r!==null&&(Lr(r,a),Is(r))}function Jv(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),e0(r,u)}function Yv(r,a){var u=0;switch(r.tag){case 31:case 13:var p=r.stateNode,S=r.memoizedState;S!==null&&(u=S.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(a),e0(r,u)}function Wv(r,a){return Ie(r,a)}var Hd=null,Gu=null,Mh=!1,Vd=!1,jh=!1,Xo=0;function Is(r){r!==Gu&&r.next===null&&(Gu===null?Hd=Gu=r:Gu=Gu.next=r),Vd=!0,Mh||(Mh=!0,Kv())}function Jc(r,a){if(!jh&&Vd){jh=!0;do for(var u=!1,p=Hd;p!==null;){if(r!==0){var S=p.pendingLanes;if(S===0)var _=0;else{var O=p.suspendedLanes,re=p.pingedLanes;_=(1<<31-Ct(42|r)+1)-1,_&=S&~(O&~re),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,i0(p,_))}else _=en,_=Et(p,p===kn?_:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(_&3)===0||Vt(p,_)||(u=!0,i0(p,_));p=p.next}while(u);jh=!1}}function $v(){t0()}function t0(){Vd=Mh=!1;var r=0;Xo!==0&&sx()&&(r=Xo);for(var a=Oe(),u=null,p=Hd;p!==null;){var S=p.next,_=n0(p,a);_===0?(p.next=null,u===null?Hd=S:u.next=S,S===null&&(Gu=u)):(u=p,(r!==0||(_&3)!==0)&&(Vd=!0)),p=S}kr!==0&&kr!==5||Jc(r),Xo!==0&&(Xo=0)}function n0(r,a){for(var u=r.suspendedLanes,p=r.pingedLanes,S=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var O=31-Ct(_),re=1<<O,we=S[O];we===-1?((re&u)===0||(re&p)!==0)&&(S[O]=ka(re,a)):we<=a&&(r.expiredLanes|=re),_&=~re}if(a=kn,u=en,u=Et(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,u===0||r===a&&(vn===2||vn===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&Le(p),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Vt(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(p!==null&&Le(p),Mn(u)){case 2:case 8:u=dt;break;case 32:u=pt;break;case 268435456:u=Rt;break;default:u=pt}return p=r0.bind(null,r),u=Ie(u,p),r.callbackPriority=a,r.callbackNode=u,a}return p!==null&&p!==null&&Le(p),r.callbackPriority=2,r.callbackNode=null,2}function r0(r,a){if(kr!==0&&kr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Gd()&&r.callbackNode!==u)return null;var p=en;return p=Et(r,r===kn?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(Og(r,p,a),n0(r,Oe()),r.callbackNode!=null&&r.callbackNode===u?r0.bind(null,r):null)}function i0(r,a){if(Gd())return null;Og(r,a,!0)}function Kv(){lx(function(){(pn&6)!==0?Ie(at,$v):t0()})}function Dh(){if(Xo===0){var r=y;r===0&&(r=jt,jt<<=1,(jt&261888)===0&&(jt=256)),Xo=r}return Xo}function a0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ds(""+r)}function s0(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function Xv(r,a,u,p,S){if(a==="submit"&&u&&u.stateNode===S){var _=a0((S[wn]||null).action),O=p.submitter;O&&(a=(a=O[wn]||null)?a0(a.formAction):O.getAttribute("formAction"),a!==null&&(_=a,O=null));var re=new Os("action","action",null,p,S);r.push({event:re,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Xo!==0){var we=O?s0(S,O):new FormData(S);th(u,{pending:!0,data:we,method:S.method,action:_},null,we)}}else typeof _=="function"&&(re.preventDefault(),we=O?s0(S,O):new FormData(S),th(u,{pending:!0,data:we,method:S.method,action:_},_,we))},currentTarget:S}]})}}for(var Ph=0;Ph<ba.length;Ph++){var Uh=ba[Ph],Zv=Uh.toLowerCase(),Qv=Uh[0].toUpperCase()+Uh.slice(1);Pr(Zv,"on"+Qv)}Pr(jo,"onAnimationEnd"),Pr(xi,"onAnimationIteration"),Pr(va,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Sn,"onTransitionRun"),Pr(Nn,"onTransitionStart"),Pr(Zn,"onTransitionCancel"),Pr(ir,"onTransitionEnd"),rr("onMouseEnter",["mouseout","mouseover"]),rr("onMouseLeave",["mouseout","mouseover"]),rr("onPointerEnter",["pointerout","pointerover"]),rr("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ex=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function o0(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var p=r[u],S=p.event;p=p.listeners;e:{var _=void 0;if(a)for(var O=p.length-1;0<=O;O--){var re=p[O],we=re.instance,qe=re.currentTarget;if(re=re.listener,we!==_&&S.isPropagationStopped())break e;_=re,S.currentTarget=qe;try{_(S)}catch($e){Gs($e)}S.currentTarget=null,_=we}else for(O=0;O<p.length;O++){if(re=p[O],we=re.instance,qe=re.currentTarget,re=re.listener,we!==_&&S.isPropagationStopped())break e;_=re,S.currentTarget=qe;try{_(S)}catch($e){Gs($e)}S.currentTarget=null,_=we}}}}function Xt(r,a){var u=a[gn];u===void 0&&(u=a[gn]=new Set);var p=r+"__bubble";u.has(p)||(l0(a,r,2,!1),u.add(p))}function Oh(r,a,u){var p=0;a&&(p|=4),l0(u,r,p,a)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function Bh(r){if(!r[Jd]){r[Jd]=!0,sn.forEach(function(u){u!=="selectionchange"&&(ex.has(u)||Oh(u,!1,r),Oh(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Jd]||(a[Jd]=!0,Oh("selectionchange",!1,a))}}function l0(r,a,u,p){switch(U0(a)){case 2:var S=Ex;break;case 8:S=Ix;break;default:S=ep}u=S.bind(null,a,u,r),S=void 0,!Ps||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),p?S!==void 0?r.addEventListener(a,u,{capture:!0,passive:S}):r.addEventListener(a,u,!0):S!==void 0?r.addEventListener(a,u,{passive:S}):r.addEventListener(a,u,!1)}function Fh(r,a,u,p,S){var _=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var re=p.stateNode.containerInfo;if(re===S)break;if(O===4)for(O=p.return;O!==null;){var we=O.tag;if((we===3||we===4)&&O.stateNode.containerInfo===S)return;O=O.return}for(;re!==null;){if(O=ni(re),O===null)return;if(we=O.tag,we===5||we===6||we===26||we===27){p=_=O;continue e}re=re.parentNode}}p=p.return}wl(function(){var qe=_,$e=_o(u),tt=[];e:{var Ge=xa.get(r);if(Ge!==void 0){var Ve=Os,yt=r;switch(r){case"keypress":if(na(u)===0)break e;case"keydown":case"keyup":Ve=Il;break;case"focusin":yt="focus",Ve=_l;break;case"focusout":yt="blur",Ve=_l;break;case"beforeblur":case"afterblur":Ve=_l;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Y;break;case jo:case xi:case va:Ve=wc;break;case ir:Ve=Se;break;case"scroll":case"scrollend":Ve=uu;break;case"wheel":Ve=We;break;case"copy":case"cut":case"paste":Ve=Cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Io;break;case"toggle":case"beforetoggle":Ve=ft}var kt=(a&4)!==0,Cn=!kt&&(r==="scroll"||r==="scrollend"),Pe=kt?Ge!==null?Ge+"Capture":null:Ge;kt=[];for(var Te=qe,ze;Te!==null;){var Qe=Te;if(ze=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||ze===null||Pe===null||(Qe=as(Te,Pe),Qe!=null&&kt.push(Wc(Te,Qe,ze))),Cn)break;Te=Te.return}0<kt.length&&(Ge=new Ve(Ge,yt,null,u,$e),tt.push({event:Ge,listeners:kt}))}}if((a&7)===0){e:{if(Ge=r==="mouseover"||r==="pointerover",Ve=r==="mouseout"||r==="pointerout",Ge&&u!==bl&&(yt=u.relatedTarget||u.fromElement)&&(ni(yt)||yt[mr]))break e;if((Ve||Ge)&&(Ge=$e.window===$e?$e:(Ge=$e.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,Ve?(yt=u.relatedTarget||u.toElement,Ve=qe,yt=yt?ni(yt):null,yt!==null&&(Cn=o(yt),kt=yt.tag,yt!==Cn||kt!==5&&kt!==27&&kt!==6)&&(yt=null)):(Ve=null,yt=qe),Ve!==yt)){if(kt=Ra,Qe="onMouseLeave",Pe="onMouseEnter",Te="mouse",(r==="pointerout"||r==="pointerover")&&(kt=Io,Qe="onPointerLeave",Pe="onPointerEnter",Te="pointer"),Cn=Ve==null?Ge:lt(Ve),ze=yt==null?Ge:lt(yt),Ge=new kt(Qe,Te+"leave",Ve,u,$e),Ge.target=Cn,Ge.relatedTarget=ze,Qe=null,ni($e)===qe&&(kt=new kt(Pe,Te+"enter",yt,u,$e),kt.target=ze,kt.relatedTarget=Cn,Qe=kt),Cn=Qe,Ve&&yt)t:{for(kt=tx,Pe=Ve,Te=yt,ze=0,Qe=Pe;Qe;Qe=kt(Qe))ze++;Qe=0;for(var Nt=Te;Nt;Nt=kt(Nt))Qe++;for(;0<ze-Qe;)Pe=kt(Pe),ze--;for(;0<Qe-ze;)Te=kt(Te),Qe--;for(;ze--;){if(Pe===Te||Te!==null&&Pe===Te.alternate){kt=Pe;break t}Pe=kt(Pe),Te=kt(Te)}kt=null}else kt=null;Ve!==null&&u0(tt,Ge,Ve,kt,!1),yt!==null&&Cn!==null&&u0(tt,Cn,yt,kt,!0)}}e:{if(Ge=qe?lt(qe):window,Ve=Ge.nodeName&&Ge.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ge.type==="file")var un=Vr;else if(ko(Ge))if(qs)un=Rl;else{un=pu;var bt=Ll}else Ve=Ge.nodeName,!Ve||Ve.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?qe&&ta(qe.elementType)&&(un=Vr):un=aa;if(un&&(un=un(r,qe))){Lo(tt,un,u,$e);break e}bt&&bt(r,Ge,qe),r==="focusout"&&qe&&Ge.type==="number"&&qe.memoizedProps.value!=null&&wo(Ge,"number",Ge.value)}switch(bt=qe?lt(qe):window,r){case"focusin":(ko(bt)||bt.contentEditable==="true")&&(Dr=bt,ps=qe,Ua=null);break;case"focusout":Ua=ps=Dr=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,Di(tt,u,$e);break;case"selectionchange":if(Mo)break;case"keydown":case"keyup":Di(tt,u,$e)}var Gt;if(Dt)e:{switch(r){case"compositionstart":var tn="onCompositionStart";break e;case"compositionend":tn="onCompositionEnd";break e;case"compositionupdate":tn="onCompositionUpdate";break e}tn=void 0}else jr?_r(r,u)&&(tn="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(tn="onCompositionStart");tn&&(Pn&&u.locale!=="ko"&&(jr||tn!=="onCompositionStart"?tn==="onCompositionEnd"&&jr&&(Gt=os()):(ma=$e,Sl="value"in ma?ma.value:ma.textContent,jr=!0)),bt=Yd(qe,tn),0<bt.length&&(tn=new Fs(tn,r,null,u,$e),tt.push({event:tn,listeners:bt}),Gt?tn.data=Gt:(Gt=lr(u),Gt!==null&&(tn.data=Gt)))),(Gt=Zt?yi(r,u):Ma(r,u))&&(tn=Yd(qe,"onBeforeInput"),0<tn.length&&(bt=new Fs("onBeforeInput","beforeinput",null,u,$e),tt.push({event:bt,listeners:tn}),bt.data=Gt)),Xv(tt,r,qe,u,$e)}o0(tt,a)})}function Wc(r,a,u){return{instance:r,listener:a,currentTarget:u}}function Yd(r,a){for(var u=a+"Capture",p=[];r!==null;){var S=r,_=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||_===null||(S=as(r,u),S!=null&&p.unshift(Wc(r,S,_)),S=as(r,a),S!=null&&p.push(Wc(r,S,_))),r.tag===3)return p;r=r.return}return[]}function tx(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u0(r,a,u,p,S){for(var _=a._reactName,O=[];u!==null&&u!==p;){var re=u,we=re.alternate,qe=re.stateNode;if(re=re.tag,we!==null&&we===p)break;re!==5&&re!==26&&re!==27||qe===null||(we=qe,S?(qe=as(u,_),qe!=null&&O.unshift(Wc(u,qe,we))):S||(qe=as(u,_),qe!=null&&O.push(Wc(u,qe,we)))),u=u.return}O.length!==0&&r.push({event:a,listeners:O})}var nx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function c0(r){return(typeof r=="string"?r:""+r).replace(nx,`
`).replace(rx,"")}function d0(r,a){return a=c0(a),c0(r)===a}function An(r,a,u,p,S,_){switch(u){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||pa(r,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&pa(r,""+p);break;case"className":jn(r,"class",p);break;case"tabIndex":jn(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(r,u,p);break;case"style":ou(r,p,_);break;case"data":if(a!=="object"){jn(r,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=Ds(""+p),r.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(a!=="input"&&An(r,a,"name",S.name,S,null),An(r,a,"formEncType",S.formEncType,S,null),An(r,a,"formMethod",S.formMethod,S,null),An(r,a,"formTarget",S.formTarget,S,null)):(An(r,a,"encType",S.encType,S,null),An(r,a,"method",S.method,S,null),An(r,a,"target",S.target,S,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=Ds(""+p),r.setAttribute(u,p);break;case"onClick":p!=null&&(r.onclick=Dn);break;case"onScroll":p!=null&&Xt("scroll",r);break;case"onScrollEnd":p!=null&&Xt("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(u=p.__html,u!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}u=Ds(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""+p):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":p===!0?r.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,p):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(u,p):r.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(u):r.setAttribute(u,p);break;case"popover":Xt("beforetoggle",r),Xt("toggle",r),xo(r,"popover",p);break;case"xlinkActuate":Ei(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ei(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ei(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ei(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ei(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ei(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ei(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ei(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ei(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":xo(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=So.get(u)||u,xo(r,u,p))}}function zh(r,a,u,p,S,_){switch(u){case"style":ou(r,p,_);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(u=p.__html,u!=null){if(S.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof p=="string"?pa(r,p):(typeof p=="number"||typeof p=="bigint")&&pa(r,""+p);break;case"onScroll":p!=null&&Xt("scroll",r);break;case"onScrollEnd":p!=null&&Xt("scrollend",r);break;case"onClick":p!=null&&(r.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(S=u.endsWith("Capture"),a=u.slice(2,S?u.length-7:void 0),_=r[wn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(a,_,S),typeof p=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,p,S);break e}u in r?r[u]=p:p===!0?r.setAttribute(u,""):xo(r,u,p)}}}function Xr(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",r),Xt("load",r);var p=!1,S=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var O=u[_];if(O!=null)switch(_){case"src":p=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:An(r,a,_,O,u,null)}}S&&An(r,a,"srcSet",u.srcSet,u,null),p&&An(r,a,"src",u.src,u,null);return;case"input":Xt("invalid",r);var re=_=O=S=null,we=null,qe=null;for(p in u)if(u.hasOwnProperty(p)){var $e=u[p];if($e!=null)switch(p){case"name":S=$e;break;case"type":O=$e;break;case"checked":we=$e;break;case"defaultChecked":qe=$e;break;case"value":_=$e;break;case"defaultValue":re=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(137,a));break;default:An(r,a,p,$e,u,null)}}iu(r,_,re,we,qe,O,S,!1);return;case"select":Xt("invalid",r),p=O=_=null;for(S in u)if(u.hasOwnProperty(S)&&(re=u[S],re!=null))switch(S){case"value":_=re;break;case"defaultValue":O=re;break;case"multiple":p=re;default:An(r,a,S,re,u,null)}a=_,u=O,r.multiple=!!p,a!=null?rs(r,!!p,a,!1):u!=null&&rs(r,!!p,u,!0);return;case"textarea":Xt("invalid",r),_=S=p=null;for(O in u)if(u.hasOwnProperty(O)&&(re=u[O],re!=null))switch(O){case"value":p=re;break;case"defaultValue":S=re;break;case"children":_=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(91));break;default:An(r,a,O,re,u,null)}au(r,p,S,_);return;case"option":for(we in u)if(u.hasOwnProperty(we)&&(p=u[we],p!=null))switch(we){case"selected":r.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:An(r,a,we,p,u,null)}return;case"dialog":Xt("beforetoggle",r),Xt("toggle",r),Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":Xt("load",r);break;case"video":case"audio":for(p=0;p<Yc.length;p++)Xt(Yc[p],r);break;case"image":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"embed":case"source":case"link":Xt("error",r),Xt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in u)if(u.hasOwnProperty(qe)&&(p=u[qe],p!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:An(r,a,qe,p,u,null)}return;default:if(ta(a)){for($e in u)u.hasOwnProperty($e)&&(p=u[$e],p!==void 0&&zh(r,a,$e,p,u,void 0));return}}for(re in u)u.hasOwnProperty(re)&&(p=u[re],p!=null&&An(r,a,re,p,u,null))}function ix(r,a,u,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,_=null,O=null,re=null,we=null,qe=null,$e=null;for(Ve in u){var tt=u[Ve];if(u.hasOwnProperty(Ve)&&tt!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":we=tt;default:p.hasOwnProperty(Ve)||An(r,a,Ve,null,p,tt)}}for(var Ge in p){var Ve=p[Ge];if(tt=u[Ge],p.hasOwnProperty(Ge)&&(Ve!=null||tt!=null))switch(Ge){case"type":_=Ve;break;case"name":S=Ve;break;case"checked":qe=Ve;break;case"defaultChecked":$e=Ve;break;case"value":O=Ve;break;case"defaultValue":re=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(i(137,a));break;default:Ve!==tt&&An(r,a,Ge,Ve,p,tt)}}bo(r,O,re,we,qe,$e,_,S);return;case"select":Ve=O=re=Ge=null;for(_ in u)if(we=u[_],u.hasOwnProperty(_)&&we!=null)switch(_){case"value":break;case"multiple":Ve=we;default:p.hasOwnProperty(_)||An(r,a,_,null,p,we)}for(S in p)if(_=p[S],we=u[S],p.hasOwnProperty(S)&&(_!=null||we!=null))switch(S){case"value":Ge=_;break;case"defaultValue":re=_;break;case"multiple":O=_;default:_!==we&&An(r,a,S,_,p,we)}a=re,u=O,p=Ve,Ge!=null?rs(r,!!u,Ge,!1):!!p!=!!u&&(a!=null?rs(r,!!u,a,!0):rs(r,!!u,u?[]:"",!1));return;case"textarea":Ve=Ge=null;for(re in u)if(S=u[re],u.hasOwnProperty(re)&&S!=null&&!p.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:An(r,a,re,null,p,S)}for(O in p)if(S=p[O],_=u[O],p.hasOwnProperty(O)&&(S!=null||_!=null))switch(O){case"value":Ge=S;break;case"defaultValue":Ve=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==_&&An(r,a,O,S,p,_)}xl(r,Ge,Ve);return;case"option":for(var yt in u)if(Ge=u[yt],u.hasOwnProperty(yt)&&Ge!=null&&!p.hasOwnProperty(yt))switch(yt){case"selected":r.selected=!1;break;default:An(r,a,yt,null,p,Ge)}for(we in p)if(Ge=p[we],Ve=u[we],p.hasOwnProperty(we)&&Ge!==Ve&&(Ge!=null||Ve!=null))switch(we){case"selected":r.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:An(r,a,we,Ge,p,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in u)Ge=u[kt],u.hasOwnProperty(kt)&&Ge!=null&&!p.hasOwnProperty(kt)&&An(r,a,kt,null,p,Ge);for(qe in p)if(Ge=p[qe],Ve=u[qe],p.hasOwnProperty(qe)&&Ge!==Ve&&(Ge!=null||Ve!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(i(137,a));break;default:An(r,a,qe,Ge,p,Ve)}return;default:if(ta(a)){for(var Cn in u)Ge=u[Cn],u.hasOwnProperty(Cn)&&Ge!==void 0&&!p.hasOwnProperty(Cn)&&zh(r,a,Cn,void 0,p,Ge);for($e in p)Ge=p[$e],Ve=u[$e],!p.hasOwnProperty($e)||Ge===Ve||Ge===void 0&&Ve===void 0||zh(r,a,$e,Ge,p,Ve);return}}for(var Pe in u)Ge=u[Pe],u.hasOwnProperty(Pe)&&Ge!=null&&!p.hasOwnProperty(Pe)&&An(r,a,Pe,null,p,Ge);for(tt in p)Ge=p[tt],Ve=u[tt],!p.hasOwnProperty(tt)||Ge===Ve||Ge==null&&Ve==null||An(r,a,tt,Ge,p,Ve)}function f0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ax(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var S=u[p],_=S.transferSize,O=S.initiatorType,re=S.duration;if(_&&re&&f0(O)){for(O=0,re=S.responseEnd,p+=1;p<u.length;p++){var we=u[p],qe=we.startTime;if(qe>re)break;var $e=we.transferSize,tt=we.initiatorType;$e&&f0(tt)&&(we=we.responseEnd,O+=$e*(we<re?1:(re-qe)/(we-qe)))}if(--p,a+=8*(_+O)/(S.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var qh=null,Gh=null;function Wd(r){return r.nodeType===9?r:r.ownerDocument}function h0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Hh(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vh=null;function sx(){var r=window.event;return r&&r.type==="popstate"?r===Vh?!1:(Vh=r,!0):(Vh=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(r){return g0.resolve(null).then(r).catch(ux)}:m0;function ux(r){setTimeout(function(){throw r})}function Zo(r){return r==="head"}function y0(r,a){var u=a,p=0;do{var S=u.nextSibling;if(r.removeChild(u),S&&S.nodeType===8)if(u=S.data,u==="/$"||u==="/&"){if(p===0){r.removeChild(S),Yu(a);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")$c(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,$c(u);for(var _=u.firstChild;_;){var O=_.nextSibling,re=_.nodeName;_[gi]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=O}}else u==="body"&&$c(r.ownerDocument.body);u=S}while(u);Yu(a)}function v0(r,a){var u=r;r=0;do{var p=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=p}while(u)}function Jh(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jh(u),ti(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function cx(r,a,u,p){for(;r.nodeType===1;){var S=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[gi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==S.rel||r.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||r.getAttribute("title")!==(S.title==null?null:S.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(S.src==null?null:S.src)||r.getAttribute("type")!==(S.type==null?null:S.type)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var _=S.name==null?null:""+S.name;if(S.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Ta(r.nextSibling),r===null)break}return null}function dx(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ta(r.nextSibling),r===null))return null;return r}function x0(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Ta(r.nextSibling),r===null))return null;return r}function Yh(r){return r.data==="$?"||r.data==="$~"}function Wh(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function fx(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var p=function(){a(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function Ta(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var $h=null;function b0(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return Ta(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function w0(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function S0(r,a,u){switch(a=Wd(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function $c(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);ti(r)}var Ea=new Map,N0=new Set;function $d(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var oo=ae.d;ae.d={f:hx,r:px,D:mx,C:gx,L:yx,m:vx,X:bx,S:xx,M:wx};function hx(){var r=oo.f(),a=Fd();return r||a}function px(r){var a=rt(r);a!==null&&a.tag===5&&a.type==="form"?Fm(a):oo.r(r)}var Hu=typeof document>"u"?null:document;function _0(r,a,u){var p=Hu;if(p&&typeof a=="string"&&a){var S=Mr(a);S='link[rel="'+r+'"][href="'+S+'"]',typeof u=="string"&&(S+='[crossorigin="'+u+'"]'),N0.has(S)||(N0.add(S),r={rel:r,crossOrigin:u,href:a},p.querySelector(S)===null&&(a=p.createElement("link"),Xr(a,"link",r),qt(a),p.head.appendChild(a)))}}function mx(r){oo.D(r),_0("dns-prefetch",r,null)}function gx(r,a){oo.C(r,a),_0("preconnect",r,a)}function yx(r,a,u){oo.L(r,a,u);var p=Hu;if(p&&r&&a){var S='link[rel="preload"][as="'+Mr(a)+'"]';a==="image"&&u&&u.imageSrcSet?(S+='[imagesrcset="'+Mr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(S+='[imagesizes="'+Mr(u.imageSizes)+'"]')):S+='[href="'+Mr(r)+'"]';var _=S;switch(a){case"style":_=Vu(r);break;case"script":_=Ju(r)}Ea.has(_)||(r=x({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),Ea.set(_,r),p.querySelector(S)!==null||a==="style"&&p.querySelector(Kc(_))||a==="script"&&p.querySelector(Xc(_))||(a=p.createElement("link"),Xr(a,"link",r),qt(a),p.head.appendChild(a)))}}function vx(r,a){oo.m(r,a);var u=Hu;if(u&&r){var p=a&&typeof a.as=="string"?a.as:"script",S='link[rel="modulepreload"][as="'+Mr(p)+'"][href="'+Mr(r)+'"]',_=S;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ju(r)}if(!Ea.has(_)&&(r=x({rel:"modulepreload",href:r},a),Ea.set(_,r),u.querySelector(S)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Xc(_)))return}p=u.createElement("link"),Xr(p,"link",r),qt(p),u.head.appendChild(p)}}}function xx(r,a,u){oo.S(r,a,u);var p=Hu;if(p&&r){var S=rn(p).hoistableStyles,_=Vu(r);a=a||"default";var O=S.get(_);if(!O){var re={loading:0,preload:null};if(O=p.querySelector(Kc(_)))re.loading=5;else{r=x({rel:"stylesheet",href:r,"data-precedence":a},u),(u=Ea.get(_))&&Kh(r,u);var we=O=p.createElement("link");qt(we),Xr(we,"link",r),we._p=new Promise(function(qe,$e){we.onload=qe,we.onerror=$e}),we.addEventListener("load",function(){re.loading|=1}),we.addEventListener("error",function(){re.loading|=2}),re.loading|=4,Kd(O,a,p)}O={type:"stylesheet",instance:O,count:1,state:re},S.set(_,O)}}}function bx(r,a){oo.X(r,a);var u=Hu;if(u&&r){var p=rn(u).hoistableScripts,S=Ju(r),_=p.get(S);_||(_=u.querySelector(Xc(S)),_||(r=x({src:r,async:!0},a),(a=Ea.get(S))&&Xh(r,a),_=u.createElement("script"),qt(_),Xr(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(S,_))}}function wx(r,a){oo.M(r,a);var u=Hu;if(u&&r){var p=rn(u).hoistableScripts,S=Ju(r),_=p.get(S);_||(_=u.querySelector(Xc(S)),_||(r=x({src:r,async:!0,type:"module"},a),(a=Ea.get(S))&&Xh(r,a),_=u.createElement("script"),qt(_),Xr(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(S,_))}}function A0(r,a,u,p){var S=(S=xe.current)?$d(S):null;if(!S)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Vu(u.href),u=rn(S).hoistableStyles,p=u.get(a),p||(p={type:"style",instance:null,count:0,state:null},u.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Vu(u.href);var _=rn(S).hoistableStyles,O=_.get(r);if(O||(S=S.ownerDocument||S,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,O),(_=S.querySelector(Kc(r)))&&!_._p&&(O.instance=_,O.state.loading=5),Ea.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ea.set(r,u),_||Sx(S,r,u,O.state))),a&&p===null)throw Error(i(528,""));return O}if(a&&p!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ju(u),u=rn(S).hoistableScripts,p=u.get(a),p||(p={type:"script",instance:null,count:0,state:null},u.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vu(r){return'href="'+Mr(r)+'"'}function Kc(r){return'link[rel="stylesheet"]['+r+"]"}function C0(r){return x({},r,{"data-precedence":r.precedence,precedence:null})}function Sx(r,a,u,p){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=r.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),Xr(a,"link",u),qt(a),r.head.appendChild(a))}function Ju(r){return'[src="'+Mr(r)+'"]'}function Xc(r){return"script[async]"+r}function T0(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var p=r.querySelector('style[data-href~="'+Mr(u.href)+'"]');if(p)return a.instance=p,qt(p),p;var S=x({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),qt(p),Xr(p,"style",S),Kd(p,u.precedence,r),a.instance=p;case"stylesheet":S=Vu(u.href);var _=r.querySelector(Kc(S));if(_)return a.state.loading|=4,a.instance=_,qt(_),_;p=C0(u),(S=Ea.get(S))&&Kh(p,S),_=(r.ownerDocument||r).createElement("link"),qt(_);var O=_;return O._p=new Promise(function(re,we){O.onload=re,O.onerror=we}),Xr(_,"link",p),a.state.loading|=4,Kd(_,u.precedence,r),a.instance=_;case"script":return _=Ju(u.src),(S=r.querySelector(Xc(_)))?(a.instance=S,qt(S),S):(p=u,(S=Ea.get(_))&&(p=x({},u),Xh(p,S)),r=r.ownerDocument||r,S=r.createElement("script"),qt(S),Xr(S,"link",p),r.head.appendChild(S),a.instance=S);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,Kd(p,u.precedence,r));return a.instance}function Kd(r,a,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=p.length?p[p.length-1]:null,_=S,O=0;O<p.length;O++){var re=p[O];if(re.dataset.precedence===a)_=re;else if(_!==S)break}_?_.parentNode.insertBefore(r,_.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function Kh(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Xh(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Xd=null;function E0(r,a,u){if(Xd===null){var p=new Map,S=Xd=new Map;S.set(u,p)}else S=Xd,p=S.get(u),p||(p=new Map,S.set(u,p));if(p.has(r))return p;for(p.set(r,null),u=u.getElementsByTagName(r),S=0;S<u.length;S++){var _=u[S];if(!(_[gi]||_[fn]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var O=_.getAttribute(a)||"";O=r+O;var re=p.get(O);re?re.push(_):p.set(O,[_])}}return p}function I0(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function Nx(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function k0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function _x(r,a,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var S=Vu(p.href),_=a.querySelector(Kc(S));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Zd.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=_,qt(_);return}_=a.ownerDocument||a,p=C0(p),(S=Ea.get(S))&&Kh(p,S),_=_.createElement("link"),qt(_);var O=_;O._p=new Promise(function(re,we){O.onload=re,O.onerror=we}),Xr(_,"link",p),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Zd.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var Zh=0;function Ax(r,a){return r.stylesheets&&r.count===0&&ef(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var p=setTimeout(function(){if(r.stylesheets&&ef(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+a);0<r.imgBytes&&Zh===0&&(Zh=62500*ax());var S=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&ef(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Zh?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(p),clearTimeout(S)}}:null}function Zd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Qd=null;function ef(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Qd=new Map,a.forEach(Cx,r),Qd=null,Zd.call(r))}function Cx(r,a){if(!(a.state.loading&4)){var u=Qd.get(r);if(u)var p=u.get(null);else{u=new Map,Qd.set(r,u);for(var S=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<S.length;_++){var O=S[_];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),p=O)}p&&u.set(null,p)}S=a.instance,O=S.getAttribute("data-precedence"),_=u.get(O)||p,_===p&&u.set(null,S),u.set(O,S),this.count++,p=Zd.bind(this),S.addEventListener("load",p),S.addEventListener("error",p),_?_.parentNode.insertBefore(S,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(S,r.firstChild)),a.state.loading|=4}}var Zc={$$typeof:D,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Tx(r,a,u,p,S,_,O,re,we){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.hiddenUpdates=Zr(null),this.identifierPrefix=p,this.onUncaughtError=S,this.onCaughtError=_,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function L0(r,a,u,p,S,_,O,re,we,qe,$e,tt){return r=new Tx(r,a,u,O,we,qe,$e,tt,re),a=1,_===!0&&(a|=24),_=Or(3,null,null,a),r.current=_,_.stateNode=r,a=Fo(),a.refCount++,r.pooledCache=a,a.refCount++,_.memoizedState={element:p,isDehydrated:u,cache:a},hn(_),r}function R0(r){return r?(r=Ar,r):Ar}function M0(r,a,u,p,S,_){S=R0(S),p.context===null?p.context=S:p.pendingContext=S,p=It(a),p.payload={element:u},_=_===void 0?null:_,_!==null&&(p.callback=_),u=yn(r,p,a),u!==null&&($i(u,r,a),yr(u,r,a))}function j0(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Qh(r,a){j0(r,a),(r=r.alternate)&&j0(r,a)}function D0(r){if(r.tag===13||r.tag===31){var a=Oa(r,67108864);a!==null&&$i(a,r,67108864),Qh(r,67108864)}}function P0(r){if(r.tag===13||r.tag===31){var a=da();a=mn(a);var u=Oa(r,a);u!==null&&$i(u,r,a),Qh(r,a)}}var tf=!0;function Ex(r,a,u,p){var S=ee.T;ee.T=null;var _=ae.p;try{ae.p=2,ep(r,a,u,p)}finally{ae.p=_,ee.T=S}}function Ix(r,a,u,p){var S=ee.T;ee.T=null;var _=ae.p;try{ae.p=8,ep(r,a,u,p)}finally{ae.p=_,ee.T=S}}function ep(r,a,u,p){if(tf){var S=tp(p);if(S===null)Fh(r,a,p,nf,u),O0(r,p);else if(Lx(S,r,a,u,p))p.stopPropagation();else if(O0(r,p),a&4&&-1<kx.indexOf(r)){for(;S!==null;){var _=rt(S);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var O=Yt(_.pendingLanes);if(O!==0){var re=_;for(re.pendingLanes|=2,re.entangledLanes|=2;O;){var we=1<<31-Ct(O);re.entanglements[1]|=we,O&=~we}Is(_),(pn&6)===0&&(Od=Oe()+500,Jc(0))}}break;case 31:case 13:re=Oa(_,2),re!==null&&$i(re,_,2),Fd(),Qh(_,2)}if(_=tp(p),_===null&&Fh(r,a,p,nf,u),_===S)break;S=_}S!==null&&p.stopPropagation()}else Fh(r,a,p,null,u)}}function tp(r){return r=_o(r),np(r)}var nf=null;function np(r){if(nf=null,r=ni(r),r!==null){var a=o(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=c(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return nf=r,null}function U0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case at:return 2;case dt:return 8;case pt:case mt:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var rp=!1,Qo=null,el=null,tl=null,Qc=new Map,ed=new Map,nl=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(r,a){switch(r){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":Qc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(a.pointerId)}}function td(r,a,u,p,S,_){return r===null||r.nativeEvent!==_?(r={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:_,targetContainers:[S]},a!==null&&(a=rt(a),a!==null&&D0(a)),r):(r.eventSystemFlags|=p,a=r.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),r)}function Lx(r,a,u,p,S){switch(a){case"focusin":return Qo=td(Qo,r,a,u,p,S),!0;case"dragenter":return el=td(el,r,a,u,p,S),!0;case"mouseover":return tl=td(tl,r,a,u,p,S),!0;case"pointerover":var _=S.pointerId;return Qc.set(_,td(Qc.get(_)||null,r,a,u,p,S)),!0;case"gotpointercapture":return _=S.pointerId,ed.set(_,td(ed.get(_)||null,r,a,u,p,S)),!0}return!1}function B0(r){var a=ni(r.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,Qi(r.priority,function(){P0(u)});return}}else if(a===31){if(a=c(u),a!==null){r.blockedOn=a,Qi(r.priority,function(){P0(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=tp(r.nativeEvent);if(u===null){u=r.nativeEvent;var p=new u.constructor(u.type,u);bl=p,u.target.dispatchEvent(p),bl=null}else return a=rt(u),a!==null&&D0(a),r.blockedOn=u,!1;a.shift()}return!0}function F0(r,a,u){rf(r)&&u.delete(a)}function Rx(){rp=!1,Qo!==null&&rf(Qo)&&(Qo=null),el!==null&&rf(el)&&(el=null),tl!==null&&rf(tl)&&(tl=null),Qc.forEach(F0),ed.forEach(F0)}function af(r,a){r.blockedOn===a&&(r.blockedOn=null,rp||(rp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Rx)))}var sf=null;function z0(r){sf!==r&&(sf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sf===r&&(sf=null);for(var a=0;a<r.length;a+=3){var u=r[a],p=r[a+1],S=r[a+2];if(typeof p!="function"){if(np(p||u)===null)continue;break}var _=rt(u);_!==null&&(r.splice(a,3),a-=3,th(_,{pending:!0,data:S,method:u.method,action:p},p,S))}}))}function Yu(r){function a(we){return af(we,r)}Qo!==null&&af(Qo,r),el!==null&&af(el,r),tl!==null&&af(tl,r),Qc.forEach(a),ed.forEach(a);for(var u=0;u<nl.length;u++){var p=nl[u];p.blockedOn===r&&(p.blockedOn=null)}for(;0<nl.length&&(u=nl[0],u.blockedOn===null);)B0(u),u.blockedOn===null&&nl.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var S=u[p],_=u[p+1],O=S[wn]||null;if(typeof _=="function")O||z0(u);else if(O){var re=null;if(_&&_.hasAttribute("formAction")){if(S=_,O=_[wn]||null)re=O.formAction;else if(np(S)!==null)continue}else re=O.action;typeof re=="function"?u[p+1]=re:(u.splice(p,3),p-=3),z0(u)}}}function q0(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(O){return S=O})},focusReset:"manual",scroll:"manual"})}function a(){S!==null&&(S(),S=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,S=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),S!==null&&(S(),S=null)}}}function ip(r){this._internalRoot=r}of.prototype.render=ip.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,p=da();M0(u,p,r,a,null,null)},of.prototype.unmount=ip.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;M0(r.current,2,null,r,null,null),Fd(),a[mr]=null}};function of(r){this._internalRoot=r}of.prototype.unstable_scheduleHydration=function(r){if(r){var a=Nr();r={blockedOn:null,target:r,priority:a};for(var u=0;u<nl.length&&a!==0&&a<nl[u].priority;u++);nl.splice(u,0,r),u===0&&B0(r)}};var G0=e.version;if(G0!=="19.2.0")throw Error(i(527,G0,"19.2.0"));ae.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var Mx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{gt=lf.inject(Mx),on=lf}catch{}}return rd.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,p="",S=Km,_=Xm,O=Zm;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(S=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=L0(r,1,!1,null,null,u,p,null,S,_,O,q0),r[mr]=a.current,Bh(r),new ip(a)},rd.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var p=!1,S="",_=Km,O=Xm,re=Zm,we=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(re=u.onRecoverableError),u.formState!==void 0&&(we=u.formState)),a=L0(r,1,!0,a,u??null,p,S,we,_,O,re,q0),a.context=R0(null),u=a.current,p=da(),p=mn(p),S=It(p),S.callback=null,yn(u,S,p),u=p,a.current.lanes=u,Lr(a,u),Is(a),r[mr]=a.current,Bh(r),new of(a)},rd.version="19.2.0",rd}var Q0;function qx(){if(Q0)return op.exports;Q0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),op.exports=zx(),op.exports}var Gx=qx();const Hx=Xp(Gx);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e2="popstate";function Vx(t={}){function e(s,o){let{pathname:l="/",search:c="",hash:d=""}=Ql(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),_p("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=s.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof o=="string"?o:dd(o))}function i(s,o){fa(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Yx(e,n,i,t)}function Kn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jx(){return Math.random().toString(36).substring(2,10)}function t2(t,e){return{usr:t.state,key:t.key,idx:e}}function _p(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ql(e):e,state:n,key:e&&e.key||i||Jx()}}function dd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Yx(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,c="POP",d=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function x(){c="POP";let E=m(),C=E==null?null:E-h;h=E,d&&d({action:c,location:A.location,delta:C})}function w(E,C){c="PUSH";let R=_p(A.location,E,C);n&&n(R,E),h=m()+1;let D=t2(R,h),z=A.createHref(R);try{l.pushState(D,"",z)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(z)}o&&d&&d({action:c,location:A.location,delta:1})}function v(E,C){c="REPLACE";let R=_p(A.location,E,C);n&&n(R,E),h=m();let D=t2(R,h),z=A.createHref(R);l.replaceState(D,"",z),o&&d&&d({action:c,location:A.location,delta:0})}function I(E){return Wx(E)}let A={get action(){return c},get location(){return t(s,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(e2,x),d=E,()=>{s.removeEventListener(e2,x),d=null}},createHref(E){return e(s,E)},createURL:I,encodeLocation(E){let C=I(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:v,go(E){return l.go(E)}};return A}function Wx(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kn(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:dd(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function oy(t,e,n="/"){return $x(t,e,n,!1)}function $x(t,e,n,i){let s=typeof e=="string"?Ql(e):e,o=co(s.pathname||"/",n);if(o==null)return null;let l=ly(t);Kx(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=o5(o);c=a5(l[d],h,i)}return c}function ly(t,e=[],n=[],i="",s=!1){let o=(l,c,d=s,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&d)return;Kn(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let x=uo([i,m.relativePath]),w=n.concat(m);l.children&&l.children.length>0&&(Kn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),ly(l.children,e,w,x,d)),!(l.path==null&&!l.index)&&e.push({path:x,score:r5(x,l.index),routesMeta:w})};return t.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let h of uy(l.path))o(l,c,!0,h)}),e}function uy(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=uy(i.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Kx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:i5(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Xx=/^:[\w-]+$/,Zx=3,Qx=2,e5=1,t5=10,n5=-2,n2=t=>t==="*";function r5(t,e){let n=t.split("/"),i=n.length;return n.some(n2)&&(i+=n5),e&&(i+=Qx),n.filter(s=>!n2(s)).reduce((s,o)=>s+(Xx.test(o)?Zx:o===""?e5:t5),i)}function i5(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function a5(t,e,n=!1){let{routesMeta:i}=t,s={},o="/",l=[];for(let c=0;c<i.length;++c){let d=i[c],h=c===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",x=Af({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),w=d.route;if(!x&&h&&n&&!i[i.length-1].route.index&&(x=Af({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!x)return null;Object.assign(s,x.params),l.push({params:s,pathname:uo([o,x.pathname]),pathnameBase:f5(uo([o,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(o=uo([o,x.pathnameBase]))}return l}function Af(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=s5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((h,{paramName:m,isOptional:x},w)=>{if(m==="*"){let I=c[w]||"";l=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const v=c[w];return x&&!v?h[m]=void 0:h[m]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function s5(t,e=!1,n=!0){fa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function o5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function co(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var l5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u5=t=>l5.test(t);function c5(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Ql(t):t,o;if(n)if(u5(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),fa(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?o=r2(n.substring(1),"/"):o=r2(n,e)}else o=e;return{pathname:o,search:h5(i),hash:p5(s)}}function r2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function d5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qp(t){let e=d5(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function em(t,e,n,i=!1){let s;typeof t=="string"?s=Ql(t):(s={...t},Kn(!s.pathname||!s.pathname.includes("?"),dp("?","pathname","search",s)),Kn(!s.pathname||!s.pathname.includes("#"),dp("#","pathname","hash",s)),Kn(!s.search||!s.search.includes("#"),dp("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=n;else{let x=e.length-1;if(!i&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),x-=1;s.pathname=w.join("/")}c=x>=0?e[x]:"/"}let d=c5(s,c),h=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var uo=t=>t.join("/").replace(/\/\/+/g,"/"),f5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cy=["POST","PUT","PATCH","DELETE"];new Set(cy);var g5=["GET",...cy];new Set(g5);var dc=ue.createContext(null);dc.displayName="DataRouter";var jf=ue.createContext(null);jf.displayName="DataRouterState";ue.createContext(!1);var dy=ue.createContext({isTransitioning:!1});dy.displayName="ViewTransition";var y5=ue.createContext(new Map);y5.displayName="Fetchers";var v5=ue.createContext(null);v5.displayName="Await";var Xa=ue.createContext(null);Xa.displayName="Navigation";var md=ue.createContext(null);md.displayName="Location";var Za=ue.createContext({outlet:null,matches:[],isDataRoute:!1});Za.displayName="Route";var tm=ue.createContext(null);tm.displayName="RouteError";function x5(t,{relative:e}={}){Kn(fc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=ue.useContext(Xa),{hash:s,pathname:o,search:l}=yd(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:uo([n,o])),i.createHref({pathname:c,search:l,hash:s})}function fc(){return ue.useContext(md)!=null}function fl(){return Kn(fc(),"useLocation() may be used only in the context of a <Router> component."),ue.useContext(md).location}var fy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hy(t){ue.useContext(Xa).static||ue.useLayoutEffect(t)}function gd(){let{isDataRoute:t}=ue.useContext(Za);return t?M5():b5()}function b5(){Kn(fc(),"useNavigate() may be used only in the context of a <Router> component.");let t=ue.useContext(dc),{basename:e,navigator:n}=ue.useContext(Xa),{matches:i}=ue.useContext(Za),{pathname:s}=fl(),o=JSON.stringify(Qp(i)),l=ue.useRef(!1);return hy(()=>{l.current=!0}),ue.useCallback((d,h={})=>{if(fa(l.current,fy),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=em(d,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:uo([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,o,s,t])}ue.createContext(null);function w5(){let{matches:t}=ue.useContext(Za),e=t[t.length-1];return e?e.params:{}}function yd(t,{relative:e}={}){let{matches:n}=ue.useContext(Za),{pathname:i}=fl(),s=JSON.stringify(Qp(n));return ue.useMemo(()=>em(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function S5(t,e){return py(t,e)}function py(t,e,n,i,s){var R;Kn(fc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=ue.useContext(Xa),{matches:l}=ue.useContext(Za),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",x=c&&c.route;{let D=x&&x.path||"";my(h,!x||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let w=fl(),v;if(e){let D=typeof e=="string"?Ql(e):e;Kn(m==="/"||((R=D.pathname)==null?void 0:R.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${D.pathname}" was given in the \`location\` prop.`),v=D}else v=w;let I=v.pathname||"/",A=I;if(m!=="/"){let D=m.replace(/^\//,"").split("/");A="/"+I.replace(/^\//,"").split("/").slice(D.length).join("/")}let E=oy(t,{pathname:A});fa(x||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),fa(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=T5(E&&E.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:uo([m,o.encodeLocation?o.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:uo([m,o.encodeLocation?o.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),l,n,i,s);return e&&C?ue.createElement(md.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function N5(){let t=R5(),e=m5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=ue.createElement(ue.Fragment,null,ue.createElement("p",null," Hey developer "),ue.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ue.createElement("code",{style:o},"ErrorBoundary")," or"," ",ue.createElement("code",{style:o},"errorElement")," prop on your route.")),ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),n?ue.createElement("pre",{style:s},n):null,l)}var _5=ue.createElement(N5,null),A5=class extends ue.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?ue.createElement(Za.Provider,{value:this.props.routeContext},ue.createElement(tm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function C5({routeContext:t,match:e,children:n}){let i=ue.useContext(dc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),ue.createElement(Za.Provider,{value:t},n)}function T5(t,e=[],n=null,i=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n==null?void 0:n.errors;if(l!=null){let m=o.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);Kn(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n)for(let m=0;m<o.length;m++){let x=o[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=m),x.route.id){let{loaderData:w,errors:v}=n,I=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!v||v[x.route.id]===void 0);if(x.route.lazy||I){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=n&&i?(m,x)=>{var w,v;i(m,{location:n.location,params:((v=(w=n.matches)==null?void 0:w[0])==null?void 0:v.params)??{},errorInfo:x})}:void 0;return o.reduceRight((m,x,w)=>{let v,I=!1,A=null,E=null;n&&(v=l&&x.route.id?l[x.route.id]:void 0,A=x.route.errorElement||_5,c&&(d<0&&w===0?(my("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,E=null):d===w&&(I=!0,E=x.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,w+1)),R=()=>{let D;return v?D=A:I?D=E:x.route.Component?D=ue.createElement(x.route.Component,null):x.route.element?D=x.route.element:D=m,ue.createElement(C5,{match:x,routeContext:{outlet:m,matches:C,isDataRoute:n!=null},children:D})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?ue.createElement(A5,{location:n.location,revalidation:n.revalidation,component:A,error:v,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):R()},null)}function nm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E5(t){let e=ue.useContext(dc);return Kn(e,nm(t)),e}function I5(t){let e=ue.useContext(jf);return Kn(e,nm(t)),e}function k5(t){let e=ue.useContext(Za);return Kn(e,nm(t)),e}function rm(t){let e=k5(t),n=e.matches[e.matches.length-1];return Kn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function L5(){return rm("useRouteId")}function R5(){var i;let t=ue.useContext(tm),e=I5("useRouteError"),n=rm("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function M5(){let{router:t}=E5("useNavigate"),e=rm("useNavigate"),n=ue.useRef(!1);return hy(()=>{n.current=!0}),ue.useCallback(async(s,o={})=>{fa(n.current,fy),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var i2={};function my(t,e,n){!e&&!i2[t]&&(i2[t]=!0,fa(!1,n))}ue.memo(j5);function j5({routes:t,future:e,state:n,unstable_onError:i}){return py(t,void 0,n,i,e)}function D5({to:t,replace:e,state:n,relative:i}){Kn(fc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=ue.useContext(Xa);fa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=ue.useContext(Za),{pathname:l}=fl(),c=gd(),d=em(t,Qp(o),l,i==="path"),h=JSON.stringify(d);return ue.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:i})},[c,h,i,e,n]),null}function ld(t){Kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function P5({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:o=!1}){Kn(!fc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=ue.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=Ql(n));let{pathname:d="/",search:h="",hash:m="",state:x=null,key:w="default"}=n,v=ue.useMemo(()=>{let I=co(d,l);return I==null?null:{location:{pathname:I,search:h,hash:m,state:x,key:w},navigationType:i}},[l,d,h,m,x,w,i]);return fa(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:ue.createElement(Xa.Provider,{value:c},ue.createElement(md.Provider,{children:e,value:v}))}function U5({children:t,location:e}){return S5(Ap(t),e)}function Ap(t,e=[]){let n=[];return ue.Children.forEach(t,(i,s)=>{if(!ue.isValidElement(i))return;let o=[...e,s];if(i.type===ue.Fragment){n.push.apply(n,Ap(i.props.children,o));return}Kn(i.type===ld,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ap(i.props.children,o)),n.push(l)}),n}var gf="get",yf="application/x-www-form-urlencoded";function Df(t){return t!=null&&typeof t.tagName=="string"}function O5(t){return Df(t)&&t.tagName.toLowerCase()==="button"}function B5(t){return Df(t)&&t.tagName.toLowerCase()==="form"}function F5(t){return Df(t)&&t.tagName.toLowerCase()==="input"}function z5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function q5(t,e){return t.button===0&&(!e||e==="_self")&&!z5(t)}var cf=null;function G5(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var H5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(t){return t!=null&&!H5.has(t)?(fa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yf}"`),null):t}function V5(t,e){let n,i,s,o,l;if(B5(t)){let c=t.getAttribute("action");i=c?co(c,e):null,n=t.getAttribute("method")||gf,s=fp(t.getAttribute("enctype"))||yf,o=new FormData(t)}else if(O5(t)||F5(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(i=d?co(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||gf,s=fp(t.getAttribute("formenctype"))||fp(c.getAttribute("enctype"))||yf,o=new FormData(c,t),!G5()){let{name:h,type:m,value:x}=t;if(m==="image"){let w=h?`${h}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else h&&o.append(h,x)}}else{if(Df(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gf,i=null,s=yf,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function im(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function J5(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&co(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Y5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function W5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $5(t,e,n){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await Y5(o,n);return l.links?l.links():[]}return[]}));return Q5(i.flat(1).filter(W5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function a2(t,e,n,i,s,o){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,c=(d,h)=>{var m;return n[h].pathname!==d.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||c(d,h)):o==="data"?e.filter((d,h)=>{var x;let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((x=n[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function K5(t,e,{includeHydrateFallback:n}={}){return X5(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function X5(t){return[...new Set(t)]}function Z5(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Q5(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(Z5(s));return n.has(o)||(n.add(o),i.push({key:o,link:s})),i},[])}function gy(){let t=ue.useContext(dc);return im(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function eb(){let t=ue.useContext(jf);return im(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var am=ue.createContext(void 0);am.displayName="FrameworkContext";function yy(){let t=ue.useContext(am);return im(t,"You must render this element inside a <HydratedRouter> element"),t}function tb(t,e){let n=ue.useContext(am),[i,s]=ue.useState(!1),[o,l]=ue.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:x}=e,w=ue.useRef(null);ue.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let A=C=>{C.forEach(R=>{l(R.isIntersecting)})},E=new IntersectionObserver(A,{threshold:.5});return w.current&&E.observe(w.current),()=>{E.disconnect()}}},[t]),ue.useEffect(()=>{if(i){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[i]);let v=()=>{s(!0)},I=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,w,{}]:[o,w,{onFocus:id(c,v),onBlur:id(d,I),onMouseEnter:id(h,v),onMouseLeave:id(m,I),onTouchStart:id(x,v)}]:[!1,w,{}]}function id(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function nb({page:t,...e}){let{router:n}=gy(),i=ue.useMemo(()=>oy(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?ue.createElement(ib,{page:t,matches:i,...e}):null}function rb(t){let{manifest:e,routeModules:n}=yy(),[i,s]=ue.useState([]);return ue.useEffect(()=>{let o=!1;return $5(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),i}function ib({page:t,matches:e,...n}){let i=fl(),{manifest:s,routeModules:o}=yy(),{basename:l}=gy(),{loaderData:c,matches:d}=eb(),h=ue.useMemo(()=>a2(t,e,d,s,i,"data"),[t,e,d,s,i]),m=ue.useMemo(()=>a2(t,e,d,s,i,"assets"),[t,e,d,s,i]),x=ue.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let I=new Set,A=!1;if(e.forEach(C=>{var D;let R=s.routes[C.route.id];!R||!R.hasLoader||(!h.some(z=>z.route.id===C.route.id)&&C.route.id in c&&((D=o[C.route.id])!=null&&D.shouldRevalidate)||R.hasClientLoader?A=!0:I.add(C.route.id))}),I.size===0)return[];let E=J5(t,l,"data");return A&&I.size>0&&E.searchParams.set("_routes",e.filter(C=>I.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[l,c,i,s,h,e,t,o]),w=ue.useMemo(()=>K5(m,s),[m,s]),v=rb(m);return ue.createElement(ue.Fragment,null,x.map(I=>ue.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),w.map(I=>ue.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),v.map(({key:I,link:A})=>ue.createElement("link",{key:I,nonce:n.nonce,...A})))}function ab(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vy&&(window.__reactRouterVersion="7.9.6")}catch{}function sb({basename:t,children:e,window:n}){let i=ue.useRef();i.current==null&&(i.current=Vx({window:n,v5Compat:!0}));let s=i.current,[o,l]=ue.useState({action:s.action,location:s.location}),c=ue.useCallback(d=>{ue.startTransition(()=>l(d))},[l]);return ue.useLayoutEffect(()=>s.listen(c),[s,c]),ue.createElement(P5,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pf=ue.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:o,replace:l,state:c,target:d,to:h,preventScrollReset:m,viewTransition:x,...w},v){let{basename:I}=ue.useContext(Xa),A=typeof h=="string"&&xy.test(h),E,C=!1;if(typeof h=="string"&&A&&(E=h,vy))try{let Q=new URL(window.location.href),ne=h.startsWith("//")?new URL(Q.protocol+h):new URL(h),F=co(ne.pathname,I);ne.origin===Q.origin&&F!=null?h=F+ne.search+ne.hash:C=!0}catch{fa(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=x5(h,{relative:s}),[D,z,B]=tb(i,w),se=cb(h,{replace:l,state:c,target:d,preventScrollReset:m,relative:s,viewTransition:x});function q(Q){e&&e(Q),Q.defaultPrevented||se(Q)}let G=ue.createElement("a",{...w,...B,href:E||R,onClick:C||o?e:q,ref:ab(v,z),target:d,"data-discover":!A&&n==="render"?"true":void 0});return D&&!A?ue.createElement(ue.Fragment,null,G,ue.createElement(nb,{page:R})):G});Pf.displayName="Link";var ob=ue.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:l,viewTransition:c,children:d,...h},m){let x=yd(l,{relative:h.relative}),w=fl(),v=ue.useContext(jf),{navigator:I,basename:A}=ue.useContext(Xa),E=v!=null&&mb(x)&&c===!0,C=I.encodeLocation?I.encodeLocation(x).pathname:x.pathname,R=w.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(R=R.toLowerCase(),D=D?D.toLowerCase():null,C=C.toLowerCase()),D&&A&&(D=co(D,A)||D);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let B=R===C||!s&&R.startsWith(C)&&R.charAt(z)==="/",se=D!=null&&(D===C||!s&&D.startsWith(C)&&D.charAt(C.length)==="/"),q={isActive:B,isPending:se,isTransitioning:E},G=B?e:void 0,Q;typeof i=="function"?Q=i(q):Q=[i,B?"active":null,se?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ne=typeof o=="function"?o(q):o;return ue.createElement(Pf,{...h,"aria-current":G,className:Q,ref:m,style:ne,to:l,viewTransition:c},typeof d=="function"?d(q):d)});ob.displayName="NavLink";var lb=ue.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:o,method:l=gf,action:c,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:x,...w},v)=>{let I=hb(),A=pb(c,{relative:h}),E=l.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&xy.test(c),R=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let z=D.nativeEvent.submitter,B=(z==null?void 0:z.getAttribute("formmethod"))||l;I(z||D.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:s,state:o,relative:h,preventScrollReset:m,viewTransition:x})};return ue.createElement("form",{ref:v,method:E,action:A,onSubmit:i?d:R,...w,"data-discover":!C&&t==="render"?"true":void 0})});lb.displayName="Form";function ub(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function by(t){let e=ue.useContext(dc);return Kn(e,ub(t)),e}function cb(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}={}){let c=gd(),d=fl(),h=yd(t,{relative:o});return ue.useCallback(m=>{if(q5(m,e)){m.preventDefault();let x=n!==void 0?n:dd(d)===dd(h);c(t,{replace:x,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[d,c,h,n,i,e,t,s,o,l])}var db=0,fb=()=>`__${String(++db)}__`;function hb(){let{router:t}=by("useSubmit"),{basename:e}=ue.useContext(Xa),n=L5();return ue.useCallback(async(i,s={})=>{let{action:o,method:l,encType:c,formData:d,body:h}=V5(i,e);if(s.navigate===!1){let m=s.fetcherKey||fb();await t.fetch(m,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function pb(t,{relative:e}={}){let{basename:n}=ue.useContext(Xa),i=ue.useContext(Za);Kn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...yd(t||".",{relative:e})},l=fl();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(m=>m==="")){c.delete("index"),d.filter(x=>x).forEach(x=>c.append("index",x));let m=c.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:uo([n,o.pathname])),dd(o)}function mb(t,{relative:e}={}){let n=ue.useContext(dy);Kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=by("useViewTransitionState"),s=yd(t,{relative:e});if(!n.isTransitioning)return!1;let o=co(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=co(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Af(s.pathname,l)!=null||Af(s.pathname,o)!=null}var gb=sy();const wy=ue.createContext(void 0),yb=({children:t})=>{const[e,n]=ue.useState(null),[i,s]=ue.useState(null),[o,l]=ue.useState(!0);ue.useEffect(()=>{const h=localStorage.getItem("token"),m=localStorage.getItem("user");h&&m&&(s(h),n(JSON.parse(m))),l(!1)},[]);const c=(h,m)=>{s(h),n(m),localStorage.setItem("token",h),localStorage.setItem("user",JSON.stringify(m))},d=()=>{s(null),n(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return f.jsx(wy.Provider,{value:{user:e,token:i,login:c,logout:d,isAuthenticated:!!e,isLoading:o},children:t})},Uf=()=>{const t=ue.useContext(wy);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function df(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hp={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var s2;function vb(){return s2||(s2=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(i,s,o){function l(h,m){if(!s[h]){if(!i[h]){var x=typeof df=="function"&&df;if(!m&&x)return x(h,!0);if(c)return c(h,!0);var w=new Error("Cannot find module '"+h+"'");throw w.code="MODULE_NOT_FOUND",w}var v=s[h]={exports:{}};i[h][0].call(v.exports,function(I){var A=i[h][1][I];return l(A||I)},v,v.exports,n,i,s,o)}return s[h].exports}for(var c=typeof df=="function"&&df,d=0;d<o.length;d++)l(o[d]);return l})({1:[function(n,i,s){var o=n("./utils"),l=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(d){for(var h,m,x,w,v,I,A,E=[],C=0,R=d.length,D=R,z=o.getTypeOf(d)!=="string";C<d.length;)D=R-C,x=z?(h=d[C++],m=C<R?d[C++]:0,C<R?d[C++]:0):(h=d.charCodeAt(C++),m=C<R?d.charCodeAt(C++):0,C<R?d.charCodeAt(C++):0),w=h>>2,v=(3&h)<<4|m>>4,I=1<D?(15&m)<<2|x>>6:64,A=2<D?63&x:64,E.push(c.charAt(w)+c.charAt(v)+c.charAt(I)+c.charAt(A));return E.join("")},s.decode=function(d){var h,m,x,w,v,I,A=0,E=0,C="data:";if(d.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var R,D=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&D--,d.charAt(d.length-2)===c.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=l.uint8array?new Uint8Array(0|D):new Array(0|D);A<d.length;)h=c.indexOf(d.charAt(A++))<<2|(w=c.indexOf(d.charAt(A++)))>>4,m=(15&w)<<4|(v=c.indexOf(d.charAt(A++)))>>2,x=(3&v)<<6|(I=c.indexOf(d.charAt(A++))),R[E++]=h,v!==64&&(R[E++]=m),I!==64&&(R[E++]=x);return R}},{"./support":30,"./utils":32}],2:[function(n,i,s){var o=n("./external"),l=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function h(m,x,w,v,I){this.compressedSize=m,this.uncompressedSize=x,this.crc32=w,this.compression=v,this.compressedContent=I}h.prototype={getContentWorker:function(){var m=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),x=this;return m.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,x,w){return m.pipe(new c).pipe(new d("uncompressedSize")).pipe(x.compressWorker(w)).pipe(new d("compressedSize")).withStreamInfo("compression",x)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,s){var o=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,s){var o=n("./utils"),l=(function(){for(var c,d=[],h=0;h<256;h++){c=h;for(var m=0;m<8;m++)c=1&c?3988292384^c>>>1:c>>>1;d[h]=c}return d})();i.exports=function(c,d){return c!==void 0&&c.length?o.getTypeOf(c)!=="string"?(function(h,m,x,w){var v=l,I=w+x;h^=-1;for(var A=w;A<I;A++)h=h>>>8^v[255&(h^m[A])];return-1^h})(0|d,c,c.length,0):(function(h,m,x,w){var v=l,I=w+x;h^=-1;for(var A=w;A<I;A++)h=h>>>8^v[255&(h^m.charCodeAt(A))];return-1^h})(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(n,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,i,s){var o=null;o=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:o}},{lie:37}],7:[function(n,i,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),c=n("./utils"),d=n("./stream/GenericWorker"),h=o?"uint8array":"array";function m(x,w){d.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=w,this.meta={}}s.magic="\b\0",c.inherits(m,d),m.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(h,x.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(w){x.push({data:w,meta:x.meta})}},s.compressWorker=function(x){return new m("Deflate",x)},s.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,s){function o(v,I){var A,E="";for(A=0;A<I;A++)E+=String.fromCharCode(255&v),v>>>=8;return E}function l(v,I,A,E,C,R){var D,z,B=v.file,se=v.compression,q=R!==h.utf8encode,G=c.transformTo("string",R(B.name)),Q=c.transformTo("string",h.utf8encode(B.name)),ne=B.comment,F=c.transformTo("string",R(ne)),j=c.transformTo("string",h.utf8encode(ne)),W=Q.length!==B.name.length,M=j.length!==ne.length,ce="",ee="",ae="",me=B.dir,pe=B.date,ve={crc32:0,compressedSize:0,uncompressedSize:0};I&&!A||(ve.crc32=v.crc32,ve.compressedSize=v.compressedSize,ve.uncompressedSize=v.uncompressedSize);var H=0;I&&(H|=8),q||!W&&!M||(H|=2048);var L=0,J=0;me&&(L|=16),C==="UNIX"?(J=798,L|=(function(ie,xe){var Ae=ie;return ie||(Ae=xe?16893:33204),(65535&Ae)<<16})(B.unixPermissions,me)):(J=20,L|=(function(ie){return 63&(ie||0)})(B.dosPermissions)),D=pe.getUTCHours(),D<<=6,D|=pe.getUTCMinutes(),D<<=5,D|=pe.getUTCSeconds()/2,z=pe.getUTCFullYear()-1980,z<<=4,z|=pe.getUTCMonth()+1,z<<=5,z|=pe.getUTCDate(),W&&(ee=o(1,1)+o(m(G),4)+Q,ce+="up"+o(ee.length,2)+ee),M&&(ae=o(1,1)+o(m(F),4)+j,ce+="uc"+o(ae.length,2)+ae);var K="";return K+=`
\0`,K+=o(H,2),K+=se.magic,K+=o(D,2),K+=o(z,2),K+=o(ve.crc32,4),K+=o(ve.compressedSize,4),K+=o(ve.uncompressedSize,4),K+=o(G.length,2),K+=o(ce.length,2),{fileRecord:x.LOCAL_FILE_HEADER+K+G+ce,dirRecord:x.CENTRAL_FILE_HEADER+o(J,2)+K+o(F.length,2)+"\0\0\0\0"+o(L,4)+o(E,4)+G+ce+F}}var c=n("../utils"),d=n("../stream/GenericWorker"),h=n("../utf8"),m=n("../crc32"),x=n("../signature");function w(v,I,A,E){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=I,this.zipPlatform=A,this.encodeFileName=E,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(w,d),w.prototype.push=function(v){var I=v.meta.percent||0,A=this.entriesCount,E=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:A?(I+100*(A-E-1))/A:100}}))},w.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var I=this.streamFiles&&!v.file.dir;if(I){var A=l(v,I,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:A.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(v){this.accumulate=!1;var I=this.streamFiles&&!v.file.dir,A=l(v,I,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(A.dirRecord),I)this.push({data:(function(E){return x.DATA_DESCRIPTOR+o(E.crc32,4)+o(E.compressedSize,4)+o(E.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:A.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var v=this.bytesWritten,I=0;I<this.dirRecords.length;I++)this.push({data:this.dirRecords[I],meta:{percent:100}});var A=this.bytesWritten-v,E=(function(C,R,D,z,B){var se=c.transformTo("string",B(z));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(C,2)+o(C,2)+o(R,4)+o(D,4)+o(se.length,2)+se})(this.dirRecords.length,A,v,this.zipComment,this.encodeFileName);this.push({data:E,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(v){this._sources.push(v);var I=this;return v.on("data",function(A){I.processChunk(A)}),v.on("end",function(){I.closedSource(I.previous.streamInfo),I._sources.length?I.prepareNextSource():I.end()}),v.on("error",function(A){I.error(A)}),this},w.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(v){var I=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var A=0;A<I.length;A++)try{I[A].error(v)}catch{}return!0},w.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,I=0;I<v.length;I++)v[I].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,s){var o=n("../compressions"),l=n("./ZipFileWorker");s.generateWorker=function(c,d,h){var m=new l(d.streamFiles,h,d.platform,d.encodeFileName),x=0;try{c.forEach(function(w,v){x++;var I=(function(R,D){var z=R||D,B=o[z];if(!B)throw new Error(z+" is not a valid compression method !");return B})(v.options.compression,d.compression),A=v.options.compressionOptions||d.compressionOptions||{},E=v.dir,C=v.date;v._compressWorker(I,A).withStreamInfo("file",{name:w,dir:E,date:C,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(m)}),m.entriesCount=x}catch(w){m.error(w)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(l,c){return new o().loadAsync(l,c)},o.external=n("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,s){var o=n("./utils"),l=n("./external"),c=n("./utf8"),d=n("./zipEntries"),h=n("./stream/Crc32Probe"),m=n("./nodejsUtils");function x(w){return new l.Promise(function(v,I){var A=w.decompressed.getContentWorker().pipe(new h);A.on("error",function(E){I(E)}).on("end",function(){A.streamInfo.crc32!==w.decompressed.crc32?I(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(w,v){var I=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),m.isNode&&m.isStream(w)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",w,!0,v.optimizedBinaryString,v.base64).then(function(A){var E=new d(v);return E.load(A),E}).then(function(A){var E=[l.Promise.resolve(A)],C=A.files;if(v.checkCRC32)for(var R=0;R<C.length;R++)E.push(x(C[R]));return l.Promise.all(E)}).then(function(A){for(var E=A.shift(),C=E.files,R=0;R<C.length;R++){var D=C[R],z=D.fileNameStr,B=o.resolve(D.fileNameStr);I.file(B,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:v.createFolders}),D.dir||(I.file(B).unsafeOriginalName=z)}return E.zipComment.length&&(I.comment=E.zipComment),I})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,s){var o=n("../utils"),l=n("../stream/GenericWorker");function c(d,h){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(c,l),c.prototype._bindStream=function(d){var h=this;(this._stream=d).pause(),d.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,s){var o=n("readable-stream").Readable;function l(c,d,h){o.call(this,d),this._helper=c;var m=this;c.on("data",function(x,w){m.push(x)||m._helper.pause(),h&&h(w)}).on("error",function(x){m.emit("error",x)}).on("end",function(){m.push(null)})}n("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,i,s){function o(B,se,q){var G,Q=c.getTypeOf(se),ne=c.extend(q||{},m);ne.date=ne.date||new Date,ne.compression!==null&&(ne.compression=ne.compression.toUpperCase()),typeof ne.unixPermissions=="string"&&(ne.unixPermissions=parseInt(ne.unixPermissions,8)),ne.unixPermissions&&16384&ne.unixPermissions&&(ne.dir=!0),ne.dosPermissions&&16&ne.dosPermissions&&(ne.dir=!0),ne.dir&&(B=C(B)),ne.createFolders&&(G=E(B))&&R.call(this,G,!0);var F=Q==="string"&&ne.binary===!1&&ne.base64===!1;q&&q.binary!==void 0||(ne.binary=!F),(se instanceof x&&se.uncompressedSize===0||ne.dir||!se||se.length===0)&&(ne.base64=!1,ne.binary=!0,se="",ne.compression="STORE",Q="string");var j=null;j=se instanceof x||se instanceof d?se:I.isNode&&I.isStream(se)?new A(B,se):c.prepareContent(B,se,ne.binary,ne.optimizedBinaryString,ne.base64);var W=new w(B,j,ne);this.files[B]=W}var l=n("./utf8"),c=n("./utils"),d=n("./stream/GenericWorker"),h=n("./stream/StreamHelper"),m=n("./defaults"),x=n("./compressedObject"),w=n("./zipObject"),v=n("./generate"),I=n("./nodejsUtils"),A=n("./nodejs/NodejsStreamInputAdapter"),E=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var se=B.lastIndexOf("/");return 0<se?B.substring(0,se):""},C=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},R=function(B,se){return se=se!==void 0?se:m.createFolders,B=C(B),this.files[B]||o.call(this,B,null,{dir:!0,createFolders:se}),this.files[B]};function D(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var se,q,G;for(se in this.files)G=this.files[se],(q=se.slice(this.root.length,se.length))&&se.slice(0,this.root.length)===this.root&&B(q,G)},filter:function(B){var se=[];return this.forEach(function(q,G){B(q,G)&&se.push(G)}),se},file:function(B,se,q){if(arguments.length!==1)return B=this.root+B,o.call(this,B,se,q),this;if(D(B)){var G=B;return this.filter(function(ne,F){return!F.dir&&G.test(ne)})}var Q=this.files[this.root+B];return Q&&!Q.dir?Q:null},folder:function(B){if(!B)return this;if(D(B))return this.filter(function(Q,ne){return ne.dir&&B.test(Q)});var se=this.root+B,q=R.call(this,se),G=this.clone();return G.root=q.name,G},remove:function(B){B=this.root+B;var se=this.files[B];if(se||(B.slice(-1)!=="/"&&(B+="/"),se=this.files[B]),se&&!se.dir)delete this.files[B];else for(var q=this.filter(function(Q,ne){return ne.name.slice(0,B.length)===B}),G=0;G<q.length;G++)delete this.files[q[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var se,q={};try{if((q=c.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),q.type==="binarystring"&&(q.type="string"),!q.type)throw new Error("No output type specified.");c.checkSupport(q.type),q.platform!=="darwin"&&q.platform!=="freebsd"&&q.platform!=="linux"&&q.platform!=="sunos"||(q.platform="UNIX"),q.platform==="win32"&&(q.platform="DOS");var G=q.comment||this.comment||"";se=v.generateWorker(this,q,G)}catch(Q){(se=new d("error")).error(Q)}return new h(se,q.type||"string",q.mimeType)},generateAsync:function(B,se){return this.generateInternalStream(B).accumulate(se)},generateNodeStream:function(B,se){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(se)}};i.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,s){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,s){var o=n("./DataReader");function l(c){o.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}n("../utils").inherits(l,o),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),x=c.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===d&&this.data[w+1]===h&&this.data[w+2]===m&&this.data[w+3]===x)return w-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),h=c.charCodeAt(1),m=c.charCodeAt(2),x=c.charCodeAt(3),w=this.readData(4);return d===w[0]&&h===w[1]&&m===w[2]&&x===w[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,i,s){var o=n("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,h=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)h=(h<<8)+this.byteAt(d);return this.index+=c,h},readString:function(c){return o.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},i.exports=l},{"../utils":32}],19:[function(n,i,s){var o=n("./Uint8ArrayReader");function l(c){o.call(this,c)}n("../utils").inherits(l,o),l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,s){var o=n("./DataReader");function l(c){o.call(this,c)}n("../utils").inherits(l,o),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,i,s){var o=n("./ArrayReader");function l(c){o.call(this,c)}n("../utils").inherits(l,o),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,s){var o=n("../utils"),l=n("../support"),c=n("./ArrayReader"),d=n("./StringReader"),h=n("./NodeBufferReader"),m=n("./Uint8ArrayReader");i.exports=function(x){var w=o.getTypeOf(x);return o.checkSupport(w),w!=="string"||l.uint8array?w==="nodebuffer"?new h(x):l.uint8array?new m(o.transformTo("uint8array",x)):new c(o.transformTo("array",x)):new d(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,s){var o=n("./GenericWorker"),l=n("../utils");function c(d){o.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(c,o),c.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},i.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,s){var o=n("./GenericWorker"),l=n("../crc32");function c(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,o),c.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,s){var o=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(c,l),c.prototype.processChunk=function(d){if(d){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+d.data.length}l.prototype.processChunk.call(this,d)},i.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,s){var o=n("../utils"),l=n("./GenericWorker");function c(d){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=o.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}o.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,h);break;case"uint8array":d=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":d=this.data.slice(this.index,h)}return this.index=h,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,s){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(d){c.processChunk(d)}),l.on("end",function(){c.end()}),l.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=o},{}],29:[function(n,i,s){var o=n("../utils"),l=n("./ConvertWorker"),c=n("./GenericWorker"),d=n("../base64"),h=n("../support"),m=n("../external"),x=null;if(h.nodestream)try{x=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(I,A){return new m.Promise(function(E,C){var R=[],D=I._internalType,z=I._outputType,B=I._mimeType;I.on("data",function(se,q){R.push(se),A&&A(q)}).on("error",function(se){R=[],C(se)}).on("end",function(){try{var se=(function(q,G,Q){switch(q){case"blob":return o.newBlob(o.transformTo("arraybuffer",G),Q);case"base64":return d.encode(G);default:return o.transformTo(q,G)}})(z,(function(q,G){var Q,ne=0,F=null,j=0;for(Q=0;Q<G.length;Q++)j+=G[Q].length;switch(q){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(F=new Uint8Array(j),Q=0;Q<G.length;Q++)F.set(G[Q],ne),ne+=G[Q].length;return F;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+q+"'")}})(D,R),B);E(se)}catch(q){C(q)}R=[]}).resume()})}function v(I,A,E){var C=A;switch(A){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=A,this._mimeType=E,o.checkSupport(C),this._worker=I.pipe(new l(C)),I.lock()}catch(R){this._worker=new c("error"),this._worker.error(R)}}v.prototype={accumulate:function(I){return w(this,I)},on:function(I,A){var E=this;return I==="data"?this._worker.on(I,function(C){A.call(E,C.data,C.meta)}):this._worker.on(I,function(){o.delay(A,arguments,E)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(I){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},I)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,s){for(var o=n("./utils"),l=n("./support"),c=n("./nodejsUtils"),d=n("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function x(){d.call(this,"utf-8 decode"),this.leftOver=null}function w(){d.call(this,"utf-8 encode")}s.utf8encode=function(v){return l.nodebuffer?c.newBufferFrom(v,"utf-8"):(function(I){var A,E,C,R,D,z=I.length,B=0;for(R=0;R<z;R++)(64512&(E=I.charCodeAt(R)))==55296&&R+1<z&&(64512&(C=I.charCodeAt(R+1)))==56320&&(E=65536+(E-55296<<10)+(C-56320),R++),B+=E<128?1:E<2048?2:E<65536?3:4;for(A=l.uint8array?new Uint8Array(B):new Array(B),R=D=0;D<B;R++)(64512&(E=I.charCodeAt(R)))==55296&&R+1<z&&(64512&(C=I.charCodeAt(R+1)))==56320&&(E=65536+(E-55296<<10)+(C-56320),R++),E<128?A[D++]=E:(E<2048?A[D++]=192|E>>>6:(E<65536?A[D++]=224|E>>>12:(A[D++]=240|E>>>18,A[D++]=128|E>>>12&63),A[D++]=128|E>>>6&63),A[D++]=128|63&E);return A})(v)},s.utf8decode=function(v){return l.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):(function(I){var A,E,C,R,D=I.length,z=new Array(2*D);for(A=E=0;A<D;)if((C=I[A++])<128)z[E++]=C;else if(4<(R=h[C]))z[E++]=65533,A+=R-1;else{for(C&=R===2?31:R===3?15:7;1<R&&A<D;)C=C<<6|63&I[A++],R--;1<R?z[E++]=65533:C<65536?z[E++]=C:(C-=65536,z[E++]=55296|C>>10&1023,z[E++]=56320|1023&C)}return z.length!==E&&(z.subarray?z=z.subarray(0,E):z.length=E),o.applyFromCharCode(z)})(v=o.transformTo(l.uint8array?"uint8array":"array",v))},o.inherits(x,d),x.prototype.processChunk=function(v){var I=o.transformTo(l.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var A=I;(I=new Uint8Array(A.length+this.leftOver.length)).set(this.leftOver,0),I.set(A,this.leftOver.length)}else I=this.leftOver.concat(I);this.leftOver=null}var E=(function(R,D){var z;for((D=D||R.length)>R.length&&(D=R.length),z=D-1;0<=z&&(192&R[z])==128;)z--;return z<0||z===0?D:z+h[R[z]]>D?z:D})(I),C=I;E!==I.length&&(l.uint8array?(C=I.subarray(0,E),this.leftOver=I.subarray(E,I.length)):(C=I.slice(0,E),this.leftOver=I.slice(E,I.length))),this.push({data:s.utf8decode(C),meta:v.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=x,o.inherits(w,d),w.prototype.processChunk=function(v){this.push({data:s.utf8encode(v.data),meta:v.meta})},s.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,s){var o=n("./support"),l=n("./base64"),c=n("./nodejsUtils"),d=n("./external");function h(A){return A}function m(A,E){for(var C=0;C<A.length;++C)E[C]=255&A.charCodeAt(C);return E}n("setimmediate"),s.newBlob=function(A,E){s.checkSupport("blob");try{return new Blob([A],{type:E})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(A),C.getBlob(E)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(A,E,C){var R=[],D=0,z=A.length;if(z<=C)return String.fromCharCode.apply(null,A);for(;D<z;)E==="array"||E==="nodebuffer"?R.push(String.fromCharCode.apply(null,A.slice(D,Math.min(D+C,z)))):R.push(String.fromCharCode.apply(null,A.subarray(D,Math.min(D+C,z)))),D+=C;return R.join("")},stringifyByChar:function(A){for(var E="",C=0;C<A.length;C++)E+=String.fromCharCode(A[C]);return E},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function w(A){var E=65536,C=s.getTypeOf(A),R=!0;if(C==="uint8array"?R=x.applyCanBeUsed.uint8array:C==="nodebuffer"&&(R=x.applyCanBeUsed.nodebuffer),R)for(;1<E;)try{return x.stringifyByChunk(A,C,E)}catch{E=Math.floor(E/2)}return x.stringifyByChar(A)}function v(A,E){for(var C=0;C<A.length;C++)E[C]=A[C];return E}s.applyFromCharCode=w;var I={};I.string={string:h,array:function(A){return m(A,new Array(A.length))},arraybuffer:function(A){return I.string.uint8array(A).buffer},uint8array:function(A){return m(A,new Uint8Array(A.length))},nodebuffer:function(A){return m(A,c.allocBuffer(A.length))}},I.array={string:w,array:h,arraybuffer:function(A){return new Uint8Array(A).buffer},uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return c.newBufferFrom(A)}},I.arraybuffer={string:function(A){return w(new Uint8Array(A))},array:function(A){return v(new Uint8Array(A),new Array(A.byteLength))},arraybuffer:h,uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return c.newBufferFrom(new Uint8Array(A))}},I.uint8array={string:w,array:function(A){return v(A,new Array(A.length))},arraybuffer:function(A){return A.buffer},uint8array:h,nodebuffer:function(A){return c.newBufferFrom(A)}},I.nodebuffer={string:w,array:function(A){return v(A,new Array(A.length))},arraybuffer:function(A){return I.nodebuffer.uint8array(A).buffer},uint8array:function(A){return v(A,new Uint8Array(A.length))},nodebuffer:h},s.transformTo=function(A,E){if(E=E||"",!A)return E;s.checkSupport(A);var C=s.getTypeOf(E);return I[C][A](E)},s.resolve=function(A){for(var E=A.split("/"),C=[],R=0;R<E.length;R++){var D=E[R];D==="."||D===""&&R!==0&&R!==E.length-1||(D===".."?C.pop():C.push(D))}return C.join("/")},s.getTypeOf=function(A){return typeof A=="string"?"string":Object.prototype.toString.call(A)==="[object Array]"?"array":o.nodebuffer&&c.isBuffer(A)?"nodebuffer":o.uint8array&&A instanceof Uint8Array?"uint8array":o.arraybuffer&&A instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(A){if(!o[A.toLowerCase()])throw new Error(A+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(A){var E,C,R="";for(C=0;C<(A||"").length;C++)R+="\\x"+((E=A.charCodeAt(C))<16?"0":"")+E.toString(16).toUpperCase();return R},s.delay=function(A,E,C){setImmediate(function(){A.apply(C||null,E||[])})},s.inherits=function(A,E){function C(){}C.prototype=E.prototype,A.prototype=new C},s.extend=function(){var A,E,C={};for(A=0;A<arguments.length;A++)for(E in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],E)&&C[E]===void 0&&(C[E]=arguments[A][E]);return C},s.prepareContent=function(A,E,C,R,D){return d.Promise.resolve(E).then(function(z){return o.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new d.Promise(function(B,se){var q=new FileReader;q.onload=function(G){B(G.target.result)},q.onerror=function(G){se(G.target.error)},q.readAsArrayBuffer(z)}):z}).then(function(z){var B=s.getTypeOf(z);return B?(B==="arraybuffer"?z=s.transformTo("uint8array",z):B==="string"&&(D?z=l.decode(z):C&&R!==!0&&(z=(function(se){return m(se,o.uint8array?new Uint8Array(se.length):new Array(se.length))})(z))),z):d.Promise.reject(new Error("Can't read the data of '"+A+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,s){var o=n("./reader/readerFor"),l=n("./utils"),c=n("./signature"),d=n("./zipEntry"),h=n("./support");function m(x){this.files=[],this.loadOptions=x}m.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(w)+", expected "+l.pretty(x)+")")}},isSignature:function(x,w){var v=this.reader.index;this.reader.setIndex(x);var I=this.reader.readString(4)===w;return this.reader.setIndex(v),I},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),w=h.uint8array?"uint8array":"array",v=l.transformTo(w,x);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,w,v,I=this.zip64EndOfCentralSize-44;0<I;)x=this.reader.readInt(2),w=this.reader.readInt(4),v=this.reader.readData(w),this.zip64ExtensibleData[x]={id:x,length:w,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,w;for(x=0;x<this.files.length;x++)w=this.files[x],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(x=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var w=x;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var I=w-v;if(0<I)this.isSignature(w,c.CENTRAL_FILE_HEADER)||(this.reader.zero=I);else if(I<0)throw new Error("Corrupted zip: missing "+Math.abs(I)+" bytes.")},prepareReader:function(x){this.reader=o(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,s){var o=n("./reader/readerFor"),l=n("./utils"),c=n("./compressedObject"),d=n("./crc32"),h=n("./utf8"),m=n("./compressions"),x=n("./support");function w(v,I){this.options=v,this.loadOptions=I}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var I,A;if(v.skip(22),this.fileNameLength=v.readInt(2),A=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(A),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((I=(function(E){for(var C in m)if(Object.prototype.hasOwnProperty.call(m,C)&&m[C].magic===E)return m[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,I,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var I=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(I),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var I,A,E,C=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<C;)I=v.readInt(2),A=v.readInt(2),E=v.readData(A),this.extraFields[I]={id:I,length:A,value:E};v.setIndex(C)},handleUTF8:function(){var v=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var I=this.findExtraFieldUnicodePath();if(I!==null)this.fileNameStr=I;else{var A=l.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(A)}var E=this.findExtraFieldUnicodeComment();if(E!==null)this.fileCommentStr=E;else{var C=l.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var I=o(v.value);return I.readInt(1)!==1||d(this.fileName)!==I.readInt(4)?null:h.utf8decode(I.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var I=o(v.value);return I.readInt(1)!==1||d(this.fileComment)!==I.readInt(4)?null:h.utf8decode(I.readData(v.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,s){function o(I,A,E){this.name=I,this.dir=E.dir,this.date=E.date,this.comment=E.comment,this.unixPermissions=E.unixPermissions,this.dosPermissions=E.dosPermissions,this._data=A,this._dataBinary=E.binary,this.options={compression:E.compression,compressionOptions:E.compressionOptions}}var l=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),d=n("./utf8"),h=n("./compressedObject"),m=n("./stream/GenericWorker");o.prototype={internalStream:function(I){var A=null,E="string";try{if(!I)throw new Error("No output type specified.");var C=(E=I.toLowerCase())==="string"||E==="text";E!=="binarystring"&&E!=="text"||(E="string"),A=this._decompressWorker();var R=!this._dataBinary;R&&!C&&(A=A.pipe(new d.Utf8EncodeWorker)),!R&&C&&(A=A.pipe(new d.Utf8DecodeWorker))}catch(D){(A=new m("error")).error(D)}return new l(A,E,"")},async:function(I,A){return this.internalStream(I).accumulate(A)},nodeStream:function(I,A){return this.internalStream(I||"nodebuffer").toNodejsStream(A)},_compressWorker:function(I,A){if(this._data instanceof h&&this._data.compression.magic===I.magic)return this._data.getCompressedWorker();var E=this._decompressWorker();return this._dataBinary||(E=E.pipe(new d.Utf8EncodeWorker)),h.createWorkerFrom(E,I,A)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new c(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<x.length;v++)o.prototype[x[v]]=w;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,s){(function(o){var l,c,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var h=0,m=new d(I),x=o.document.createTextNode("");m.observe(x,{characterData:!0}),l=function(){x.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var A=o.document.createElement("script");A.onreadystatechange=function(){I(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},o.document.documentElement.appendChild(A)}:function(){setTimeout(I,0)};else{var w=new o.MessageChannel;w.port1.onmessage=I,l=function(){w.port2.postMessage(0)}}var v=[];function I(){var A,E;c=!0;for(var C=v.length;C;){for(E=v,v=[],A=-1;++A<C;)E[A]();C=v.length}c=!1}i.exports=function(A){v.push(A)!==1||c||l()}}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,s){var o=n("immediate");function l(){}var c={},d=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function x(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,C!==l&&A(this,C)}function w(C,R,D){this.promise=C,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function v(C,R,D){o(function(){var z;try{z=R(D)}catch(B){return c.reject(C,B)}z===C?c.reject(C,new TypeError("Cannot resolve promise with itself")):c.resolve(C,z)})}function I(C){var R=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof R=="function")return function(){R.apply(C,arguments)}}function A(C,R){var D=!1;function z(q){D||(D=!0,c.reject(C,q))}function B(q){D||(D=!0,c.resolve(C,q))}var se=E(function(){R(B,z)});se.status==="error"&&z(se.value)}function E(C,R){var D={};try{D.value=C(R),D.status="success"}catch(z){D.status="error",D.value=z}return D}(i.exports=x).prototype.finally=function(C){if(typeof C!="function")return this;var R=this.constructor;return this.then(function(D){return R.resolve(C()).then(function(){return D})},function(D){return R.resolve(C()).then(function(){throw D})})},x.prototype.catch=function(C){return this.then(null,C)},x.prototype.then=function(C,R){if(typeof C!="function"&&this.state===h||typeof R!="function"&&this.state===d)return this;var D=new this.constructor(l);return this.state!==m?v(D,this.state===h?C:R,this.outcome):this.queue.push(new w(D,C,R)),D},w.prototype.callFulfilled=function(C){c.resolve(this.promise,C)},w.prototype.otherCallFulfilled=function(C){v(this.promise,this.onFulfilled,C)},w.prototype.callRejected=function(C){c.reject(this.promise,C)},w.prototype.otherCallRejected=function(C){v(this.promise,this.onRejected,C)},c.resolve=function(C,R){var D=E(I,R);if(D.status==="error")return c.reject(C,D.value);var z=D.value;if(z)A(C,z);else{C.state=h,C.outcome=R;for(var B=-1,se=C.queue.length;++B<se;)C.queue[B].callFulfilled(R)}return C},c.reject=function(C,R){C.state=d,C.outcome=R;for(var D=-1,z=C.queue.length;++D<z;)C.queue[D].callRejected(R);return C},x.resolve=function(C){return C instanceof this?C:c.resolve(new this(l),C)},x.reject=function(C){var R=new this(l);return c.reject(R,C)},x.all=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=C.length,z=!1;if(!D)return this.resolve([]);for(var B=new Array(D),se=0,q=-1,G=new this(l);++q<D;)Q(C[q],q);return G;function Q(ne,F){R.resolve(ne).then(function(j){B[F]=j,++se!==D||z||(z=!0,c.resolve(G,B))},function(j){z||(z=!0,c.reject(G,j))})}},x.race=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=C.length,z=!1;if(!D)return this.resolve([]);for(var B=-1,se=new this(l);++B<D;)q=C[B],R.resolve(q).then(function(G){z||(z=!0,c.resolve(se,G))},function(G){z||(z=!0,c.reject(se,G))});var q;return se}},{immediate:36}],38:[function(n,i,s){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,s){var o=n("./zlib/deflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/messages"),h=n("./zlib/zstream"),m=Object.prototype.toString,x=0,w=-1,v=0,I=8;function A(C){if(!(this instanceof A))return new A(C);this.options=l.assign({level:w,method:I,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},C||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=o.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(D!==x)throw new Error(d[D]);if(R.header&&o.deflateSetHeader(this.strm,R.header),R.dictionary){var z;if(z=typeof R.dictionary=="string"?c.string2buf(R.dictionary):m.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(D=o.deflateSetDictionary(this.strm,z))!==x)throw new Error(d[D]);this._dict_set=!0}}function E(C,R){var D=new A(R);if(D.push(C,!0),D.err)throw D.msg||d[D.err];return D.result}A.prototype.push=function(C,R){var D,z,B=this.strm,se=this.options.chunkSize;if(this.ended)return!1;z=R===~~R?R:R===!0?4:0,typeof C=="string"?B.input=c.string2buf(C):m.call(C)==="[object ArrayBuffer]"?B.input=new Uint8Array(C):B.input=C,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new l.Buf8(se),B.next_out=0,B.avail_out=se),(D=o.deflate(B,z))!==1&&D!==x)return this.onEnd(D),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(B.output,B.next_out))):this.onData(l.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&D!==1);return z===4?(D=o.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===x):z!==2||(this.onEnd(x),!(B.avail_out=0))},A.prototype.onData=function(C){this.chunks.push(C)},A.prototype.onEnd=function(C){C===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},s.Deflate=A,s.deflate=E,s.deflateRaw=function(C,R){return(R=R||{}).raw=!0,E(C,R)},s.gzip=function(C,R){return(R=R||{}).gzip=!0,E(C,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,s){var o=n("./zlib/inflate"),l=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/constants"),h=n("./zlib/messages"),m=n("./zlib/zstream"),x=n("./zlib/gzheader"),w=Object.prototype.toString;function v(A){if(!(this instanceof v))return new v(A);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},A||{});var E=this.options;E.raw&&0<=E.windowBits&&E.windowBits<16&&(E.windowBits=-E.windowBits,E.windowBits===0&&(E.windowBits=-15)),!(0<=E.windowBits&&E.windowBits<16)||A&&A.windowBits||(E.windowBits+=32),15<E.windowBits&&E.windowBits<48&&(15&E.windowBits)==0&&(E.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var C=o.inflateInit2(this.strm,E.windowBits);if(C!==d.Z_OK)throw new Error(h[C]);this.header=new x,o.inflateGetHeader(this.strm,this.header)}function I(A,E){var C=new v(E);if(C.push(A,!0),C.err)throw C.msg||h[C.err];return C.result}v.prototype.push=function(A,E){var C,R,D,z,B,se,q=this.strm,G=this.options.chunkSize,Q=this.options.dictionary,ne=!1;if(this.ended)return!1;R=E===~~E?E:E===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof A=="string"?q.input=c.binstring2buf(A):w.call(A)==="[object ArrayBuffer]"?q.input=new Uint8Array(A):q.input=A,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new l.Buf8(G),q.next_out=0,q.avail_out=G),(C=o.inflate(q,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&Q&&(se=typeof Q=="string"?c.string2buf(Q):w.call(Q)==="[object ArrayBuffer]"?new Uint8Array(Q):Q,C=o.inflateSetDictionary(this.strm,se)),C===d.Z_BUF_ERROR&&ne===!0&&(C=d.Z_OK,ne=!1),C!==d.Z_STREAM_END&&C!==d.Z_OK)return this.onEnd(C),!(this.ended=!0);q.next_out&&(q.avail_out!==0&&C!==d.Z_STREAM_END&&(q.avail_in!==0||R!==d.Z_FINISH&&R!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=c.utf8border(q.output,q.next_out),z=q.next_out-D,B=c.buf2string(q.output,D),q.next_out=z,q.avail_out=G-z,z&&l.arraySet(q.output,q.output,D,z,0),this.onData(B)):this.onData(l.shrinkBuf(q.output,q.next_out)))),q.avail_in===0&&q.avail_out===0&&(ne=!0)}while((0<q.avail_in||q.avail_out===0)&&C!==d.Z_STREAM_END);return C===d.Z_STREAM_END&&(R=d.Z_FINISH),R===d.Z_FINISH?(C=o.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===d.Z_OK):R!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(q.avail_out=0))},v.prototype.onData=function(A){this.chunks.push(A)},v.prototype.onEnd=function(A){A===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},s.Inflate=v,s.inflate=I,s.inflateRaw=function(A,E){return(E=E||{}).raw=!0,I(A,E)},s.ungzip=I},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(d){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var x in m)m.hasOwnProperty(x)&&(d[x]=m[x])}}return d},s.shrinkBuf=function(d,h){return d.length===h?d:d.subarray?d.subarray(0,h):(d.length=h,d)};var l={arraySet:function(d,h,m,x,w){if(h.subarray&&d.subarray)d.set(h.subarray(m,m+x),w);else for(var v=0;v<x;v++)d[w+v]=h[m+v]},flattenChunks:function(d){var h,m,x,w,v,I;for(h=x=0,m=d.length;h<m;h++)x+=d[h].length;for(I=new Uint8Array(x),h=w=0,m=d.length;h<m;h++)v=d[h],I.set(v,w),w+=v.length;return I}},c={arraySet:function(d,h,m,x,w){for(var v=0;v<x;v++)d[w+v]=h[m+v]},flattenChunks:function(d){return[].concat.apply([],d)}};s.setTyped=function(d){d?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,c))},s.setTyped(o)},{}],42:[function(n,i,s){var o=n("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new o.Buf8(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(x,w){if(w<65537&&(x.subarray&&c||!x.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(x,w));for(var v="",I=0;I<w;I++)v+=String.fromCharCode(x[I]);return v}d[254]=d[254]=1,s.string2buf=function(x){var w,v,I,A,E,C=x.length,R=0;for(A=0;A<C;A++)(64512&(v=x.charCodeAt(A)))==55296&&A+1<C&&(64512&(I=x.charCodeAt(A+1)))==56320&&(v=65536+(v-55296<<10)+(I-56320),A++),R+=v<128?1:v<2048?2:v<65536?3:4;for(w=new o.Buf8(R),A=E=0;E<R;A++)(64512&(v=x.charCodeAt(A)))==55296&&A+1<C&&(64512&(I=x.charCodeAt(A+1)))==56320&&(v=65536+(v-55296<<10)+(I-56320),A++),v<128?w[E++]=v:(v<2048?w[E++]=192|v>>>6:(v<65536?w[E++]=224|v>>>12:(w[E++]=240|v>>>18,w[E++]=128|v>>>12&63),w[E++]=128|v>>>6&63),w[E++]=128|63&v);return w},s.buf2binstring=function(x){return m(x,x.length)},s.binstring2buf=function(x){for(var w=new o.Buf8(x.length),v=0,I=w.length;v<I;v++)w[v]=x.charCodeAt(v);return w},s.buf2string=function(x,w){var v,I,A,E,C=w||x.length,R=new Array(2*C);for(v=I=0;v<C;)if((A=x[v++])<128)R[I++]=A;else if(4<(E=d[A]))R[I++]=65533,v+=E-1;else{for(A&=E===2?31:E===3?15:7;1<E&&v<C;)A=A<<6|63&x[v++],E--;1<E?R[I++]=65533:A<65536?R[I++]=A:(A-=65536,R[I++]=55296|A>>10&1023,R[I++]=56320|1023&A)}return m(R,I)},s.utf8border=function(x,w){var v;for((w=w||x.length)>x.length&&(w=x.length),v=w-1;0<=v&&(192&x[v])==128;)v--;return v<0||v===0?w:v+d[x[v]]>w?v:w}},{"./common":41}],43:[function(n,i,s){i.exports=function(o,l,c,d){for(var h=65535&o|0,m=o>>>16&65535|0,x=0;c!==0;){for(c-=x=2e3<c?2e3:c;m=m+(h=h+l[d++]|0)|0,--x;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(n,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,s){var o=(function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c})();i.exports=function(l,c,d,h){var m=o,x=h+d;l^=-1;for(var w=h;w<x;w++)l=l>>>8^m[255&(l^c[w])];return-1^l}},{}],46:[function(n,i,s){var o,l=n("../utils/common"),c=n("./trees"),d=n("./adler32"),h=n("./crc32"),m=n("./messages"),x=0,w=4,v=0,I=-2,A=-1,E=4,C=2,R=8,D=9,z=286,B=30,se=19,q=2*z+1,G=15,Q=3,ne=258,F=ne+Q+1,j=42,W=113,M=1,ce=2,ee=3,ae=4;function me(U,ye){return U.msg=m[ye],ye}function pe(U){return(U<<1)-(4<U?9:0)}function ve(U){for(var ye=U.length;0<=--ye;)U[ye]=0}function H(U){var ye=U.state,$=ye.pending;$>U.avail_out&&($=U.avail_out),$!==0&&(l.arraySet(U.output,ye.pending_buf,ye.pending_out,$,U.next_out),U.next_out+=$,ye.pending_out+=$,U.total_out+=$,U.avail_out-=$,ye.pending-=$,ye.pending===0&&(ye.pending_out=0))}function L(U,ye){c._tr_flush_block(U,0<=U.block_start?U.block_start:-1,U.strstart-U.block_start,ye),U.block_start=U.strstart,H(U.strm)}function J(U,ye){U.pending_buf[U.pending++]=ye}function K(U,ye){U.pending_buf[U.pending++]=ye>>>8&255,U.pending_buf[U.pending++]=255&ye}function ie(U,ye){var $,de,oe=U.max_chain_length,he=U.strstart,Ie=U.prev_length,Le=U.nice_match,be=U.strstart>U.w_size-F?U.strstart-(U.w_size-F):0,je=U.window,Oe=U.w_mask,Je=U.prev,at=U.strstart+ne,dt=je[he+Ie-1],pt=je[he+Ie];U.prev_length>=U.good_match&&(oe>>=2),Le>U.lookahead&&(Le=U.lookahead);do if(je[($=ye)+Ie]===pt&&je[$+Ie-1]===dt&&je[$]===je[he]&&je[++$]===je[he+1]){he+=2,$++;do;while(je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&je[++he]===je[++$]&&he<at);if(de=ne-(at-he),he=at-ne,Ie<de){if(U.match_start=ye,Le<=(Ie=de))break;dt=je[he+Ie-1],pt=je[he+Ie]}}while((ye=Je[ye&Oe])>be&&--oe!=0);return Ie<=U.lookahead?Ie:U.lookahead}function xe(U){var ye,$,de,oe,he,Ie,Le,be,je,Oe,Je=U.w_size;do{if(oe=U.window_size-U.lookahead-U.strstart,U.strstart>=Je+(Je-F)){for(l.arraySet(U.window,U.window,Je,Je,0),U.match_start-=Je,U.strstart-=Je,U.block_start-=Je,ye=$=U.hash_size;de=U.head[--ye],U.head[ye]=Je<=de?de-Je:0,--$;);for(ye=$=Je;de=U.prev[--ye],U.prev[ye]=Je<=de?de-Je:0,--$;);oe+=Je}if(U.strm.avail_in===0)break;if(Ie=U.strm,Le=U.window,be=U.strstart+U.lookahead,je=oe,Oe=void 0,Oe=Ie.avail_in,je<Oe&&(Oe=je),$=Oe===0?0:(Ie.avail_in-=Oe,l.arraySet(Le,Ie.input,Ie.next_in,Oe,be),Ie.state.wrap===1?Ie.adler=d(Ie.adler,Le,Oe,be):Ie.state.wrap===2&&(Ie.adler=h(Ie.adler,Le,Oe,be)),Ie.next_in+=Oe,Ie.total_in+=Oe,Oe),U.lookahead+=$,U.lookahead+U.insert>=Q)for(he=U.strstart-U.insert,U.ins_h=U.window[he],U.ins_h=(U.ins_h<<U.hash_shift^U.window[he+1])&U.hash_mask;U.insert&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[he+Q-1])&U.hash_mask,U.prev[he&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=he,he++,U.insert--,!(U.lookahead+U.insert<Q)););}while(U.lookahead<F&&U.strm.avail_in!==0)}function Ae(U,ye){for(var $,de;;){if(U.lookahead<F){if(xe(U),U.lookahead<F&&ye===x)return M;if(U.lookahead===0)break}if($=0,U.lookahead>=Q&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+Q-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),$!==0&&U.strstart-$<=U.w_size-F&&(U.match_length=ie(U,$)),U.match_length>=Q)if(de=c._tr_tally(U,U.strstart-U.match_start,U.match_length-Q),U.lookahead-=U.match_length,U.match_length<=U.max_lazy_match&&U.lookahead>=Q){for(U.match_length--;U.strstart++,U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+Q-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart,--U.match_length!=0;);U.strstart++}else U.strstart+=U.match_length,U.match_length=0,U.ins_h=U.window[U.strstart],U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+1])&U.hash_mask;else de=c._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++;if(de&&(L(U,!1),U.strm.avail_out===0))return M}return U.insert=U.strstart<Q-1?U.strstart:Q-1,ye===w?(L(U,!0),U.strm.avail_out===0?ee:ae):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?M:ce}function Ce(U,ye){for(var $,de,oe;;){if(U.lookahead<F){if(xe(U),U.lookahead<F&&ye===x)return M;if(U.lookahead===0)break}if($=0,U.lookahead>=Q&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+Q-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),U.prev_length=U.match_length,U.prev_match=U.match_start,U.match_length=Q-1,$!==0&&U.prev_length<U.max_lazy_match&&U.strstart-$<=U.w_size-F&&(U.match_length=ie(U,$),U.match_length<=5&&(U.strategy===1||U.match_length===Q&&4096<U.strstart-U.match_start)&&(U.match_length=Q-1)),U.prev_length>=Q&&U.match_length<=U.prev_length){for(oe=U.strstart+U.lookahead-Q,de=c._tr_tally(U,U.strstart-1-U.prev_match,U.prev_length-Q),U.lookahead-=U.prev_length-1,U.prev_length-=2;++U.strstart<=oe&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+Q-1])&U.hash_mask,$=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),--U.prev_length!=0;);if(U.match_available=0,U.match_length=Q-1,U.strstart++,de&&(L(U,!1),U.strm.avail_out===0))return M}else if(U.match_available){if((de=c._tr_tally(U,0,U.window[U.strstart-1]))&&L(U,!1),U.strstart++,U.lookahead--,U.strm.avail_out===0)return M}else U.match_available=1,U.strstart++,U.lookahead--}return U.match_available&&(de=c._tr_tally(U,0,U.window[U.strstart-1]),U.match_available=0),U.insert=U.strstart<Q-1?U.strstart:Q-1,ye===w?(L(U,!0),U.strm.avail_out===0?ee:ae):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?M:ce}function Ee(U,ye,$,de,oe){this.good_length=U,this.max_lazy=ye,this.nice_length=$,this.max_chain=de,this.func=oe}function Re(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*q),this.dyn_dtree=new l.Buf16(2*(2*B+1)),this.bl_tree=new l.Buf16(2*(2*se+1)),ve(this.dyn_ltree),ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(G+1),this.heap=new l.Buf16(2*z+1),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*z+1),ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(U){var ye;return U&&U.state?(U.total_in=U.total_out=0,U.data_type=C,(ye=U.state).pending=0,ye.pending_out=0,ye.wrap<0&&(ye.wrap=-ye.wrap),ye.status=ye.wrap?j:W,U.adler=ye.wrap===2?0:1,ye.last_flush=x,c._tr_init(ye),v):me(U,I)}function He(U){var ye=De(U);return ye===v&&(function($){$.window_size=2*$.w_size,ve($.head),$.max_lazy_match=o[$.level].max_lazy,$.good_match=o[$.level].good_length,$.nice_match=o[$.level].nice_length,$.max_chain_length=o[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=Q-1,$.match_available=0,$.ins_h=0})(U.state),ye}function Xe(U,ye,$,de,oe,he){if(!U)return I;var Ie=1;if(ye===A&&(ye=6),de<0?(Ie=0,de=-de):15<de&&(Ie=2,de-=16),oe<1||D<oe||$!==R||de<8||15<de||ye<0||9<ye||he<0||E<he)return me(U,I);de===8&&(de=9);var Le=new Re;return(U.state=Le).strm=U,Le.wrap=Ie,Le.gzhead=null,Le.w_bits=de,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=oe+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+Q-1)/Q),Le.window=new l.Buf8(2*Le.w_size),Le.head=new l.Buf16(Le.hash_size),Le.prev=new l.Buf16(Le.w_size),Le.lit_bufsize=1<<oe+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new l.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=ye,Le.strategy=he,Le.method=$,He(U)}o=[new Ee(0,0,0,0,function(U,ye){var $=65535;for($>U.pending_buf_size-5&&($=U.pending_buf_size-5);;){if(U.lookahead<=1){if(xe(U),U.lookahead===0&&ye===x)return M;if(U.lookahead===0)break}U.strstart+=U.lookahead,U.lookahead=0;var de=U.block_start+$;if((U.strstart===0||U.strstart>=de)&&(U.lookahead=U.strstart-de,U.strstart=de,L(U,!1),U.strm.avail_out===0)||U.strstart-U.block_start>=U.w_size-F&&(L(U,!1),U.strm.avail_out===0))return M}return U.insert=0,ye===w?(L(U,!0),U.strm.avail_out===0?ee:ae):(U.strstart>U.block_start&&(L(U,!1),U.strm.avail_out),M)}),new Ee(4,4,8,4,Ae),new Ee(4,5,16,8,Ae),new Ee(4,6,32,32,Ae),new Ee(4,4,16,16,Ce),new Ee(8,16,32,32,Ce),new Ee(8,16,128,128,Ce),new Ee(8,32,128,256,Ce),new Ee(32,128,258,1024,Ce),new Ee(32,258,258,4096,Ce)],s.deflateInit=function(U,ye){return Xe(U,ye,R,15,8,0)},s.deflateInit2=Xe,s.deflateReset=He,s.deflateResetKeep=De,s.deflateSetHeader=function(U,ye){return U&&U.state?U.state.wrap!==2?I:(U.state.gzhead=ye,v):I},s.deflate=function(U,ye){var $,de,oe,he;if(!U||!U.state||5<ye||ye<0)return U?me(U,I):I;if(de=U.state,!U.output||!U.input&&U.avail_in!==0||de.status===666&&ye!==w)return me(U,U.avail_out===0?-5:I);if(de.strm=U,$=de.last_flush,de.last_flush=ye,de.status===j)if(de.wrap===2)U.adler=0,J(de,31),J(de,139),J(de,8),de.gzhead?(J(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),J(de,255&de.gzhead.time),J(de,de.gzhead.time>>8&255),J(de,de.gzhead.time>>16&255),J(de,de.gzhead.time>>24&255),J(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),J(de,255&de.gzhead.os),de.gzhead.extra&&de.gzhead.extra.length&&(J(de,255&de.gzhead.extra.length),J(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(U.adler=h(U.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=69):(J(de,0),J(de,0),J(de,0),J(de,0),J(de,0),J(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),J(de,3),de.status=W);else{var Ie=R+(de.w_bits-8<<4)<<8;Ie|=(2<=de.strategy||de.level<2?0:de.level<6?1:de.level===6?2:3)<<6,de.strstart!==0&&(Ie|=32),Ie+=31-Ie%31,de.status=W,K(de,Ie),de.strstart!==0&&(K(de,U.adler>>>16),K(de,65535&U.adler)),U.adler=1}if(de.status===69)if(de.gzhead.extra){for(oe=de.pending;de.gzindex<(65535&de.gzhead.extra.length)&&(de.pending!==de.pending_buf_size||(de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),H(U),oe=de.pending,de.pending!==de.pending_buf_size));)J(de,255&de.gzhead.extra[de.gzindex]),de.gzindex++;de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=73)}else de.status=73;if(de.status===73)if(de.gzhead.name){oe=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),H(U),oe=de.pending,de.pending===de.pending_buf_size)){he=1;break}he=de.gzindex<de.gzhead.name.length?255&de.gzhead.name.charCodeAt(de.gzindex++):0,J(de,he)}while(he!==0);de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),he===0&&(de.gzindex=0,de.status=91)}else de.status=91;if(de.status===91)if(de.gzhead.comment){oe=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),H(U),oe=de.pending,de.pending===de.pending_buf_size)){he=1;break}he=de.gzindex<de.gzhead.comment.length?255&de.gzhead.comment.charCodeAt(de.gzindex++):0,J(de,he)}while(he!==0);de.gzhead.hcrc&&de.pending>oe&&(U.adler=h(U.adler,de.pending_buf,de.pending-oe,oe)),he===0&&(de.status=103)}else de.status=103;if(de.status===103&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&H(U),de.pending+2<=de.pending_buf_size&&(J(de,255&U.adler),J(de,U.adler>>8&255),U.adler=0,de.status=W)):de.status=W),de.pending!==0){if(H(U),U.avail_out===0)return de.last_flush=-1,v}else if(U.avail_in===0&&pe(ye)<=pe($)&&ye!==w)return me(U,-5);if(de.status===666&&U.avail_in!==0)return me(U,-5);if(U.avail_in!==0||de.lookahead!==0||ye!==x&&de.status!==666){var Le=de.strategy===2?(function(be,je){for(var Oe;;){if(be.lookahead===0&&(xe(be),be.lookahead===0)){if(je===x)return M;break}if(be.match_length=0,Oe=c._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++,Oe&&(L(be,!1),be.strm.avail_out===0))return M}return be.insert=0,je===w?(L(be,!0),be.strm.avail_out===0?ee:ae):be.last_lit&&(L(be,!1),be.strm.avail_out===0)?M:ce})(de,ye):de.strategy===3?(function(be,je){for(var Oe,Je,at,dt,pt=be.window;;){if(be.lookahead<=ne){if(xe(be),be.lookahead<=ne&&je===x)return M;if(be.lookahead===0)break}if(be.match_length=0,be.lookahead>=Q&&0<be.strstart&&(Je=pt[at=be.strstart-1])===pt[++at]&&Je===pt[++at]&&Je===pt[++at]){dt=be.strstart+ne;do;while(Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&Je===pt[++at]&&at<dt);be.match_length=ne-(dt-at),be.match_length>be.lookahead&&(be.match_length=be.lookahead)}if(be.match_length>=Q?(Oe=c._tr_tally(be,1,be.match_length-Q),be.lookahead-=be.match_length,be.strstart+=be.match_length,be.match_length=0):(Oe=c._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++),Oe&&(L(be,!1),be.strm.avail_out===0))return M}return be.insert=0,je===w?(L(be,!0),be.strm.avail_out===0?ee:ae):be.last_lit&&(L(be,!1),be.strm.avail_out===0)?M:ce})(de,ye):o[de.level].func(de,ye);if(Le!==ee&&Le!==ae||(de.status=666),Le===M||Le===ee)return U.avail_out===0&&(de.last_flush=-1),v;if(Le===ce&&(ye===1?c._tr_align(de):ye!==5&&(c._tr_stored_block(de,0,0,!1),ye===3&&(ve(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),H(U),U.avail_out===0))return de.last_flush=-1,v}return ye!==w?v:de.wrap<=0?1:(de.wrap===2?(J(de,255&U.adler),J(de,U.adler>>8&255),J(de,U.adler>>16&255),J(de,U.adler>>24&255),J(de,255&U.total_in),J(de,U.total_in>>8&255),J(de,U.total_in>>16&255),J(de,U.total_in>>24&255)):(K(de,U.adler>>>16),K(de,65535&U.adler)),H(U),0<de.wrap&&(de.wrap=-de.wrap),de.pending!==0?v:1)},s.deflateEnd=function(U){var ye;return U&&U.state?(ye=U.state.status)!==j&&ye!==69&&ye!==73&&ye!==91&&ye!==103&&ye!==W&&ye!==666?me(U,I):(U.state=null,ye===W?me(U,-3):v):I},s.deflateSetDictionary=function(U,ye){var $,de,oe,he,Ie,Le,be,je,Oe=ye.length;if(!U||!U.state||(he=($=U.state).wrap)===2||he===1&&$.status!==j||$.lookahead)return I;for(he===1&&(U.adler=d(U.adler,ye,Oe,0)),$.wrap=0,Oe>=$.w_size&&(he===0&&(ve($.head),$.strstart=0,$.block_start=0,$.insert=0),je=new l.Buf8($.w_size),l.arraySet(je,ye,Oe-$.w_size,$.w_size,0),ye=je,Oe=$.w_size),Ie=U.avail_in,Le=U.next_in,be=U.input,U.avail_in=Oe,U.next_in=0,U.input=ye,xe($);$.lookahead>=Q;){for(de=$.strstart,oe=$.lookahead-(Q-1);$.ins_h=($.ins_h<<$.hash_shift^$.window[de+Q-1])&$.hash_mask,$.prev[de&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=de,de++,--oe;);$.strstart=de,$.lookahead=Q-1,xe($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=Q-1,$.match_available=0,U.next_in=Le,U.input=be,U.avail_in=Ie,$.wrap=he,v},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,s){i.exports=function(o,l){var c,d,h,m,x,w,v,I,A,E,C,R,D,z,B,se,q,G,Q,ne,F,j,W,M,ce;c=o.state,d=o.next_in,M=o.input,h=d+(o.avail_in-5),m=o.next_out,ce=o.output,x=m-(l-o.avail_out),w=m+(o.avail_out-257),v=c.dmax,I=c.wsize,A=c.whave,E=c.wnext,C=c.window,R=c.hold,D=c.bits,z=c.lencode,B=c.distcode,se=(1<<c.lenbits)-1,q=(1<<c.distbits)-1;e:do{D<15&&(R+=M[d++]<<D,D+=8,R+=M[d++]<<D,D+=8),G=z[R&se];t:for(;;){if(R>>>=Q=G>>>24,D-=Q,(Q=G>>>16&255)===0)ce[m++]=65535&G;else{if(!(16&Q)){if((64&Q)==0){G=z[(65535&G)+(R&(1<<Q)-1)];continue t}if(32&Q){c.mode=12;break e}o.msg="invalid literal/length code",c.mode=30;break e}ne=65535&G,(Q&=15)&&(D<Q&&(R+=M[d++]<<D,D+=8),ne+=R&(1<<Q)-1,R>>>=Q,D-=Q),D<15&&(R+=M[d++]<<D,D+=8,R+=M[d++]<<D,D+=8),G=B[R&q];n:for(;;){if(R>>>=Q=G>>>24,D-=Q,!(16&(Q=G>>>16&255))){if((64&Q)==0){G=B[(65535&G)+(R&(1<<Q)-1)];continue n}o.msg="invalid distance code",c.mode=30;break e}if(F=65535&G,D<(Q&=15)&&(R+=M[d++]<<D,(D+=8)<Q&&(R+=M[d++]<<D,D+=8)),v<(F+=R&(1<<Q)-1)){o.msg="invalid distance too far back",c.mode=30;break e}if(R>>>=Q,D-=Q,(Q=m-x)<F){if(A<(Q=F-Q)&&c.sane){o.msg="invalid distance too far back",c.mode=30;break e}if(W=C,(j=0)===E){if(j+=I-Q,Q<ne){for(ne-=Q;ce[m++]=C[j++],--Q;);j=m-F,W=ce}}else if(E<Q){if(j+=I+E-Q,(Q-=E)<ne){for(ne-=Q;ce[m++]=C[j++],--Q;);if(j=0,E<ne){for(ne-=Q=E;ce[m++]=C[j++],--Q;);j=m-F,W=ce}}}else if(j+=E-Q,Q<ne){for(ne-=Q;ce[m++]=C[j++],--Q;);j=m-F,W=ce}for(;2<ne;)ce[m++]=W[j++],ce[m++]=W[j++],ce[m++]=W[j++],ne-=3;ne&&(ce[m++]=W[j++],1<ne&&(ce[m++]=W[j++]))}else{for(j=m-F;ce[m++]=ce[j++],ce[m++]=ce[j++],ce[m++]=ce[j++],2<(ne-=3););ne&&(ce[m++]=ce[j++],1<ne&&(ce[m++]=ce[j++]))}break}}break}}while(d<h&&m<w);d-=ne=D>>3,R&=(1<<(D-=ne<<3))-1,o.next_in=d,o.next_out=m,o.avail_in=d<h?h-d+5:5-(d-h),o.avail_out=m<w?w-m+257:257-(m-w),c.hold=R,c.bits=D}},{}],49:[function(n,i,s){var o=n("../utils/common"),l=n("./adler32"),c=n("./crc32"),d=n("./inffast"),h=n("./inftrees"),m=1,x=2,w=0,v=-2,I=1,A=852,E=592;function C(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(j){var W;return j&&j.state?(W=j.state,j.total_in=j.total_out=W.total=0,j.msg="",W.wrap&&(j.adler=1&W.wrap),W.mode=I,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new o.Buf32(A),W.distcode=W.distdyn=new o.Buf32(E),W.sane=1,W.back=-1,w):v}function z(j){var W;return j&&j.state?((W=j.state).wsize=0,W.whave=0,W.wnext=0,D(j)):v}function B(j,W){var M,ce;return j&&j.state?(ce=j.state,W<0?(M=0,W=-W):(M=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?v:(ce.window!==null&&ce.wbits!==W&&(ce.window=null),ce.wrap=M,ce.wbits=W,z(j))):v}function se(j,W){var M,ce;return j?(ce=new R,(j.state=ce).window=null,(M=B(j,W))!==w&&(j.state=null),M):v}var q,G,Q=!0;function ne(j){if(Q){var W;for(q=new o.Buf32(512),G=new o.Buf32(32),W=0;W<144;)j.lens[W++]=8;for(;W<256;)j.lens[W++]=9;for(;W<280;)j.lens[W++]=7;for(;W<288;)j.lens[W++]=8;for(h(m,j.lens,0,288,q,0,j.work,{bits:9}),W=0;W<32;)j.lens[W++]=5;h(x,j.lens,0,32,G,0,j.work,{bits:5}),Q=!1}j.lencode=q,j.lenbits=9,j.distcode=G,j.distbits=5}function F(j,W,M,ce){var ee,ae=j.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new o.Buf8(ae.wsize)),ce>=ae.wsize?(o.arraySet(ae.window,W,M-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(ce<(ee=ae.wsize-ae.wnext)&&(ee=ce),o.arraySet(ae.window,W,M-ce,ee,ae.wnext),(ce-=ee)?(o.arraySet(ae.window,W,M-ce,ce,0),ae.wnext=ce,ae.whave=ae.wsize):(ae.wnext+=ee,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=ee))),0}s.inflateReset=z,s.inflateReset2=B,s.inflateResetKeep=D,s.inflateInit=function(j){return se(j,15)},s.inflateInit2=se,s.inflate=function(j,W){var M,ce,ee,ae,me,pe,ve,H,L,J,K,ie,xe,Ae,Ce,Ee,Re,De,He,Xe,U,ye,$,de,oe=0,he=new o.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return v;(M=j.state).mode===12&&(M.mode=13),me=j.next_out,ee=j.output,ve=j.avail_out,ae=j.next_in,ce=j.input,pe=j.avail_in,H=M.hold,L=M.bits,J=pe,K=ve,ye=w;e:for(;;)switch(M.mode){case I:if(M.wrap===0){M.mode=13;break}for(;L<16;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(2&M.wrap&&H===35615){he[M.check=0]=255&H,he[1]=H>>>8&255,M.check=c(M.check,he,2,0),L=H=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&H)<<8)+(H>>8))%31){j.msg="incorrect header check",M.mode=30;break}if((15&H)!=8){j.msg="unknown compression method",M.mode=30;break}if(L-=4,U=8+(15&(H>>>=4)),M.wbits===0)M.wbits=U;else if(U>M.wbits){j.msg="invalid window size",M.mode=30;break}M.dmax=1<<U,j.adler=M.check=1,M.mode=512&H?10:12,L=H=0;break;case 2:for(;L<16;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(M.flags=H,(255&M.flags)!=8){j.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){j.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=H>>8&1),512&M.flags&&(he[0]=255&H,he[1]=H>>>8&255,M.check=c(M.check,he,2,0)),L=H=0,M.mode=3;case 3:for(;L<32;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.head&&(M.head.time=H),512&M.flags&&(he[0]=255&H,he[1]=H>>>8&255,he[2]=H>>>16&255,he[3]=H>>>24&255,M.check=c(M.check,he,4,0)),L=H=0,M.mode=4;case 4:for(;L<16;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.head&&(M.head.xflags=255&H,M.head.os=H>>8),512&M.flags&&(he[0]=255&H,he[1]=H>>>8&255,M.check=c(M.check,he,2,0)),L=H=0,M.mode=5;case 5:if(1024&M.flags){for(;L<16;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.length=H,M.head&&(M.head.extra_len=H),512&M.flags&&(he[0]=255&H,he[1]=H>>>8&255,M.check=c(M.check,he,2,0)),L=H=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(pe<(ie=M.length)&&(ie=pe),ie&&(M.head&&(U=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),o.arraySet(M.head.extra,ce,ae,ie,U)),512&M.flags&&(M.check=c(M.check,ce,ie,ae)),pe-=ie,ae+=ie,M.length-=ie),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(pe===0)break e;for(ie=0;U=ce[ae+ie++],M.head&&U&&M.length<65536&&(M.head.name+=String.fromCharCode(U)),U&&ie<pe;);if(512&M.flags&&(M.check=c(M.check,ce,ie,ae)),pe-=ie,ae+=ie,U)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(pe===0)break e;for(ie=0;U=ce[ae+ie++],M.head&&U&&M.length<65536&&(M.head.comment+=String.fromCharCode(U)),U&&ie<pe;);if(512&M.flags&&(M.check=c(M.check,ce,ie,ae)),pe-=ie,ae+=ie,U)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;L<16;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(H!==(65535&M.check)){j.msg="header crc mismatch",M.mode=30;break}L=H=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),j.adler=M.check=0,M.mode=12;break;case 10:for(;L<32;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}j.adler=M.check=C(H),L=H=0,M.mode=11;case 11:if(M.havedict===0)return j.next_out=me,j.avail_out=ve,j.next_in=ae,j.avail_in=pe,M.hold=H,M.bits=L,2;j.adler=M.check=1,M.mode=12;case 12:if(W===5||W===6)break e;case 13:if(M.last){H>>>=7&L,L-=7&L,M.mode=27;break}for(;L<3;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}switch(M.last=1&H,L-=1,3&(H>>>=1)){case 0:M.mode=14;break;case 1:if(ne(M),M.mode=20,W!==6)break;H>>>=2,L-=2;break e;case 2:M.mode=17;break;case 3:j.msg="invalid block type",M.mode=30}H>>>=2,L-=2;break;case 14:for(H>>>=7&L,L-=7&L;L<32;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if((65535&H)!=(H>>>16^65535)){j.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&H,L=H=0,M.mode=15,W===6)break e;case 15:M.mode=16;case 16:if(ie=M.length){if(pe<ie&&(ie=pe),ve<ie&&(ie=ve),ie===0)break e;o.arraySet(ee,ce,ae,ie,me),pe-=ie,ae+=ie,ve-=ie,me+=ie,M.length-=ie;break}M.mode=12;break;case 17:for(;L<14;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(M.nlen=257+(31&H),H>>>=5,L-=5,M.ndist=1+(31&H),H>>>=5,L-=5,M.ncode=4+(15&H),H>>>=4,L-=4,286<M.nlen||30<M.ndist){j.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;L<3;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.lens[Ie[M.have++]]=7&H,H>>>=3,L-=3}for(;M.have<19;)M.lens[Ie[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,$={bits:M.lenbits},ye=h(0,M.lens,0,19,M.lencode,0,M.work,$),M.lenbits=$.bits,ye){j.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Ee=(oe=M.lencode[H&(1<<M.lenbits)-1])>>>16&255,Re=65535&oe,!((Ce=oe>>>24)<=L);){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(Re<16)H>>>=Ce,L-=Ce,M.lens[M.have++]=Re;else{if(Re===16){for(de=Ce+2;L<de;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(H>>>=Ce,L-=Ce,M.have===0){j.msg="invalid bit length repeat",M.mode=30;break}U=M.lens[M.have-1],ie=3+(3&H),H>>>=2,L-=2}else if(Re===17){for(de=Ce+3;L<de;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}L-=Ce,U=0,ie=3+(7&(H>>>=Ce)),H>>>=3,L-=3}else{for(de=Ce+7;L<de;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}L-=Ce,U=0,ie=11+(127&(H>>>=Ce)),H>>>=7,L-=7}if(M.have+ie>M.nlen+M.ndist){j.msg="invalid bit length repeat",M.mode=30;break}for(;ie--;)M.lens[M.have++]=U}}if(M.mode===30)break;if(M.lens[256]===0){j.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,$={bits:M.lenbits},ye=h(m,M.lens,0,M.nlen,M.lencode,0,M.work,$),M.lenbits=$.bits,ye){j.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,$={bits:M.distbits},ye=h(x,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,$),M.distbits=$.bits,ye){j.msg="invalid distances set",M.mode=30;break}if(M.mode=20,W===6)break e;case 20:M.mode=21;case 21:if(6<=pe&&258<=ve){j.next_out=me,j.avail_out=ve,j.next_in=ae,j.avail_in=pe,M.hold=H,M.bits=L,d(j,K),me=j.next_out,ee=j.output,ve=j.avail_out,ae=j.next_in,ce=j.input,pe=j.avail_in,H=M.hold,L=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Ee=(oe=M.lencode[H&(1<<M.lenbits)-1])>>>16&255,Re=65535&oe,!((Ce=oe>>>24)<=L);){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(Ee&&(240&Ee)==0){for(De=Ce,He=Ee,Xe=Re;Ee=(oe=M.lencode[Xe+((H&(1<<De+He)-1)>>De)])>>>16&255,Re=65535&oe,!(De+(Ce=oe>>>24)<=L);){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}H>>>=De,L-=De,M.back+=De}if(H>>>=Ce,L-=Ce,M.back+=Ce,M.length=Re,Ee===0){M.mode=26;break}if(32&Ee){M.back=-1,M.mode=12;break}if(64&Ee){j.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Ee,M.mode=22;case 22:if(M.extra){for(de=M.extra;L<de;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.length+=H&(1<<M.extra)-1,H>>>=M.extra,L-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Ee=(oe=M.distcode[H&(1<<M.distbits)-1])>>>16&255,Re=65535&oe,!((Ce=oe>>>24)<=L);){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if((240&Ee)==0){for(De=Ce,He=Ee,Xe=Re;Ee=(oe=M.distcode[Xe+((H&(1<<De+He)-1)>>De)])>>>16&255,Re=65535&oe,!(De+(Ce=oe>>>24)<=L);){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}H>>>=De,L-=De,M.back+=De}if(H>>>=Ce,L-=Ce,M.back+=Ce,64&Ee){j.msg="invalid distance code",M.mode=30;break}M.offset=Re,M.extra=15&Ee,M.mode=24;case 24:if(M.extra){for(de=M.extra;L<de;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}M.offset+=H&(1<<M.extra)-1,H>>>=M.extra,L-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){j.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(ve===0)break e;if(ie=K-ve,M.offset>ie){if((ie=M.offset-ie)>M.whave&&M.sane){j.msg="invalid distance too far back",M.mode=30;break}xe=ie>M.wnext?(ie-=M.wnext,M.wsize-ie):M.wnext-ie,ie>M.length&&(ie=M.length),Ae=M.window}else Ae=ee,xe=me-M.offset,ie=M.length;for(ve<ie&&(ie=ve),ve-=ie,M.length-=ie;ee[me++]=Ae[xe++],--ie;);M.length===0&&(M.mode=21);break;case 26:if(ve===0)break e;ee[me++]=M.length,ve--,M.mode=21;break;case 27:if(M.wrap){for(;L<32;){if(pe===0)break e;pe--,H|=ce[ae++]<<L,L+=8}if(K-=ve,j.total_out+=K,M.total+=K,K&&(j.adler=M.check=M.flags?c(M.check,ee,K,me-K):l(M.check,ee,K,me-K)),K=ve,(M.flags?H:C(H))!==M.check){j.msg="incorrect data check",M.mode=30;break}L=H=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;L<32;){if(pe===0)break e;pe--,H+=ce[ae++]<<L,L+=8}if(H!==(4294967295&M.total)){j.msg="incorrect length check",M.mode=30;break}L=H=0}M.mode=29;case 29:ye=1;break e;case 30:ye=-3;break e;case 31:return-4;case 32:default:return v}return j.next_out=me,j.avail_out=ve,j.next_in=ae,j.avail_in=pe,M.hold=H,M.bits=L,(M.wsize||K!==j.avail_out&&M.mode<30&&(M.mode<27||W!==4))&&F(j,j.output,j.next_out,K-j.avail_out)?(M.mode=31,-4):(J-=j.avail_in,K-=j.avail_out,j.total_in+=J,j.total_out+=K,M.total+=K,M.wrap&&K&&(j.adler=M.check=M.flags?c(M.check,ee,K,j.next_out-K):l(M.check,ee,K,j.next_out-K)),j.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(J==0&&K===0||W===4)&&ye===w&&(ye=-5),ye)},s.inflateEnd=function(j){if(!j||!j.state)return v;var W=j.state;return W.window&&(W.window=null),j.state=null,w},s.inflateGetHeader=function(j,W){var M;return j&&j.state?(2&(M=j.state).wrap)==0?v:((M.head=W).done=!1,w):v},s.inflateSetDictionary=function(j,W){var M,ce=W.length;return j&&j.state?(M=j.state).wrap!==0&&M.mode!==11?v:M.mode===11&&l(1,W,ce,0)!==M.check?-3:F(j,W,ce,ce)?(M.mode=31,-4):(M.havedict=1,w):v},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,s){var o=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,x,w,v,I,A,E,C){var R,D,z,B,se,q,G,Q,ne,F=C.bits,j=0,W=0,M=0,ce=0,ee=0,ae=0,me=0,pe=0,ve=0,H=0,L=null,J=0,K=new o.Buf16(16),ie=new o.Buf16(16),xe=null,Ae=0;for(j=0;j<=15;j++)K[j]=0;for(W=0;W<v;W++)K[x[w+W]]++;for(ee=F,ce=15;1<=ce&&K[ce]===0;ce--);if(ce<ee&&(ee=ce),ce===0)return I[A++]=20971520,I[A++]=20971520,C.bits=1,0;for(M=1;M<ce&&K[M]===0;M++);for(ee<M&&(ee=M),j=pe=1;j<=15;j++)if(pe<<=1,(pe-=K[j])<0)return-1;if(0<pe&&(m===0||ce!==1))return-1;for(ie[1]=0,j=1;j<15;j++)ie[j+1]=ie[j]+K[j];for(W=0;W<v;W++)x[w+W]!==0&&(E[ie[x[w+W]]++]=W);if(q=m===0?(L=xe=E,19):m===1?(L=l,J-=257,xe=c,Ae-=257,256):(L=d,xe=h,-1),j=M,se=A,me=W=H=0,z=-1,B=(ve=1<<(ae=ee))-1,m===1&&852<ve||m===2&&592<ve)return 1;for(;;){for(G=j-me,ne=E[W]<q?(Q=0,E[W]):E[W]>q?(Q=xe[Ae+E[W]],L[J+E[W]]):(Q=96,0),R=1<<j-me,M=D=1<<ae;I[se+(H>>me)+(D-=R)]=G<<24|Q<<16|ne|0,D!==0;);for(R=1<<j-1;H&R;)R>>=1;if(R!==0?(H&=R-1,H+=R):H=0,W++,--K[j]==0){if(j===ce)break;j=x[w+E[W]]}if(ee<j&&(H&B)!==z){for(me===0&&(me=ee),se+=M,pe=1<<(ae=j-me);ae+me<ce&&!((pe-=K[ae+me])<=0);)ae++,pe<<=1;if(ve+=1<<ae,m===1&&852<ve||m===2&&592<ve)return 1;I[z=H&B]=ee<<24|ae<<16|se-A|0}}return H!==0&&(I[se+H]=j-me<<24|64<<16|0),C.bits=ee,0}},{"../utils/common":41}],51:[function(n,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,s){var o=n("../utils/common"),l=0,c=1;function d(oe){for(var he=oe.length;0<=--he;)oe[he]=0}var h=0,m=29,x=256,w=x+1+m,v=30,I=19,A=2*w+1,E=15,C=16,R=7,D=256,z=16,B=17,se=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(w+2));d(F);var j=new Array(2*v);d(j);var W=new Array(512);d(W);var M=new Array(256);d(M);var ce=new Array(m);d(ce);var ee,ae,me,pe=new Array(v);function ve(oe,he,Ie,Le,be){this.static_tree=oe,this.extra_bits=he,this.extra_base=Ie,this.elems=Le,this.max_length=be,this.has_stree=oe&&oe.length}function H(oe,he){this.dyn_tree=oe,this.max_code=0,this.stat_desc=he}function L(oe){return oe<256?W[oe]:W[256+(oe>>>7)]}function J(oe,he){oe.pending_buf[oe.pending++]=255&he,oe.pending_buf[oe.pending++]=he>>>8&255}function K(oe,he,Ie){oe.bi_valid>C-Ie?(oe.bi_buf|=he<<oe.bi_valid&65535,J(oe,oe.bi_buf),oe.bi_buf=he>>C-oe.bi_valid,oe.bi_valid+=Ie-C):(oe.bi_buf|=he<<oe.bi_valid&65535,oe.bi_valid+=Ie)}function ie(oe,he,Ie){K(oe,Ie[2*he],Ie[2*he+1])}function xe(oe,he){for(var Ie=0;Ie|=1&oe,oe>>>=1,Ie<<=1,0<--he;);return Ie>>>1}function Ae(oe,he,Ie){var Le,be,je=new Array(E+1),Oe=0;for(Le=1;Le<=E;Le++)je[Le]=Oe=Oe+Ie[Le-1]<<1;for(be=0;be<=he;be++){var Je=oe[2*be+1];Je!==0&&(oe[2*be]=xe(je[Je]++,Je))}}function Ce(oe){var he;for(he=0;he<w;he++)oe.dyn_ltree[2*he]=0;for(he=0;he<v;he++)oe.dyn_dtree[2*he]=0;for(he=0;he<I;he++)oe.bl_tree[2*he]=0;oe.dyn_ltree[2*D]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function Ee(oe){8<oe.bi_valid?J(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Re(oe,he,Ie,Le){var be=2*he,je=2*Ie;return oe[be]<oe[je]||oe[be]===oe[je]&&Le[he]<=Le[Ie]}function De(oe,he,Ie){for(var Le=oe.heap[Ie],be=Ie<<1;be<=oe.heap_len&&(be<oe.heap_len&&Re(he,oe.heap[be+1],oe.heap[be],oe.depth)&&be++,!Re(he,Le,oe.heap[be],oe.depth));)oe.heap[Ie]=oe.heap[be],Ie=be,be<<=1;oe.heap[Ie]=Le}function He(oe,he,Ie){var Le,be,je,Oe,Je=0;if(oe.last_lit!==0)for(;Le=oe.pending_buf[oe.d_buf+2*Je]<<8|oe.pending_buf[oe.d_buf+2*Je+1],be=oe.pending_buf[oe.l_buf+Je],Je++,Le===0?ie(oe,be,he):(ie(oe,(je=M[be])+x+1,he),(Oe=q[je])!==0&&K(oe,be-=ce[je],Oe),ie(oe,je=L(--Le),Ie),(Oe=G[je])!==0&&K(oe,Le-=pe[je],Oe)),Je<oe.last_lit;);ie(oe,D,he)}function Xe(oe,he){var Ie,Le,be,je=he.dyn_tree,Oe=he.stat_desc.static_tree,Je=he.stat_desc.has_stree,at=he.stat_desc.elems,dt=-1;for(oe.heap_len=0,oe.heap_max=A,Ie=0;Ie<at;Ie++)je[2*Ie]!==0?(oe.heap[++oe.heap_len]=dt=Ie,oe.depth[Ie]=0):je[2*Ie+1]=0;for(;oe.heap_len<2;)je[2*(be=oe.heap[++oe.heap_len]=dt<2?++dt:0)]=1,oe.depth[be]=0,oe.opt_len--,Je&&(oe.static_len-=Oe[2*be+1]);for(he.max_code=dt,Ie=oe.heap_len>>1;1<=Ie;Ie--)De(oe,je,Ie);for(be=at;Ie=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],De(oe,je,1),Le=oe.heap[1],oe.heap[--oe.heap_max]=Ie,oe.heap[--oe.heap_max]=Le,je[2*be]=je[2*Ie]+je[2*Le],oe.depth[be]=(oe.depth[Ie]>=oe.depth[Le]?oe.depth[Ie]:oe.depth[Le])+1,je[2*Ie+1]=je[2*Le+1]=be,oe.heap[1]=be++,De(oe,je,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],(function(pt,mt){var Rt,st,Rn,gt,on,Ot,Ct=mt.dyn_tree,Gr=mt.max_code,Jt=mt.stat_desc.static_tree,pi=mt.stat_desc.has_stree,jt=mt.stat_desc.extra_bits,Gn=mt.stat_desc.extra_base,tr=mt.stat_desc.max_length,Yt=0;for(gt=0;gt<=E;gt++)pt.bl_count[gt]=0;for(Ct[2*pt.heap[pt.heap_max]+1]=0,Rt=pt.heap_max+1;Rt<A;Rt++)tr<(gt=Ct[2*Ct[2*(st=pt.heap[Rt])+1]+1]+1)&&(gt=tr,Yt++),Ct[2*st+1]=gt,Gr<st||(pt.bl_count[gt]++,on=0,Gn<=st&&(on=jt[st-Gn]),Ot=Ct[2*st],pt.opt_len+=Ot*(gt+on),pi&&(pt.static_len+=Ot*(Jt[2*st+1]+on)));if(Yt!==0){do{for(gt=tr-1;pt.bl_count[gt]===0;)gt--;pt.bl_count[gt]--,pt.bl_count[gt+1]+=2,pt.bl_count[tr]--,Yt-=2}while(0<Yt);for(gt=tr;gt!==0;gt--)for(st=pt.bl_count[gt];st!==0;)Gr<(Rn=pt.heap[--Rt])||(Ct[2*Rn+1]!==gt&&(pt.opt_len+=(gt-Ct[2*Rn+1])*Ct[2*Rn],Ct[2*Rn+1]=gt),st--)}})(oe,he),Ae(je,dt,oe.bl_count)}function U(oe,he,Ie){var Le,be,je=-1,Oe=he[1],Je=0,at=7,dt=4;for(Oe===0&&(at=138,dt=3),he[2*(Ie+1)+1]=65535,Le=0;Le<=Ie;Le++)be=Oe,Oe=he[2*(Le+1)+1],++Je<at&&be===Oe||(Je<dt?oe.bl_tree[2*be]+=Je:be!==0?(be!==je&&oe.bl_tree[2*be]++,oe.bl_tree[2*z]++):Je<=10?oe.bl_tree[2*B]++:oe.bl_tree[2*se]++,je=be,dt=(Je=0)===Oe?(at=138,3):be===Oe?(at=6,3):(at=7,4))}function ye(oe,he,Ie){var Le,be,je=-1,Oe=he[1],Je=0,at=7,dt=4;for(Oe===0&&(at=138,dt=3),Le=0;Le<=Ie;Le++)if(be=Oe,Oe=he[2*(Le+1)+1],!(++Je<at&&be===Oe)){if(Je<dt)for(;ie(oe,be,oe.bl_tree),--Je!=0;);else be!==0?(be!==je&&(ie(oe,be,oe.bl_tree),Je--),ie(oe,z,oe.bl_tree),K(oe,Je-3,2)):Je<=10?(ie(oe,B,oe.bl_tree),K(oe,Je-3,3)):(ie(oe,se,oe.bl_tree),K(oe,Je-11,7));je=be,dt=(Je=0)===Oe?(at=138,3):be===Oe?(at=6,3):(at=7,4)}}d(pe);var $=!1;function de(oe,he,Ie,Le){K(oe,(h<<1)+(Le?1:0),3),(function(be,je,Oe,Je){Ee(be),J(be,Oe),J(be,~Oe),o.arraySet(be.pending_buf,be.window,je,Oe,be.pending),be.pending+=Oe})(oe,he,Ie)}s._tr_init=function(oe){$||((function(){var he,Ie,Le,be,je,Oe=new Array(E+1);for(be=Le=0;be<m-1;be++)for(ce[be]=Le,he=0;he<1<<q[be];he++)M[Le++]=be;for(M[Le-1]=be,be=je=0;be<16;be++)for(pe[be]=je,he=0;he<1<<G[be];he++)W[je++]=be;for(je>>=7;be<v;be++)for(pe[be]=je<<7,he=0;he<1<<G[be]-7;he++)W[256+je++]=be;for(Ie=0;Ie<=E;Ie++)Oe[Ie]=0;for(he=0;he<=143;)F[2*he+1]=8,he++,Oe[8]++;for(;he<=255;)F[2*he+1]=9,he++,Oe[9]++;for(;he<=279;)F[2*he+1]=7,he++,Oe[7]++;for(;he<=287;)F[2*he+1]=8,he++,Oe[8]++;for(Ae(F,w+1,Oe),he=0;he<v;he++)j[2*he+1]=5,j[2*he]=xe(he,5);ee=new ve(F,q,x+1,w,E),ae=new ve(j,G,0,v,E),me=new ve(new Array(0),Q,0,I,R)})(),$=!0),oe.l_desc=new H(oe.dyn_ltree,ee),oe.d_desc=new H(oe.dyn_dtree,ae),oe.bl_desc=new H(oe.bl_tree,me),oe.bi_buf=0,oe.bi_valid=0,Ce(oe)},s._tr_stored_block=de,s._tr_flush_block=function(oe,he,Ie,Le){var be,je,Oe=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=(function(Je){var at,dt=4093624447;for(at=0;at<=31;at++,dt>>>=1)if(1&dt&&Je.dyn_ltree[2*at]!==0)return l;if(Je.dyn_ltree[18]!==0||Je.dyn_ltree[20]!==0||Je.dyn_ltree[26]!==0)return c;for(at=32;at<x;at++)if(Je.dyn_ltree[2*at]!==0)return c;return l})(oe)),Xe(oe,oe.l_desc),Xe(oe,oe.d_desc),Oe=(function(Je){var at;for(U(Je,Je.dyn_ltree,Je.l_desc.max_code),U(Je,Je.dyn_dtree,Je.d_desc.max_code),Xe(Je,Je.bl_desc),at=I-1;3<=at&&Je.bl_tree[2*ne[at]+1]===0;at--);return Je.opt_len+=3*(at+1)+5+5+4,at})(oe),be=oe.opt_len+3+7>>>3,(je=oe.static_len+3+7>>>3)<=be&&(be=je)):be=je=Ie+5,Ie+4<=be&&he!==-1?de(oe,he,Ie,Le):oe.strategy===4||je===be?(K(oe,2+(Le?1:0),3),He(oe,F,j)):(K(oe,4+(Le?1:0),3),(function(Je,at,dt,pt){var mt;for(K(Je,at-257,5),K(Je,dt-1,5),K(Je,pt-4,4),mt=0;mt<pt;mt++)K(Je,Je.bl_tree[2*ne[mt]+1],3);ye(Je,Je.dyn_ltree,at-1),ye(Je,Je.dyn_dtree,dt-1)})(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,Oe+1),He(oe,oe.dyn_ltree,oe.dyn_dtree)),Ce(oe),Le&&Ee(oe)},s._tr_tally=function(oe,he,Ie){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=he>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&he,oe.pending_buf[oe.l_buf+oe.last_lit]=255&Ie,oe.last_lit++,he===0?oe.dyn_ltree[2*Ie]++:(oe.matches++,he--,oe.dyn_ltree[2*(M[Ie]+x+1)]++,oe.dyn_dtree[2*L(he)]++),oe.last_lit===oe.lit_bufsize-1},s._tr_align=function(oe){K(oe,2,3),ie(oe,D,F),(function(he){he.bi_valid===16?(J(he,he.bi_buf),he.bi_buf=0,he.bi_valid=0):8<=he.bi_valid&&(he.pending_buf[he.pending++]=255&he.bi_buf,he.bi_buf>>=8,he.bi_valid-=8)})(oe)}},{"../utils/common":41}],53:[function(n,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,s){(function(o){(function(l,c){if(!l.setImmediate){var d,h,m,x,w=1,v={},I=!1,A=l.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(l);E=E&&E.setTimeout?E:l,d={}.toString.call(l.process)==="[object process]"?function(z){process.nextTick(function(){R(z)})}:(function(){if(l.postMessage&&!l.importScripts){var z=!0,B=l.onmessage;return l.onmessage=function(){z=!1},l.postMessage("","*"),l.onmessage=B,z}})()?(x="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",D,!1):l.attachEvent("onmessage",D),function(z){l.postMessage(x+z,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(z){R(z.data)},function(z){m.port2.postMessage(z)}):A&&"onreadystatechange"in A.createElement("script")?(h=A.documentElement,function(z){var B=A.createElement("script");B.onreadystatechange=function(){R(z),B.onreadystatechange=null,h.removeChild(B),B=null},h.appendChild(B)}):function(z){setTimeout(R,0,z)},E.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var B=new Array(arguments.length-1),se=0;se<B.length;se++)B[se]=arguments[se+1];var q={callback:z,args:B};return v[w]=q,d(w),w++},E.clearImmediate=C}function C(z){delete v[z]}function R(z){if(I)setTimeout(R,0,z);else{var B=v[z];if(B){I=!0;try{(function(se){var q=se.callback,G=se.args;switch(G.length){case 0:q();break;case 1:q(G[0]);break;case 2:q(G[0],G[1]);break;case 3:q(G[0],G[1],G[2]);break;default:q.apply(c,G)}})(B)}finally{C(z),I=!1}}}}function D(z){z.source===l&&typeof z.data=="string"&&z.data.indexOf(x)===0&&R(+z.data.slice(x.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hp)),hp.exports}var xb=vb();const o2=Xp(xb),Sy=ue.createContext(void 0),ho=()=>{const t=ue.useContext(Sy);if(!t)throw new Error("useStory must be used within a StoryProvider");return t},l2=({children:t})=>{const[e,n]=ue.useState(()=>localStorage.getItem("storyPremise")||""),[i,s]=ue.useState(()=>localStorage.getItem("storyTextToAnalyze")||""),[o,l]=ue.useState([]),[c,d]=ue.useState([]),[h,m]=ue.useState(null),[x,w]=ue.useState([]),[v,I]=ue.useState(null),[A,E]=ue.useState([]),[C,R]=ue.useState([]),[D,z]=ue.useState(!1),[B,se]=ue.useState(""),[q,G]=ue.useState(null),[Q,ne]=ue.useState(null),[F,j]=ue.useState("idle");ue.useEffect(()=>{const Re=localStorage.getItem("storyWeaver_project");if(Re)try{const De=JSON.parse(Re);De.storyPremise&&n(De.storyPremise),De.storyTextToAnalyze&&s(De.storyTextToAnalyze),De.characters&&l(De.characters),De.scenes&&d(De.scenes),De.mapData&&m(De.mapData),De.mapData&&m(De.mapData),De.savedMaterials&&w(De.savedMaterials),De.notes&&E(De.notes),De.items&&R(De.items)}catch(De){console.error("Failed to load saved project data from local storage",De)}},[]),ue.useEffect(()=>{localStorage.setItem("storyPremise",e)},[e]),ue.useEffect(()=>{localStorage.setItem("storyTextToAnalyze",i)},[i]);const W=async()=>{j("saving");try{const Re=new o2,De={storyPremise:e,storyTextToAnalyze:i,timestamp:Date.now(),version:"1.0"};Re.file("project.json",JSON.stringify(De,null,2));const He=Re.folder("characters");o.forEach(je=>{const Oe=je.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();He==null||He.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2))});const Xe=Re.folder("scenes");c.forEach(je=>{const Oe=je.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();Xe==null||Xe.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2))});const U=Re.folder("materials");x.forEach(je=>{const Oe=je.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();U==null||U.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2))});const ye=Re.folder("notes");A.forEach(je=>{const Oe=je.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();ye==null||ye.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2)),ye==null||ye.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2))});const $=Re.folder("items");C.forEach(je=>{const Oe=je.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();$==null||$.file(`${Oe}_${je.id}.json`,JSON.stringify(je,null,2))}),h&&Re.file("world_map.json",JSON.stringify(h,null,2)),v&&Re.file("compiled_book.json",JSON.stringify(v,null,2));const de=await Re.generateAsync({type:"blob"}),oe={storyPremise:e,storyTextToAnalyze:i,characters:o,scenes:c,mapData:h,savedMaterials:x,notes:A,items:C};localStorage.setItem("storyWeaver_project",JSON.stringify(oe));const he=URL.createObjectURL(de),Ie=document.createElement("a");Ie.href=he;const Le=new Date().toISOString().slice(0,10),be=e.split(" ")[0]||"Story";Ie.download=`${be}_Project_${Le}.zip`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(he),j("saved")}catch(Re){console.error("Error saving zip:",Re),G("Failed to create save file."),j("idle")}setTimeout(()=>j("idle"),3e3)},M=async Re=>{z(!0),se("Loading project...");try{if(Re.name.endsWith(".json")){const De=await Re.text(),He=JSON.parse(De);He.storyPremise&&n(He.storyPremise),He.storyTextToAnalyze&&s(He.storyTextToAnalyze),He.characters&&l(He.characters),He.scenes&&d(He.scenes),He.mapData&&m(He.mapData),He.savedMaterials&&w(He.savedMaterials)}else if(Re.name.endsWith(".zip")){const He=await new o2().loadAsync(Re);if(He.file("project.json")){const je=await He.file("project.json").async("string"),Oe=JSON.parse(je);Oe.storyPremise&&n(Oe.storyPremise),Oe.storyTextToAnalyze&&s(Oe.storyTextToAnalyze)}const Xe=He.folder("characters"),U=[];if(Xe){const je=Object.keys(Xe.files).filter(Oe=>!Xe.files[Oe].dir);for(const Oe of je){const Je=await Xe.file(Oe).async("string");U.push(JSON.parse(Je))}}l(U);const ye=He.folder("scenes"),$=[];if(ye){const je=Object.keys(ye.files).filter(Oe=>!ye.files[Oe].dir);for(const Oe of je){const Je=await ye.file(Oe).async("string");$.push(JSON.parse(Je))}}$.sort((je,Oe)=>je.id>Oe.id?1:-1),d($);const de=He.folder("materials"),oe=[];if(de){const je=Object.keys(de.files).filter(Oe=>!de.files[Oe].dir);for(const Oe of je){const Je=await de.file(Oe).async("string");oe.push(JSON.parse(Je))}}w(oe);const he=He.folder("notes"),Ie=[];if(he){const je=Object.keys(he.files).filter(Oe=>!he.files[Oe].dir);for(const Oe of je){const Je=await he.file(Oe).async("string");Ie.push(JSON.parse(Je))}}E(Ie);const Le=He.folder("items"),be=[];if(Le){const je=Object.keys(Le.files).filter(Oe=>!Le.files[Oe].dir);for(const Oe of je){const Je=await Le.file(Oe).async("string");be.push(JSON.parse(Je))}}if(R(be),He.file("world_map.json")){const je=await He.file("world_map.json").async("string");m(JSON.parse(je))}if(He.file("compiled_book.json")){const je=await He.file("compiled_book.json").async("string");I(JSON.parse(je))}}else throw new Error("Unsupported file type");j("saved"),setTimeout(()=>j("idle"),2e3)}catch(De){console.error("Failed to load project file",De),G("Failed to load project file. Invalid format.")}finally{z(!1),se("")}},ce=ue.useCallback((Re,De)=>{l(He=>He.map(Xe=>Xe.id===Re?{...Xe,...De}:Xe))},[]),ee=ue.useCallback(Re=>{l(De=>[...De,Re])},[]),ae=ue.useCallback(Re=>{l(De=>De.filter(He=>He.id!==Re))},[]),me=ue.useCallback(()=>{d(Re=>[...Re,{id:`scene_manual_${Date.now()}`,title:"New Scene",summary:"A brief summary...",fullText:"The full text...",characterIds:[]}])},[]),pe=ue.useCallback((Re,De)=>{d(He=>He.map(Xe=>Xe.id===Re?{...Xe,...De}:Xe))},[]),ve=ue.useCallback(Re=>{d(De=>De.filter(He=>He.id!==Re))},[]),H=ue.useCallback(Re=>{d(Re)},[]),L=ue.useCallback((Re,De)=>{m(He=>He?{...He,locations:He.locations.map(Xe=>Xe.id===Re?{...Xe,...De}:Xe)}:null)},[]),J=ue.useCallback(Re=>{w(De=>De.filter(He=>He.id!==Re))},[]),K=ue.useCallback(Re=>{E(De=>[Re,...De])},[]),ie=ue.useCallback((Re,De)=>{E(He=>He.map(Xe=>Xe.id===Re?{...Xe,...De,updatedAt:new Date().toISOString()}:Xe))},[]),xe=ue.useCallback(Re=>{E(De=>De.filter(He=>He.id!==Re))},[]),Ae=ue.useCallback(Re=>{R(De=>[Re,...De])},[]),Ce=ue.useCallback((Re,De)=>{R(He=>He.map(Xe=>Xe.id===Re?{...Xe,...De}:Xe))},[]),Ee=ue.useCallback(Re=>{R(De=>De.filter(He=>He.id!==Re))},[]);return f.jsx(Sy.Provider,{value:{storyPremise:e,setStoryPremise:n,storyTextToAnalyze:i,setStoryTextToAnalyze:s,characters:o,setCharacters:l,scenes:c,setScenes:d,mapData:h,setMapData:m,savedMaterials:x,setSavedMaterials:w,compiledBook:v,setCompiledBook:I,notes:A,setNotes:E,items:C,setItems:R,isLoading:D,setIsLoading:z,loadingMessage:B,setLoadingMessage:se,error:q,setError:G,generatedContent:Q,setGeneratedContent:ne,saveProject:W,loadProject:M,saveStatus:F,updateCharacter:ce,createCharacter:ee,deleteCharacter:ae,addScene:me,updateScene:pe,deleteScene:ve,reorderScenes:H,updateLocation:L,deleteSavedMaterial:J,addNote:K,updateNote:ie,deleteNote:xe,addItem:Ae,updateItem:Ce,deleteItem:Ee,resetStory:()=>{n(""),s(""),l([]),d([]),m(null),w([]),E([]),R([]),I(null),ne(null),G(null)}},children:t})},bb="https://storyweaver-api.onrender.com/api",Ya={getUsers(){return JSON.parse(localStorage.getItem("sw_users")||"[]")},saveUsers(t){localStorage.setItem("sw_users",JSON.stringify(t))},getStories(){return JSON.parse(localStorage.getItem("sw_stories")||"[]")},saveStories(t){localStorage.setItem("sw_stories",JSON.stringify(t))}};window.location.hostname.includes("github.io")||window.location.hostname.includes("vercel.app");const $l={async request(t,e={}){const n=localStorage.getItem("token"),i={"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{},...e.headers},s=await fetch(`${bb}${t}`,{...e,headers:i});if(!s.ok){const o=await s.json().catch(()=>({error:"An error occurred"}));throw new Error(o.error||`Request failed with status ${s.status}`)}return s.json()},async handleMockRequest(t,e){const n=e.method||"GET";if(console.log(`[Mock API] ${n} ${t}`),await new Promise(i=>setTimeout(i,500)),t==="/auth/login"&&n==="POST"){const{username:i,password:s}=JSON.parse(e.body),l=Ya.getUsers().find(c=>c.username===i);if(l&&l.password===s)return{token:"mock-jwt-token-"+Math.random(),user:{id:l.id,username:l.username}};throw new Error("Invalid credentials")}if(t==="/auth/register"&&n==="POST"){const{username:i,password:s}=JSON.parse(e.body),o=Ya.getUsers();if(o.find(d=>d.username===i))throw new Error("Username already taken");const l={id:Math.random().toString(36).substr(2,9),username:i,password:s};return o.push(l),Ya.saveUsers(o),{token:"mock-jwt-token-"+Math.random(),user:{id:l.id,username:l.username}}}if(t==="/stories"&&n==="GET")return Ya.getStories();if(t==="/stories"&&n==="POST"){const i=JSON.parse(e.body),s=Ya.getStories(),o={...i,id:Math.random().toString(36).substr(2,9),lastUpdated:new Date().toISOString()};return s.push(o),Ya.saveStories(s),o}if(t.startsWith("/stories/")&&n==="GET"){const i=t.split("/").pop(),o=Ya.getStories().find(l=>l.id===i);if(o)return o;throw new Error("Story not found")}if(t.startsWith("/stories/")&&n==="PUT"){const i=t.split("/").pop(),s=JSON.parse(e.body);let o=Ya.getStories(),l=o.findIndex(c=>c.id===i);if(l!==-1)return o[l]={...o[l],...s,lastUpdated:new Date().toISOString()},Ya.saveStories(o),o[l];throw new Error("Story not found")}if(t.startsWith("/stories/")&&n==="DELETE"){const i=t.split("/").pop();let s=Ya.getStories();return s=s.filter(o=>o.id!==i),Ya.saveStories(s),{success:!0}}return[]},get(t){return this.request(t)},post(t,e){return this.request(t,{method:"POST",body:JSON.stringify(e)})},put(t,e){return this.request(t,{method:"PUT",body:JSON.stringify(e)})},delete(t){return this.request(t,{method:"DELETE"})}},wb="1.0.8",Ny={version:wb},Sb=()=>{const[t,e]=ue.useState(""),[n,i]=ue.useState(""),[s,o]=ue.useState(""),{login:l}=Uf(),c=gd(),[d,h]=ue.useState(!1),m=async x=>{x.preventDefault();try{const{token:w,user:v}=await $l.post("/auth/login",{username:t,password:n});l(w,v),c("/")}catch(w){o(w.message)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-bg text-brand-text",children:f.jsxs("div",{className:"glass-panel p-8 rounded-2xl w-full max-w-md border border-white/10",children:[f.jsx("h2",{className:"text-3xl font-serif font-bold mb-6 text-center",children:"Story Weaver"}),f.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-brand-secondary",children:"Login"}),s&&f.jsx("div",{className:"bg-red-500/20 text-red-200 p-3 rounded mb-4 text-sm",children:s}),f.jsxs("form",{onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),f.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none",required:!0,placeholder:"Enter your username",title:"Username"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:d?"text":"password",value:n,onChange:x=>i(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none pr-10",required:!0,placeholder:"Enter your password",title:"Password"}),f.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-2 top-1/2 -translate-y-1/2 text-brand-text-muted hover:text-white transition-colors",title:d?"Hide Password":"Show Password",children:d?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L5.136 5.136m13.727 13.727L13.875 13.875M21 12a9.982 9.982 0 01-1.563 3.029m-5.858-10.364A10.05 10.05 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m-5.858-10.364L18.864 18.864"})}):f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),f.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-bold py-2 px-4 rounded transition",children:"Login"})]}),f.jsxs("p",{className:"mt-4 text-center text-sm text-brand-text-muted",children:["Don't have an account? ",f.jsx(Pf,{to:"/register",className:"text-brand-secondary hover:underline",children:"Register"})]}),f.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:f.jsxs("span",{className:"text-xs font-bold text-amber-500/80 uppercase tracking-widest bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:["Version ",Ny.version]})})]})})},Nb=()=>{const[t,e]=ue.useState(""),[n,i]=ue.useState(""),[s,o]=ue.useState(""),{login:l}=Uf(),c=gd(),[d,h]=ue.useState(!1),m=async x=>{x.preventDefault();try{const{token:w,user:v}=await $l.post("/auth/register",{username:t,password:n});l(w,v),c("/")}catch(w){o(w.message)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-bg text-brand-text",children:f.jsxs("div",{className:"glass-panel p-8 rounded-2xl w-full max-w-md border border-white/10",children:[f.jsx("h2",{className:"text-3xl font-serif font-bold mb-6 text-center",children:"Story Weaver"}),f.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-brand-secondary",children:"Register"}),s&&f.jsx("div",{className:"bg-red-500/20 text-red-200 p-3 rounded mb-4 text-sm",children:s}),f.jsxs("form",{onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),f.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none",required:!0,placeholder:"Choose a username",title:"Username"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:d?"text":"password",value:n,onChange:x=>i(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none pr-10",required:!0,placeholder:"Create a password",title:"Password"}),f.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-2 top-1/2 -translate-y-1/2 text-brand-text-muted hover:text-white transition-colors",title:d?"Hide Password":"Show Password",children:d?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L5.136 5.136m13.727 13.727L13.875 13.875M21 12a9.982 9.982 0 01-1.563 3.029m-5.858-10.364A10.05 10.05 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m-5.858-10.364L18.864 18.864"})}):f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),f.jsx("button",{type:"submit",className:"w-full bg-brand-secondary hover:bg-brand-secondary/80 text-white font-bold py-2 px-4 rounded transition",children:"Register"})]}),f.jsxs("p",{className:"mt-4 text-center text-sm text-brand-text-muted",children:["Already have an account? ",f.jsx(Pf,{to:"/login",className:"text-brand-primary hover:underline",children:"Login"})]}),f.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:f.jsxs("span",{className:"text-xs font-bold text-amber-500/80 uppercase tracking-widest bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:["Version ",Ny.version]})})]})})},Xi=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m5 3 2.5 5L12 3l2.5 5L19 3l-2.5 5L21 12l-5 2.5L19 19l-5-2.5L12 21l-2.5-5L5 19l2.5-5L3 12l5-2.5Z"})}),sm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("line",{x1:"19",x2:"19",y1:"8",y2:"14"}),f.jsx("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}),Of=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m6 9 6 6 6-6"})}),om=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m18 15-6-6-6 6"})}),Xl=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m9 18 6-6-6-6"})}),uc=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m15 18-6-6 6-6"})}),eu=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M3 6h18"}),f.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),f.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),f.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),Ms=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),f.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),_b=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),f.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),f.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),f.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),f.jsx("path",{d:"M12 12V8"})]}),lm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7.5a6 6 0 0 0-12 0c0 1.5.3 2.7 1.5 3.9.8.8 1.3 1.5 1.5 2.5"}),f.jsx("path",{d:"M9 18h6"}),f.jsx("path",{d:"M10 22h4"})]}),um=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7z"})}),cm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"9",cy:"12",r:"1"}),f.jsx("circle",{cx:"15",cy:"12",r:"1"}),f.jsx("path",{d:"M8 20v2h8v-2"}),f.jsx("path",{d:"M12.5 16.5A2.5 2.5 0 0 0 10 14h-1a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h5.5a2.5 2.5 0 0 0 2.5-2.5V18a2 2 0 0 0-2-2h-1.5"}),f.jsx("path",{d:"M20 12c0-4.42-3.58-8-8-8S4 7.58 4 12c0 4.42 3.58 8 8 8s8-3.58 8-8z"})]}),cc=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),f.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),_y=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{d:"M12 22a10 10 0 0 0 10-10H2a10 10 0 0 0 10 10z"}),f.jsx("path",{d:"M8 14h0"}),f.jsx("path",{d:"M16 14h0"}),f.jsx("path",{d:"M15.5 8C14.1 10 12.5 11 12 11s-2.1-1-3.5-3"})]}),vd=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),f.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Ay=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),f.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),f.jsx("path",{d:"M12 11h4"}),f.jsx("path",{d:"M12 16h4"}),f.jsx("path",{d:"M8 11h.01"}),f.jsx("path",{d:"M8 16h.01"})]}),Ab=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.934a.5.5 0 0 0-.777-.416L16 11"}),f.jsx("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"})]}),Bf=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M4 6h16"}),f.jsx("path",{d:"M4 12h16"}),f.jsx("path",{d:"M4 18h16"})]}),po=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f.jsx("polyline",{points:"7 10 12 15 17 10"}),f.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),hc=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),f.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),f.jsx("polyline",{points:"7 3 7 8 15 8"})]}),Cy=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),f.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),dm=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),fm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),f.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),pc=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),ll=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M5 12h14"}),f.jsx("path",{d:"M12 5v14"})]}),hm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M12 3v12"}),f.jsx("path",{d:"m19 12-7 7-7-7"}),f.jsx("path",{d:"M20 21H4"})]}),fd=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),ul=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),f.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),ha=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),f.jsx("circle",{cx:"9",cy:"9",r:"2"}),f.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),ol=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"}),f.jsx("line",{x1:"9",x2:"9",y1:"3",y2:"18"}),f.jsx("line",{x1:"15",x2:"15",y1:"6",y2:"21"})]}),u2=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),f.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Ty=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),f.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})]}),Cb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),f.jsx("path",{d:"M21 3v5h-5"}),f.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),f.jsx("path",{d:"M3 21v-5h5"})]}),Zl=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),f.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),f.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),f.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),Tb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"9",cy:"12",r:"1"}),f.jsx("circle",{cx:"9",cy:"5",r:"1"}),f.jsx("circle",{cx:"9",cy:"19",r:"1"}),f.jsx("circle",{cx:"15",cy:"12",r:"1"}),f.jsx("circle",{cx:"15",cy:"5",r:"1"}),f.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),pm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("path",{d:"m21 21-4.3-4.3"})]}),Eb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M12 19V5"}),f.jsx("path",{d:"m5 12 7-7 7 7"})]}),Ib=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M12 5v14"}),f.jsx("path",{d:"m19 12-7 7-7 7"})]}),Ey=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"m12 19-7-7 7-7"}),f.jsx("path",{d:"M19 12H5"})]}),mm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M5 12h14"}),f.jsx("path",{d:"m12 5 7 7-7 7"})]}),kb=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Iy=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M6 3h12l4 6-10 13L2 9z"}),f.jsx("path",{d:"m12 22 4-13-3-6-1 6-4-6-3 6 4 13z"}),f.jsx("path",{d:"M2 9h20"})]}),ky=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m8 3 4 8 5-5 5 15H2L8 3z"})}),Lb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"10",x2:"21",y1:"6",y2:"6"}),f.jsx("line",{x1:"10",x2:"21",y1:"12",y2:"12"}),f.jsx("line",{x1:"10",x2:"21",y1:"18",y2:"18"}),f.jsx("path",{d:"M4 6h1v4"}),f.jsx("path",{d:"M4 10h2"}),f.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]}),hl=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),gm=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"4"}),f.jsx("path",{d:"M12 2v2"}),f.jsx("path",{d:"M12 20v2"}),f.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),f.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),f.jsx("path",{d:"M2 12h2"}),f.jsx("path",{d:"M20 12h2"}),f.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),f.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),Ly=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),Rb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),f.jsx("path",{d:"M12 17h.01"})]}),Ff=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),f.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),tc=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),f.jsx("path",{d:"M7 3v18"}),f.jsx("path",{d:"M3 7.5h4"}),f.jsx("path",{d:"M3 12h18"}),f.jsx("path",{d:"M3 16.5h4"}),f.jsx("path",{d:"M17 3v18"}),f.jsx("path",{d:"M17 7.5h4"}),f.jsx("path",{d:"M17 16.5h4"})]}),Mb=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),c2=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M20.38 3.4a2 2 0 0 0-1.2-1.2a19.96 19.96 0 0 0-14.36 0a2 2 0 0 0-1.2 1.2l-.75 4.5a2 2 0 0 0 1.23 2.24l.54.18v8.08a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V10.32l.54-.18a2 2 0 0 0 1.23-2.24Z"})}),Ry=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),f.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),f.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),f.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),f.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),jb=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),My=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),f.jsx("path",{d:"M3 3v5h5"}),f.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),f.jsx("path",{d:"M16 16h5v5"})]}),Db=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polyline",{points:"20 6 9 17 4 12"})}),Pb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),f.jsx("polyline",{points:"16 17 21 12 16 7"}),f.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),Ub=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Ob=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),f.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),vf=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),f.jsx("path",{d:"M3 3v5h5"})]}),Bb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"10",y1:"2",x2:"14",y2:"2"}),f.jsx("line",{x1:"12",y1:"14",x2:"15",y2:"11"}),f.jsx("circle",{cx:"12",cy:"14",r:"8"})]}),Fb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),f.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),f.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),f.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),zb=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}),f.jsx("path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}),f.jsx("path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}),f.jsx("path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"})]}),qb=()=>{const{user:t,logout:e}=Uf(),{loadProject:n}=ho(),i=gd(),[s,o]=ue.useState([]),[l,c]=ue.useState(!0);ue.useEffect(()=>{d()},[]);const d=async()=>{try{const v=await $l.get("/stories");o(v)}catch(v){console.error("Failed to fetch stories",v)}finally{c(!1)}},h=async()=>{try{const v=await $l.post("/stories",{title:"New Story",premise:"",data:{characters:[],scenes:[],savedMaterials:[],storyPremise:"",storyTextToAnalyze:""}});i(`/editor/${v.id}`)}catch(v){console.error("Failed to create story",v)}},m=async v=>{i(`/editor/${v}`)},x=async(v,I)=>{if(v.stopPropagation(),!!window.confirm("Are you sure you want to delete this story?"))try{await $l.delete(`/stories/${I}`),o(s.filter(A=>A.id!==I))}catch(A){console.error("Failed to delete story",A)}},w=()=>{e(),i("/login")};return f.jsx("div",{className:"min-h-screen bg-brand-bg text-brand-text p-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("h1",{className:"text-3xl font-serif font-bold",children:["Welcome, ",f.jsx("span",{className:"text-brand-secondary",children:t==null?void 0:t.username})]}),f.jsxs("button",{onClick:w,className:"flex items-center gap-2 text-brand-text-muted hover:text-white transition",children:[f.jsx(Pb,{className:"w-5 h-5"})," Logout"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.jsxs("button",{onClick:h,className:"glass-card p-6 rounded-2xl border border-white/5 border-dashed hover:border-brand-secondary/50 hover:bg-brand-secondary/5 transition flex flex-col items-center justify-center gap-4 group min-h-[200px]",children:[f.jsx("div",{className:"p-4 bg-white/5 rounded-full group-hover:bg-white/10 transition",children:f.jsx(ll,{className:"w-8 h-8 text-brand-secondary"})}),f.jsx("span",{className:"font-bold text-lg",children:"Create New Story"})]}),l?f.jsx("div",{className:"col-span-full text-center py-10 text-brand-text-muted",children:"Loading stories..."}):s.map(v=>f.jsxs("div",{onClick:()=>m(v.id),className:"glass-card p-6 rounded-2xl border border-white/5 hover:border-brand-primary/50 cursor-pointer transition group relative flex flex-col min-h-[200px]",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:v.title}),f.jsx("p",{className:"text-sm text-brand-text-muted line-clamp-3",children:v.premise||"No premise yet..."})]}),f.jsxs("div",{className:"mt-4 flex justify-between items-end",children:[f.jsxs("span",{className:"text-xs text-brand-text-muted",children:["Updated: ",new Date(v.lastUpdated).toLocaleDateString()]}),f.jsx("button",{onClick:I=>x(I,v.id),className:"p-2 hover:bg-red-500/20 rounded-full text-brand-text-muted hover:text-red-400 transition opacity-0 group-hover:opacity-100",children:f.jsx(eu,{className:"w-4 h-4"})})]})]},v.id))]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Gb,Hb;function Vb(){return{geminiUrl:Gb,vertexUrl:Hb}}function Jb(t,e,n,i){var s,o;if(!(t!=null&&t.baseUrl)){const l=Vb();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mo{}function ht(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function b(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const m=d[h];b(m,e.slice(o+1),n[h])}else for(const h of d)b(h,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];b(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function g(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>g(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Yb(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const h=o[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Cp(t,s,o,0,l)}}function Cp(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Cp(d,e,n,i+1,s)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,m]of Object.entries(d)){const x=[];for(const w of n.slice(i))w==="*"?x.push(h):x.push(w);b(l,x,m)}for(const h of c)delete l[h]}}else{const l=t;o in l&&Cp(l[o],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ym(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wb(t){const e={},n=g(t,["operationName"]);n!=null&&b(e,["operationName"],n);const i=g(t,["resourceName"]);return i!=null&&b(e,["_url","resourceName"],i),e}function $b(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response","generateVideoResponse"]);return l!=null&&b(e,["response"],Xb(l)),e}function Kb(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response"]);return l!=null&&b(e,["response"],Zb(l)),e}function Xb(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Qb(l))),b(e,["generatedVideos"],o)}const i=g(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function Zb(t){const e={},n=g(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ew(l))),b(e,["generatedVideos"],o)}const i=g(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function Qb(t){const e={},n=g(t,["video"]);return n!=null&&b(e,["video"],sw(n)),e}function ew(t){const e={},n=g(t,["_self"]);return n!=null&&b(e,["video"],ow(n)),e}function tw(t){const e={},n=g(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function nw(t){const e={},n=g(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function rw(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response"]);return l!=null&&b(e,["response"],iw(l)),e}function iw(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["parent"]);i!=null&&b(e,["parent"],i);const s=g(t,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function jy(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response"]);return l!=null&&b(e,["response"],aw(l)),e}function aw(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["parent"]);i!=null&&b(e,["parent"],i);const s=g(t,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function sw(t){const e={},n=g(t,["uri"]);n!=null&&b(e,["uri"],n);const i=g(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],ym(i));const s=g(t,["encoding"]);return s!=null&&b(e,["mimeType"],s),e}function ow(t){const e={},n=g(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=g(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],ym(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d2;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(d2||(d2={}));var f2;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(f2||(f2={}));var h2;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(h2||(h2={}));var Ka;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ka||(Ka={}));var p2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(p2||(p2={}));var m2;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(m2||(m2={}));var g2;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(g2||(g2={}));var y2;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(y2||(y2={}));var v2;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(v2||(v2={}));var x2;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(x2||(x2={}));var b2;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(b2||(b2={}));var w2;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(w2||(w2={}));var S2;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(S2||(S2={}));var N2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(N2||(N2={}));var _2;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_2||(_2={}));var A2;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(A2||(A2={}));var C2;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(C2||(C2={}));var T2;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(T2||(T2={}));var E2;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(E2||(E2={}));var Cf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Cf||(Cf={}));var I2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(I2||(I2={}));var k2;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(k2||(k2={}));var L2;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(L2||(L2={}));var Tp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Tp||(Tp={}));var R2;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R2||(R2={}));var M2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(M2||(M2={}));var j2;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(j2||(j2={}));var D2;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(D2||(D2={}));var P2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(P2||(P2={}));var U2;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(U2||(U2={}));var O2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(O2||(O2={}));var B2;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(B2||(B2={}));var F2;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(F2||(F2={}));var z2;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(z2||(z2={}));var q2;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(q2||(q2={}));var G2;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(G2||(G2={}));var H2;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(H2||(H2={}));var V2;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(V2||(V2={}));var J2;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(J2||(J2={}));var Y2;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Y2||(Y2={}));var W2;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(W2||(W2={}));var $2;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($2||($2={}));var K2;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(K2||(K2={}));var X2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(X2||(X2={}));var Z2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Z2||(Z2={}));var Q2;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Q2||(Q2={}));var e1;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(e1||(e1={}));var t1;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(t1||(t1={}));var n1;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(n1||(n1={}));var r1;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(r1||(r1={}));var i1;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(i1||(i1={}));var a1;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(a1||(a1={}));var s1;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(s1||(s1={}));var o1;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(o1||(o1={}));var Zu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Zu||(Zu={}));class Ep{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ad{get text(){var e,n,i,s,o,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",m=!1;const x=[];for(const w of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[v,I]of Object.entries(w))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(I!==null||I!==void 0)&&x.push(v);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;m=!0,h+=w.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?h:void 0}get data(){var e,n,i,s,o,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const m=[];for(const x of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,v]of Object.entries(x))w!=="inlineData"&&(v!==null||v!==void 0)&&m.push(w);x.inlineData&&typeof x.inlineData.data=="string"&&(h+=atob(x.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,o,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,o,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((m==null?void 0:m.length)!==0)return(h=m==null?void 0:m[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,o,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((m==null?void 0:m.length)!==0)return(h=m==null?void 0:m[0])===null||h===void 0?void 0:h.output}}class l1{}class u1{}class lw{}class uw{}class cw{}class dw{}class c1{}class d1{}class f1{}class fw{}class Tf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Tf;let s;const o=e;return n?s=Kb(o):s=$b(o),Object.assign(i,s),i}}class h1{}class p1{}class m1{}class hw{}class pw{}class mw{}class vm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new vm,o=rw(e);return Object.assign(i,o),i}}class gw{}class yw{}class vw{}class g1{}class xw{get text(){var e,n,i;let s="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var e,n,i;let s="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class bw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new xm,o=jy(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Dy(t,e){const n=dn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Py(t){return Array.isArray(t)?t.map(e=>Ef(e)):[Ef(t)]}function Ef(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Uy(t){const e=Ef(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Oy(t){const e=Ef(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function y1(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function By(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>y1(e)):[y1(t)]}function Ip(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function v1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function x1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function hi(t){if(t==null)throw new Error("ContentUnion is required");return Ip(t)?t:{role:"user",parts:By(t)}}function bm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=hi(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=hi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>hi(n)):[hi(e)]}function Ia(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(v1(t)||x1(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hi(t)]}const e=[],n=[],i=Ip(t[0]);for(const s of t){const o=Ip(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(s);else{if(v1(s)||x1(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:By(n)}),e}function ww(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ka).includes(n[0].toUpperCase())?n[0].toUpperCase():Ka.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ka).includes(i.toUpperCase())?i.toUpperCase():Ka.TYPE_UNSPECIFIED})}}function nc(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&ww(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ka).includes(c.toUpperCase())?c.toUpperCase():Ka.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=nc(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(nc(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,m]of Object.entries(c))d[h]=nc(m);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function wm(t){return nc(t)}function Sm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Nm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function mc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=nc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=nc(e.response));return t}function gc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Sw(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function go(t,e){if(typeof e!="string")throw new Error("name must be a string");return Sw(t,e,"cachedContents")}function Fy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function pl(t){return ym(t)}function Nw(t){return t!=null&&typeof t=="object"&&"name"in t}function _w(t){return t!=null&&typeof t=="object"&&"video"in t}function Aw(t){return t!=null&&typeof t=="object"&&"uri"in t}function zy(t){var e;let n;if(Nw(t)&&(n=t.name),!(Aw(t)&&(n=t.uri,n===void 0))&&!(_w(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Gy(t){for(const e of["models","tunedModels","publisherModels"])if(Cw(t,e))return t[e];return[]}function Cw(t,e){return t!==null&&typeof t=="object"&&e in t}function Tw(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ew(t,e={}){const n=[],i=new Set;for(const s of t){const o=s.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=Tw(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Hy(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Iw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Vy(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let o=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function yc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Jy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(t){const e={},n=g(t,["responsesFile"]);n!=null&&b(e,["fileName"],n);const i=g(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>cS(l))),b(e,["inlinedResponses"],o)}const s=g(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["inlinedEmbedContentResponses"],o)}return e}function Lw(t){const e={},n=g(t,["predictionsFormat"]);n!=null&&b(e,["format"],n);const i=g(t,["gcsDestination","outputUriPrefix"]);i!=null&&b(e,["gcsUri"],i);const s=g(t,["bigqueryDestination","outputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function Rw(t){const e={},n=g(t,["format"]);n!=null&&b(e,["predictionsFormat"],n);const i=g(t,["gcsUri"]);i!=null&&b(e,["gcsDestination","outputUriPrefix"],i);const s=g(t,["bigqueryUri"]);if(s!=null&&b(e,["bigqueryDestination","outputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xf(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata","displayName"]);i!=null&&b(e,["displayName"],i);const s=g(t,["metadata","state"]);s!=null&&b(e,["state"],Jy(s));const o=g(t,["metadata","createTime"]);o!=null&&b(e,["createTime"],o);const l=g(t,["metadata","endTime"]);l!=null&&b(e,["endTime"],l);const c=g(t,["metadata","updateTime"]);c!=null&&b(e,["updateTime"],c);const d=g(t,["metadata","model"]);d!=null&&b(e,["model"],d);const h=g(t,["metadata","output"]);return h!=null&&b(e,["dest"],kw(Vy(h))),e}function kp(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["displayName"]);i!=null&&b(e,["displayName"],i);const s=g(t,["state"]);s!=null&&b(e,["state"],Jy(s));const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["createTime"]);l!=null&&b(e,["createTime"],l);const c=g(t,["startTime"]);c!=null&&b(e,["startTime"],c);const d=g(t,["endTime"]);d!=null&&b(e,["endTime"],d);const h=g(t,["updateTime"]);h!=null&&b(e,["updateTime"],h);const m=g(t,["model"]);m!=null&&b(e,["model"],m);const x=g(t,["inputConfig"]);x!=null&&b(e,["src"],Mw(x));const w=g(t,["outputConfig"]);w!=null&&b(e,["dest"],Lw(Vy(w)));const v=g(t,["completionStats"]);return v!=null&&b(e,["completionStats"],v),e}function Mw(t){const e={},n=g(t,["instancesFormat"]);n!=null&&b(e,["format"],n);const i=g(t,["gcsSource","uris"]);i!=null&&b(e,["gcsUri"],i);const s=g(t,["bigquerySource","inputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function jw(t,e){const n={};if(g(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=g(e,["fileName"]);i!=null&&b(n,["fileName"],i);const s=g(e,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>uS(t,l))),b(n,["requests","requests"],o)}return n}function Dw(t){const e={},n=g(t,["format"]);n!=null&&b(e,["instancesFormat"],n);const i=g(t,["gcsUri"]);i!=null&&b(e,["gcsSource","uris"],i);const s=g(t,["bigqueryUri"]);if(s!=null&&b(e,["bigquerySource","inputUri"],s),g(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Pw(t){const e={},n=g(t,["data"]);if(n!=null&&b(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Uw(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function Ow(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function Bw(t){const e={},n=g(t,["content"]);n!=null&&b(e,["content"],n);const i=g(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],Fw(i));const s=g(t,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const o=g(t,["finishReason"]);o!=null&&b(e,["finishReason"],o);const l=g(t,["avgLogprobs"]);l!=null&&b(e,["avgLogprobs"],l);const c=g(t,["groundingMetadata"]);c!=null&&b(e,["groundingMetadata"],c);const d=g(t,["index"]);d!=null&&b(e,["index"],d);const h=g(t,["logprobsResult"]);h!=null&&b(e,["logprobsResult"],h);const m=g(t,["safetyRatings"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(v=>v)),b(e,["safetyRatings"],w)}const x=g(t,["urlContextMetadata"]);return x!=null&&b(e,["urlContextMetadata"],x),e}function Fw(t){const e={},n=g(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["citations"],i)}return e}function Yy(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>yS(o))),b(e,["parts"],s)}const i=g(t,["role"]);return i!=null&&b(e,["role"],i),e}function zw(t,e){const n={},i=g(t,["displayName"]);if(e!==void 0&&i!=null&&b(e,["batch","displayName"],i),g(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function qw(t,e){const n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const s=g(t,["dest"]);return e!==void 0&&s!=null&&b(e,["outputConfig"],Rw(Iw(s))),n}function b1(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["src"]);s!=null&&b(n,["batch","inputConfig"],jw(t,Hy(t,s)));const o=g(e,["config"]);return o!=null&&zw(o,n),n}function Gw(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["model"],dn(t,i));const s=g(e,["src"]);s!=null&&b(n,["inputConfig"],Dw(Hy(t,s)));const o=g(e,["config"]);return o!=null&&qw(o,n),n}function Hw(t,e){const n={},i=g(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["batch","displayName"],i),n}function Vw(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["src"]);s!=null&&b(n,["batch","inputConfig"],Zw(t,s));const o=g(e,["config"]);return o!=null&&Hw(o,n),n}function Jw(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function Yw(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function Ww(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["name"]);i!=null&&b(e,["name"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);return o!=null&&b(e,["error"],o),e}function $w(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["name"]);i!=null&&b(e,["name"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);return o!=null&&b(e,["error"],o),e}function Kw(t,e){const n={},i=g(e,["contents"]);if(i!=null){let o=bm(t,i);Array.isArray(o)&&(o=o.map(l=>l)),b(n,["requests[]","request","content"],o)}const s=g(e,["config"]);return s!=null&&(b(n,["_self"],Xw(s,n)),Yb(n,{"requests[].*":"requests[].request.*"})),n}function Xw(t,e){const n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const s=g(t,["title"]);e!==void 0&&s!=null&&b(e,["requests[]","title"],s);const o=g(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&b(e,["requests[]","outputDimensionality"],o),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Zw(t,e){const n={},i=g(e,["fileName"]);i!=null&&b(n,["file_name"],i);const s=g(e,["inlinedRequests"]);return s!=null&&b(n,["requests"],Kw(t,s)),n}function Qw(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function eS(t){const e={},n=g(t,["id"]);n!=null&&b(e,["id"],n);const i=g(t,["args"]);i!=null&&b(e,["args"],i);const s=g(t,["name"]);if(s!=null&&b(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tS(t){const e={},n=g(t,["mode"]);n!=null&&b(e,["mode"],n);const i=g(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nS(t,e,n){const i={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],Yy(hi(s)));const o=g(e,["temperature"]);o!=null&&b(i,["temperature"],o);const l=g(e,["topP"]);l!=null&&b(i,["topP"],l);const c=g(e,["topK"]);c!=null&&b(i,["topK"],c);const d=g(e,["candidateCount"]);d!=null&&b(i,["candidateCount"],d);const h=g(e,["maxOutputTokens"]);h!=null&&b(i,["maxOutputTokens"],h);const m=g(e,["stopSequences"]);m!=null&&b(i,["stopSequences"],m);const x=g(e,["responseLogprobs"]);x!=null&&b(i,["responseLogprobs"],x);const w=g(e,["logprobs"]);w!=null&&b(i,["logprobs"],w);const v=g(e,["presencePenalty"]);v!=null&&b(i,["presencePenalty"],v);const I=g(e,["frequencyPenalty"]);I!=null&&b(i,["frequencyPenalty"],I);const A=g(e,["seed"]);A!=null&&b(i,["seed"],A);const E=g(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const C=g(e,["responseSchema"]);C!=null&&b(i,["responseSchema"],wm(C));const R=g(e,["responseJsonSchema"]);if(R!=null&&b(i,["responseJsonSchema"],R),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=g(e,["safetySettings"]);if(n!==void 0&&D!=null){let j=D;Array.isArray(j)&&(j=j.map(W=>vS(W))),b(n,["safetySettings"],j)}const z=g(e,["tools"]);if(n!==void 0&&z!=null){let j=gc(z);Array.isArray(j)&&(j=j.map(W=>bS(mc(W)))),b(n,["tools"],j)}const B=g(e,["toolConfig"]);if(n!==void 0&&B!=null&&b(n,["toolConfig"],xS(B)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=g(e,["cachedContent"]);n!==void 0&&se!=null&&b(n,["cachedContent"],go(t,se));const q=g(e,["responseModalities"]);q!=null&&b(i,["responseModalities"],q);const G=g(e,["mediaResolution"]);G!=null&&b(i,["mediaResolution"],G);const Q=g(e,["speechConfig"]);if(Q!=null&&b(i,["speechConfig"],Sm(Q)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=g(e,["thinkingConfig"]);ne!=null&&b(i,["thinkingConfig"],ne);const F=g(e,["imageConfig"]);return F!=null&&b(i,["imageConfig"],lS(F)),i}function rS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>Bw(h))),b(e,["candidates"],d)}const s=g(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const o=g(t,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);const l=g(t,["responseId"]);l!=null&&b(e,["responseId"],l);const c=g(t,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function iS(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function aS(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],yc(t,i)),n}function sS(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function oS(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function lS(t){const e={},n=g(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=g(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uS(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["request","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let c=Ia(s);Array.isArray(c)&&(c=c.map(d=>Yy(d))),b(n,["request","contents"],c)}const o=g(e,["metadata"]);o!=null&&b(n,["metadata"],o);const l=g(e,["config"]);return l!=null&&b(n,["request","generationConfig"],nS(t,l,g(n,["request"],{}))),n}function cS(t){const e={},n=g(t,["response"]);n!=null&&b(e,["response"],rS(n));const i=g(t,["error"]);return i!=null&&b(e,["error"],i),e}function dS(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);if(e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),g(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function fS(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const o=g(t,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function hS(t){const e={},n=g(t,["config"]);return n!=null&&dS(n,e),e}function pS(t){const e={},n=g(t,["config"]);return n!=null&&fS(n,e),e}function mS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>xf(l))),b(e,["batchJobs"],o)}return e}function gS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>kp(l))),b(e,["batchJobs"],o)}return e}function yS(t){const e={},n=g(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=g(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const s=g(t,["executableCode"]);s!=null&&b(e,["executableCode"],s);const o=g(t,["fileData"]);o!=null&&b(e,["fileData"],Qw(o));const l=g(t,["functionCall"]);l!=null&&b(e,["functionCall"],eS(l));const c=g(t,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const d=g(t,["inlineData"]);d!=null&&b(e,["inlineData"],Pw(d));const h=g(t,["text"]);h!=null&&b(e,["text"],h);const m=g(t,["thought"]);m!=null&&b(e,["thought"],m);const x=g(t,["thoughtSignature"]);x!=null&&b(e,["thoughtSignature"],x);const w=g(t,["videoMetadata"]);return w!=null&&b(e,["videoMetadata"],w),e}function vS(t){const e={},n=g(t,["category"]);if(n!=null&&b(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=g(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function xS(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],tS(n));const i=g(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function bS(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(x=>x)),b(e,["functionDeclarations"],m)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const s=g(t,["computerUse"]);s!=null&&b(e,["computerUse"],s);const o=g(t,["fileSearch"]);o!=null&&b(e,["fileSearch"],o);const l=g(t,["codeExecution"]);if(l!=null&&b(e,["codeExecution"],l),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],sS(c));const d=g(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],oS(d));const h=g(t,["urlContext"]);return h!=null&&b(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(fo||(fo={}));class tu{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wS extends mo{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new tu(fo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=b1(this.apiClient,e),i=n._url,s=ht("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const m of d){const x=Object.assign({},m);if(x.systemInstruction){const w=x.systemInstruction;delete x.systemInstruction;const v=x.request;v.systemInstruction=w,x.request=v}h.push(x)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Gw(this.apiClient,e);return c=ht("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>kp(m))}else{const h=b1(this.apiClient,e);return c=ht("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>xf(m))}}async createEmbeddingsInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Vw(this.apiClient,e);return o=ht("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>xf(d))}}async get(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=aS(this.apiClient,e);return c=ht("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>kp(m))}else{const h=iS(this.apiClient,e);return c=ht("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>xf(m))}}async cancel(e){var n,i,s,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=Ow(this.apiClient,e);l=ht("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=Uw(this.apiClient,e);l=ht("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=pS(e);return c=ht("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=gS(m),w=new g1;return Object.assign(w,x),w})}else{const h=hS(e);return c=ht("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=mS(m),w=new g1;return Object.assign(w,x),w})}}async delete(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Yw(this.apiClient,e);return c=ht("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>$w(m))}else{const h=Jw(this.apiClient,e);return c=ht("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>Ww(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SS(t){const e={},n=g(t,["data"]);if(n!=null&&b(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function w1(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>VS(o))),b(e,["parts"],s)}const i=g(t,["role"]);return i!=null&&b(e,["role"],i),e}function NS(t,e){const n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const o=g(t,["displayName"]);e!==void 0&&o!=null&&b(e,["displayName"],o);const l=g(t,["contents"]);if(e!==void 0&&l!=null){let m=Ia(l);Array.isArray(m)&&(m=m.map(x=>w1(x))),b(e,["contents"],m)}const c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&b(e,["systemInstruction"],w1(hi(c)));const d=g(t,["tools"]);if(e!==void 0&&d!=null){let m=d;Array.isArray(m)&&(m=m.map(x=>YS(x))),b(e,["tools"],m)}const h=g(t,["toolConfig"]);if(e!==void 0&&h!=null&&b(e,["toolConfig"],JS(h)),g(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function _S(t,e){const n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const s=g(t,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const o=g(t,["displayName"]);e!==void 0&&o!=null&&b(e,["displayName"],o);const l=g(t,["contents"]);if(e!==void 0&&l!=null){let x=Ia(l);Array.isArray(x)&&(x=x.map(w=>w)),b(e,["contents"],x)}const c=g(t,["systemInstruction"]);e!==void 0&&c!=null&&b(e,["systemInstruction"],hi(c));const d=g(t,["tools"]);if(e!==void 0&&d!=null){let x=d;Array.isArray(x)&&(x=x.map(w=>WS(w))),b(e,["tools"],x)}const h=g(t,["toolConfig"]);e!==void 0&&h!=null&&b(e,["toolConfig"],h);const m=g(t,["kmsKeyName"]);return e!==void 0&&m!=null&&b(e,["encryption_spec","kmsKeyName"],m),n}function AS(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["model"],Dy(t,i));const s=g(e,["config"]);return s!=null&&NS(s,n),n}function CS(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["model"],Dy(t,i));const s=g(e,["config"]);return s!=null&&_S(s,n),n}function TS(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],go(t,i)),n}function ES(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],go(t,i)),n}function IS(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function kS(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function LS(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function RS(t){const e={},n=g(t,["id"]);n!=null&&b(e,["id"],n);const i=g(t,["args"]);i!=null&&b(e,["args"],i);const s=g(t,["name"]);if(s!=null&&b(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MS(t){const e={},n=g(t,["mode"]);n!=null&&b(e,["mode"],n);const i=g(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jS(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&b(e,["description"],n);const i=g(t,["name"]);i!=null&&b(e,["name"],i);const s=g(t,["parameters"]);s!=null&&b(e,["parameters"],s);const o=g(t,["parametersJsonSchema"]);o!=null&&b(e,["parametersJsonSchema"],o);const l=g(t,["response"]);l!=null&&b(e,["response"],l);const c=g(t,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function DS(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],go(t,i)),n}function PS(t,e){const n={},i=g(e,["name"]);return i!=null&&b(n,["_url","name"],go(t,i)),n}function US(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function OS(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function BS(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function FS(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function zS(t){const e={},n=g(t,["config"]);return n!=null&&BS(n,e),e}function qS(t){const e={},n=g(t,["config"]);return n!=null&&FS(n,e),e}function GS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["cachedContents"],o)}return e}function HS(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["cachedContents"],o)}return e}function VS(t){const e={},n=g(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=g(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const s=g(t,["executableCode"]);s!=null&&b(e,["executableCode"],s);const o=g(t,["fileData"]);o!=null&&b(e,["fileData"],LS(o));const l=g(t,["functionCall"]);l!=null&&b(e,["functionCall"],RS(l));const c=g(t,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const d=g(t,["inlineData"]);d!=null&&b(e,["inlineData"],SS(d));const h=g(t,["text"]);h!=null&&b(e,["text"],h);const m=g(t,["thought"]);m!=null&&b(e,["thought"],m);const x=g(t,["thoughtSignature"]);x!=null&&b(e,["thoughtSignature"],x);const w=g(t,["videoMetadata"]);return w!=null&&b(e,["videoMetadata"],w),e}function JS(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],MS(n));const i=g(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function YS(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(x=>x)),b(e,["functionDeclarations"],m)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const s=g(t,["computerUse"]);s!=null&&b(e,["computerUse"],s);const o=g(t,["fileSearch"]);o!=null&&b(e,["fileSearch"],o);const l=g(t,["codeExecution"]);if(l!=null&&b(e,["codeExecution"],l),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],US(c));const d=g(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],OS(d));const h=g(t,["urlContext"]);return h!=null&&b(e,["urlContext"],h),e}function WS(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>jS(w))),b(e,["functionDeclarations"],x)}const i=g(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const s=g(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const o=g(t,["computerUse"]);if(o!=null&&b(e,["computerUse"],o),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(t,["codeExecution"]);l!=null&&b(e,["codeExecution"],l);const c=g(t,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const d=g(t,["googleMaps"]);d!=null&&b(e,["googleMaps"],d);const h=g(t,["googleSearch"]);h!=null&&b(e,["googleSearch"],h);const m=g(t,["urlContext"]);return m!=null&&b(e,["urlContext"],m),e}function $S(t,e){const n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),n}function KS(t,e){const n={},i=g(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const s=g(t,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),n}function XS(t,e){const n={},i=g(e,["name"]);i!=null&&b(n,["_url","name"],go(t,i));const s=g(e,["config"]);return s!=null&&$S(s,n),n}function ZS(t,e){const n={},i=g(e,["name"]);i!=null&&b(n,["_url","name"],go(t,i));const s=g(e,["config"]);return s!=null&&KS(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QS extends mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tu(fo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=CS(this.apiClient,e);return c=ht("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=AS(this.apiClient,e);return c=ht("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async get(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=PS(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=DS(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async delete(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=ES(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=kS(m),w=new p1;return Object.assign(w,x),w})}else{const h=TS(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=IS(m),w=new p1;return Object.assign(w,x),w})}}async update(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=ZS(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>m)}else{const h=XS(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>m)}}async listInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=qS(e);return c=ht("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=HS(m),w=new m1;return Object.assign(w,x),w})}else{const h=zS(e);return c=ht("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=GS(m),w=new m1;return Object.assign(w,x),w})}}}function S1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fn(t){return this instanceof Fn?(this.v=t,this):new Fn(t)}function rc(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(v){return function(I){return Promise.resolve(I).then(v,x)}}function c(v,I){i[v]&&(s[v]=function(A){return new Promise(function(E,C){o.push([v,A,E,C])>1||d(v,A)})},I&&(s[v]=I(s[v])))}function d(v,I){try{h(i[v](I))}catch(A){w(o[0][3],A)}}function h(v){v.value instanceof Fn?Promise.resolve(v.value.v).then(m,x):w(o[0][2],v)}function m(v){d("next",v)}function x(v){d("throw",v)}function w(v,I){v(I),o.shift(),o.length&&d(o[0][0],o[0][1])}}function ud(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof S1=="function"?S1(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),s(c,d,l.done,l.value)})}}function s(o,l,c,d){Promise.resolve(d).then(function(h){o({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Wy(n)}function Wy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function t3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function N1(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let o=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),o&&!Wy(t[i])&&(o=!1),i++;o?e.push(...s):e.pop()}return e}class n3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new r3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class r3{constructor(e,n,i,s={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),t3(o)}async sendMessage(e){var n;await this.sendPromise;const i=hi(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await s,h=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,m=d.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let w=[];m!=null&&(w=(c=m.slice(x))!==null&&c!==void 0?c:[]);const v=h?[h]:[];this.recordHistory(i,v,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=hi(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?N1(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return rc(this,arguments,function*(){var l,c,d,h;const m=[];try{for(var x=!0,w=ud(e),v;v=yield Fn(w.next()),l=v.done,!l;x=!0){h=v.value,x=!1;const I=h;if(e3(I)){const A=(s=(i=I.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;A!==void 0&&m.push(A)}yield yield Fn(I)}}catch(I){c={error:I}}finally{try{!x&&!l&&(d=w.return)&&(yield Fn(d.call(w)))}finally{if(c)throw c.error}}this.recordHistory(n,m)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...N1(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i3(t){const e={},n=g(t,["file"]);return n!=null&&b(e,["file"],n),e}function a3(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function s3(t){const e={},n=g(t,["name"]);return n!=null&&b(e,["_url","file"],zy(n)),e}function o3(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function l3(t){const e={},n=g(t,["name"]);return n!=null&&b(e,["_url","file"],zy(n)),e}function u3(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function c3(t){const e={},n=g(t,["config"]);return n!=null&&u3(n,e),e}function d3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f3 extends mo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tu(fo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c3(e);return o=ht("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{const h=d3(d),m=new gw;return Object.assign(m,h),m})}}async createInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=i3(e);return o=ht("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=a3(d),m=new yw;return Object.assign(m,h),m})}}async get(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=l3(e);return o=ht("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=s3(e);return o=ht("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{const h=o3(d),m=new vw;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(t){const e={},n=g(t,["data"]);if(n!=null&&b(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function h3(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>I3(o))),b(e,["parts"],s)}const i=g(t,["role"]);return i!=null&&b(e,["role"],i),e}function p3(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function m3(t){const e={},n=g(t,["id"]);n!=null&&b(e,["id"],n);const i=g(t,["args"]);i!=null&&b(e,["args"],i);const s=g(t,["name"]);if(s!=null&&b(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function g3(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&b(e,["description"],n);const i=g(t,["name"]);i!=null&&b(e,["name"],i);const s=g(t,["parameters"]);s!=null&&b(e,["parameters"],s);const o=g(t,["parametersJsonSchema"]);o!=null&&b(e,["parametersJsonSchema"],o);const l=g(t,["response"]);l!=null&&b(e,["response"],l);const c=g(t,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function y3(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=g(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const s=g(t,["audioTimestamp"]);s!=null&&b(e,["audioTimestamp"],s);const o=g(t,["candidateCount"]);o!=null&&b(e,["candidateCount"],o);const l=g(t,["enableAffectiveDialog"]);l!=null&&b(e,["enableAffectiveDialog"],l);const c=g(t,["frequencyPenalty"]);c!=null&&b(e,["frequencyPenalty"],c);const d=g(t,["logprobs"]);d!=null&&b(e,["logprobs"],d);const h=g(t,["maxOutputTokens"]);h!=null&&b(e,["maxOutputTokens"],h);const m=g(t,["mediaResolution"]);m!=null&&b(e,["mediaResolution"],m);const x=g(t,["presencePenalty"]);x!=null&&b(e,["presencePenalty"],x);const w=g(t,["responseLogprobs"]);w!=null&&b(e,["responseLogprobs"],w);const v=g(t,["responseMimeType"]);v!=null&&b(e,["responseMimeType"],v);const I=g(t,["responseModalities"]);I!=null&&b(e,["responseModalities"],I);const A=g(t,["responseSchema"]);A!=null&&b(e,["responseSchema"],A);const E=g(t,["routingConfig"]);E!=null&&b(e,["routingConfig"],E);const C=g(t,["seed"]);C!=null&&b(e,["seed"],C);const R=g(t,["speechConfig"]);R!=null&&b(e,["speechConfig"],$y(R));const D=g(t,["stopSequences"]);D!=null&&b(e,["stopSequences"],D);const z=g(t,["temperature"]);z!=null&&b(e,["temperature"],z);const B=g(t,["thinkingConfig"]);B!=null&&b(e,["thinkingConfig"],B);const se=g(t,["topK"]);se!=null&&b(e,["topK"],se);const q=g(t,["topP"]);if(q!=null&&b(e,["topP"],q),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function v3(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function x3(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function b3(t,e){const n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const o=g(t,["temperature"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","temperature"],o);const l=g(t,["topP"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topP"],l);const c=g(t,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const d=g(t,["maxOutputTokens"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","maxOutputTokens"],d);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&b(e,["setup","generationConfig","mediaResolution"],h);const m=g(t,["seed"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","seed"],m);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&b(e,["setup","generationConfig","speechConfig"],Nm(x));const w=g(t,["thinkingConfig"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","thinkingConfig"],w);const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=g(t,["systemInstruction"]);e!==void 0&&I!=null&&b(e,["setup","systemInstruction"],h3(hi(I)));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let se=gc(A);Array.isArray(se)&&(se=se.map(q=>L3(mc(q)))),b(e,["setup","tools"],se)}const E=g(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],k3(E));const C=g(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","inputAudioTranscription"],C);const R=g(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&b(e,["setup","outputAudioTranscription"],R);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&b(e,["setup","realtimeInputConfig"],D);const z=g(t,["contextWindowCompression"]);e!==void 0&&z!=null&&b(e,["setup","contextWindowCompression"],z);const B=g(t,["proactivity"]);return e!==void 0&&B!=null&&b(e,["setup","proactivity"],B),n}function w3(t,e){const n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],y3(i));const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const o=g(t,["temperature"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","temperature"],o);const l=g(t,["topP"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topP"],l);const c=g(t,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const d=g(t,["maxOutputTokens"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","maxOutputTokens"],d);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&b(e,["setup","generationConfig","mediaResolution"],h);const m=g(t,["seed"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","seed"],m);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&b(e,["setup","generationConfig","speechConfig"],$y(Nm(x)));const w=g(t,["thinkingConfig"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","thinkingConfig"],w);const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=g(t,["systemInstruction"]);e!==void 0&&I!=null&&b(e,["setup","systemInstruction"],hi(I));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let se=gc(A);Array.isArray(se)&&(se=se.map(q=>R3(mc(q)))),b(e,["setup","tools"],se)}const E=g(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],E);const C=g(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","inputAudioTranscription"],C);const R=g(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&b(e,["setup","outputAudioTranscription"],R);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&b(e,["setup","realtimeInputConfig"],D);const z=g(t,["contextWindowCompression"]);e!==void 0&&z!=null&&b(e,["setup","contextWindowCompression"],z);const B=g(t,["proactivity"]);return e!==void 0&&B!=null&&b(e,["setup","proactivity"],B),n}function S3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["setup","model"],dn(t,i));const s=g(e,["config"]);return s!=null&&b(n,["config"],b3(s,n)),n}function N3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["setup","model"],dn(t,i));const s=g(e,["config"]);return s!=null&&b(n,["config"],w3(s,n)),n}function _3(t){const e={},n=g(t,["musicGenerationConfig"]);return n!=null&&b(e,["musicGenerationConfig"],n),e}function A3(t){const e={},n=g(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["weightedPrompts"],i)}return e}function C3(t){const e={},n=g(t,["media"]);if(n!=null){let h=Py(n);Array.isArray(h)&&(h=h.map(m=>bf(m))),b(e,["mediaChunks"],h)}const i=g(t,["audio"]);i!=null&&b(e,["audio"],bf(Oy(i)));const s=g(t,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const o=g(t,["video"]);o!=null&&b(e,["video"],bf(Uy(o)));const l=g(t,["text"]);l!=null&&b(e,["text"],l);const c=g(t,["activityStart"]);c!=null&&b(e,["activityStart"],c);const d=g(t,["activityEnd"]);return d!=null&&b(e,["activityEnd"],d),e}function T3(t){const e={},n=g(t,["media"]);if(n!=null){let h=Py(n);Array.isArray(h)&&(h=h.map(m=>m)),b(e,["mediaChunks"],h)}const i=g(t,["audio"]);i!=null&&b(e,["audio"],Oy(i));const s=g(t,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const o=g(t,["video"]);o!=null&&b(e,["video"],Uy(o));const l=g(t,["text"]);l!=null&&b(e,["text"],l);const c=g(t,["activityStart"]);c!=null&&b(e,["activityStart"],c);const d=g(t,["activityEnd"]);return d!=null&&b(e,["activityEnd"],d),e}function E3(t){const e={},n=g(t,["setupComplete"]);n!=null&&b(e,["setupComplete"],n);const i=g(t,["serverContent"]);i!=null&&b(e,["serverContent"],i);const s=g(t,["toolCall"]);s!=null&&b(e,["toolCall"],s);const o=g(t,["toolCallCancellation"]);o!=null&&b(e,["toolCallCancellation"],o);const l=g(t,["usageMetadata"]);l!=null&&b(e,["usageMetadata"],M3(l));const c=g(t,["goAway"]);c!=null&&b(e,["goAway"],c);const d=g(t,["sessionResumptionUpdate"]);return d!=null&&b(e,["sessionResumptionUpdate"],d),e}function I3(t){const e={},n=g(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=g(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const s=g(t,["executableCode"]);s!=null&&b(e,["executableCode"],s);const o=g(t,["fileData"]);o!=null&&b(e,["fileData"],p3(o));const l=g(t,["functionCall"]);l!=null&&b(e,["functionCall"],m3(l));const c=g(t,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const d=g(t,["inlineData"]);d!=null&&b(e,["inlineData"],bf(d));const h=g(t,["text"]);h!=null&&b(e,["text"],h);const m=g(t,["thought"]);m!=null&&b(e,["thought"],m);const x=g(t,["thoughtSignature"]);x!=null&&b(e,["thoughtSignature"],x);const w=g(t,["videoMetadata"]);return w!=null&&b(e,["videoMetadata"],w),e}function k3(t){const e={},n=g(t,["handle"]);if(n!=null&&b(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $y(t){const e={},n=g(t,["languageCode"]);n!=null&&b(e,["languageCode"],n);const i=g(t,["voiceConfig"]);if(i!=null&&b(e,["voiceConfig"],i),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function L3(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(x=>x)),b(e,["functionDeclarations"],m)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const s=g(t,["computerUse"]);s!=null&&b(e,["computerUse"],s);const o=g(t,["fileSearch"]);o!=null&&b(e,["fileSearch"],o);const l=g(t,["codeExecution"]);if(l!=null&&b(e,["codeExecution"],l),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],v3(c));const d=g(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],x3(d));const h=g(t,["urlContext"]);return h!=null&&b(e,["urlContext"],h),e}function R3(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>g3(w))),b(e,["functionDeclarations"],x)}const i=g(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const s=g(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const o=g(t,["computerUse"]);if(o!=null&&b(e,["computerUse"],o),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(t,["codeExecution"]);l!=null&&b(e,["codeExecution"],l);const c=g(t,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const d=g(t,["googleMaps"]);d!=null&&b(e,["googleMaps"],d);const h=g(t,["googleSearch"]);h!=null&&b(e,["googleSearch"],h);const m=g(t,["urlContext"]);return m!=null&&b(e,["urlContext"],m),e}function M3(t){const e={},n=g(t,["promptTokenCount"]);n!=null&&b(e,["promptTokenCount"],n);const i=g(t,["cachedContentTokenCount"]);i!=null&&b(e,["cachedContentTokenCount"],i);const s=g(t,["candidatesTokenCount"]);s!=null&&b(e,["responseTokenCount"],s);const o=g(t,["toolUsePromptTokenCount"]);o!=null&&b(e,["toolUsePromptTokenCount"],o);const l=g(t,["thoughtsTokenCount"]);l!=null&&b(e,["thoughtsTokenCount"],l);const c=g(t,["totalTokenCount"]);c!=null&&b(e,["totalTokenCount"],c);const d=g(t,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(I=>I)),b(e,["promptTokensDetails"],v)}const h=g(t,["cacheTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(I=>I)),b(e,["cacheTokensDetails"],v)}const m=g(t,["candidatesTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(I=>I)),b(e,["responseTokensDetails"],v)}const x=g(t,["toolUsePromptTokensDetails"]);if(x!=null){let v=x;Array.isArray(v)&&(v=v.map(I=>I)),b(e,["toolUsePromptTokensDetails"],v)}const w=g(t,["trafficType"]);return w!=null&&b(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j3(t){const e={},n=g(t,["data"]);if(n!=null&&b(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function D3(t){const e={},n=g(t,["content"]);n!=null&&b(e,["content"],n);const i=g(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],P3(i));const s=g(t,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const o=g(t,["finishReason"]);o!=null&&b(e,["finishReason"],o);const l=g(t,["avgLogprobs"]);l!=null&&b(e,["avgLogprobs"],l);const c=g(t,["groundingMetadata"]);c!=null&&b(e,["groundingMetadata"],c);const d=g(t,["index"]);d!=null&&b(e,["index"],d);const h=g(t,["logprobsResult"]);h!=null&&b(e,["logprobsResult"],h);const m=g(t,["safetyRatings"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(v=>v)),b(e,["safetyRatings"],w)}const x=g(t,["urlContextMetadata"]);return x!=null&&b(e,["urlContextMetadata"],x),e}function P3(t){const e={},n=g(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["citations"],i)}return e}function U3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let o=Ia(s);Array.isArray(o)&&(o=o.map(l=>l)),b(n,["contents"],o)}return n}function O3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["tokensInfo"],s)}return e}function B3(t){const e={},n=g(t,["values"]);n!=null&&b(e,["values"],n);const i=g(t,["statistics"]);return i!=null&&b(e,["statistics"],F3(i)),e}function F3(t){const e={},n=g(t,["truncated"]);n!=null&&b(e,["truncated"],n);const i=g(t,["token_count"]);return i!=null&&b(e,["tokenCount"],i),e}function qf(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>$4(o))),b(e,["parts"],s)}const i=g(t,["role"]);return i!=null&&b(e,["role"],i),e}function z3(t){const e={},n=g(t,["controlType"]);n!=null&&b(e,["controlType"],n);const i=g(t,["enableControlImageComputation"]);return i!=null&&b(e,["computeControl"],i),e}function q3(t){const e={};if(g(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function G3(t,e){const n={},i=g(t,["systemInstruction"]);e!==void 0&&i!=null&&b(e,["systemInstruction"],hi(i));const s=g(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ev(c))),b(e,["tools"],l)}const o=g(t,["generationConfig"]);return e!==void 0&&o!=null&&b(e,["generationConfig"],j4(o)),n}function H3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let l=Ia(s);Array.isArray(l)&&(l=l.map(c=>qf(c))),b(n,["contents"],l)}const o=g(e,["config"]);return o!=null&&q3(o),n}function V3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let l=Ia(s);Array.isArray(l)&&(l=l.map(c=>c)),b(n,["contents"],l)}const o=g(e,["config"]);return o!=null&&G3(o,n),n}function J3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["totalTokens"]);i!=null&&b(e,["totalTokens"],i);const s=g(t,["cachedContentTokenCount"]);return s!=null&&b(e,["cachedContentTokenCount"],s),e}function Y3(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["totalTokens"]);return i!=null&&b(e,["totalTokens"],i),e}function W3(t,e){const n={},i=g(e,["model"]);return i!=null&&b(n,["_url","name"],dn(t,i)),n}function $3(t,e){const n={},i=g(e,["model"]);return i!=null&&b(n,["_url","name"],dn(t,i)),n}function K3(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function X3(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function Z3(t,e){const n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const s=g(t,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&b(e,["parameters","sampleCount"],o);const l=g(t,["aspectRatio"]);e!==void 0&&l!=null&&b(e,["parameters","aspectRatio"],l);const c=g(t,["guidanceScale"]);e!==void 0&&c!=null&&b(e,["parameters","guidanceScale"],c);const d=g(t,["seed"]);e!==void 0&&d!=null&&b(e,["parameters","seed"],d);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&b(e,["parameters","safetySetting"],h);const m=g(t,["personGeneration"]);e!==void 0&&m!=null&&b(e,["parameters","personGeneration"],m);const x=g(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&b(e,["parameters","includeSafetyAttributes"],x);const w=g(t,["includeRaiReason"]);e!==void 0&&w!=null&&b(e,["parameters","includeRaiReason"],w);const v=g(t,["language"]);e!==void 0&&v!=null&&b(e,["parameters","language"],v);const I=g(t,["outputMimeType"]);e!==void 0&&I!=null&&b(e,["parameters","outputOptions","mimeType"],I);const A=g(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&b(e,["parameters","outputOptions","compressionQuality"],A);const E=g(t,["addWatermark"]);e!==void 0&&E!=null&&b(e,["parameters","addWatermark"],E);const C=g(t,["labels"]);e!==void 0&&C!=null&&b(e,["labels"],C);const R=g(t,["editMode"]);e!==void 0&&R!=null&&b(e,["parameters","editMode"],R);const D=g(t,["baseSteps"]);return e!==void 0&&D!=null&&b(e,["parameters","editConfig","baseSteps"],D),n}function Q3(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const o=g(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>tN(d))),b(n,["instances[0]","referenceImages"],c)}const l=g(e,["config"]);return l!=null&&Z3(l,n),n}function e4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Gf(o))),b(e,["generatedImages"],s)}return e}function t4(t,e){const n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const s=g(t,["title"]);e!==void 0&&s!=null&&b(e,["requests[]","title"],s);const o=g(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&b(e,["requests[]","outputDimensionality"],o),g(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function n4(t,e){const n={},i=g(t,["taskType"]);e!==void 0&&i!=null&&b(e,["instances[]","task_type"],i);const s=g(t,["title"]);e!==void 0&&s!=null&&b(e,["instances[]","title"],s);const o=g(t,["outputDimensionality"]);e!==void 0&&o!=null&&b(e,["parameters","outputDimensionality"],o);const l=g(t,["mimeType"]);e!==void 0&&l!=null&&b(e,["instances[]","mimeType"],l);const c=g(t,["autoTruncate"]);return e!==void 0&&c!=null&&b(e,["parameters","autoTruncate"],c),n}function r4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let c=bm(t,s);Array.isArray(c)&&(c=c.map(d=>d)),b(n,["requests[]","content"],c)}const o=g(e,["config"]);o!=null&&t4(o,n);const l=g(e,["model"]);return l!==void 0&&b(n,["requests[]","model"],dn(t,l)),n}function i4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let l=bm(t,s);Array.isArray(l)&&(l=l.map(c=>c)),b(n,["instances[]","content"],l)}const o=g(e,["config"]);return o!=null&&n4(o,n),n}function a4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["embeddings"],o)}const s=g(t,["metadata"]);return s!=null&&b(e,["metadata"],s),e}function s4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>B3(l))),b(e,["embeddings"],o)}const s=g(t,["metadata"]);return s!=null&&b(e,["metadata"],s),e}function o4(t){const e={},n=g(t,["endpoint"]);n!=null&&b(e,["name"],n);const i=g(t,["deployedModelId"]);return i!=null&&b(e,["deployedModelId"],i),e}function l4(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function u4(t){const e={},n=g(t,["id"]);n!=null&&b(e,["id"],n);const i=g(t,["args"]);i!=null&&b(e,["args"],i);const s=g(t,["name"]);if(s!=null&&b(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function c4(t){const e={},n=g(t,["mode"]);n!=null&&b(e,["mode"],n);const i=g(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),g(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function d4(t){const e={};if(g(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=g(t,["description"]);n!=null&&b(e,["description"],n);const i=g(t,["name"]);i!=null&&b(e,["name"],i);const s=g(t,["parameters"]);s!=null&&b(e,["parameters"],s);const o=g(t,["parametersJsonSchema"]);o!=null&&b(e,["parametersJsonSchema"],o);const l=g(t,["response"]);l!=null&&b(e,["response"],l);const c=g(t,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function f4(t,e,n){const i={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],qf(hi(s)));const o=g(e,["temperature"]);o!=null&&b(i,["temperature"],o);const l=g(e,["topP"]);l!=null&&b(i,["topP"],l);const c=g(e,["topK"]);c!=null&&b(i,["topK"],c);const d=g(e,["candidateCount"]);d!=null&&b(i,["candidateCount"],d);const h=g(e,["maxOutputTokens"]);h!=null&&b(i,["maxOutputTokens"],h);const m=g(e,["stopSequences"]);m!=null&&b(i,["stopSequences"],m);const x=g(e,["responseLogprobs"]);x!=null&&b(i,["responseLogprobs"],x);const w=g(e,["logprobs"]);w!=null&&b(i,["logprobs"],w);const v=g(e,["presencePenalty"]);v!=null&&b(i,["presencePenalty"],v);const I=g(e,["frequencyPenalty"]);I!=null&&b(i,["frequencyPenalty"],I);const A=g(e,["seed"]);A!=null&&b(i,["seed"],A);const E=g(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const C=g(e,["responseSchema"]);C!=null&&b(i,["responseSchema"],wm(C));const R=g(e,["responseJsonSchema"]);if(R!=null&&b(i,["responseJsonSchema"],R),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=g(e,["safetySettings"]);if(n!==void 0&&D!=null){let j=D;Array.isArray(j)&&(j=j.map(W=>nN(W))),b(n,["safetySettings"],j)}const z=g(e,["tools"]);if(n!==void 0&&z!=null){let j=gc(z);Array.isArray(j)&&(j=j.map(W=>uN(mc(W)))),b(n,["tools"],j)}const B=g(e,["toolConfig"]);if(n!==void 0&&B!=null&&b(n,["toolConfig"],lN(B)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=g(e,["cachedContent"]);n!==void 0&&se!=null&&b(n,["cachedContent"],go(t,se));const q=g(e,["responseModalities"]);q!=null&&b(i,["responseModalities"],q);const G=g(e,["mediaResolution"]);G!=null&&b(i,["mediaResolution"],G);const Q=g(e,["speechConfig"]);if(Q!=null&&b(i,["speechConfig"],Sm(Q)),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=g(e,["thinkingConfig"]);ne!=null&&b(i,["thinkingConfig"],ne);const F=g(e,["imageConfig"]);return F!=null&&b(i,["imageConfig"],B4(F)),i}function h4(t,e,n){const i={},s=g(e,["systemInstruction"]);n!==void 0&&s!=null&&b(n,["systemInstruction"],hi(s));const o=g(e,["temperature"]);o!=null&&b(i,["temperature"],o);const l=g(e,["topP"]);l!=null&&b(i,["topP"],l);const c=g(e,["topK"]);c!=null&&b(i,["topK"],c);const d=g(e,["candidateCount"]);d!=null&&b(i,["candidateCount"],d);const h=g(e,["maxOutputTokens"]);h!=null&&b(i,["maxOutputTokens"],h);const m=g(e,["stopSequences"]);m!=null&&b(i,["stopSequences"],m);const x=g(e,["responseLogprobs"]);x!=null&&b(i,["responseLogprobs"],x);const w=g(e,["logprobs"]);w!=null&&b(i,["logprobs"],w);const v=g(e,["presencePenalty"]);v!=null&&b(i,["presencePenalty"],v);const I=g(e,["frequencyPenalty"]);I!=null&&b(i,["frequencyPenalty"],I);const A=g(e,["seed"]);A!=null&&b(i,["seed"],A);const E=g(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const C=g(e,["responseSchema"]);C!=null&&b(i,["responseSchema"],wm(C));const R=g(e,["responseJsonSchema"]);R!=null&&b(i,["responseJsonSchema"],R);const D=g(e,["routingConfig"]);D!=null&&b(i,["routingConfig"],D);const z=g(e,["modelSelectionConfig"]);z!=null&&b(i,["modelConfig"],z);const B=g(e,["safetySettings"]);if(n!==void 0&&B!=null){let ee=B;Array.isArray(ee)&&(ee=ee.map(ae=>ae)),b(n,["safetySettings"],ee)}const se=g(e,["tools"]);if(n!==void 0&&se!=null){let ee=gc(se);Array.isArray(ee)&&(ee=ee.map(ae=>ev(mc(ae)))),b(n,["tools"],ee)}const q=g(e,["toolConfig"]);n!==void 0&&q!=null&&b(n,["toolConfig"],q);const G=g(e,["labels"]);n!==void 0&&G!=null&&b(n,["labels"],G);const Q=g(e,["cachedContent"]);n!==void 0&&Q!=null&&b(n,["cachedContent"],go(t,Q));const ne=g(e,["responseModalities"]);ne!=null&&b(i,["responseModalities"],ne);const F=g(e,["mediaResolution"]);F!=null&&b(i,["mediaResolution"],F);const j=g(e,["speechConfig"]);j!=null&&b(i,["speechConfig"],Qy(Sm(j)));const W=g(e,["audioTimestamp"]);W!=null&&b(i,["audioTimestamp"],W);const M=g(e,["thinkingConfig"]);M!=null&&b(i,["thinkingConfig"],M);const ce=g(e,["imageConfig"]);return ce!=null&&b(i,["imageConfig"],F4(ce)),i}function _1(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let l=Ia(s);Array.isArray(l)&&(l=l.map(c=>qf(c))),b(n,["contents"],l)}const o=g(e,["config"]);return o!=null&&b(n,["generationConfig"],f4(t,o,n)),n}function A1(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["contents"]);if(s!=null){let l=Ia(s);Array.isArray(l)&&(l=l.map(c=>c)),b(n,["contents"],l)}const o=g(e,["config"]);return o!=null&&b(n,["generationConfig"],h4(t,o,n)),n}function C1(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>D3(h))),b(e,["candidates"],d)}const s=g(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const o=g(t,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);const l=g(t,["responseId"]);l!=null&&b(e,["responseId"],l);const c=g(t,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function T1(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>m)),b(e,["candidates"],h)}const s=g(t,["createTime"]);s!=null&&b(e,["createTime"],s);const o=g(t,["modelVersion"]);o!=null&&b(e,["modelVersion"],o);const l=g(t,["promptFeedback"]);l!=null&&b(e,["promptFeedback"],l);const c=g(t,["responseId"]);c!=null&&b(e,["responseId"],c);const d=g(t,["usageMetadata"]);return d!=null&&b(e,["usageMetadata"],d),e}function p4(t,e){const n={};if(g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const s=g(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);const o=g(t,["guidanceScale"]);if(e!==void 0&&o!=null&&b(e,["parameters","guidanceScale"],o),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&b(e,["parameters","safetySetting"],l);const c=g(t,["personGeneration"]);e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c);const d=g(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&b(e,["parameters","includeSafetyAttributes"],d);const h=g(t,["includeRaiReason"]);e!==void 0&&h!=null&&b(e,["parameters","includeRaiReason"],h);const m=g(t,["language"]);e!==void 0&&m!=null&&b(e,["parameters","language"],m);const x=g(t,["outputMimeType"]);e!==void 0&&x!=null&&b(e,["parameters","outputOptions","mimeType"],x);const w=g(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&b(e,["parameters","outputOptions","compressionQuality"],w),g(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=g(t,["imageSize"]);if(e!==void 0&&v!=null&&b(e,["parameters","sampleImageSize"],v),g(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function m4(t,e){const n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const s=g(t,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const o=g(t,["numberOfImages"]);e!==void 0&&o!=null&&b(e,["parameters","sampleCount"],o);const l=g(t,["aspectRatio"]);e!==void 0&&l!=null&&b(e,["parameters","aspectRatio"],l);const c=g(t,["guidanceScale"]);e!==void 0&&c!=null&&b(e,["parameters","guidanceScale"],c);const d=g(t,["seed"]);e!==void 0&&d!=null&&b(e,["parameters","seed"],d);const h=g(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&b(e,["parameters","safetySetting"],h);const m=g(t,["personGeneration"]);e!==void 0&&m!=null&&b(e,["parameters","personGeneration"],m);const x=g(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&b(e,["parameters","includeSafetyAttributes"],x);const w=g(t,["includeRaiReason"]);e!==void 0&&w!=null&&b(e,["parameters","includeRaiReason"],w);const v=g(t,["language"]);e!==void 0&&v!=null&&b(e,["parameters","language"],v);const I=g(t,["outputMimeType"]);e!==void 0&&I!=null&&b(e,["parameters","outputOptions","mimeType"],I);const A=g(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&b(e,["parameters","outputOptions","compressionQuality"],A);const E=g(t,["addWatermark"]);e!==void 0&&E!=null&&b(e,["parameters","addWatermark"],E);const C=g(t,["labels"]);e!==void 0&&C!=null&&b(e,["labels"],C);const R=g(t,["imageSize"]);e!==void 0&&R!=null&&b(e,["parameters","sampleImageSize"],R);const D=g(t,["enhancePrompt"]);return e!==void 0&&D!=null&&b(e,["parameters","enhancePrompt"],D),n}function g4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const o=g(e,["config"]);return o!=null&&p4(o,n),n}function y4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const o=g(e,["config"]);return o!=null&&m4(o,n),n}function v4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>k4(l))),b(e,["generatedImages"],o)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],Xy(s)),e}function x4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Gf(l))),b(e,["generatedImages"],o)}const s=g(t,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],Zy(s)),e}function b4(t,e){const n={},i=g(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i),g(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=g(t,["durationSeconds"]);if(e!==void 0&&s!=null&&b(e,["parameters","durationSeconds"],s),g(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=g(t,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);const l=g(t,["resolution"]);e!==void 0&&l!=null&&b(e,["parameters","resolution"],l);const c=g(t,["personGeneration"]);if(e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c),g(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=g(t,["negativePrompt"]);e!==void 0&&d!=null&&b(e,["parameters","negativePrompt"],d);const h=g(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&b(e,["parameters","enhancePrompt"],h),g(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=g(t,["lastFrame"]);e!==void 0&&m!=null&&b(e,["instances[0]","lastFrame"],Hf(m));const x=g(t,["referenceImages"]);if(e!==void 0&&x!=null){let w=x;Array.isArray(w)&&(w=w.map(v=>SN(v))),b(e,["instances[0]","referenceImages"],w)}if(g(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function w4(t,e){const n={},i=g(t,["numberOfVideos"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const s=g(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);const o=g(t,["fps"]);e!==void 0&&o!=null&&b(e,["parameters","fps"],o);const l=g(t,["durationSeconds"]);e!==void 0&&l!=null&&b(e,["parameters","durationSeconds"],l);const c=g(t,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const d=g(t,["aspectRatio"]);e!==void 0&&d!=null&&b(e,["parameters","aspectRatio"],d);const h=g(t,["resolution"]);e!==void 0&&h!=null&&b(e,["parameters","resolution"],h);const m=g(t,["personGeneration"]);e!==void 0&&m!=null&&b(e,["parameters","personGeneration"],m);const x=g(t,["pubsubTopic"]);e!==void 0&&x!=null&&b(e,["parameters","pubsubTopic"],x);const w=g(t,["negativePrompt"]);e!==void 0&&w!=null&&b(e,["parameters","negativePrompt"],w);const v=g(t,["enhancePrompt"]);e!==void 0&&v!=null&&b(e,["parameters","enhancePrompt"],v);const I=g(t,["generateAudio"]);e!==void 0&&I!=null&&b(e,["parameters","generateAudio"],I);const A=g(t,["lastFrame"]);e!==void 0&&A!=null&&b(e,["instances[0]","lastFrame"],Qa(A));const E=g(t,["referenceImages"]);if(e!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(z=>NN(z))),b(e,["instances[0]","referenceImages"],D)}const C=g(t,["mask"]);e!==void 0&&C!=null&&b(e,["instances[0]","mask"],wN(C));const R=g(t,["compressionQuality"]);return e!==void 0&&R!=null&&b(e,["parameters","compressionQuality"],R),n}function S4(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response","generateVideoResponse"]);return l!=null&&b(e,["response"],C4(l)),e}function N4(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response"]);return l!=null&&b(e,["response"],T4(l)),e}function _4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const o=g(e,["image"]);o!=null&&b(n,["instances[0]","image"],Hf(o));const l=g(e,["video"]);l!=null&&b(n,["instances[0]","video"],tv(l));const c=g(e,["source"]);c!=null&&E4(c,n);const d=g(e,["config"]);return d!=null&&b4(d,n),n}function A4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["prompt"]);s!=null&&b(n,["instances[0]","prompt"],s);const o=g(e,["image"]);o!=null&&b(n,["instances[0]","image"],Qa(o));const l=g(e,["video"]);l!=null&&b(n,["instances[0]","video"],nv(l));const c=g(e,["source"]);c!=null&&I4(c,n);const d=g(e,["config"]);return d!=null&&w4(d,n),n}function C4(t){const e={},n=g(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>R4(l))),b(e,["generatedVideos"],o)}const i=g(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function T4(t){const e={},n=g(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>M4(l))),b(e,["generatedVideos"],o)}const i=g(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const s=g(t,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function E4(t,e){const n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const s=g(t,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],Hf(s));const o=g(t,["video"]);return e!==void 0&&o!=null&&b(e,["instances[0]","video"],tv(o)),n}function I4(t,e){const n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const s=g(t,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],Qa(s));const o=g(t,["video"]);return e!==void 0&&o!=null&&b(e,["instances[0]","video"],nv(o)),n}function k4(t){const e={},n=g(t,["_self"]);n!=null&&b(e,["image"],z4(n));const i=g(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const s=g(t,["_self"]);return s!=null&&b(e,["safetyAttributes"],Xy(s)),e}function Gf(t){const e={},n=g(t,["_self"]);n!=null&&b(e,["image"],Ky(n));const i=g(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const s=g(t,["_self"]);s!=null&&b(e,["safetyAttributes"],Zy(s));const o=g(t,["prompt"]);return o!=null&&b(e,["enhancedPrompt"],o),e}function L4(t){const e={},n=g(t,["_self"]);n!=null&&b(e,["mask"],Ky(n));const i=g(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["labels"],s)}return e}function R4(t){const e={},n=g(t,["video"]);return n!=null&&b(e,["video"],xN(n)),e}function M4(t){const e={},n=g(t,["_self"]);return n!=null&&b(e,["video"],bN(n)),e}function j4(t){const e={},n=g(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=g(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const s=g(t,["audioTimestamp"]);s!=null&&b(e,["audioTimestamp"],s);const o=g(t,["candidateCount"]);o!=null&&b(e,["candidateCount"],o);const l=g(t,["enableAffectiveDialog"]);l!=null&&b(e,["enableAffectiveDialog"],l);const c=g(t,["frequencyPenalty"]);c!=null&&b(e,["frequencyPenalty"],c);const d=g(t,["logprobs"]);d!=null&&b(e,["logprobs"],d);const h=g(t,["maxOutputTokens"]);h!=null&&b(e,["maxOutputTokens"],h);const m=g(t,["mediaResolution"]);m!=null&&b(e,["mediaResolution"],m);const x=g(t,["presencePenalty"]);x!=null&&b(e,["presencePenalty"],x);const w=g(t,["responseLogprobs"]);w!=null&&b(e,["responseLogprobs"],w);const v=g(t,["responseMimeType"]);v!=null&&b(e,["responseMimeType"],v);const I=g(t,["responseModalities"]);I!=null&&b(e,["responseModalities"],I);const A=g(t,["responseSchema"]);A!=null&&b(e,["responseSchema"],A);const E=g(t,["routingConfig"]);E!=null&&b(e,["routingConfig"],E);const C=g(t,["seed"]);C!=null&&b(e,["seed"],C);const R=g(t,["speechConfig"]);R!=null&&b(e,["speechConfig"],Qy(R));const D=g(t,["stopSequences"]);D!=null&&b(e,["stopSequences"],D);const z=g(t,["temperature"]);z!=null&&b(e,["temperature"],z);const B=g(t,["thinkingConfig"]);B!=null&&b(e,["thinkingConfig"],B);const se=g(t,["topK"]);se!=null&&b(e,["topK"],se);const q=g(t,["topP"]);if(q!=null&&b(e,["topP"],q),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function D4(t,e){const n={},i=g(e,["model"]);return i!=null&&b(n,["_url","name"],dn(t,i)),n}function P4(t,e){const n={},i=g(e,["model"]);return i!=null&&b(n,["_url","name"],dn(t,i)),n}function U4(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function O4(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function B4(t){const e={},n=g(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=g(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),g(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function F4(t){const e={},n=g(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=g(t,["imageSize"]);i!=null&&b(e,["imageSize"],i);const s=g(t,["outputMimeType"]);s!=null&&b(e,["imageOutputOptions","mimeType"],s);const o=g(t,["outputCompressionQuality"]);return o!=null&&b(e,["imageOutputOptions","compressionQuality"],o),e}function z4(t){const e={},n=g(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],pl(n));const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Ky(t){const e={},n=g(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=g(t,["bytesBase64Encoded"]);i!=null&&b(e,["imageBytes"],pl(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function Hf(t){const e={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],pl(n));const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Qa(t){const e={},n=g(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=g(t,["imageBytes"]);i!=null&&b(e,["bytesBase64Encoded"],pl(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function q4(t,e,n){const i={},s=g(e,["pageSize"]);n!==void 0&&s!=null&&b(n,["_query","pageSize"],s);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&b(n,["_query","pageToken"],o);const l=g(e,["filter"]);n!==void 0&&l!=null&&b(n,["_query","filter"],l);const c=g(e,["queryBase"]);return n!==void 0&&c!=null&&b(n,["_url","models_url"],qy(t,c)),i}function G4(t,e,n){const i={},s=g(e,["pageSize"]);n!==void 0&&s!=null&&b(n,["_query","pageSize"],s);const o=g(e,["pageToken"]);n!==void 0&&o!=null&&b(n,["_query","pageToken"],o);const l=g(e,["filter"]);n!==void 0&&l!=null&&b(n,["_query","filter"],l);const c=g(e,["queryBase"]);return n!==void 0&&c!=null&&b(n,["_url","models_url"],qy(t,c)),i}function H4(t,e){const n={},i=g(e,["config"]);return i!=null&&q4(t,i,n),n}function V4(t,e){const n={},i=g(e,["config"]);return i!=null&&G4(t,i,n),n}function J4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["_self"]);if(s!=null){let o=Gy(s);Array.isArray(o)&&(o=o.map(l=>Lp(l))),b(e,["models"],o)}return e}function Y4(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["_self"]);if(s!=null){let o=Gy(s);Array.isArray(o)&&(o=o.map(l=>Rp(l))),b(e,["models"],o)}return e}function W4(t){const e={},n=g(t,["maskMode"]);n!=null&&b(e,["maskMode"],n);const i=g(t,["segmentationClasses"]);i!=null&&b(e,["maskClasses"],i);const s=g(t,["maskDilation"]);return s!=null&&b(e,["dilation"],s),e}function Lp(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["displayName"]);i!=null&&b(e,["displayName"],i);const s=g(t,["description"]);s!=null&&b(e,["description"],s);const o=g(t,["version"]);o!=null&&b(e,["version"],o);const l=g(t,["_self"]);l!=null&&b(e,["tunedModelInfo"],cN(l));const c=g(t,["inputTokenLimit"]);c!=null&&b(e,["inputTokenLimit"],c);const d=g(t,["outputTokenLimit"]);d!=null&&b(e,["outputTokenLimit"],d);const h=g(t,["supportedGenerationMethods"]);h!=null&&b(e,["supportedActions"],h);const m=g(t,["temperature"]);m!=null&&b(e,["temperature"],m);const x=g(t,["maxTemperature"]);x!=null&&b(e,["maxTemperature"],x);const w=g(t,["topP"]);w!=null&&b(e,["topP"],w);const v=g(t,["topK"]);v!=null&&b(e,["topK"],v);const I=g(t,["thinking"]);return I!=null&&b(e,["thinking"],I),e}function Rp(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["displayName"]);i!=null&&b(e,["displayName"],i);const s=g(t,["description"]);s!=null&&b(e,["description"],s);const o=g(t,["versionId"]);o!=null&&b(e,["version"],o);const l=g(t,["deployedModels"]);if(l!=null){let x=l;Array.isArray(x)&&(x=x.map(w=>o4(w))),b(e,["endpoints"],x)}const c=g(t,["labels"]);c!=null&&b(e,["labels"],c);const d=g(t,["_self"]);d!=null&&b(e,["tunedModelInfo"],dN(d));const h=g(t,["defaultCheckpointId"]);h!=null&&b(e,["defaultCheckpointId"],h);const m=g(t,["checkpoints"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(w=>w)),b(e,["checkpoints"],x)}return e}function $4(t){const e={},n=g(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=g(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const s=g(t,["executableCode"]);s!=null&&b(e,["executableCode"],s);const o=g(t,["fileData"]);o!=null&&b(e,["fileData"],l4(o));const l=g(t,["functionCall"]);l!=null&&b(e,["functionCall"],u4(l));const c=g(t,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const d=g(t,["inlineData"]);d!=null&&b(e,["inlineData"],j3(d));const h=g(t,["text"]);h!=null&&b(e,["text"],h);const m=g(t,["thought"]);m!=null&&b(e,["thought"],m);const x=g(t,["thoughtSignature"]);x!=null&&b(e,["thoughtSignature"],x);const w=g(t,["videoMetadata"]);return w!=null&&b(e,["videoMetadata"],w),e}function K4(t){const e={},n=g(t,["productImage"]);return n!=null&&b(e,["image"],Qa(n)),e}function X4(t,e){const n={},i=g(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const s=g(t,["baseSteps"]);e!==void 0&&s!=null&&b(e,["parameters","baseSteps"],s);const o=g(t,["outputGcsUri"]);e!==void 0&&o!=null&&b(e,["parameters","storageUri"],o);const l=g(t,["seed"]);e!==void 0&&l!=null&&b(e,["parameters","seed"],l);const c=g(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);const d=g(t,["personGeneration"]);e!==void 0&&d!=null&&b(e,["parameters","personGeneration"],d);const h=g(t,["addWatermark"]);e!==void 0&&h!=null&&b(e,["parameters","addWatermark"],h);const m=g(t,["outputMimeType"]);e!==void 0&&m!=null&&b(e,["parameters","outputOptions","mimeType"],m);const x=g(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&b(e,["parameters","outputOptions","compressionQuality"],x);const w=g(t,["enhancePrompt"]);e!==void 0&&w!=null&&b(e,["parameters","enhancePrompt"],w);const v=g(t,["labels"]);return e!==void 0&&v!=null&&b(e,["labels"],v),n}function Z4(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["source"]);s!=null&&eN(s,n);const o=g(e,["config"]);return o!=null&&X4(o,n),n}function Q4(t){const e={},n=g(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Gf(s))),b(e,["generatedImages"],i)}return e}function eN(t,e){const n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const s=g(t,["personImage"]);e!==void 0&&s!=null&&b(e,["instances[0]","personImage","image"],Qa(s));const o=g(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>K4(c))),b(e,["instances[0]","productImages"],l)}return n}function tN(t){const e={},n=g(t,["referenceImage"]);n!=null&&b(e,["referenceImage"],Qa(n));const i=g(t,["referenceId"]);i!=null&&b(e,["referenceId"],i);const s=g(t,["referenceType"]);s!=null&&b(e,["referenceType"],s);const o=g(t,["maskImageConfig"]);o!=null&&b(e,["maskImageConfig"],W4(o));const l=g(t,["controlImageConfig"]);l!=null&&b(e,["controlImageConfig"],z3(l));const c=g(t,["styleImageConfig"]);c!=null&&b(e,["styleImageConfig"],c);const d=g(t,["subjectImageConfig"]);return d!=null&&b(e,["subjectImageConfig"],d),e}function Xy(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=g(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const s=g(t,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function Zy(t){const e={},n=g(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=g(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const s=g(t,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function nN(t){const e={},n=g(t,["category"]);if(n!=null&&b(e,["category"],n),g(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=g(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function rN(t){const e={},n=g(t,["image"]);return n!=null&&b(e,["image"],Qa(n)),e}function iN(t,e){const n={},i=g(t,["mode"]);e!==void 0&&i!=null&&b(e,["parameters","mode"],i);const s=g(t,["maxPredictions"]);e!==void 0&&s!=null&&b(e,["parameters","maxPredictions"],s);const o=g(t,["confidenceThreshold"]);e!==void 0&&o!=null&&b(e,["parameters","confidenceThreshold"],o);const l=g(t,["maskDilation"]);e!==void 0&&l!=null&&b(e,["parameters","maskDilation"],l);const c=g(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&b(e,["parameters","binaryColorThreshold"],c);const d=g(t,["labels"]);return e!==void 0&&d!=null&&b(e,["labels"],d),n}function aN(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["source"]);s!=null&&oN(s,n);const o=g(e,["config"]);return o!=null&&iN(o,n),n}function sN(t){const e={},n=g(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>L4(s))),b(e,["generatedMasks"],i)}return e}function oN(t,e){const n={},i=g(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const s=g(t,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],Qa(s));const o=g(t,["scribbleImage"]);return e!==void 0&&o!=null&&b(e,["instances[0]","scribble"],rN(o)),n}function Qy(t){const e={},n=g(t,["languageCode"]);n!=null&&b(e,["languageCode"],n);const i=g(t,["voiceConfig"]);if(i!=null&&b(e,["voiceConfig"],i),g(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function lN(t){const e={},n=g(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],c4(n));const i=g(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function uN(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(x=>x)),b(e,["functionDeclarations"],m)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const s=g(t,["computerUse"]);s!=null&&b(e,["computerUse"],s);const o=g(t,["fileSearch"]);o!=null&&b(e,["fileSearch"],o);const l=g(t,["codeExecution"]);if(l!=null&&b(e,["codeExecution"],l),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],U4(c));const d=g(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],O4(d));const h=g(t,["urlContext"]);return h!=null&&b(e,["urlContext"],h),e}function ev(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let x=n;Array.isArray(x)&&(x=x.map(w=>d4(w))),b(e,["functionDeclarations"],x)}const i=g(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const s=g(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const o=g(t,["computerUse"]);if(o!=null&&b(e,["computerUse"],o),g(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=g(t,["codeExecution"]);l!=null&&b(e,["codeExecution"],l);const c=g(t,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const d=g(t,["googleMaps"]);d!=null&&b(e,["googleMaps"],d);const h=g(t,["googleSearch"]);h!=null&&b(e,["googleSearch"],h);const m=g(t,["urlContext"]);return m!=null&&b(e,["urlContext"],m),e}function cN(t){const e={},n=g(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const i=g(t,["createTime"]);i!=null&&b(e,["createTime"],i);const s=g(t,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function dN(t){const e={},n=g(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&b(e,["baseModel"],n);const i=g(t,["createTime"]);i!=null&&b(e,["createTime"],i);const s=g(t,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function fN(t,e){const n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const s=g(t,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&b(e,["defaultCheckpointId"],o),n}function hN(t,e){const n={},i=g(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const s=g(t,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const o=g(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&b(e,["defaultCheckpointId"],o),n}function pN(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","name"],dn(t,i));const s=g(e,["config"]);return s!=null&&fN(s,n),n}function mN(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["config"]);return s!=null&&hN(s,n),n}function gN(t,e){const n={},i=g(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const s=g(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&b(e,["parameters","safetySetting"],s);const o=g(t,["personGeneration"]);e!==void 0&&o!=null&&b(e,["parameters","personGeneration"],o);const l=g(t,["includeRaiReason"]);e!==void 0&&l!=null&&b(e,["parameters","includeRaiReason"],l);const c=g(t,["outputMimeType"]);e!==void 0&&c!=null&&b(e,["parameters","outputOptions","mimeType"],c);const d=g(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&b(e,["parameters","outputOptions","compressionQuality"],d);const h=g(t,["enhanceInputImage"]);e!==void 0&&h!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],h);const m=g(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const x=g(t,["labels"]);e!==void 0&&x!=null&&b(e,["labels"],x);const w=g(t,["numberOfImages"]);e!==void 0&&w!=null&&b(e,["parameters","sampleCount"],w);const v=g(t,["mode"]);return e!==void 0&&v!=null&&b(e,["parameters","mode"],v),n}function yN(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["_url","model"],dn(t,i));const s=g(e,["image"]);s!=null&&b(n,["instances[0]","image"],Qa(s));const o=g(e,["upscaleFactor"]);o!=null&&b(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=g(e,["config"]);return l!=null&&gN(l,n),n}function vN(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Gf(o))),b(e,["generatedImages"],s)}return e}function xN(t){const e={},n=g(t,["uri"]);n!=null&&b(e,["uri"],n);const i=g(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],pl(i));const s=g(t,["encoding"]);return s!=null&&b(e,["mimeType"],s),e}function bN(t){const e={},n=g(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=g(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],pl(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function wN(t){const e={},n=g(t,["image"]);n!=null&&b(e,["_self"],Qa(n));const i=g(t,["maskMode"]);return i!=null&&b(e,["maskMode"],i),e}function SN(t){const e={},n=g(t,["image"]);n!=null&&b(e,["image"],Hf(n));const i=g(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function NN(t){const e={},n=g(t,["image"]);n!=null&&b(e,["image"],Qa(n));const i=g(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function tv(t){const e={},n=g(t,["uri"]);n!=null&&b(e,["uri"],n);const i=g(t,["videoBytes"]);i!=null&&b(e,["encodedVideo"],pl(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["encoding"],s),e}function nv(t){const e={},n=g(t,["uri"]);n!=null&&b(e,["gcsUri"],n);const i=g(t,["videoBytes"]);i!=null&&b(e,["bytesBase64Encoded"],pl(i));const s=g(t,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _N="Content-Type",AN="X-Server-Timeout",CN="User-Agent",Mp="x-goog-api-client",TN="1.30.0",EN=`google-genai-sdk/${TN}`,IN="v1beta1",kN="v1beta",E1=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class LN{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:IN,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:kN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(n))typeof o=="object"?i[s]=Object.assign(Object.assign({},i[s]),o):o!==void 0&&(i[s]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&RN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await I1(s),new Ep(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await I1(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return rc(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Fn(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=o.decode(d,{stream:!0});try{const x=JSON.parse(h);if("error"in x){const w=JSON.parse(JSON.stringify(x.error)),v=w.status,I=w.code,A=`got status: ${v}. ${JSON.stringify(x)}`;if(I>=400&&I<600)throw new zf({message:A,status:I})}}catch(x){if(x.name==="ApiError")throw x}l+=h;let m=l.match(E1);for(;m;){const x=m[1];try{const w=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Fn(new Ep(w)),l=l.slice(m[0].length),m=l.match(E1)}catch(w){throw new Error(`exception parsing stream chunk ${x}. ${w}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=EN+" "+this.clientOptions.userAgentExtra;return e[CN]=n,e[Mp]=n,e[_N]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))i.append(s,o);e.timeout&&e.timeout>0&&i.append(AN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),m=ht("upload/v1beta/files",d._url),x=await this.fetchUploadUrl(m,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return o.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,i){var s;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(n),x={};i!=null&&i.customMetadata&&(x.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(x.chunkingConfig=i.chunkingConfig);const w=await this.fetchUploadUrl(h,c,d,m,x,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const m=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}}async function I1(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new zf({message:s,status:n}):new Error(s)}}function RN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],m=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&m&&typeof m=="object"&&!Array.isArray(m)?c[d]=i(m,h):(m&&h&&typeof m!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof m}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MN="mcp_used/unknown";let jN=!1;function rv(t){for(const e of t)if(DN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jN}function iv(t){var e;const n=(e=t[Mp])!==null&&e!==void 0?e:"";t[Mp]=(n+` ${MN}`).trimStart()}function DN(t){return t!==null&&typeof t=="object"&&t instanceof _m}function PN(t,e=100){return rc(this,arguments,function*(){let i,s=0;for(;s<e;){const o=yield Fn(t.listTools({cursor:i}));for(const l of o.tools)yield yield Fn(l),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class _m{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _m(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const o={},l=[];for(const m of this.mcpClients)try{for(var c=!0,d=(n=void 0,ud(PN(m))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const x=s;l.push(x);const w=x.name;if(o[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);o[w]=m}}catch(x){n={error:x}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Ew(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UN(t,e,n){const i=new bw;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class ON{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=zN(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const m=new Promise(D=>{h=D}),x=e.callbacks,w=function(){h({})},v=this.apiClient,I={onopen:w,onmessage:D=>{UN(v,x.onmessage,D)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(D){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(D){}},A=this.webSocketFactory.create(d,FN(l),I);A.connect(),await m;const R={setup:{model:dn(this.apiClient,e.model)}};return A.send(JSON.stringify(R)),new BN(A,this.apiClient)}}class BN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=A3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=_3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Zu.PLAY)}pause(){this.sendPlaybackControl(Zu.PAUSE)}stop(){this.sendPlaybackControl(Zu.STOP)}resetContext(){this.sendPlaybackControl(Zu.RESET_CONTEXT)}close(){this.conn.close()}}function FN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function zN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GN(t,e,n){const i=new xw;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(t.isVertexAI()){const l=E3(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class HN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new ON(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let m;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&rv(e.config.tools)&&iv(x);const w=WN(x);if(this.apiClient.isVertexAI())m=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,m);else{const Q=this.apiClient.getApiKey();let ne="BidiGenerateContent",F="key";Q!=null&&Q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ne="BidiGenerateContentConstrained",F="access_token"),m=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ne}?${F}=${Q}`}let v=()=>{};const I=new Promise(Q=>{v=Q}),A=e.callbacks,E=function(){var Q;(Q=A==null?void 0:A.onopen)===null||Q===void 0||Q.call(A),v({})},C=this.apiClient,R={onopen:E,onmessage:Q=>{GN(C,A.onmessage,Q)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(Q){},onclose:(i=A==null?void 0:A.onclose)!==null&&i!==void 0?i:function(Q){}},D=this.webSocketFactory.create(m,YN(w),R);D.connect(),await I;let z=dn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const Q=this.apiClient.getProject(),ne=this.apiClient.getLocation();z=`projects/${Q}/locations/${ne}/`+z}let B={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cf.AUDIO]}:e.config.responseModalities=[Cf.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],q=[];for(const Q of se)if(this.isCallableTool(Q)){const ne=Q;q.push(await ne.tool())}else q.push(Q);q.length>0&&(e.config.tools=q);const G={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=N3(this.apiClient,G):B=S3(this.apiClient,G),delete B.config,D.send(JSON.stringify(B)),new JN(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VN={turnComplete:!0};class JN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ia(n.turns),e.isVertexAI()||(i=i.map(s=>qf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(qN)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},VN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:T3(e)}:n={realtimeInput:C3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function YN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function WN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k1=10;function L1(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ic(l)){s=!0;break}if(!s)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ic(t){return"callTool"in t&&typeof t.callTool=="function"}function $N(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ic(s)))!==null&&i!==void 0?i:!1}function R1(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(ic(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(s)}),n}function M1(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KN extends mo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$N(n)||L1(n.config))return await this.generateContentInternal(d);const h=R1(n);if(h.length>0){const A=h.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let m,x;const w=Ia(d.contents),v=(o=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:k1;let I=0;for(;I<v&&(m=await this.generateContentInternal(d),!(!m.functionCalls||m.functionCalls.length===0));){const A=m.candidates[0].content,E=[];for(const C of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(ic(C)){const D=await C.callTool(m.functionCalls);E.push(...D)}I++,x={role:"user",parts:E},d.contents=Ia(d.contents),d.contents.push(A),d.contents.push(x),M1(d.config)&&(w.push(A),w.push(x))}return M1(d.config)&&(m.automaticFunctionCallingHistory=w),m},this.generateContentStream=async n=>{var i,s,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),L1(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const d=R1(n);if(d.length>0){const x=d.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(s=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,m=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new tu(fo.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>ic(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&rv(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),iv(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ic(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,c)}}return o}async processAfcStream(e){var n,i,s;const o=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:k1;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,m,x){var w,v;return rc(this,arguments,function*(){for(var I,A,E,C;c<o;){l&&(c++,l=!1);const B=yield Fn(h.processParamsMaybeAddMcpUsage(x)),se=yield Fn(h.generateContentStreamInternal(B)),q=[],G=[];try{for(var R=!0,D=(A=void 0,ud(se)),z;z=yield Fn(D.next()),I=z.done,!I;R=!0){C=z.value,R=!1;const Q=C;if(yield yield Fn(Q),Q.candidates&&(!((w=Q.candidates[0])===null||w===void 0)&&w.content)){G.push(Q.candidates[0].content);for(const ne of(v=Q.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(c<o&&ne.functionCall){if(!ne.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(ne.functionCall.name)){const F=yield Fn(m.get(ne.functionCall.name).callTool([ne.functionCall]));q.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${ne.functionCall.name}`)}}}}catch(Q){A={error:Q}}finally{try{!R&&!I&&(E=D.return)&&(yield Fn(E.call(D)))}finally{if(A)throw A.error}}if(q.length>0){l=!0;const Q=new ad;Q.candidates=[{content:{role:"user",parts:q}}],yield yield Fn(Q);const ne=[];ne.push(...G),ne.push({role:"user",parts:q});const F=Ia(x.contents).concat(ne);x.contents=F}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A1(this.apiClient,e);return c=ht("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=T1(m),w=new ad;return Object.assign(w,x),w})}else{const h=_1(this.apiClient,e);return c=ht("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=C1(m),w=new ad;return Object.assign(w,x),w})}}async generateContentStreamInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A1(this.apiClient,e);return c=ht("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(x){return rc(this,arguments,function*(){var w,v,I,A;try{for(var E=!0,C=ud(x),R;R=yield Fn(C.next()),w=R.done,!w;E=!0){A=R.value,E=!1;const D=A,z=T1(yield Fn(D.json()));z.sdkHttpResponse={headers:D.headers};const B=new ad;Object.assign(B,z),yield yield Fn(B)}}catch(D){v={error:D}}finally{try{!E&&!w&&(I=C.return)&&(yield Fn(I.call(C)))}finally{if(v)throw v.error}}})})}else{const h=_1(this.apiClient,e);return c=ht("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(x){return rc(this,arguments,function*(){var w,v,I,A;try{for(var E=!0,C=ud(x),R;R=yield Fn(C.next()),w=R.done,!w;E=!0){A=R.value,E=!1;const D=A,z=C1(yield Fn(D.json()));z.sdkHttpResponse={headers:D.headers};const B=new ad;Object.assign(B,z),yield yield Fn(B)}}catch(D){v={error:D}}finally{try{!E&&!w&&(I=C.return)&&(yield Fn(I.call(C)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=i4(this.apiClient,e);return c=ht("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=s4(m),w=new l1;return Object.assign(w,x),w})}else{const h=r4(this.apiClient,e);return c=ht("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=a4(m),w=new l1;return Object.assign(w,x),w})}}async generateImagesInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=y4(this.apiClient,e);return c=ht("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=x4(m),w=new u1;return Object.assign(w,x),w})}else{const h=g4(this.apiClient,e);return c=ht("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=v4(m),w=new u1;return Object.assign(w,x),w})}}async editImageInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=Q3(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{const h=e4(d),m=new lw;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=yN(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{const h=vN(d),m=new uw;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=Z4(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=Q4(d),m=new cw;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=aN(this.apiClient,e);return o=ht("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=sN(d),m=new dw;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=P4(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Rp(m))}else{const h=D4(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>Lp(m))}}async listInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=V4(this.apiClient,e);return c=ht("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=Y4(m),w=new c1;return Object.assign(w,x),w})}else{const h=H4(this.apiClient,e);return c=ht("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=J4(m),w=new c1;return Object.assign(w,x),w})}}async update(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=mN(this.apiClient,e);return c=ht("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>Rp(m))}else{const h=pN(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>Lp(m))}}async delete(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=$3(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=X3(m),w=new d1;return Object.assign(w,x),w})}else{const h=W3(this.apiClient,e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=K3(m),w=new d1;return Object.assign(w,x),w})}}async countTokens(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=V3(this.apiClient,e);return c=ht("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=Y3(m),w=new f1;return Object.assign(w,x),w})}else{const h=H3(this.apiClient,e);return c=ht("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=J3(m),w=new f1;return Object.assign(w,x),w})}}async computeTokens(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=U3(this.apiClient,e);return o=ht("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{const h=O3(d),m=new fw;return Object.assign(m,h),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A4(this.apiClient,e);return c=ht("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l.then(m=>{const x=N4(m),w=new Tf;return Object.assign(w,x),w})}else{const h=_4(this.apiClient,e);return c=ht("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l.then(m=>{const x=S4(m),w=new Tf;return Object.assign(w,x),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XN extends mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=nw(e);return c=ht("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),l}else{const h=tw(e);return c=ht("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=Wb(e);return o=ht("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(t){const e={},n=g(t,["data"]);if(n!=null&&b(e,["data"],n),g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function QN(t){const e={},n=g(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>l_(o))),b(e,["parts"],s)}const i=g(t,["role"]);return i!=null&&b(e,["role"],i),e}function e_(t,e,n){const i={},s=g(e,["expireTime"]);n!==void 0&&s!=null&&b(n,["expireTime"],s);const o=g(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&b(n,["newSessionExpireTime"],o);const l=g(e,["uses"]);n!==void 0&&l!=null&&b(n,["uses"],l);const c=g(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&b(n,["bidiGenerateContentSetup"],o_(t,c));const d=g(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&b(n,["fieldMask"],d),i}function t_(t,e){const n={},i=g(e,["config"]);return i!=null&&b(n,["config"],e_(t,i,n)),n}function n_(t){const e={};if(g(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=g(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function r_(t){const e={},n=g(t,["id"]);n!=null&&b(e,["id"],n);const i=g(t,["args"]);i!=null&&b(e,["args"],i);const s=g(t,["name"]);if(s!=null&&b(e,["name"],s),g(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i_(t){const e={};if(g(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function a_(t){const e={};if(g(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function s_(t,e){const n={},i=g(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const s=g(t,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const o=g(t,["temperature"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","temperature"],o);const l=g(t,["topP"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topP"],l);const c=g(t,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const d=g(t,["maxOutputTokens"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","maxOutputTokens"],d);const h=g(t,["mediaResolution"]);e!==void 0&&h!=null&&b(e,["setup","generationConfig","mediaResolution"],h);const m=g(t,["seed"]);e!==void 0&&m!=null&&b(e,["setup","generationConfig","seed"],m);const x=g(t,["speechConfig"]);e!==void 0&&x!=null&&b(e,["setup","generationConfig","speechConfig"],Nm(x));const w=g(t,["thinkingConfig"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","thinkingConfig"],w);const v=g(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],v);const I=g(t,["systemInstruction"]);e!==void 0&&I!=null&&b(e,["setup","systemInstruction"],QN(hi(I)));const A=g(t,["tools"]);if(e!==void 0&&A!=null){let se=gc(A);Array.isArray(se)&&(se=se.map(q=>c_(mc(q)))),b(e,["setup","tools"],se)}const E=g(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],u_(E));const C=g(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","inputAudioTranscription"],C);const R=g(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&b(e,["setup","outputAudioTranscription"],R);const D=g(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&b(e,["setup","realtimeInputConfig"],D);const z=g(t,["contextWindowCompression"]);e!==void 0&&z!=null&&b(e,["setup","contextWindowCompression"],z);const B=g(t,["proactivity"]);return e!==void 0&&B!=null&&b(e,["setup","proactivity"],B),n}function o_(t,e){const n={},i=g(e,["model"]);i!=null&&b(n,["setup","model"],dn(t,i));const s=g(e,["config"]);return s!=null&&b(n,["config"],s_(s,n)),n}function l_(t){const e={},n=g(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=g(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const s=g(t,["executableCode"]);s!=null&&b(e,["executableCode"],s);const o=g(t,["fileData"]);o!=null&&b(e,["fileData"],n_(o));const l=g(t,["functionCall"]);l!=null&&b(e,["functionCall"],r_(l));const c=g(t,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const d=g(t,["inlineData"]);d!=null&&b(e,["inlineData"],ZN(d));const h=g(t,["text"]);h!=null&&b(e,["text"],h);const m=g(t,["thought"]);m!=null&&b(e,["thought"],m);const x=g(t,["thoughtSignature"]);x!=null&&b(e,["thoughtSignature"],x);const w=g(t,["videoMetadata"]);return w!=null&&b(e,["videoMetadata"],w),e}function u_(t){const e={},n=g(t,["handle"]);if(n!=null&&b(e,["handle"],n),g(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function c_(t){const e={},n=g(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(x=>x)),b(e,["functionDeclarations"],m)}if(g(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=g(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const s=g(t,["computerUse"]);s!=null&&b(e,["computerUse"],s);const o=g(t,["fileSearch"]);o!=null&&b(e,["fileSearch"],o);const l=g(t,["codeExecution"]);if(l!=null&&b(e,["codeExecution"],l),g(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=g(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],i_(c));const d=g(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],a_(d));const h=g(t,["urlContext"]);return h!=null&&b(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d_(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(o=>`${n}.${o}`);e.push(...s)}else e.push(n)}return e.join(",")}function f_(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const o=d_(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class h_ extends mo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=t_(this.apiClient,e);o=ht("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=f_(c,e.config);return s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p_(t,e){const n={},i=g(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["displayName"],i),n}function m_(t){const e={},n=g(t,["config"]);return n!=null&&p_(n,e),e}function g_(t,e){const n={},i=g(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function y_(t){const e={},n=g(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=g(t,["config"]);return i!=null&&g_(i,e),e}function v_(t){const e={},n=g(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function x_(t,e){const n={},i=g(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["customMetadata"],o)}const s=g(t,["chunkingConfig"]);return e!==void 0&&s!=null&&b(e,["chunkingConfig"],s),n}function b_(t){const e={},n=g(t,["name"]);n!=null&&b(e,["name"],n);const i=g(t,["metadata"]);i!=null&&b(e,["metadata"],i);const s=g(t,["done"]);s!=null&&b(e,["done"],s);const o=g(t,["error"]);o!=null&&b(e,["error"],o);const l=g(t,["response"]);return l!=null&&b(e,["response"],S_(l)),e}function w_(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=g(t,["fileName"]);i!=null&&b(e,["fileName"],i);const s=g(t,["config"]);return s!=null&&x_(s,e),e}function S_(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["parent"]);i!=null&&b(e,["parent"],i);const s=g(t,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function N_(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function __(t){const e={},n=g(t,["config"]);return n!=null&&N_(n,e),e}function A_(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["fileSearchStores"],o)}return e}function C_(t,e){const n={},i=g(t,["mimeType"]);e!==void 0&&i!=null&&b(e,["mimeType"],i);const s=g(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const o=g(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),b(e,["customMetadata"],c)}const l=g(t,["chunkingConfig"]);return e!==void 0&&l!=null&&b(e,["chunkingConfig"],l),n}function T_(t){const e={},n=g(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=g(t,["config"]);return i!=null&&C_(i,e),e}function E_(t){const e={},n=g(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I_(t,e){const n={},i=g(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function k_(t){const e={},n=g(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=g(t,["config"]);return i!=null&&I_(i,e),e}function L_(t){const e={},n=g(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function R_(t,e){const n={},i=g(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const s=g(t,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),n}function M_(t){const e={},n=g(t,["parent"]);n!=null&&b(e,["_url","parent"],n);const i=g(t,["config"]);return i!=null&&R_(i,e),e}function j_(t){const e={},n=g(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=g(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const s=g(t,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),b(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D_ extends mo{constructor(e){super(),this.apiClient=e,this.list=async n=>new tu(fo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=L_(e);return o=ht("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=k_(e);s=ht("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=M_(e);return o=ht("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=j_(d),m=new hw;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P_ extends mo{constructor(e,n=new D_(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new tu(fo.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=m_(e);return o=ht("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=v_(e);return o=ht("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=y_(e);s=ht("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=__(e);return o=ht("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=A_(d),m=new pw;return Object.assign(m,h),m})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T_(e);return o=ht("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=E_(d),m=new mw;return Object.assign(m,h),m})}}async importFile(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=w_(e);return o=ht("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=b_(d),m=new vm;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U_(t,e){const n={},i=g(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function O_(t,e){const n={},i=g(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function B_(t,e,n){const i={};if(g(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&b(e,["displayName"],s),g(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=g(t,["epochCount"]);e!==void 0&&o!=null&&b(e,["tuningTask","hyperparameters","epochCount"],o);const l=g(t,["learningRateMultiplier"]);if(l!=null&&b(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=g(t,["batchSize"]);e!==void 0&&c!=null&&b(e,["tuningTask","hyperparameters","batchSize"],c);const d=g(t,["learningRate"]);if(e!==void 0&&d!=null&&b(e,["tuningTask","hyperparameters","learningRate"],d),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function F_(t,e,n){const i={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const v=g(t,["validationDataset"]);e!==void 0&&v!=null&&b(e,["supervisedTuningSpec"],j1(v))}else if(s==="PREFERENCE_TUNING"){const v=g(t,["validationDataset"]);e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec"],j1(v))}const o=g(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&b(e,["tunedModelDisplayName"],o);const l=g(t,["description"]);e!==void 0&&l!=null&&b(e,["description"],l);let c=g(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=g(t,["epochCount"]);e!==void 0&&v!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(c==="PREFERENCE_TUNING"){const v=g(t,["epochCount"]);e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let d=g(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const v=g(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(d==="PREFERENCE_TUNING"){const v=g(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let h=g(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const v=g(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(h==="PREFERENCE_TUNING"){const v=g(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let m=g(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const v=g(t,["adapterSize"]);e!==void 0&&v!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(m==="PREFERENCE_TUNING"){const v=g(t,["adapterSize"]);e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(g(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=g(t,["labels"]);e!==void 0&&x!=null&&b(e,["labels"],x);const w=g(t,["beta"]);return e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),i}function z_(t,e){const n={},i=g(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const s=g(t,["preTunedModel"]);s!=null&&b(n,["preTunedModel"],s);const o=g(t,["trainingDataset"]);o!=null&&Z_(o);const l=g(t,["config"]);return l!=null&&B_(l,n),n}function q_(t,e){const n={},i=g(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const s=g(t,["preTunedModel"]);s!=null&&b(n,["preTunedModel"],s);const o=g(t,["trainingDataset"]);o!=null&&Q_(o,n,e);const l=g(t,["config"]);return l!=null&&F_(l,n,e),n}function G_(t,e){const n={},i=g(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function H_(t,e){const n={},i=g(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function V_(t,e,n){const i={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&b(e,["_query","pageSize"],s);const o=g(t,["pageToken"]);e!==void 0&&o!=null&&b(e,["_query","pageToken"],o);const l=g(t,["filter"]);return e!==void 0&&l!=null&&b(e,["_query","filter"],l),i}function J_(t,e,n){const i={},s=g(t,["pageSize"]);e!==void 0&&s!=null&&b(e,["_query","pageSize"],s);const o=g(t,["pageToken"]);e!==void 0&&o!=null&&b(e,["_query","pageToken"],o);const l=g(t,["filter"]);return e!==void 0&&l!=null&&b(e,["_query","filter"],l),i}function Y_(t,e){const n={},i=g(t,["config"]);return i!=null&&V_(i,n),n}function W_(t,e){const n={},i=g(t,["config"]);return i!=null&&J_(i,n),n}function $_(t,e){const n={},i=g(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const s=g(t,["nextPageToken"]);s!=null&&b(n,["nextPageToken"],s);const o=g(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>av(c))),b(n,["tuningJobs"],l)}return n}function K_(t,e){const n={},i=g(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const s=g(t,["nextPageToken"]);s!=null&&b(n,["nextPageToken"],s);const o=g(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jp(c))),b(n,["tuningJobs"],l)}return n}function X_(t,e){const n={},i=g(t,["name"]);i!=null&&b(n,["model"],i);const s=g(t,["name"]);return s!=null&&b(n,["endpoint"],s),n}function Z_(t,e){const n={};if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=g(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(n,["examples","examples"],s)}return n}function Q_(t,e,n){const i={};let s=g(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=g(t,["gcsUri"]);e!==void 0&&l!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=g(t,["gcsUri"]);e!==void 0&&l!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=g(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=g(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=g(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(g(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function av(t,e){const n={},i=g(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const s=g(t,["name"]);s!=null&&b(n,["name"],s);const o=g(t,["state"]);o!=null&&b(n,["state"],Fy(o));const l=g(t,["createTime"]);l!=null&&b(n,["createTime"],l);const c=g(t,["tuningTask","startTime"]);c!=null&&b(n,["startTime"],c);const d=g(t,["tuningTask","completeTime"]);d!=null&&b(n,["endTime"],d);const h=g(t,["updateTime"]);h!=null&&b(n,["updateTime"],h);const m=g(t,["description"]);m!=null&&b(n,["description"],m);const x=g(t,["baseModel"]);x!=null&&b(n,["baseModel"],x);const w=g(t,["_self"]);return w!=null&&b(n,["tunedModel"],X_(w)),n}function jp(t,e){const n={},i=g(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const s=g(t,["name"]);s!=null&&b(n,["name"],s);const o=g(t,["state"]);o!=null&&b(n,["state"],Fy(o));const l=g(t,["createTime"]);l!=null&&b(n,["createTime"],l);const c=g(t,["startTime"]);c!=null&&b(n,["startTime"],c);const d=g(t,["endTime"]);d!=null&&b(n,["endTime"],d);const h=g(t,["updateTime"]);h!=null&&b(n,["updateTime"],h);const m=g(t,["error"]);m!=null&&b(n,["error"],m);const x=g(t,["description"]);x!=null&&b(n,["description"],x);const w=g(t,["baseModel"]);w!=null&&b(n,["baseModel"],w);const v=g(t,["tunedModel"]);v!=null&&b(n,["tunedModel"],v);const I=g(t,["preTunedModel"]);I!=null&&b(n,["preTunedModel"],I);const A=g(t,["supervisedTuningSpec"]);A!=null&&b(n,["supervisedTuningSpec"],A);const E=g(t,["preferenceOptimizationSpec"]);E!=null&&b(n,["preferenceOptimizationSpec"],E);const C=g(t,["tuningDataStats"]);C!=null&&b(n,["tuningDataStats"],C);const R=g(t,["encryptionSpec"]);R!=null&&b(n,["encryptionSpec"],R);const D=g(t,["partnerModelTuningSpec"]);D!=null&&b(n,["partnerModelTuningSpec"],D);const z=g(t,["customBaseModel"]);z!=null&&b(n,["customBaseModel"],z);const B=g(t,["experiment"]);B!=null&&b(n,["experiment"],B);const se=g(t,["labels"]);se!=null&&b(n,["labels"],se);const q=g(t,["outputUri"]);q!=null&&b(n,["outputUri"],q);const G=g(t,["pipelineJob"]);G!=null&&b(n,["pipelineJob"],G);const Q=g(t,["serviceAccount"]);Q!=null&&b(n,["serviceAccount"],Q);const ne=g(t,["tunedModelDisplayName"]);ne!=null&&b(n,["tunedModelDisplayName"],ne);const F=g(t,["veoTuningSpec"]);return F!=null&&b(n,["veoTuningSpec"],F),n}function eA(t,e){const n={},i=g(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const s=g(t,["name"]);s!=null&&b(n,["name"],s);const o=g(t,["metadata"]);o!=null&&b(n,["metadata"],o);const l=g(t,["done"]);l!=null&&b(n,["done"],l);const c=g(t,["error"]);return c!=null&&b(n,["error"],c),n}function j1(t,e){const n={},i=g(t,["gcsUri"]);i!=null&&b(n,["validationDatasetUri"],i);const s=g(t,["vertexDatasetResource"]);return s!=null&&b(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tA extends mo{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new tu(fo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:Tp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=H_(e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>jp(m))}else{const h=G_(e);return c=ht("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>av(m))}}async listInternal(e){var n,i,s,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=W_(e);return c=ht("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=K_(m),w=new h1;return Object.assign(w,x),w})}else{const h=Y_(e);return c=ht("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(x=>{const w=x;return w.sdkHttpResponse={headers:m.headers},w})),l.then(m=>{const x=$_(m),w=new h1;return Object.assign(w,x),w})}}async cancel(e){var n,i,s,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=O_(e);l=ht("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=U_(e);l=ht("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=q_(e,e);return o=ht("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>jp(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=z_(e);return o=ht("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>eA(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nA{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const rA=1024*1024*8,iA=3,aA=1e3,sA=2,If="x-goog-upload-status";async function oA(t,e,n){var i;const s=await sv(t,e,n),o=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[If])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function lA(t,e,n){var i;const s=await sv(t,e,n),o=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[If])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=jy(o),c=new xm;return Object.assign(c,l),c}async function sv(t,e,n){var i,s;let o=0,l=0,c=new Ep(new Response),d="upload";for(o=t.size;l<o;){const h=Math.min(rA,o-l),m=t.slice(l,l+h);l+h>=o&&(d+=", finalize");let x=0,w=aA;for(;x<iA&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[If]));)x++,await cA(w),w=w*sA;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[If])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function uA(t){return{size:t.size,type:t.type}}function cA(t){return new Promise(e=>setTimeout(e,t))}class dA{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oA(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lA(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fA{create(e,n,i){return new hA(e,n,i)}}class hA{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D1="x-goog-api-key";class pA{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(D1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(D1,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mA="gl-node/";class gA{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Jb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new pA(this.apiKey);this.apiClient=new LN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:mA+"web",uploader:new dA,downloader:new nA}),this.models=new KN(this.apiClient),this.live=new HN(this.apiClient,s,new fA),this.batches=new wS(this.apiClient),this.chats=new n3(this.models,this.apiClient),this.caches=new QS(this.apiClient),this.files=new f3(this.apiClient),this.operations=new XN(this.apiClient),this.authTokens=new h_(this.apiClient),this.tunings=new tA(this.apiClient),this.fileSearchStores=new P_(this.apiClient)}}var _t=(t=>(t.PROTAGONIST="Protagonist",t.ANTAGONIST="Antagonist",t.DEUTERAGONIST="Deuteragonist",t.MENTOR="Mentor",t.LOVE_INTEREST="Love Interest",t.FOIL="Foil",t.SUPPORTING_CHARACTER="Supporting Character",t.MINOR_CHARACTER="Minor Character",t))(_t||{}),zr=(t=>(t.CINEMATIC="Cinematic",t.ANIME="Anime",t.WATERCOLOR="Watercolor",t.OIL_PAINTING="Oil Painting",t.CYBERPUNK="Cyberpunk",t.NOIR="Noir",t.PIXEL_ART="Pixel Art",t.CONCEPT_ART="Concept Art",t))(zr||{}),xt=(t=>(t.CHAPTER="CHAPTER",t.RELATIONSHIP_WEB="RELATIONSHIP_WEB",t.PLOT_IDEAS="PLOT_IDEAS",t.TRANSITION="TRANSITION",t.SCENE_WRITER="SCENE_WRITER",t.MAP_GENERATOR="MAP_GENERATOR",t.REASSESS_FLOW="REASSESS_FLOW",t.DIALOGUE_GENERATOR="DIALOGUE_GENERATOR",t.OBJECT_GENERATOR="OBJECT_GENERATOR",t.SETTING_GENERATOR="SETTING_GENERATOR",t.OUTLINE_GENERATOR="OUTLINE_GENERATOR",t.MIDJOURNEY_PROMPTS="MIDJOURNEY_PROMPTS",t))(xt||{});console.log("Gemini Service Initializing. API Key present:",!0);const qn=new gA({apiKey:"AIzaSyBTraGGz-UTE9GUXzsJpQX2A5_ZEjgQ7Jw"}),Ci="gemini-2.0-flash-exp",yo="gemini-2.0-flash-exp",P1="gemini-2.5-flash-image",kf={[zr.CINEMATIC]:"Cinematic, photorealistic, 8k resolution, detailed texture, dramatic lighting, depth of field, movie still, wide dynamic range.",[zr.ANIME]:"Anime style, vibrant colors, clean lines, cel shaded, highly detailed, Studio Ghibli or Makoto Shinkai aesthetics.",[zr.WATERCOLOR]:"Watercolor painting, soft edges, artistic, painting on canvas, gentle brushstrokes, traditional media style.",[zr.OIL_PAINTING]:"Oil painting, textured brushwork, rich colors, classical art style, masterpiece, impasto details.",[zr.CYBERPUNK]:"Cyberpunk, neon lights, high tech low life, futuristic, distinct blue and pink lighting, gritty, detailed cityscape.",[zr.NOIR]:"Film noir, black and white, high contrast, dramatic shadows, moody, mystery, 1940s detective movie aesthetic.",[zr.PIXEL_ART]:"Pixel art, 16-bit or 32-bit style, retro game aesthetic, clean pixel lines.",[zr.CONCEPT_ART]:"Concept art, digital painting, highly detailed, polished, artstation trending, illustration."};async function vc(t,e="16:9"){var o,l,c;let n=`${t} Aspect ratio: ${e}.`;console.log(`[GeminiService] Generating image with model: ${P1}`);const i=3;let s;for(let d=1;d<=i;d++)try{d>1&&(console.log(`[GeminiService] Retry attempt ${d}/${i} for image generation...`),n+=`

STRICT REQUIREMENT: Output raw image data. Do not provide a text description.`);const h=await qn.models.generateContent({model:P1,contents:n}),m=(o=h.candidates)==null?void 0:o[0],x=(c=(l=m==null?void 0:m.content)==null?void 0:l.parts)==null?void 0:c[0];if((m==null?void 0:m.finishReason)!=="STOP"&&console.warn(`[GeminiService] Image generation finishReason: ${m==null?void 0:m.finishReason}`),m!=null&&m.safetyRatings){const w=m.safetyRatings.filter(v=>v.probability!=="NEGLIGIBLE");w.length>0&&console.warn("[GeminiService] Non-negligible safety ratings:",JSON.stringify(w,null,2))}if(x&&"inlineData"in x&&x.inlineData&&x.inlineData.data)return`data:${x.inlineData.mimeType};base64,${x.inlineData.data}`;if(x&&"text"in x&&x.text){if(console.warn(`[GeminiService] Attempt ${d} failed: Received text instead of image: "${x.text.substring(0,50)}..."`),d===i)throw new Error(`Gemini refused to generate image (after ${i} attempts): ${x.text}`);continue}throw console.error("[GeminiService] Image generation response missing inlineData:",JSON.stringify(h,null,2)),new Error(`No image data returned from Gemini. Reason: ${(m==null?void 0:m.finishReason)||"Unknown"}`)}catch(h){if(console.error(`[GeminiService] Attempt ${d} error:`,h),s=h,d===i)break}throw s||new Error("Failed to generate image after multiple attempts.")}const ov=async t=>({inlineData:{data:await new Promise(n=>{const i=new FileReader;i.onloadend=()=>{const s=i.result;n(s.split(",")[1])},i.readAsDataURL(t)}),mimeType:t.type}}),es=t=>{if(!t)return"{}";let e=t.trim();return e.startsWith("```json")?e=e.replace(/^```json\s*/,"").replace(/\s*```$/,""):e.startsWith("```")&&(e=e.replace(/^```\s*/,"").replace(/\s*```$/,"")),e};async function yA(t,e,n,i,s){const o=`Create a detailed character profile.
    Name: ${t}
    Type: ${e}
    Initial Info: ${n}
    Traits: ${i}
    Backstory: ${s}

    Return JSON with "history" (detailed backstory, 2 paragraphs) and "arc" (character growth/journey).`,l=await qn.models.generateContent({model:Ci,contents:o,config:{responseMimeType:"application/json",responseSchema:{type:Ka.OBJECT,properties:{history:{type:Ka.STRING},arc:{type:Ka.STRING}}}}});return JSON.parse(es(l.text||'{"history": "", "arc": ""}'))}async function vA(t,e){const n=`Analyze the provided story text.
    Premise: ${t}
    Text: ${e}

    Identify all characters and scenes.
    
    Return a JSON object with the following structure:
    {
      "characters": [
        {
          "name": "string",
          "type": "Protagonist" | "Antagonist" | "Deuteragonist" | "Mentor" | "Love Interest" | "Foil" | "Supporting Character" | "Minor Character",
          "description": "string (visuals and role)",
          "traits": "string (comma separated)",
          "history": "string (detailed backstory inferred from text)",
          "arc": "string (character journey/development inferred from text)"
        }
      ],
      "scenes": [
        {
          "title": "string",
          "summary": "string",
          "fullText": "string (the actual text of the scene if explicitly present, otherwise empty)",
          "characters_present": ["string (names)"]
        }
      ]
    }`,i=await qn.models.generateContent({model:Ci,contents:n,config:{responseMimeType:"application/json"}});return JSON.parse(es(i.text||'{"characters": [], "scenes": []}'))}async function xA(t,e,n,i){const s=`Write the next chapter.
    Premise: ${t}
    Context (Last 2000 chars): ${e.slice(-2e3)}
    Characters: ${n.map(l=>l.name).join(", ")}
    Recent Scenes: ${i.slice(-3).map(l=>l.title).join(", ")}
    
    Write a compelling chapter.`;return(await qn.models.generateContent({model:Ci,contents:s})).text||""}async function bA(t){const e=`Analyze relationships between these characters: ${t.map(i=>i.name).join(", ")}.
    Return JSON:
    {
        "nodes": [{"id": "...", "name": "...", "type": "..."}],
        "links": [{"source": "id", "target": "id", "dynamic": "short description", "strength": "Strong" | "Developing" | "Weak"}]
    }
    Use the character names to map to provided IDs if possible, otherwise use names as IDs.`,n=await qn.models.generateContent({model:yo,contents:e,config:{responseMimeType:"application/json"}});return JSON.parse(es(n.text||'{"nodes": [], "links": []}'))}async function wA(t,e,n){console.log("generatePlotIdeas called"),console.log("Premise:",t),console.log("API Key available:",!0);const i=`Brainstorm plot ideas/twists.
    Premise: ${t}
    Characters: ${n.map(s=>s.name).join(", ")}
    
    List 5 creative plot ideas.`;try{const s=await qn.models.generateContent({model:Ci,contents:i});return console.log("generatePlotIdeas success",s),s.text||""}catch(s){console.error("generatePlotIdeas FAILED:",s),s.response&&console.error("Error response:",s.response),console.error("Error message:",s.message);try{return console.log("Retrying with Flash model..."),(await qn.models.generateContent({model:yo,contents:i})).text||""}catch(o){throw console.error("Retry failed:",o),s}}}async function SA(t){const e=`Write a smooth narrative transition between scene "${t[0].title}" and "${t[1].title}".`;return(await qn.models.generateContent({model:yo,contents:e})).text||""}async function NA(t){const e=`Generate a world map structure based on this content: ${t}.
    Return JSON:
    {
        "worldDescription": "string",
        "locations": [{"id": "loc_1", "name": "...", "description": "...", "x": 20, "y": 50}] 
    }
    x and y should be between 0 and 100.`,n=await qn.models.generateContent({model:yo,contents:e,config:{responseMimeType:"application/json"}});return JSON.parse(es(n.text||"{}"))}async function _A(t,e){const n=`Analyze the narrative flow.
    Premise: ${t}
    Scene Sequence: ${e.map(s=>s.title).join(" -> ")}
    
    Identify pacing issues, plot holes, or structural improvements.`;return(await qn.models.generateContent({model:Ci,contents:n})).text||""}async function AA(t,e){const n=`Write a dialogue scene between ${t.name} (${t.traits}) and ${e.name} (${e.traits}).`;return(await qn.models.generateContent({model:Ci,contents:n})).text||""}async function CA(t){const e=`Invent a key object/artifact for the story: ${t}.
    Return JSON: { "name": "...", "appearance": "...", "history": "...", "significance": "..." }`,n=await qn.models.generateContent({model:yo,contents:e,config:{responseMimeType:"application/json"}});return JSON.parse(es(n.text||"{}"))}async function TA(t,e){const n=`Describe the setting.
    Premise: ${t}
    ${e?`Scene: ${e.title}
Summary: ${e.summary}`:""}
    
    Provide a rich, sensory description (sight, sound, smell).`;return(await qn.models.generateContent({model:Ci,contents:n})).text||""}async function EA(t,e,n){const i=`Create a detailed story outline.
    Premise: ${t}
    Characters: ${e.map(o=>o.name).join(", ")}
    Ideas: ${n||"None"}
    
    Return JSON array of objects: { "act": "Act I", "title": "...", "summary": "..." }`,s=await qn.models.generateContent({model:Ci,contents:i,config:{responseMimeType:"application/json"}});return JSON.parse(es(s.text||"[]"))}async function IA(t,e){let n=`SCENE SETTING:
${t.settingDescription||t.summary}

CHARACTERS PRESENT:
`;e.forEach(o=>{let l=`Name: ${o.name}
`;if(o.visualStats?(l+=`Body: ${o.visualStats.height}, ${o.visualStats.build}, ${o.visualStats.distinguishingFeatures}.
`,l+=`Face: ${o.visualStats.hairColor} hair, ${o.visualStats.eyeColor} eyes.
`):l+=`Appearance: ${o.initialInfo}
`,o.outfits&&o.outfits.length>0){const c=o.outfits.find(d=>d.id===o.activeOutfitId)||o.outfits[0];l+=`Wearing: ${c.description}
`}else l+=`Wearing: Appropriate attire for role (${o.type}).
`;n+=`${l}--
`});const i=`Create 4 detailed Midjourney image generation prompts for the following scene.

    CONTEXT:
    Scene Title: "${t.title}"
    Action Summary: ${t.summary}
    
    VISUAL DETAILS:
    ${n}
    
    IMPORTANT INSTRUCTIONS:
    1. Do NOT use character names in the prompts. Replace names with their physical descriptions (e.g., instead of "John", say "a tall muscular man with a scar wearing battle armor").
    2. Include details about the background, lighting, and camera angle.
    3. Ensure the characters described match the provided visual stats and outfits.
    4. Provide a list of prompts: Wide Shot, Medium Shot, Close Up, and Action Shot.`;return(await qn.models.generateContent({model:Ci,contents:i})).text||""}async function kA(t,e){return(await qn.models.generateContent({model:Ci,contents:`Context:
${e}

Instruction:
${t}`})).text||""}async function LA(t,e,n=zr.CINEMATIC){const i=kf[n]||kf[zr.CINEMATIC],s=`Generate a cinematic image for the scene: "${t.title}".
    Summary: ${t.summary}
    Setting: ${t.settingDescription||"Appropriate to the story"}
    
    Characters present:
    ${e.map(o=>`${o.name}: ${o.visualStats?`${o.visualStats.build}, ${o.visualStats.hairColor} hair`:o.initialInfo}`).join(`
`)}
    
    Style: ${i}`;return await vc(s,"16:9")}async function RA(t,e=zr.CONCEPT_ART){const n=kf[e]||kf[zr.CONCEPT_ART],i=`Generate a full body character portrait.
    Name: ${t.name}
    Type: ${t.type}
    Appearance: ${t.visualStats?`Height: ${t.visualStats.height}, Build: ${t.visualStats.build}, Hair: ${t.visualStats.hairColor}, Eyes: ${t.visualStats.eyeColor}, Features: ${t.visualStats.distinguishingFeatures}`:t.initialInfo}
    Outfit: ${t.outfits&&t.outfits.length>0?t.outfits[0].description:"Standard attire"}
    
    Style: ${n}, neutral background.`,s=e===zr.PIXEL_ART?"1:1":"3:4";return await vc(i,s)}async function MA(t,e,n){let i=[{text:n}];return t?i=[await ov(t),{text:n}]:e&&(i=[{text:`${n}

Context Video URL: ${e}`}]),(await qn.models.generateContent({model:Ci,contents:{parts:i}})).text||""}async function jA(t){const e=`Convert these plot ideas into a chronological timeline.
    Ideas: ${t}
    Return JSON array: [{ "title": "...", "summary": "..." }]`,n=await qn.models.generateContent({model:yo,contents:e,config:{responseMimeType:"application/json"}});return JSON.parse(es(n.text||"[]"))}async function DA(t,e,n,i){const s=`Write the full prose for scene "${n.title}".
    Premise: ${t}
    Previous Context: ${e}
    Scene Summary: ${n.summary}
    Characters: ${i.map(l=>l.name).join(", ")}
    
    Write engaging, formatted story text.`;return(await qn.models.generateContent({model:Ci,contents:s})).text||""}async function PA(t){const e=`Describe the setting for scene "${t.title}".
    Summary: ${t.summary}
    
    Focus on atmosphere, lighting, and sensory details.`;return(await qn.models.generateContent({model:Ci,contents:e})).text||""}async function UA(t,e){const n=`Write a screenplay script for scene "${t.title}".
    Summary: ${t.summary}
    Characters: ${e.map(s=>s.name).join(", ")}
    
    Use standard screenplay format (Scene Heading, Action, Character, Dialogue).`;return(await qn.models.generateContent({model:Ci,contents:n})).text||""}async function OA(t,e,n){const{stylize:i=100,aspectRatio:s="16:9",version:o="6"}={},l=`Create a storyboard shot list for "${t.title}".
    Script/Summary: ${t.script||t.summary}
    
    Return JSON array of objects: 
    { "id": "shot_1", "shotType": "Wide/Close-up/etc", "visualDescription": "...", "midjourneyPrompt": "..." }
    
    IMPORTANT: For the "midjourneyPrompt" field, ensure you append the following parameters to the end of the prompt string: --stylize ${i} --ar ${s} --v ${o}`,c=await qn.models.generateContent({model:yo,contents:l,config:{responseMimeType:"application/json"}});return JSON.parse(es(c.text||"[]"))}async function BA(t){const e=`Create a loose storyboard sketch for: ${t}.
    Style: Black and white, rough sketch, pencil or ink style, storyboard aesthetic.`;return await vc(e,"16:9")}async function Dp(t,e="PHYSICAL_TRAITS"){const n=await ov(t);let i="";e==="PHYSICAL_TRAITS"?i=`Analyze this character image. Describe their physical appearance (height, build, hair, eyes, features) to be used in a visual prompt. Also infer personality traits.
        Return JSON: { "description": "string (physical stats)", "traits": "string" }`:i=`Analyze the outfit in this image. Describe it in detail (materials, colors, style) so it can be recreated in a Midjourney prompt.
        Return JSON: { "description": "string (outfit details)", "traits": "string (style/vibe)" }`;const s=await qn.models.generateContent({model:yo,contents:{parts:[n,{text:i}]},config:{responseMimeType:"application/json"}});return JSON.parse(es(s.text||"{}"))}async function FA(t,e,n,i,s,o){const l=e===10?"This is the last page. End with a cliffhanger.":e===1?"Establish the setting and the hero.":"Advance the plot with conflict.",c=`You are writing a comic book script based on a story.
    STORY CONTEXT: ${o}
    
    PAGE ${e}. GENRE: ${n}.
    CHARACTERS:
    - ACTIVE: ${i.join(", ")}
    - VILLAIN: ${s}
    
    PREVIOUS PANELS: ${t}
    
    INSTRUCTION: ${l}
    
    OUTPUT STRICT JSON:
    {
      "caption": "Narrator text...",
      "dialogue": "Character speech...",
      "scene": "Visual description mentioning HERO or VILLAIN for image generation",
      "focus_char": "hero" | "co-star" | "villain" | "other",
      "hero_emotion": "Angry",
      "costar_emotion": "Scared",
      "villain_emotion": "Smug"
    }`,d=await qn.models.generateContent({model:Ci,contents:c,config:{responseMimeType:"application/json"}});return JSON.parse(es(d.text||"{}"))}async function zA(t,e,n,i,s){const o=`Comic book panel, ${e} style.
    Scene: ${t.scene}
    
    Characters:
    Hero: ${n.name} (${n.description}) - Emotion: ${t.hero_emotion}
    ${i?`Co-star: ${i.name} (${i.description}) - Emotion: ${t.costar_emotion}`:""}
    ${s?`Villain: ${s.name} (${s.description}) - Emotion: ${t.villain_emotion}`:""}
    
    Focus: ${t.focus_char}
    
    Style: ${e} comic book art, vibrant colors, dynamic composition.`;return await vc(o,"2:3")}async function qA(t,e){const n=`Create a villain for a ${e} comic who opposes a hero described as: "${t}".
    Return JSON: { "name": "...", "desc": "Visual description..." }`,i=await qn.models.generateContent({model:yo,contents:n,config:{responseMimeType:"application/json"}}),s=JSON.parse(es(i.text||"{}"));let o="";try{const l=`Comic book villain portrait.
        Name: ${s.name}
        Description: ${s.desc}
        Genre: ${e}
        Style: ${e} comic book art, close up character portrait.`;o=await vc(l,"1:1")}catch(l){console.error("Failed to generate villain image",l)}return{...s,image:o}}async function GA(t){const e=`Visual representation of a story item/artifact.
    Name: ${t.name}
    Description: ${t.appearance}
    History: ${t.history}
    Style: Concept art, detailed, high quality, fantasy/sci-fi aesthetic appropriate for the item.
    Object isolated on simple background.`;return await vc(e,"1:1")}const Pp=({title:t,children:e,defaultCollapsed:n=!1})=>{const[i,s]=ue.useState(n);return f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>s(!i),className:"flex items-center w-full text-left text-sm font-semibold text-brand-text-muted hover:text-white transition","aria-expanded":!i,children:[i?f.jsx(Xl,{className:"w-4 h-4 mr-1"}):f.jsx(Of,{className:"w-4 h-4 mr-1"}),t]}),!i&&f.jsx("div",{className:"pl-5 border-l border-brand-primary ml-2",children:e})]})},pp=[{name:"The Beginning",keywords:["begin","start","introduce","ordinary world","inciting incident","status quo"],color:"from-sky-400 to-blue-500"},{name:"Rising Action",keywords:["struggle","challenge","conflict","rising stakes","faces","learns","trials"],color:"from-yellow-400 to-orange-500"},{name:"The Climax",keywords:["climax","confrontation","peak","turning point","overcomes","battle","choice"],color:"from-red-500 to-rose-600"},{name:"Falling Action",keywords:["aftermath","consequences","fallout","resolves","return"],color:"from-orange-400 to-amber-500"},{name:"Resolution",keywords:["resolution","end","new beginning","changes","lesson","changed"],color:"from-emerald-400 to-green-600"}],HA=({arcText:t})=>{const e=ue.useMemo(()=>{const n=t.toLowerCase(),i=new Set;return pp.forEach(s=>{s.keywords.some(o=>n.includes(o))&&i.add(s.name)}),i},[t]);return e.size===0?f.jsx("div",{className:"mt-2 text-xs text-brand-text-muted italic bg-brand-bg/50 p-2 rounded-md border border-white/5",children:`Add more detail to the character's arc (e.g., mention their "struggle," "climax," or "resolution") to visualize their journey.`}):f.jsxs("div",{className:"mt-4 space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Journey Arc"}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute top-2.5 left-0 right-0 h-0.5 bg-white/10 rounded-full -z-10"}),f.jsx("div",{className:"flex justify-between items-start",children:pp.map((n,i)=>{const s=e.has(n.name);return f.jsxs("div",{className:"flex flex-col items-center group w-1/5",children:[f.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-500 shadow-lg ${s?`border-transparent bg-gradient-to-br ${n.color} scale-110`:"border-white/20 bg-brand-bg"}`,children:s&&f.jsx(ul,{className:"w-3 h-3 text-white"})}),f.jsx("span",{className:`text-[10px] mt-2 text-center transition-colors duration-300 px-1 ${s?"font-bold text-brand-text":"text-brand-text-muted/50"}`,children:n.name}),s&&f.jsx("div",{className:`absolute top-3 left-0 h-0.5 -z-10 bg-gradient-to-r ${n.color} opacity-50`,style:{width:`${i/(pp.length-1)*100}%`}})]},n.name)})})]})]})},VA=t=>{switch(t){case _t.PROTAGONIST:return"#fbbF24";case _t.ANTAGONIST:return"#f87171";case _t.DEUTERAGONIST:return"#6ee7b7";case _t.MENTOR:return"#60a5fa";case _t.LOVE_INTEREST:return"#f472b6";case _t.FOIL:return"#c084fc";default:return"#9ca3af"}},JA=(t,e)=>{const n={className:"w-5 h-5",style:{color:e}};switch(t){case _t.PROTAGONIST:return f.jsx(um,{...n,title:"Protagonist"});case _t.ANTAGONIST:return f.jsx(cm,{...n,title:"Antagonist"});case _t.DEUTERAGONIST:return f.jsx(cc,{...n,title:"Deuteragonist"});case _t.SUPPORTING_CHARACTER:return f.jsx(cc,{...n,title:"Supporting Character"});case _t.MENTOR:return f.jsx(fm,{...n,title:"Mentor"});case _t.LOVE_INTEREST:return f.jsx(dm,{...n,title:"Love Interest"});case _t.FOIL:return f.jsx(_y,{...n,title:"Foil"});case _t.MINOR_CHARACTER:return f.jsx(pc,{...n,title:"Minor Character"});default:return null}},lv=({character:t,isSelected:e,onToggleSelect:n,onDelete:i,onUpdate:s,onExport:o,onGenerateImage:l,onOpenVisuals:c,onOpenSplitView:d})=>{const[h,m]=ue.useState(!1),[x,w]=ue.useState(!1),[v,I]=ue.useState(t.history),[A,E]=ue.useState(t.arc),[C,R]=ue.useState(t.type),D=VA(t.type),z=JA(t.type,D),B=()=>{x&&(I(t.history),E(t.arc),R(t.type)),w(!x),x||m(!0)},se=()=>{s(t.id,{history:v,arc:A,type:C}),w(!1)};return f.jsxs("div",{className:`glass-card rounded-xl transition-all duration-300 shadow-lg border ${e?"border-brand-secondary ring-2 ring-brand-secondary/30":"border-white/5 hover:border-white/10"} overflow-hidden`,children:[t.headerImage&&f.jsx("div",{className:"h-24 bg-cover bg-center",style:{backgroundImage:`url(${t.headerImage})`}}),f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-grow min-w-0 cursor-pointer",onClick:n,children:[e?f.jsx(ul,{className:"w-5 h-5 text-brand-secondary flex-shrink-0"}):f.jsx("div",{className:"w-5 h-5 rounded-full border border-brand-text-muted/50 flex-shrink-0"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[z,f.jsx("h3",{className:"font-bold text-brand-text text-lg truncate",children:t.name})]}),f.jsxs("p",{className:"text-xs text-brand-text-muted flex items-center gap-1",children:[t.type,f.jsx("span",{className:"w-1 h-1 rounded-full bg-brand-text-muted/50 mx-1"}),t.traits]})]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[x?f.jsx("button",{onClick:se,className:"p-1.5 bg-brand-secondary/20 text-brand-secondary rounded-lg hover:bg-brand-secondary hover:text-white transition mr-1",children:f.jsx(hc,{className:"w-4 h-4"})}):f.jsx("button",{onClick:B,className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/5 rounded-lg",children:f.jsx(vd,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>m(!h),className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/5 rounded-lg",children:h?f.jsx(om,{className:"w-4 h-4"}):f.jsx(Of,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{className:`mt-3 pt-3 border-t border-white/10 space-y-4 transition-all duration-300 ${h?"block":"hidden"}`,children:[f.jsx("div",{children:f.jsx(Pp,{title:"History & Backstory",defaultCollapsed:!1,children:x?f.jsx("textarea",{value:v,onChange:q=>I(q.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg p-2 text-sm mt-2 min-h-[100px]"}):f.jsx("p",{className:"text-sm text-brand-text-muted font-serif leading-relaxed mt-2 whitespace-pre-wrap",children:t.history})})}),f.jsx("div",{children:f.jsx(Pp,{title:"Character Arc",defaultCollapsed:!1,children:x?f.jsx("textarea",{value:A,onChange:q=>E(q.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg p-2 text-sm mt-2 min-h-[80px]"}):f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"text-sm text-brand-text-muted font-serif leading-relaxed mt-2 whitespace-pre-wrap",children:t.arc}),f.jsx(HA,{arcText:t.arc})]})})}),x&&f.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/30",children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Change Archetype"}),f.jsx("select",{value:C,onChange:q=>R(q.target.value),className:"w-full bg-brand-bg border border-brand-primary/50 rounded px-2 py-1 text-sm",children:Object.values(_t).map(q=>f.jsx("option",{value:q,children:q},q))})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-white/5",children:[c&&f.jsx("button",{onClick:()=>c(t),className:"p-1.5 text-sky-400 hover:text-sky-300 transition hover:bg-sky-900/20 rounded-lg flex items-center gap-1",title:"Edit Visuals & Outfits",children:f.jsx(Ry,{className:"w-4 h-4"})}),d&&f.jsx("button",{onClick:d,className:"p-1.5 text-brand-secondary hover:text-white transition hover:bg-brand-secondary/20 rounded-lg",title:"Open in Split View",children:f.jsx(Zl,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>l(t),className:"p-1.5 text-purple-400 hover:text-purple-300 transition hover:bg-purple-900/20 rounded-lg",title:"Generate Portrait",children:f.jsx(ha,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>o(t.id),className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/10 rounded-lg",title:"Export Character",children:f.jsx(po,{className:"w-4 h-4"})}),f.jsx("button",{onClick:i,className:"p-1.5 text-red-400 hover:text-red-300 transition hover:bg-red-900/20 rounded-lg",title:"Delete Character",children:f.jsx(eu,{className:"w-4 h-4"})})]})]})]})]})},Lf=({isOpen:t,onClose:e,title:n,children:i,maxWidth:s="2xl",showCloseButton:o=!0})=>{const l=ue.useRef(null);if(ue.useEffect(()=>{const d=h=>{h.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[t,e]),!t)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl",full:"max-w-full m-4"}[s];return gb.createPortal(f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:f.jsxs("div",{className:`glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full ${c} max-h-[90vh] flex flex-col border border-white/10 animate-in zoom-in-95 duration-200`,onClick:d=>d.stopPropagation(),ref:l,children:[(n||o)&&f.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10 shrink-0",children:[n?f.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-brand-secondary font-serif flex items-center gap-2 truncate pr-4",children:n}):f.jsx("div",{}),o&&f.jsx("button",{onClick:e,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5","aria-label":"Close modal",children:f.jsx(hl,{className:"w-6 h-6"})})]}),i]})}),document.body)},YA=({scene:t,allCharacters:e,allItems:n,onSave:i,onClose:s})=>{const[o,l]=ue.useState("details"),[c,d]=ue.useState(t.title),[h,m]=ue.useState(t.summary),[x,w]=ue.useState(t.fullText),[v,I]=ue.useState(t.characterIds||[]),[A,E]=ue.useState(t.itemIds||[]),[C,R]=ue.useState(t.settingDescription||""),[D,z]=ue.useState(t.script||""),B=()=>{i(t.id,{title:c,summary:h,fullText:x,characterIds:v,itemIds:A,settingDescription:C,script:D})},se=G=>{I(Q=>Q.includes(G)?Q.filter(ne=>ne!==G):[...Q,G])},q=G=>{E(Q=>Q.includes(G)?Q.filter(ne=>ne!==G):[...Q,G])};return f.jsxs(Lf,{isOpen:!0,onClose:s,title:`Edit Scene: ${c}`,maxWidth:"4xl",children:[f.jsxs("div",{className:"flex items-center border-b border-white/10 px-5 bg-brand-bg/30 shrink-0",children:[f.jsx("button",{onClick:()=>l("details"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${o==="details"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ms,{className:"w-4 h-4"})," Details & Draft"]})}),f.jsx("button",{onClick:()=>l("setting"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${o==="setting"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ol,{className:"w-4 h-4"})," Setting"]})}),f.jsx("button",{onClick:()=>l("script"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${o==="script"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fd,{className:"w-4 h-4"})," Screenplay"]})})]}),f.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[o==="details"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Scene Title"}),f.jsx("input",{type:"text",value:c,onChange:G=>d(G.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"Enter scene title..."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"md:col-span-2 flex flex-col",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Summary"}),f.jsx("textarea",{value:h,onChange:G=>m(G.target.value),rows:6,className:"w-full flex-grow bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",placeholder:"Brief summary of what happens..."})]}),f.jsxs("div",{className:"md:col-span-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted uppercase tracking-wider",children:"Characters"}),f.jsxs("span",{className:"text-xs text-brand-text-muted",children:[v.length," Active"]})]}),f.jsx("div",{className:"bg-brand-bg/30 rounded-xl p-2 h-[168px] overflow-y-auto border border-brand-primary/30 custom-scrollbar",children:e.length>0?e.map(G=>f.jsx("div",{onClick:()=>se(G.id),className:`flex items-center justify-between p-2 mb-1 rounded-lg cursor-pointer transition-all duration-200 ${v.includes(G.id)?"bg-brand-secondary/20 border border-brand-secondary/40":"hover:bg-brand-primary/30 border border-transparent"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border ${v.includes(G.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:v.includes(G.id)&&f.jsx(ul,{className:"w-3 h-3 text-white"})}),f.jsx("span",{className:`text-sm font-medium ${v.includes(G.id)?"text-white":"text-brand-text-muted"}`,children:G.name})]})},G.id)):f.jsx("p",{className:"text-xs text-brand-text-muted italic p-2",children:"No characters created yet."})}),f.jsxs("div",{className:"flex justify-between items-center mb-2 mt-4",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted uppercase tracking-wider",children:"Items"}),f.jsxs("span",{className:"text-xs text-brand-text-muted",children:[A.length," Linked"]})]}),f.jsx("div",{className:"bg-brand-bg/30 rounded-xl p-2 h-[168px] overflow-y-auto border border-brand-primary/30 custom-scrollbar",children:n.length>0?n.map(G=>f.jsx("div",{onClick:()=>q(G.id),className:`flex items-center justify-between p-2 mb-1 rounded-lg cursor-pointer transition-all duration-200 ${A.includes(G.id)?"bg-brand-secondary/20 border border-brand-secondary/40":"hover:bg-brand-primary/30 border border-transparent"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border ${A.includes(G.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:A.includes(G.id)&&f.jsx(ul,{className:"w-3 h-3 text-white"})}),f.jsx("span",{className:`text-sm font-medium ${A.includes(G.id)?"text-white":"text-brand-text-muted"}`,children:G.name})]})},G.id)):f.jsx("p",{className:"text-xs text-brand-text-muted italic p-2",children:"No items created yet."})})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Full Scene Draft (Prose)"}),f.jsx("textarea",{value:x,onChange:G=>w(G.target.value),rows:12,className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"Write the full scene prose here..."})]})]}),o==="setting"&&f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Setting Description"}),f.jsx("p",{className:"text-xs text-brand-text-muted mb-4",children:"Describe the location, atmosphere, lighting, and sensory details for this specific scene."}),f.jsx("textarea",{value:C,onChange:G=>R(G.target.value),className:"w-full flex-grow min-h-[400px] bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"The room was dim, smelling of ozone and stale coffee..."})]}),o==="script"&&f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Screenplay Format"}),f.jsx("p",{className:"text-xs text-brand-text-muted mb-4",children:"Auto-generated or manually written script format (Scene Heading, Action, Dialogue)."}),f.jsx("textarea",{value:D,onChange:G=>z(G.target.value),className:"w-full flex-grow min-h-[400px] bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-mono focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition leading-relaxed whitespace-pre-wrap",placeholder:"EXT. CITY STREET - NIGHT..."})]})]}),f.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl shrink-0",children:[f.jsx("button",{onClick:s,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition font-medium border border-transparent hover:border-white/5",children:"Cancel"}),f.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:[f.jsx(hc,{className:"w-5 h-5"}),"Save Changes"]})]})]})},Am=({scene:t,isSelected:e,onToggleSelect:n,onUpdate:i,onDelete:s,onExport:o,allCharacters:l,allItems:c,isLoading:d,onGenerateDetails:h,onGenerateImage:m,onOpenStoryboard:x,isFirst:w,isLast:v,layout:I="grid",onMove:A,onOpenSplitView:E})=>{const[C,R]=ue.useState(!1),[D,z]=ue.useState(!1),[B,se]=ue.useState(!1),q=()=>{z(!0)},G=(j,W)=>{i(j,W),z(!1)},Q=l.filter(j=>{var W;return(W=t.characterIds)==null?void 0:W.includes(j.id)}),ne=t.characterIds&&t.characterIds.length>0,F=t.isTransition;return f.jsxs(f.Fragment,{children:[D&&f.jsx(YA,{scene:t,allCharacters:l,allItems:c,onSave:G,onClose:()=>z(!1)}),f.jsxs("div",{className:`glass-card rounded-lg shadow-sm h-full flex flex-col transition-all duration-300 overflow-hidden border ${e?"border-brand-secondary ring-1 ring-brand-secondary/30":F?"border-teal-500/30 bg-teal-900/5":"border-white/5 hover:border-white/10 hover:shadow-md"}`,children:[t.headerImage&&f.jsx("div",{className:"h-20 bg-cover bg-center opacity-90 bg-[image:var(--bg-image)]",style:{"--bg-image":`url(${t.headerImage})`}}),f.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[f.jsx("div",{className:"cursor-grab active:cursor-grabbing text-brand-text-muted hover:text-brand-text p-1 -ml-1",children:f.jsx(Tb,{className:"w-4 h-4"})}),f.jsx("input",{type:"checkbox",checked:e,onChange:n,"aria-label":"Select Scene",className:"h-4 w-4 rounded bg-brand-surface/50 border-brand-text-muted text-brand-secondary focus:ring-brand-secondary cursor-pointer flex-shrink-0"}),f.jsxs("div",{className:"flex-grow cursor-pointer group min-w-0",onClick:()=>R(!C),children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[F&&f.jsx(Cy,{className:"w-3 h-3 text-teal-400 flex-shrink-0"}),f.jsx("h3",{className:`font-bold truncate text-sm leading-tight ${F?"text-teal-300":"text-brand-text group-hover:text-brand-secondary transition"}`,children:t.title})]}),f.jsxs("div",{className:"flex gap-1 mt-1",children:[t.script&&f.jsx("span",{title:"Script Ready",className:"bg-green-900/30 text-green-400 p-0.5 rounded",children:f.jsx(fd,{className:"w-2.5 h-2.5"})}),t.settingDescription&&f.jsx("span",{title:"Setting Ready",className:"bg-blue-900/30 text-blue-400 p-0.5 rounded",children:f.jsx(ol,{className:"w-2.5 h-2.5"})}),t.storyboard&&t.storyboard.length>0&&f.jsx("span",{title:"Storyboard Ready",className:"bg-purple-900/30 text-purple-400 p-0.5 rounded",children:f.jsx(Zl,{className:"w-2.5 h-2.5"})})]})]})]}),f.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(I==="vertical"||I==="horizontal")&&A&&f.jsxs("div",{className:"flex items-center text-brand-text-muted opacity-50 hover:opacity-100 mr-1",children:[f.jsx("button",{onClick:()=>A(I==="vertical"?"up":"left"),disabled:w,className:"p-0.5 disabled:opacity-20 hover:text-brand-text",title:I==="vertical"?"Move Up":"Move Left","aria-label":I==="vertical"?"Move Up":"Move Left",children:f.jsx(Ey,{className:"w-3 h-3"})}),f.jsx("button",{onClick:()=>A(I==="vertical"?"down":"right"),disabled:v,className:"p-0.5 disabled:opacity-20 hover:text-brand-text",title:I==="vertical"?"Move Down":"Move Right","aria-label":I==="vertical"?"Move Down":"Move Right",children:f.jsx(mm,{className:"w-3 h-3"})})]}),x&&f.jsx("button",{onClick:()=>x(t),title:"Open Storyboard",className:"text-brand-text-muted hover:text-purple-400 transition p-1 rounded hover:bg-purple-900/20",children:f.jsx(tc,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:q,title:"Edit Details",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:f.jsx(vd,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>R(!C),title:C?"Collapse":"Expand",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:C?f.jsx(om,{className:"w-3.5 h-3.5"}):f.jsx(Of,{className:"w-3.5 h-3.5"})})]})]}),f.jsx("div",{className:`mt-2 pt-2 border-t border-white/5 space-y-2 text-xs text-brand-text flex-grow ${C?"block":"hidden"}`,children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"group",children:[f.jsx("p",{className:`whitespace-pre-wrap font-serif text-brand-text-muted transition-all ${B?"":"line-clamp-3"}`,children:t.summary}),t.summary.length>100&&f.jsx("button",{onClick:j=>{j.stopPropagation(),se(!B)},className:"mt-1 text-[10px] font-bold text-brand-secondary/80 hover:text-brand-secondary flex items-center gap-1 transition-colors",children:B?"Less":"More"})]}),!F&&f.jsxs(f.Fragment,{children:[t.fullText&&f.jsxs("div",{className:"pt-1 border-t border-white/5",children:[f.jsx("p",{className:"text-[10px] font-bold text-brand-text-muted uppercase tracking-wider mb-1",children:"Draft"}),f.jsx("p",{className:"whitespace-pre-wrap font-serif text-brand-text-muted/80 max-h-20 overflow-y-auto custom-scrollbar line-clamp-3",children:t.fullText})]}),ne&&f.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:Q.map(j=>f.jsx("span",{className:"text-[10px] bg-brand-bg/50 border border-brand-primary/50 text-brand-text-muted px-1.5 py-0.5 rounded-md",children:j.name},j.id))})]}),f.jsxs("div",{className:"flex justify-end gap-1 pt-2 border-t border-white/5",children:[!F&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>m(t),disabled:d,title:"Generate Image",className:"text-purple-400 hover:text-purple-300 transition disabled:text-gray-600 p-1 rounded hover:bg-purple-900/20",children:f.jsx(ha,{className:"w-3.5 h-3.5"})}),ne&&f.jsx("button",{onClick:()=>h(t.id),disabled:d,title:"Write Scene",className:"text-brand-secondary hover:text-red-400 transition disabled:text-gray-600 p-1 rounded hover:bg-brand-secondary/10",children:f.jsx(fd,{className:"w-3.5 h-3.5"})})]}),f.jsx("button",{onClick:()=>o(t.id),title:"Export",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:f.jsx(po,{className:"w-3.5 h-3.5"})}),E&&f.jsx("button",{onClick:E,className:"p-1.5 text-brand-secondary hover:text-white transition hover:bg-brand-secondary/20 rounded-lg",title:"Open in Split View",children:f.jsx(Zl,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>s(t.id),title:"Delete",className:"text-red-400 hover:text-red-300 transition p-1 rounded hover:bg-red-900/20",children:f.jsx(eu,{className:"w-3.5 h-3.5"})})]})]})})]})]})]})},WA=({onComplete:t})=>{const[e,n]=ue.useState(900),[i,s]=ue.useState(!1),[o,l]=ue.useState(15),[c,d]=ue.useState(!1);ue.useEffect(()=>{let v=null;return i&&e>0?v=setInterval(()=>{n(I=>I-1)},1e3):i&&e===0&&(s(!1),v&&clearInterval(v),t&&t()),()=>{v&&clearInterval(v)}},[i,e,t]);const h=()=>{s(!i)},m=()=>{s(!1),n(o*60)},x=v=>{l(v),n(v*60),s(!1),d(!1)},w=v=>{const I=Math.floor(v/60),A=v%60;return`${I.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`};return f.jsxs("div",{className:"bg-brand-surface/50 border border-brand-primary/30 rounded-lg p-3 flex items-center gap-4 shadow-lg backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 text-brand-secondary",children:[f.jsx(Bb,{className:"w-5 h-5"}),f.jsx("span",{className:"font-mono text-xl font-bold tracking-wider",children:w(e)})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:h,className:`p-1.5 rounded-md transition ${i?"text-yellow-400 hover:bg-yellow-400/10":"text-green-400 hover:bg-green-400/10"}`,title:i?"Pause Sprint":"Start Sprint",children:i?f.jsx(Ob,{className:"w-5 h-5"}):f.jsx(Mb,{className:"w-5 h-5"})}),f.jsx("button",{onClick:m,className:"p-1.5 rounded-md text-brand-text-muted hover:text-white hover:bg-white/10 transition",title:"Reset Timer",children:f.jsx(vf,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"h-6 w-px bg-white/10 mx-1"}),f.jsx("div",{className:"flex items-center gap-1 text-xs",children:[15,30,60].map(v=>f.jsxs("button",{onClick:()=>x(v),className:`px-2 py-1 rounded transition ${o===v&&!c?"bg-brand-secondary text-white font-bold":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,children:[v,"m"]},v))})]})},$A=({currentCount:t})=>{const[e,n]=ue.useState(2e3),[i,s]=ue.useState(!1),[o,l]=ue.useState("2000"),c=Math.min(100,Math.max(0,t/e*100)),d=()=>{const h=parseInt(o,10);!isNaN(h)&&h>0&&n(h),s(!1)};return f.jsx("div",{className:"bg-brand-surface/50 border border-brand-primary/30 rounded-lg p-3 flex items-center gap-3 shadow-lg backdrop-blur-sm min-w-[200px]",children:f.jsxs("div",{className:"flex-grow flex flex-col gap-1",children:[f.jsxs("div",{className:"flex justify-between items-end text-xs",children:[f.jsx("span",{className:"text-brand-text-muted font-bold uppercase tracking-wider",children:"Daily Goal"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-brand-text font-mono font-medium",children:t}),f.jsx("span",{className:"text-brand-text-muted",children:"/"}),i?f.jsx("input",{type:"number",value:o,onChange:h=>l(h.target.value),onBlur:d,onKeyDown:h=>h.key==="Enter"&&d(),className:"w-12 bg-black/30 border border-brand-primary/50 rounded px-1 text-right text-xs text-brand-text focus:outline-none focus:border-brand-secondary",autoFocus:!0,"aria-label":"Daily word count goal"}):f.jsx("span",{onClick:()=>s(!0),className:"text-brand-text-muted hover:text-brand-secondary cursor-pointer border-b border-transparent hover:border-brand-secondary/50 transition",title:"Click to edit goal",children:e})]})]}),f.jsx("div",{className:"h-2 w-full bg-black/40 rounded-full overflow-hidden border border-white/5",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-brand-secondary to-purple-500 transition-all duration-500 ease-out w-[var(--width)]",style:{"--width":`${c}%`}})})]})})},KA=({imageUrl:t,onSave:e,onCancel:n})=>{const i=ue.useRef(null),[s,o]=ue.useState(100),[l,c]=ue.useState(100),[d,h]=ue.useState(100),[m,x]=ue.useState(0),[w,v]=ue.useState(!1),[I,A]=ue.useState(!1),[E,C]=ue.useState(!0),R=ue.useCallback(()=>{const B=i.current;if(!B)return;const se=B.getContext("2d");if(!se)return;const q=new Image;q.crossOrigin="anonymous",q.src=t,q.onload=()=>{m%180===0?(B.width=q.width,B.height=q.height):(B.width=q.height,B.height=q.width),se.clearRect(0,0,B.width,B.height),se.filter=`brightness(${s}%) contrast(${l}%) saturate(${d}%)`,se.save(),se.translate(B.width/2,B.height/2),se.rotate(m*Math.PI/180),se.scale(w?-1:1,I?-1:1),se.drawImage(q,-q.width/2,-q.height/2),se.restore(),C(!1)}},[t,s,l,d,m,w,I]);ue.useEffect(()=>{R()},[R]);const D=()=>{const B=i.current;if(B){const se=B.toDataURL("image/png");e(se)}},z=()=>{o(100),c(100),h(100),x(0),v(!1),A(!1)};return f.jsxs("div",{className:"flex flex-col h-full bg-slate-900 border border-slate-700 rounded-lg overflow-hidden shadow-2xl",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800 border-b border-slate-700",children:[f.jsx("h3",{className:"text-white font-bold text-lg",children:"Photo Editor"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:z,className:"p-2 text-slate-400 hover:text-white transition",title:"Reset","aria-label":"Reset Filters",children:f.jsx(My,{className:"w-5 h-5"})}),f.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-red-400 transition",title:"Cancel","aria-label":"Close Editor",children:f.jsx(hl,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[f.jsxs("div",{className:"flex-1 p-8 overflow-auto flex items-center justify-center bg-slate-950",children:[f.jsx("canvas",{ref:i,className:"max-w-full max-h-full object-contain shadow-lg border border-slate-800"}),E&&f.jsx("div",{className:"text-white absolute",children:"Loading Image..."})]}),f.jsxs("div",{className:"w-80 bg-slate-800 border-l border-slate-700 p-6 flex flex-col gap-6 overflow-y-auto",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-semibold border-b border-slate-600 pb-2",children:[f.jsx(gm,{className:"w-4 h-4"}),f.jsx("span",{children:"Adjustments"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[f.jsx("label",{children:"Brightness"}),f.jsxs("span",{children:[s,"%"]})]}),f.jsx("input",{type:"range",min:"0",max:"200",value:s,onChange:B=>o(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Brightness"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[f.jsx("label",{children:"Contrast"}),f.jsxs("span",{children:[l,"%"]})]}),f.jsx("input",{type:"range",min:"0",max:"200",value:l,onChange:B=>c(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Contrast"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[f.jsx("label",{children:"Saturation"}),f.jsxs("span",{children:[d,"%"]})]}),f.jsx("input",{type:"range",min:"0",max:"200",value:d,onChange:B=>h(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Saturation"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-semibold border-b border-slate-600 pb-2",children:[f.jsx(vf,{className:"w-4 h-4"}),f.jsx("span",{children:"Transform"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>x(B=>(B-90)%360),className:"flex flex-col items-center justify-center p-3 bg-slate-700 rounded hover:bg-slate-600 text-slate-300 text-xs transition",children:[f.jsx(vf,{className:"w-5 h-5 mb-1"}),"Rotate Left"]}),f.jsxs("button",{onClick:()=>x(B=>(B+90)%360),className:"flex flex-col items-center justify-center p-3 bg-slate-700 rounded hover:bg-slate-600 text-slate-300 text-xs transition scale-x-[-1]",children:[f.jsx(vf,{className:"w-5 h-5 mb-1"}),f.jsx("span",{className:"scale-x-[-1]",children:"Rotate Right"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>v(!w),className:`flex flex-col items-center justify-center p-3 rounded text-slate-300 text-xs transition ${w?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:[f.jsxs("div",{className:"flex gap-1 mb-1",children:[f.jsx(Ey,{className:"w-4 h-4"}),f.jsx(mm,{className:"w-4 h-4"})]}),"Flip H"]}),f.jsxs("button",{onClick:()=>A(!I),className:`flex flex-col items-center justify-center p-3 rounded text-slate-300 text-xs transition ${I?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:[f.jsxs("div",{className:"flex gap-1 mb-1",children:[f.jsx(Eb,{className:"w-4 h-4"}),f.jsx(Ib,{className:"w-4 h-4"})]}),"Flip V"]})]})]}),f.jsx("div",{className:"flex-1"}),f.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:from-purple-500 hover:to-blue-500 transition shadow-lg",children:[f.jsx(hc,{className:"w-5 h-5"}),"Save Changes"]})]})]})]})},XA=({imageUrl:t,title:e,onClose:n,onSetHeader:i,onSave:s})=>{const[o,l]=ec.useState(!1),[c,d]=ec.useState(t);ec.useEffect(()=>{d(t)},[t]);const h=()=>{const x=document.createElement("a");x.href=c;const w=e.replace(/[^a-z0-9]/gi,"_").toLowerCase();x.download=`storyweaver_image_${w}.png`,document.body.appendChild(x),x.click(),document.body.removeChild(x)},m=x=>{d(x),l(!1)};return o?f.jsx(Lf,{isOpen:!0,onClose:n,title:`Edit Image: ${e}`,maxWidth:"8xl",children:f.jsx("div",{className:"h-[80vh] w-full",children:f.jsx(KA,{imageUrl:c,onSave:m,onCancel:()=>l(!1)})})}):f.jsx(Lf,{isOpen:!0,onClose:n,title:`Generated Image: ${e}`,maxWidth:"3xl",children:f.jsxs("div",{className:"overflow-hidden flex flex-col",children:[f.jsx("div",{className:"bg-brand-bg rounded-md p-2 m-4 shrink-0",children:f.jsx("img",{src:c,alt:`AI-generated image for: ${e}`,className:"max-w-full max-h-[60vh] mx-auto rounded object-contain"})}),f.jsxs("div",{className:"flex justify-center items-center gap-4 p-4 border-t border-white/10 bg-brand-bg/20 shrink-0 flex-wrap",children:[f.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-slate-600 text-white font-bold py-2 px-4 rounded-md hover:bg-slate-500 transition",children:[f.jsx(vd,{className:"w-5 h-5"}),"Edit"]}),i&&f.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-500 transition",children:[f.jsx(ha,{className:"w-5 h-5"}),"Set as Header"]}),s&&f.jsxs("button",{onClick:()=>s(c),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-500 transition",children:[f.jsx(hc,{className:"w-5 h-5"}),"Save to Materials"]}),f.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-brand-primary text-white font-bold py-2 px-4 rounded-md hover:bg-opacity-80 transition",children:[f.jsx(po,{className:"w-5 h-5"}),"Download"]})]})]})})},ZA=({query:t,onQueryChange:e,filters:n,onFilterChange:i})=>{const s=l=>{i({...n,[l]:!n[l]})},o=[{key:"characters",label:"Characters"},{key:"scenes",label:"Scenes"},{key:"locations",label:"Locations"},{key:"materials",label:"Materials"}];return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(pm,{className:"w-5 h-5 text-brand-text-muted"})}),f.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),placeholder:"Search across your story...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl pl-10 pr-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Filter by:"}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(({key:l,label:c})=>f.jsxs("label",{className:"flex items-center gap-2 text-sm text-brand-text-muted cursor-pointer hover:text-brand-text transition bg-brand-bg/30 p-2 rounded-lg border border-transparent hover:border-brand-primary/50",children:[f.jsx("input",{type:"checkbox",checked:n[l],onChange:()=>s(l),className:"h-4 w-4 rounded bg-brand-surface border-brand-primary text-brand-secondary focus:ring-brand-secondary cursor-pointer"}),c]},l))})]})]})},QA=({theme:t})=>{const e=ue.useRef(null);return ue.useEffect(()=>{const n=e.current;if(!n)return;const i=n.getContext("2d");if(!i)return;let s,o=window.innerWidth,l=window.innerHeight,c=-1e3,d=-1e3,h=!1;const m=()=>{o=window.innerWidth,l=window.innerHeight,n.width=o,n.height=l,D()},x=B=>{c=B.clientX,d=B.clientY,h=!0},w=B=>{B.touches.length>0&&(c=B.touches[0].clientX,d=B.touches[0].clientY,h=!0)},v=()=>{h=!1,c=-1e3,d=-1e3};let I=[];const A=o<768?40:80,E=["rgba(99, 102, 241, ","rgba(244, 63, 94, ","rgba(14, 165, 233, ","rgba(168, 85, 247, "],C=["rgba(14, 165, 233, ","rgba(99, 102, 241, ","rgba(56, 189, 248, ","rgba(139, 92, 246, "],R=()=>t==="dark"?E:C,D=()=>{I=[];const B=R();for(let se=0;se<A;se++){const q=Math.random()*100+50;I.push({x:Math.random()*o,y:Math.random()*l,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,radius:q,originalColor:B[Math.floor(Math.random()*B.length)],color:"",glowStrength:Math.random()*.5+.5})}},z=()=>{i.clearRect(0,0,o,l),i.globalCompositeOperation=t==="dark"?"screen":"multiply",I.forEach(B=>{B.x+=B.vx,B.y+=B.vy;let se=t==="dark"?.15:.08;if(h){const G=c-B.x,Q=d-B.y,ne=Math.sqrt(G*G+Q*Q),F=400;if(ne<F){const j=(F-ne)/F;B.x+=G/ne*j*.5,B.y+=Q/ne*j*.5,se+=j*.2}}B.color=B.originalColor+se+")",B.x<-B.radius*2&&(B.x=o+B.radius*2),B.x>o+B.radius*2&&(B.x=-B.radius*2),B.y<-B.radius*2&&(B.y=l+B.radius*2),B.y>l+B.radius*2&&(B.y=-B.radius*2),i.beginPath();const q=i.createRadialGradient(B.x,B.y,0,B.x,B.y,B.radius);q.addColorStop(0,B.color),q.addColorStop(1,t==="dark"?"rgba(0,0,0,0)":"rgba(255,255,255,0)"),i.fillStyle=q,i.arc(B.x,B.y,B.radius,0,Math.PI*2),i.fill()}),s=requestAnimationFrame(z)};return window.addEventListener("resize",m),window.addEventListener("mousemove",x),window.addEventListener("touchmove",w),window.addEventListener("mouseout",v),window.addEventListener("touchend",v),D(),z(),()=>{window.removeEventListener("resize",m),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",w),window.removeEventListener("mouseout",v),window.removeEventListener("touchend",v),cancelAnimationFrame(s)}},[t]),f.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full pointer-events-none -z-10 transition-opacity duration-1000",style:{opacity:1}})},eC=({onComplete:t})=>{const[e,n]=ue.useState(0),i=[{title:"Welcome to Story Weaver",description:"Your AI-powered creative writing partner. Designed to help you flesh out ideas, build deep characters, and weave compelling narratives from scratch or existing drafts.",icon:f.jsx(Xi,{className:"w-12 h-12 text-brand-secondary"}),color:"from-brand-secondary/20 to-purple-500/20"},{title:"Step 1: The Seed",description:"Start by entering your 'Story Premise' in the top left. This core idea guides the AI in every subsequent generation, ensuring consistency across your project.",icon:f.jsx(Ms,{className:"w-12 h-12 text-sky-400"}),color:"from-sky-500/20 to-blue-600/20"},{title:"Step 2: The Cast",description:"Use the 'Character Builder' to create detailed profiles. Give them traits, backstories, and even analyze uploaded images to generate personality descriptions.",icon:f.jsx(sm,{className:"w-12 h-12 text-amber-400"}),color:"from-amber-400/20 to-orange-500/20"},{title:"Step 3: The Plot",description:"Structure your narrative in the 'Scenes' section. Organize them in the visual 'Timeline' at the bottom to perfect your pacing and flow.",icon:f.jsx(fd,{className:"w-12 h-12 text-teal-400"}),color:"from-teal-400/20 to-emerald-500/20"},{title:"Step 4: The Toolkit",description:"Stuck? Use the 'Writer's Toolkit' to generate chapters, write dialogue between characters, brainstorm plot twists, or connect scenes with transitions.",icon:f.jsx(lm,{className:"w-12 h-12 text-violet-400"}),color:"from-violet-400/20 to-purple-600/20"},{title:"Step 5: Visuals & World",description:"Bring your story to life. Generate evocative images for scenes and characters, and create a 'World Map' to ground your setting physically.",icon:f.jsx(ha,{className:"w-12 h-12 text-pink-400"}),color:"from-pink-400/20 to-rose-500/20"}],s=()=>{e<i.length-1?n(e+1):t()},o=()=>{e>0&&n(e-1)},l=i[e];return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:f.jsxs("div",{className:"glass-panel bg-brand-surface/90 rounded-2xl shadow-2xl w-full max-w-lg border border-white/10 overflow-hidden flex flex-col relative",children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${l.color} opacity-50 transition-colors duration-500 pointer-events-none`}),f.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-brand-text-muted hover:text-white transition z-10",title:"Skip Tour",children:f.jsx(hl,{className:"w-6 h-6"})}),f.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10 h-full",children:[f.jsx("div",{className:"mb-6 p-4 rounded-full bg-white/10 backdrop-blur-md shadow-lg ring-1 ring-white/20 transition-all duration-300 transform hover:scale-110",children:l.icon}),f.jsx("h2",{className:"text-2xl font-bold text-white mb-3 font-serif tracking-wide",children:l.title}),f.jsx("p",{className:"text-brand-text-muted text-base leading-relaxed mb-8",children:l.description}),f.jsx("div",{className:"flex gap-2 mb-8",children:i.map((c,d)=>f.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${d===e?"w-8 bg-brand-secondary":"w-2 bg-white/20"}`},d))}),f.jsxs("div",{className:"flex items-center justify-between w-full mt-auto",children:[f.jsx("button",{onClick:o,disabled:e===0,className:`px-4 py-2 text-sm font-medium text-brand-text-muted hover:text-white transition ${e===0?"opacity-0 pointer-events-none":"opacity-100"}`,children:"Back"}),f.jsx("button",{onClick:s,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:e===i.length-1?f.jsxs(f.Fragment,{children:["Get Started ",f.jsx(ul,{className:"w-5 h-5"})]}):f.jsxs(f.Fragment,{children:["Next ",f.jsx(mm,{className:"w-4 h-4"})]})})]})]})]})})},tC="modulepreload",nC=function(t){return"/storyweaver/"+t},U1={},Up=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(n.map(h=>{if(h=nC(h),h in U1)return;U1[h]=!0;const m=h.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":tC,m||(w.as="script"),w.crossOrigin="",w.href=h,d&&w.setAttribute("nonce",d),document.head.appendChild(w),m)return new Promise((v,I)=>{w.addEventListener("load",v),w.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function bn(t){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(t)}var Ki=Uint8Array,Ai=Uint16Array,hd=Uint32Array,Vf=new Ki([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jf=new Ki([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Op=new Ki([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uv=function(t,e){for(var n=new Ai(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var s=new hd(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)s[o]=o-n[i]<<5|i;return[n,s]},cv=uv(Vf,2),dv=cv[0],Bp=cv[1];dv[28]=258,Bp[258]=28;var fv=uv(Jf,0),rC=fv[0],O1=fv[1],Fp=new Ai(32768);for(var zn=0;zn<32768;++zn){var il=(zn&43690)>>>1|(zn&21845)<<1;il=(il&52428)>>>2|(il&13107)<<2,il=(il&61680)>>>4|(il&3855)<<4,Fp[zn]=((il&65280)>>>8|(il&255)<<8)>>>1}var Rs=(function(t,e,n){for(var i=t.length,s=0,o=new Ai(e);s<i;++s)++o[t[s]-1];var l=new Ai(e);for(s=0;s<e;++s)l[s]=l[s-1]+o[s-1]<<1;var c;if(n){c=new Ai(1<<e);var d=15-e;for(s=0;s<i;++s)if(t[s])for(var h=s<<4|t[s],m=e-t[s],x=l[t[s]-1]++<<m,w=x|(1<<m)-1;x<=w;++x)c[Fp[x]>>>d]=h}else for(c=new Ai(i),s=0;s<i;++s)c[s]=Fp[l[t[s]-1]++]>>>15-t[s];return c}),cl=new Ki(288);for(var zn=0;zn<144;++zn)cl[zn]=8;for(var zn=144;zn<256;++zn)cl[zn]=9;for(var zn=256;zn<280;++zn)cl[zn]=7;for(var zn=280;zn<288;++zn)cl[zn]=8;var pd=new Ki(32);for(var zn=0;zn<32;++zn)pd[zn]=5;var iC=Rs(cl,9,0),aC=Rs(cl,9,1),sC=Rs(pd,5,0),oC=Rs(pd,5,1),mp=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Wa=function(t,e,n){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(e&7)&n},gp=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},Cm=function(t){return(t/8>>0)+(t&7&&1)},hv=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Ai?Ai:t instanceof hd?hd:Ki)(n-e);return i.set(t.subarray(e,n)),i},lC=function(t,e,n){var i=t.length,s=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ki(i*3));var l=function(xe){var Ae=e.length;if(xe>Ae){var Ce=new Ki(Math.max(Ae*2,xe));Ce.set(e),e=Ce}},c=n.f||0,d=n.p||0,h=n.b||0,m=n.l,x=n.d,w=n.m,v=n.n,I=i*8;do{if(!m){n.f=c=Wa(t,d,1);var A=Wa(t,d+1,3);if(d+=3,A)if(A==1)m=aC,x=oC,w=9,v=5;else if(A==2){var D=Wa(t,d,31)+257,z=Wa(t,d+10,15)+4,B=D+Wa(t,d+5,31)+1;d+=14;for(var se=new Ki(B),q=new Ki(19),G=0;G<z;++G)q[Op[G]]=Wa(t,d+G*3,7);d+=z*3;var Q=mp(q),ne=(1<<Q)-1;if(!o&&d+B*(Q+7)>I)break;for(var F=Rs(q,Q,1),G=0;G<B;){var j=F[Wa(t,d,ne)];d+=j&15;var E=j>>>4;if(E<16)se[G++]=E;else{var W=0,M=0;for(E==16?(M=3+Wa(t,d,3),d+=2,W=se[G-1]):E==17?(M=3+Wa(t,d,7),d+=3):E==18&&(M=11+Wa(t,d,127),d+=7);M--;)se[G++]=W}}var ce=se.subarray(0,D),ee=se.subarray(D);w=mp(ce),v=mp(ee),m=Rs(ce,w,1),x=Rs(ee,v,1)}else throw"invalid block type";else{var E=Cm(d)+4,C=t[E-4]|t[E-3]<<8,R=E+C;if(R>i){if(o)throw"unexpected EOF";break}s&&l(h+C),e.set(t.subarray(E,R),h),n.b=h+=C,n.p=d=R*8;continue}if(d>I)throw"unexpected EOF"}s&&l(h+131072);for(var ae=(1<<w)-1,me=(1<<v)-1,pe=w+v+18;o||d+pe<I;){var W=m[gp(t,d)&ae],ve=W>>>4;if(d+=W&15,d>I)throw"unexpected EOF";if(!W)throw"invalid length/literal";if(ve<256)e[h++]=ve;else if(ve==256){m=null;break}else{var H=ve-254;if(ve>264){var G=ve-257,L=Vf[G];H=Wa(t,d,(1<<L)-1)+dv[G],d+=L}var J=x[gp(t,d)&me],K=J>>>4;if(!J)throw"invalid distance";d+=J&15;var ee=rC[K];if(K>3){var L=Jf[K];ee+=gp(t,d)&(1<<L)-1,d+=L}if(d>I)throw"unexpected EOF";s&&l(h+131072);for(var ie=h+H;h<ie;h+=4)e[h]=e[h-ee],e[h+1]=e[h+1-ee],e[h+2]=e[h+2-ee],e[h+3]=e[h+3-ee];h=ie}}n.l=m,n.p=d,n.b=h,m&&(c=1,n.m=w,n.d=x,n.n=v)}while(!c);return h==e.length?e:hv(e,0,h)},lo=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},sd=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},yp=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var s=n.length,o=n.slice();if(!s)return[new Ki(0),0];if(s==1){var l=new Ki(n[0].s+1);return l[n[0].s]=1,[l,1]}n.sort(function(B,se){return B.f-se.f}),n.push({s:-1,f:25001});var c=n[0],d=n[1],h=0,m=1,x=2;for(n[0]={s:-1,f:c.f+d.f,l:c,r:d};m!=s-1;)c=n[n[h].f<n[x].f?h++:x++],d=n[h!=m&&n[h].f<n[x].f?h++:x++],n[m++]={s:-1,f:c.f+d.f,l:c,r:d};for(var w=o[0].s,i=1;i<s;++i)o[i].s>w&&(w=o[i].s);var v=new Ai(w+1),I=zp(n[m-1],v,0);if(I>e){var i=0,A=0,E=I-e,C=1<<E;for(o.sort(function(se,q){return v[q.s]-v[se.s]||se.f-q.f});i<s;++i){var R=o[i].s;if(v[R]>e)A+=C-(1<<I-v[R]),v[R]=e;else break}for(A>>>=E;A>0;){var D=o[i].s;v[D]<e?A-=1<<e-v[D]++-1:++i}for(;i>=0&&A;--i){var z=o[i].s;v[z]==e&&(--v[z],++A)}I=e}return[new Ki(v),I]},zp=function(t,e,n){return t.s==-1?Math.max(zp(t.l,e,n+1),zp(t.r,e,n+1)):e[t.s]=n},B1=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ai(++e),i=0,s=t[0],o=1,l=function(d){n[i++]=d},c=1;c<=e;++c)if(t[c]==s&&c!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(s),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(s);o=1,s=t[c]}return[n.subarray(0,i),e]},od=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},qp=function(t,e,n){var i=n.length,s=Cm(e+2);t[s]=i&255,t[s+1]=i>>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var o=0;o<i;++o)t[s+o+4]=n[o];return(s+4+i)*8},F1=function(t,e,n,i,s,o,l,c,d,h,m){lo(e,m++,n),++s[256];for(var x=yp(s,15),w=x[0],v=x[1],I=yp(o,15),A=I[0],E=I[1],C=B1(w),R=C[0],D=C[1],z=B1(A),B=z[0],se=z[1],q=new Ai(19),G=0;G<R.length;++G)q[R[G]&31]++;for(var G=0;G<B.length;++G)q[B[G]&31]++;for(var Q=yp(q,7),ne=Q[0],F=Q[1],j=19;j>4&&!ne[Op[j-1]];--j);var W=h+5<<3,M=od(s,cl)+od(o,pd)+l,ce=od(s,w)+od(o,A)+l+14+3*j+od(q,ne)+(2*q[16]+3*q[17]+7*q[18]);if(W<=M&&W<=ce)return qp(e,m,t.subarray(d,d+h));var ee,ae,me,pe;if(lo(e,m,1+(ce<M)),m+=2,ce<M){ee=Rs(w,v,0),ae=w,me=Rs(A,E,0),pe=A;var ve=Rs(ne,F,0);lo(e,m,D-257),lo(e,m+5,se-1),lo(e,m+10,j-4),m+=14;for(var G=0;G<j;++G)lo(e,m+3*G,ne[Op[G]]);m+=3*j;for(var H=[R,B],L=0;L<2;++L)for(var J=H[L],G=0;G<J.length;++G){var K=J[G]&31;lo(e,m,ve[K]),m+=ne[K],K>15&&(lo(e,m,J[G]>>>5&127),m+=J[G]>>>12)}}else ee=iC,ae=cl,me=sC,pe=pd;for(var G=0;G<c;++G)if(i[G]>255){var K=i[G]>>>18&31;sd(e,m,ee[K+257]),m+=ae[K+257],K>7&&(lo(e,m,i[G]>>>23&31),m+=Vf[K]);var ie=i[G]&31;sd(e,m,me[ie]),m+=pe[ie],ie>3&&(sd(e,m,i[G]>>>5&8191),m+=Jf[ie])}else sd(e,m,ee[i[G]]),m+=ae[i[G]];return sd(e,m,ee[256]),m+ae[256]},uC=new hd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cC=function(t,e,n,i,s,o){var l=t.length,c=new Ki(i+l+5*(1+Math.floor(l/7e3))+s),d=c.subarray(i,c.length-s),h=0;if(!e||l<8)for(var m=0;m<=l;m+=65535){var x=m+65535;x<l?h=qp(d,h,t.subarray(m,x)):(d[m]=o,h=qp(d,h,t.subarray(m,l)))}else{for(var w=uC[e-1],v=w>>>13,I=w&8191,A=(1<<n)-1,E=new Ai(32768),C=new Ai(A+1),R=Math.ceil(n/3),D=2*R,z=function(U){return(t[U]^t[U+1]<<R^t[U+2]<<D)&A},B=new hd(25e3),se=new Ai(288),q=new Ai(32),G=0,Q=0,m=0,ne=0,F=0,j=0;m<l;++m){var W=z(m),M=m&32767,ce=C[W];if(E[M]=ce,C[W]=M,F<=m){var ee=l-m;if((G>7e3||ne>24576)&&ee>423){h=F1(t,d,0,B,se,q,Q,ne,j,m-j,h),ne=G=Q=0,j=m;for(var ae=0;ae<286;++ae)se[ae]=0;for(var ae=0;ae<30;++ae)q[ae]=0}var me=2,pe=0,ve=I,H=M-ce&32767;if(ee>2&&W==z(m-H))for(var L=Math.min(v,ee)-1,J=Math.min(32767,m),K=Math.min(258,ee);H<=J&&--ve&&M!=ce;){if(t[m+me]==t[m+me-H]){for(var ie=0;ie<K&&t[m+ie]==t[m+ie-H];++ie);if(ie>me){if(me=ie,pe=H,ie>L)break;for(var xe=Math.min(H,ie-2),Ae=0,ae=0;ae<xe;++ae){var Ce=m-H+ae+32768&32767,Ee=E[Ce],Re=Ce-Ee+32768&32767;Re>Ae&&(Ae=Re,ce=Ce)}}}M=ce,ce=E[M],H+=M-ce+32768&32767}if(pe){B[ne++]=268435456|Bp[me]<<18|O1[pe];var De=Bp[me]&31,He=O1[pe]&31;Q+=Vf[De]+Jf[He],++se[257+De],++q[He],F=m+me,++G}else B[ne++]=t[m],++se[t[m]]}}h=F1(t,d,o,B,se,q,Q,ne,j,m-j,h)}return hv(c,0,i+Cm(h)+s)},dC=function(){var t=1,e=0;return{p:function(n){for(var i=t,s=e,o=n.length,l=0;l!=o;){for(var c=Math.min(l+5552,o);l<c;++l)i+=n[l],s+=i;i%=65521,s%=65521}t=i,e=s},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},fC=function(t,e,n,i,s){return cC(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,i,!0)},hC=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},pC=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},mC=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Gp(t,e){e===void 0&&(e={});var n=dC();n.p(t);var i=fC(t,e,2,4);return pC(i,e),hC(i,i.length-4,n.d()),i}function gC(t,e){return lC((mC(t),t.subarray(2,-4)),e)}var Mt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function vp(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var Ln={log:vp,warn:function(t){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):vp.call(null,arguments))},error:function(t){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):vp(t))}};function xp(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Yl(i.response,e,n)},i.onerror=function(){Ln.error("could not download file")},i.send()}function z1(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ff(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var cd,Hp,Yl=Mt.saveAs||((typeof window>"u"?"undefined":bn(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Mt.URL||Mt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?z1(s.href)?xp(t,e,n):ff(s,s.target="_blank"):ff(s)):(s.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(s.href)}),4e4),setTimeout((function(){ff(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(z1(t))xp(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){ff(i)}))}else navigator.msSaveOrOpenBlob((function(s,o){return o===void 0?o={autoBom:!1}:bn(o)!=="object"&&(Ln.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return xp(t,e,n);var s=t.type==="application/octet-stream",o=/constructor/i.test(Mt.HTMLElement)||Mt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&o)&&(typeof FileReader>"u"?"undefined":bn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=l?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=m:location=m,i=null},c.readAsDataURL(t)}else{var d=Mt.URL||Mt.webkitURL,h=d.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function pv(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var s=n[i].re,o=n[i].process,l=s.exec(t);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+c+d+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function bp(t,e){var n=t[0],i=t[1],s=t[2],o=t[3];n=ui(n,i,s,o,e[0],7,-680876936),o=ui(o,n,i,s,e[1],12,-389564586),s=ui(s,o,n,i,e[2],17,606105819),i=ui(i,s,o,n,e[3],22,-1044525330),n=ui(n,i,s,o,e[4],7,-176418897),o=ui(o,n,i,s,e[5],12,1200080426),s=ui(s,o,n,i,e[6],17,-1473231341),i=ui(i,s,o,n,e[7],22,-45705983),n=ui(n,i,s,o,e[8],7,1770035416),o=ui(o,n,i,s,e[9],12,-1958414417),s=ui(s,o,n,i,e[10],17,-42063),i=ui(i,s,o,n,e[11],22,-1990404162),n=ui(n,i,s,o,e[12],7,1804603682),o=ui(o,n,i,s,e[13],12,-40341101),s=ui(s,o,n,i,e[14],17,-1502002290),n=ci(n,i=ui(i,s,o,n,e[15],22,1236535329),s,o,e[1],5,-165796510),o=ci(o,n,i,s,e[6],9,-1069501632),s=ci(s,o,n,i,e[11],14,643717713),i=ci(i,s,o,n,e[0],20,-373897302),n=ci(n,i,s,o,e[5],5,-701558691),o=ci(o,n,i,s,e[10],9,38016083),s=ci(s,o,n,i,e[15],14,-660478335),i=ci(i,s,o,n,e[4],20,-405537848),n=ci(n,i,s,o,e[9],5,568446438),o=ci(o,n,i,s,e[14],9,-1019803690),s=ci(s,o,n,i,e[3],14,-187363961),i=ci(i,s,o,n,e[8],20,1163531501),n=ci(n,i,s,o,e[13],5,-1444681467),o=ci(o,n,i,s,e[2],9,-51403784),s=ci(s,o,n,i,e[7],14,1735328473),n=di(n,i=ci(i,s,o,n,e[12],20,-1926607734),s,o,e[5],4,-378558),o=di(o,n,i,s,e[8],11,-2022574463),s=di(s,o,n,i,e[11],16,1839030562),i=di(i,s,o,n,e[14],23,-35309556),n=di(n,i,s,o,e[1],4,-1530992060),o=di(o,n,i,s,e[4],11,1272893353),s=di(s,o,n,i,e[7],16,-155497632),i=di(i,s,o,n,e[10],23,-1094730640),n=di(n,i,s,o,e[13],4,681279174),o=di(o,n,i,s,e[0],11,-358537222),s=di(s,o,n,i,e[3],16,-722521979),i=di(i,s,o,n,e[6],23,76029189),n=di(n,i,s,o,e[9],4,-640364487),o=di(o,n,i,s,e[12],11,-421815835),s=di(s,o,n,i,e[15],16,530742520),n=fi(n,i=di(i,s,o,n,e[2],23,-995338651),s,o,e[0],6,-198630844),o=fi(o,n,i,s,e[7],10,1126891415),s=fi(s,o,n,i,e[14],15,-1416354905),i=fi(i,s,o,n,e[5],21,-57434055),n=fi(n,i,s,o,e[12],6,1700485571),o=fi(o,n,i,s,e[3],10,-1894986606),s=fi(s,o,n,i,e[10],15,-1051523),i=fi(i,s,o,n,e[1],21,-2054922799),n=fi(n,i,s,o,e[8],6,1873313359),o=fi(o,n,i,s,e[15],10,-30611744),s=fi(s,o,n,i,e[6],15,-1560198380),i=fi(i,s,o,n,e[13],21,1309151649),n=fi(n,i,s,o,e[4],6,-145523070),o=fi(o,n,i,s,e[11],10,-1120210379),s=fi(s,o,n,i,e[2],15,718787259),i=fi(i,s,o,n,e[9],21,-343485551),t[0]=sl(n,t[0]),t[1]=sl(i,t[1]),t[2]=sl(s,t[2]),t[3]=sl(o,t[3])}function Yf(t,e,n,i,s,o){return e=sl(sl(e,t),sl(i,o)),sl(e<<s|e>>>32-s,n)}function ui(t,e,n,i,s,o,l){return Yf(e&n|~e&i,t,e,s,o,l)}function ci(t,e,n,i,s,o,l){return Yf(e&i|n&~i,t,e,s,o,l)}function di(t,e,n,i,s,o,l){return Yf(e^n^i,t,e,s,o,l)}function fi(t,e,n,i,s,o,l){return Yf(n^(e|~i),t,e,s,o,l)}function mv(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)bp(i,yC(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(bp(i,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,bp(i,s),i}function yC(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}cd=Mt.atob.bind(Mt),Hp=Mt.btoa.bind(Mt);var q1="0123456789abcdef".split("");function vC(t){for(var e="",n=0;n<4;n++)e+=q1[t>>8*n+4&15]+q1[t>>8*n&15];return e}function xC(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Vp(t){return mv(t).map(xC).join("")}var bC=(function(t){for(var e=0;e<t.length;e++)t[e]=vC(t[e]);return t.join("")})(mv("hello"))!="5d41402abc4b2a76b9719d911017c592";function sl(t,e){if(bC){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Jp(t,e){var n,i,s,o;if(t!==n){for(var l=(s=t,o=1+(256/t.length>>0),new Array(o+1).join(s)),c=[],d=0;d<256;d++)c[d]=d;var h=0;for(d=0;d<256;d++){var m=c[d];h=(h+m+l.charCodeAt(d))%256,c[d]=c[h],c[h]=m}n=t,i=c}else c=i;var x=e.length,w=0,v=0,I="";for(d=0;d<x;d++)v=(v+(m=c[w=(w+1)%256]))%256,c[w]=c[v],c[v]=m,l=c[(c[w]+c[v])%256],I+=String.fromCharCode(e.charCodeAt(d)^l);return I}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var G1={print:4,modify:8,copy:16,"annot-forms":32};function Ku(t,e,n,i){this.v=1,this.r=2;var s=192;t.forEach((function(c){if(G1.perm!==void 0)throw new Error("Invalid permission: "+c);s+=G1[c]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^s)),this.encryptionKey=Vp(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Jp(this.encryptionKey,this.padding)}function Xu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var s=t.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[i]}return e}function H1(t){if(bn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,s){if(s=s||!1,typeof n!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[i,!!s],o},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[n]){var l=e[n][o];try{l[0].apply(t,i)}catch(c){Mt.console&&Ln.error("jsPDF PubSub Error",c.message,c)}l[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Rf(t){if(!(this instanceof Rf))return new Rf(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function gv(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Wl(t,e,n,i,s){if(!(this instanceof Wl))return new Wl(t,e,n,i,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,gv.call(this,i,s)}function Qu(t,e,n,i,s){if(!(this instanceof Qu))return new Qu(t,e,n,i,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,gv.call(this,i,s)}function Lt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],o=arguments[3],l=[],c=1,d=16,h="S",m=null;bn(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,s=t.format||s,o=t.compress||t.compressPdf||o,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),h=t.defaultPathOperation||"S"),l=t.filters||(o===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var x=t.putOnlyUsedFonts||!1,w={},v={internal:{},__private__:{}};v.__private__.PubSub=H1;var I="1.3",A=v.__private__.getPdfVersion=function(){return I};v.__private__.setPdfVersion=function(T){I=T};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return E};var C=v.__private__.getPageFormat=function(T){return E[T]};s=s||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},D=R.COMPAT;function z(){this.saveGraphicsState(),$(new At(st,0,0,-st,0,ds()*st).toString()+" cm"),this.setFontSize(this.getFontSize()/st),h="n",D=R.ADVANCED}function B(){this.restoreGraphicsState(),h="S",D=R.COMPAT}var se=v.__private__.combineFontStyleAndFontWeight=function(T,Y){if(T=="bold"&&Y=="normal"||T=="bold"&&Y==400||T=="normal"&&Y=="italic"||T=="bold"&&Y=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Y&&(T=Y==400||Y==="normal"?T==="italic"?"italic":"normal":Y!=700&&Y!=="bold"||T!=="normal"?(Y==700?"bold":Y)+""+T:"bold"),T};v.advancedAPI=function(T){var Y=D===R.COMPAT;return Y&&z.call(this),typeof T!="function"||(T(this),Y&&B.call(this)),this},v.compatAPI=function(T){var Y=D===R.ADVANCED;return Y&&B.call(this),typeof T!="function"||(T(this),Y&&z.call(this)),this},v.isAdvancedAPI=function(){return D===R.ADVANCED};var q,G=function(T){if(D!==R.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=v.roundToPrecision=v.__private__.roundToPrecision=function(T,Y){var ge=e||Y;if(isNaN(T)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(ge).replace(/0+$/,"")};q=v.hpf=v.__private__.hpf=typeof d=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(T,d)}:d==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(T,16)};var ne=v.f2=v.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return Q(T,2)},F=v.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return Q(T,3)},j=v.scale=v.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return D===R.COMPAT?T*st:D===R.ADVANCED?T:void 0},W=function(T){return D===R.COMPAT?ds()-T:D===R.ADVANCED?T:void 0},M=function(T){return j(W(T))};v.__private__.setPrecision=v.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var ce,ee="00000000000000000000000000000000",ae=v.__private__.getFileId=function(){return ee},me=v.__private__.setFileId=function(T){return ee=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():ee.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),m!==null&&(Dn=new Ku(m.userPermissions,m.userPassword,m.ownerPassword,ee)),ee};v.setFileId=function(T){return me(T),this},v.getFileId=function(){return ae()};var pe=v.__private__.convertDateToPDFDate=function(T){var Y=T.getTimezoneOffset(),ge=Y<0?"+":"-",Se=Math.floor(Math.abs(Y/60)),Ue=Math.abs(Y%60),We=[ge,K(Se),"'",K(Ue),"'"].join("");return["D:",T.getFullYear(),K(T.getMonth()+1),K(T.getDate()),K(T.getHours()),K(T.getMinutes()),K(T.getSeconds()),We].join("")},ve=v.__private__.convertPDFDateToDate=function(T){var Y=parseInt(T.substr(2,4),10),ge=parseInt(T.substr(6,2),10)-1,Se=parseInt(T.substr(8,2),10),Ue=parseInt(T.substr(10,2),10),We=parseInt(T.substr(12,2),10),it=parseInt(T.substr(14,2),10);return new Date(Y,ge,Se,Ue,We,it,0)},H=v.__private__.setCreationDate=function(T){var Y;if(T===void 0&&(T=new Date),T instanceof Date)Y=pe(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Y=T}return ce=Y},L=v.__private__.getCreationDate=function(T){var Y=ce;return T==="jsDate"&&(Y=ve(ce)),Y};v.setCreationDate=function(T){return H(T),this},v.getCreationDate=function(T){return L(T)};var J,K=v.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},ie=v.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},xe=0,Ae=[],Ce=[],Ee=0,Re=[],De=[],He=!1,Xe=Ce,U=function(){xe=0,Ee=0,Ce=[],Ae=[],Re=[],pr=Mn(),fn=Mn()};v.__private__.setCustomOutputDestination=function(T){He=!0,Xe=T};var ye=function(T){He||(Xe=T)};v.__private__.resetCustomOutputDestination=function(){He=!1,Xe=Ce};var $=v.__private__.out=function(T){return T=T.toString(),Ee+=T.length+1,Xe.push(T),Xe},de=v.__private__.write=function(T){return $(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},oe=v.__private__.getArrayBuffer=function(T){for(var Y=T.length,ge=new ArrayBuffer(Y),Se=new Uint8Array(ge);Y--;)Se[Y]=T.charCodeAt(Y);return ge},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return he};var Ie=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(T){return Ie=D===R.ADVANCED?T/st:T,this};var Le,be=v.__private__.getFontSize=v.getFontSize=function(){return D===R.COMPAT?Ie:Ie*st},je=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(T){return je=T,this},v.__private__.getR2L=v.getR2L=function(){return je};var Oe,Je=v.__private__.setZoomMode=function(T){var Y=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))Le=T;else if(isNaN(T)){if(Y.indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');Le=T}else Le=parseInt(T,10)};v.__private__.getZoomMode=function(){return Le};var at,dt=v.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');Oe=T};v.__private__.getPageMode=function(){return Oe};var pt=v.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');at=T};v.__private__.getLayoutMode=function(){return at},v.__private__.setDisplayMode=v.setDisplayMode=function(T,Y,ge){return Je(T),pt(Y),dt(ge),this};var mt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(T){if(Object.keys(mt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return mt[T]},v.__private__.getDocumentProperties=function(){return mt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(T){for(var Y in mt)mt.hasOwnProperty(Y)&&T[Y]&&(mt[Y]=T[Y]);return this},v.__private__.setDocumentProperty=function(T,Y){if(Object.keys(mt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return mt[T]=Y};var Rt,st,Rn,gt,on,Ot={},Ct={},Gr=[],Jt={},pi={},jt={},Gn={},tr=null,Yt=0,Et=[],Vt=new H1(v),ka=t.hotfixes||[],nr={},Zr={},Lr=[],At=function T(Y,ge,Se,Ue,We,it){if(!(this instanceof T))return new T(Y,ge,Se,Ue,We,it);isNaN(Y)&&(Y=1),isNaN(ge)&&(ge=0),isNaN(Se)&&(Se=0),isNaN(Ue)&&(Ue=1),isNaN(We)&&(We=0),isNaN(it)&&(it=0),this._matrix=[Y,ge,Se,Ue,We,it]};Object.defineProperty(At.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(At.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(At.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(At.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(At.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(At.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(At.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(At.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(At.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(At.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(At.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(At.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(At.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(At.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(At.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(At.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),At.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(T)},At.prototype.multiply=function(T){var Y=T.sx*this.sx+T.shy*this.shx,ge=T.sx*this.shy+T.shy*this.sy,Se=T.shx*this.sx+T.sy*this.shx,Ue=T.shx*this.shy+T.sy*this.sy,We=T.tx*this.sx+T.ty*this.shx+this.tx,it=T.tx*this.shy+T.ty*this.sy+this.ty;return new At(Y,ge,Se,Ue,We,it)},At.prototype.decompose=function(){var T=this.sx,Y=this.shy,ge=this.shx,Se=this.sy,Ue=this.tx,We=this.ty,it=Math.sqrt(T*T+Y*Y),ft=(T/=it)*ge+(Y/=it)*Se;ge-=T*ft,Se-=Y*ft;var St=Math.sqrt(ge*ge+Se*Se);return ft/=St,T*(Se/=St)<Y*(ge/=St)&&(T=-T,Y=-Y,ft=-ft,it=-it),{scale:new At(it,0,0,St,0,0),translate:new At(1,0,0,1,Ue,We),rotate:new At(T,Y,-Y,T,0,0),skew:new At(1,0,ft,1,0,0)}},At.prototype.toString=function(T){return this.join(" ")},At.prototype.inversed=function(){var T=this.sx,Y=this.shy,ge=this.shx,Se=this.sy,Ue=this.tx,We=this.ty,it=1/(T*Se-Y*ge),ft=Se*it,St=-Y*it,Dt=-ge*it,Ut=T*it;return new At(ft,St,Dt,Ut,-ft*Ue-Dt*We,-St*Ue-Ut*We)},At.prototype.applyToPoint=function(T){var Y=T.x*this.sx+T.y*this.shx+this.tx,ge=T.x*this.shy+T.y*this.sy+this.ty;return new Fs(Y,ge)},At.prototype.applyToRectangle=function(T){var Y=this.applyToPoint(T),ge=this.applyToPoint(new Fs(T.x+T.w,T.y+T.h));return new Tl(Y.x,Y.y,ge.x-Y.x,ge.y-Y.y)},At.prototype.clone=function(){var T=this.sx,Y=this.shy,ge=this.shx,Se=this.sy,Ue=this.tx,We=this.ty;return new At(T,Y,ge,Se,Ue,We)},v.Matrix=At;var Qr=v.matrixMult=function(T,Y){return Y.multiply(T)},mi=new At(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=mi;var hr=function(T,Y){if(!pi[T]){var ge=(Y instanceof Wl?"Sh":"P")+(Object.keys(Jt).length+1).toString(10);Y.id=ge,pi[T]=ge,Jt[ge]=Y,Vt.publish("addPattern",Y)}};v.ShadingPattern=Wl,v.TilingPattern=Qu,v.addShadingPattern=function(T,Y){return G("addShadingPattern()"),hr(T,Y),this},v.beginTilingPattern=function(T){G("beginTilingPattern()"),du(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},v.endTilingPattern=function(T,Y){G("endTilingPattern()"),Y.stream=De[J].join(`
`),hr(T,Y),Vt.publish("endTilingPattern",Y),Lr.pop().restore()};var mn=v.__private__.newObject=function(){var T=Mn();return Nr(T,!0),T},Mn=v.__private__.newObjectDeferred=function(){return xe++,Ae[xe]=function(){return Ee},xe},Nr=function(T,Y){return Y=typeof Y=="boolean"&&Y,Ae[T]=Ee,Y&&$(T+" 0 obj"),T},Qi=v.__private__.newAdditionalObject=function(){var T={objId:Mn(),content:""};return Re.push(T),T},pr=Mn(),fn=Mn(),wn=v.__private__.decodeColorString=function(T){var Y=T.split(" ");if(Y.length!==2||Y[1]!=="g"&&Y[1]!=="G")Y.length===5&&(Y[4]==="k"||Y[4]==="K")&&(Y=[(1-Y[0])*(1-Y[3]),(1-Y[1])*(1-Y[3]),(1-Y[2])*(1-Y[3]),"r"]);else{var ge=parseFloat(Y[0]);Y=[ge,ge,ge,"r"]}for(var Se="#",Ue=0;Ue<3;Ue++)Se+=("0"+Math.floor(255*parseFloat(Y[Ue])).toString(16)).slice(-2);return Se},mr=v.__private__.encodeColorString=function(T){var Y;typeof T=="string"&&(T={ch1:T});var ge=T.ch1,Se=T.ch2,Ue=T.ch3,We=T.ch4,it=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var ft=new pv(ge);if(ft.ok)ge=ft.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var St=parseInt(ge.substr(1),16);ge=St>>16&255,Se=St>>8&255,Ue=255&St}if(Se===void 0||We===void 0&&ge===Se&&Se===Ue)if(typeof ge=="string")Y=ge+" "+it[0];else switch(T.precision){case 2:Y=ne(ge/255)+" "+it[0];break;case 3:default:Y=F(ge/255)+" "+it[0]}else if(We===void 0||bn(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return Y=["1.","1.","1.",it[1]].join(" ");if(typeof ge=="string")Y=[ge,Se,Ue,it[1]].join(" ");else switch(T.precision){case 2:Y=[ne(ge/255),ne(Se/255),ne(Ue/255),it[1]].join(" ");break;default:case 3:Y=[F(ge/255),F(Se/255),F(Ue/255),it[1]].join(" ")}}else if(typeof ge=="string")Y=[ge,Se,Ue,We,it[2]].join(" ");else switch(T.precision){case 2:Y=[ne(ge),ne(Se),ne(Ue),ne(We),it[2]].join(" ");break;case 3:default:Y=[F(ge),F(Se),F(Ue),F(We),it[2]].join(" ")}return Y},gn=v.__private__.getFilters=function(){return l},ei=v.__private__.putStream=function(T){var Y=(T=T||{}).data||"",ge=T.filters||gn(),Se=T.alreadyAppliedFilters||[],Ue=T.addLength1||!1,We=Y.length,it=T.objectId,ft=function(_r){return _r};if(m!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(ft=Dn.encryptor(it,0));var St={};ge===!0&&(ge=["FlateEncode"]);var Dt=T.additionalKeyValues||[],Ut=(St=Lt.API.processDataByFilters!==void 0?Lt.API.processDataByFilters(Y,ge):{data:Y,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(St.data.length!==0&&(Dt.push({key:"Length",value:St.data.length}),Ue===!0&&Dt.push({key:"Length1",value:We})),Ut.length!=0)if(Ut.split("/").length-1==1)Dt.push({key:"Filter",value:Ut});else{Dt.push({key:"Filter",value:"["+Ut+"]"});for(var Zt=0;Zt<Dt.length;Zt+=1)if(Dt[Zt].key==="DecodeParms"){for(var Pn=[],Un=0;Un<St.reverseChain.split("/").length-1;Un+=1)Pn.push("null");Pn.push(Dt[Zt].value),Dt[Zt].value="["+Pn.join(" ")+"]"}}$("<<");for(var Xn=0;Xn<Dt.length;Xn++)$("/"+Dt[Xn].key+" "+Dt[Xn].value);$(">>"),St.data.length!==0&&($("stream"),$(ft(St.data)),$("endstream"))},Ti=v.__private__.putPage=function(T){var Y=T.number,ge=T.data,Se=T.objId,Ue=T.contentsObjId;Nr(Se,!0),$("<</Type /Page"),$("/Parent "+T.rootDictionaryObjId+" 0 R"),$("/Resources "+T.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(q(T.mediaBox.bottomLeftX))+" "+parseFloat(q(T.mediaBox.bottomLeftY))+" "+q(T.mediaBox.topRightX)+" "+q(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&$("/CropBox ["+q(T.cropBox.bottomLeftX)+" "+q(T.cropBox.bottomLeftY)+" "+q(T.cropBox.topRightX)+" "+q(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&$("/BleedBox ["+q(T.bleedBox.bottomLeftX)+" "+q(T.bleedBox.bottomLeftY)+" "+q(T.bleedBox.topRightX)+" "+q(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&$("/TrimBox ["+q(T.trimBox.bottomLeftX)+" "+q(T.trimBox.bottomLeftY)+" "+q(T.trimBox.topRightX)+" "+q(T.trimBox.topRightY)+"]"),T.artBox!==null&&$("/ArtBox ["+q(T.artBox.bottomLeftX)+" "+q(T.artBox.bottomLeftY)+" "+q(T.artBox.topRightX)+" "+q(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&$("/UserUnit "+T.userUnit),Vt.publish("putPage",{objId:Se,pageContext:Et[Y],pageNumber:Y,page:ge}),$("/Contents "+Ue+" 0 R"),$(">>"),$("endobj");var We=ge.join(`
`);return D===R.ADVANCED&&(We+=`
Q`),Nr(Ue,!0),ei({data:We,filters:gn(),objectId:Ue}),$("endobj"),Se},ea=v.__private__.putPages=function(){var T,Y,ge=[];for(T=1;T<=Yt;T++)Et[T].objId=Mn(),Et[T].contentsObjId=Mn();for(T=1;T<=Yt;T++)ge.push(Ti({number:T,data:De[T],objId:Et[T].objId,contentsObjId:Et[T].contentsObjId,mediaBox:Et[T].mediaBox,cropBox:Et[T].cropBox,bleedBox:Et[T].bleedBox,trimBox:Et[T].trimBox,artBox:Et[T].artBox,userUnit:Et[T].userUnit,rootDictionaryObjId:pr,resourceDictionaryObjId:fn}));Nr(pr,!0),$("<</Type /Pages");var Se="/Kids [";for(Y=0;Y<Yt;Y++)Se+=ge[Y]+" 0 R ";$(Se+"]"),$("/Count "+Yt),$(">>"),$("endobj"),Vt.publish("postPutPages")},gi=function(T){Vt.publish("putFont",{font:T,out:$,newObject:mn,putStream:ei}),T.isAlreadyPutted!==!0&&(T.objectNumber=mn(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Xu(T.postScriptName)),$("/Subtype /Type1"),typeof T.encoding=="string"&&$("/Encoding /"+T.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},ti=function(){for(var T in Ot)Ot.hasOwnProperty(T)&&(x===!1||x===!0&&w.hasOwnProperty(T))&&gi(Ot[T])},ni=function(T){T.objectNumber=mn();var Y=[];Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Form"}),Y.push({key:"BBox",value:"["+[q(T.x),q(T.y),q(T.x+T.width),q(T.y+T.height)].join(" ")+"]"}),Y.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var ge=T.pages[1].join(`
`);ei({data:ge,additionalKeyValues:Y,objectId:T.objectNumber}),$("endobj")},rt=function(){for(var T in nr)nr.hasOwnProperty(T)&&ni(nr[T])},lt=function(T,Y){var ge,Se=[],Ue=1/(Y-1);for(ge=0;ge<1;ge+=Ue)Se.push(ge);if(Se.push(1),T[0].offset!=0){var We={offset:0,color:T[0].color};T.unshift(We)}if(T[T.length-1].offset!=1){var it={offset:1,color:T[T.length-1].color};T.push(it)}for(var ft="",St=0,Dt=0;Dt<Se.length;Dt++){for(ge=Se[Dt];ge>T[St+1].offset;)St++;var Ut=T[St].offset,Zt=(ge-Ut)/(T[St+1].offset-Ut),Pn=T[St].color,Un=T[St+1].color;ft+=ie(Math.round((1-Zt)*Pn[0]+Zt*Un[0]).toString(16))+ie(Math.round((1-Zt)*Pn[1]+Zt*Un[1]).toString(16))+ie(Math.round((1-Zt)*Pn[2]+Zt*Un[2]).toString(16))}return ft.trim()},rn=function(T,Y){Y||(Y=21);var ge=mn(),Se=lt(T.colors,Y),Ue=[];Ue.push({key:"FunctionType",value:"0"}),Ue.push({key:"Domain",value:"[0.0 1.0]"}),Ue.push({key:"Size",value:"["+Y+"]"}),Ue.push({key:"BitsPerSample",value:"8"}),Ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ei({data:Se,additionalKeyValues:Ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),$("endobj"),T.objectNumber=mn(),$("<< /ShadingType "+T.type),$("/ColorSpace /DeviceRGB");var We="/Coords ["+q(parseFloat(T.coords[0]))+" "+q(parseFloat(T.coords[1]))+" ";T.type===2?We+=q(parseFloat(T.coords[2]))+" "+q(parseFloat(T.coords[3])):We+=q(parseFloat(T.coords[2]))+" "+q(parseFloat(T.coords[3]))+" "+q(parseFloat(T.coords[4]))+" "+q(parseFloat(T.coords[5])),$(We+="]"),T.matrix&&$("/Matrix ["+T.matrix.toString()+"]"),$("/Function "+ge+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},qt=function(T,Y){var ge=Mn(),Se=mn();Y.push({resourcesOid:ge,objectOid:Se}),T.objectNumber=Se;var Ue=[];Ue.push({key:"Type",value:"/Pattern"}),Ue.push({key:"PatternType",value:"1"}),Ue.push({key:"PaintType",value:"1"}),Ue.push({key:"TilingType",value:"1"}),Ue.push({key:"BBox",value:"["+T.boundingBox.map(q).join(" ")+"]"}),Ue.push({key:"XStep",value:q(T.xStep)}),Ue.push({key:"YStep",value:q(T.yStep)}),Ue.push({key:"Resources",value:ge+" 0 R"}),T.matrix&&Ue.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),ei({data:T.stream,additionalKeyValues:Ue,objectId:T.objectNumber}),$("endobj")},sn=function(T){var Y;for(Y in Jt)Jt.hasOwnProperty(Y)&&(Jt[Y]instanceof Wl?rn(Jt[Y]):Jt[Y]instanceof Qu&&qt(Jt[Y],T))},Rr=function(T){for(var Y in T.objectNumber=mn(),$("<<"),T)switch(Y){case"opacity":$("/ca "+ne(T[Y]));break;case"stroke-opacity":$("/CA "+ne(T[Y]))}$(">>"),$("endobj")},Tn=function(){var T;for(T in jt)jt.hasOwnProperty(T)&&Rr(jt[T])},rr=function(){for(var T in $("/XObject <<"),nr)nr.hasOwnProperty(T)&&nr[T].objectNumber>=0&&$("/"+T+" "+nr[T].objectNumber+" 0 R");Vt.publish("putXobjectDict"),$(">>")},xc=function(){Dn.oid=mn(),$("<<"),$("/Filter /Standard"),$("/V "+Dn.v),$("/R "+Dn.r),$("/U <"+Dn.toHexString(Dn.U)+">"),$("/O <"+Dn.toHexString(Dn.O)+">"),$("/P "+Dn.P),$(">>"),$("endobj")},ml=function(){for(var T in $("/Font <<"),Ot)Ot.hasOwnProperty(T)&&(x===!1||x===!0&&w.hasOwnProperty(T))&&$("/"+T+" "+Ot[T].objectNumber+" 0 R");$(">>")},ru=function(){if(Object.keys(Jt).length>0){for(var T in $("/Shading <<"),Jt)Jt.hasOwnProperty(T)&&Jt[T]instanceof Wl&&Jt[T].objectNumber>=0&&$("/"+T+" "+Jt[T].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),$(">>")}},vo=function(T){if(Object.keys(Jt).length>0){for(var Y in $("/Pattern <<"),Jt)Jt.hasOwnProperty(Y)&&Jt[Y]instanceof v.TilingPattern&&Jt[Y].objectNumber>=0&&Jt[Y].objectNumber<T&&$("/"+Y+" "+Jt[Y].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),$(">>")}},xo=function(){if(Object.keys(jt).length>0){var T;for(T in $("/ExtGState <<"),jt)jt.hasOwnProperty(T)&&jt[T].objectNumber>=0&&$("/"+T+" "+jt[T].objectNumber+" 0 R");Vt.publish("putGStateDict"),$(">>")}},jn=function(T){Nr(T.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ml(),ru(),vo(T.objectOid),xo(),rr(),$(">>"),$("endobj")},Ei=function(){var T=[];ti(),Tn(),rt(),sn(T),Vt.publish("putResources"),T.forEach(jn),jn({resourcesOid:fn,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")},Hr=function(){Vt.publish("putAdditionalObjects");for(var T=0;T<Re.length;T++){var Y=Re[T];Nr(Y.objId,!0),$(Y.content),$("endobj")}Vt.publish("postPutAdditionalObjects")},gl=function(T){Ct[T.fontName]=Ct[T.fontName]||{},Ct[T.fontName][T.fontStyle]=T.id},yl=function(T,Y,ge,Se,Ue){var We={id:"F"+(Object.keys(Ot).length+1).toString(10),postScriptName:T,fontName:Y,fontStyle:ge,encoding:Se,isStandardFont:Ue||!1,metadata:{}};return Vt.publish("addFont",{font:We,instance:this}),Ot[We.id]=We,gl(We),We.id},vl=function(T){for(var Y=0,ge=he.length;Y<ge;Y++){var Se=yl.call(this,T[Y][0],T[Y][1],T[Y][2],he[Y][3],!0);x===!1&&(w[Se]=!0);var Ue=T[Y][0].split("-");gl({id:Se,fontName:Ue[0],fontStyle:Ue[1]||""})}Vt.publish("addFonts",{fonts:Ot,dictionary:Ct})},Ii=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(Se){var Y=Se.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var ge="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+Se.message;if(!Mt.console)throw new Error(ge);Mt.console.error(ge,Se),Mt.alert&&alert(ge)}},T.foo.bar=T,T.foo},La=function(T,Y){var ge,Se,Ue,We,it,ft,St,Dt,Ut;if(Ue=(Y=Y||{}).sourceEncoding||"Unicode",it=Y.outputEncoding,(Y.autoencode||it)&&Ot[Rt].metadata&&Ot[Rt].metadata[Ue]&&Ot[Rt].metadata[Ue].encoding&&(We=Ot[Rt].metadata[Ue].encoding,!it&&Ot[Rt].encoding&&(it=Ot[Rt].encoding),!it&&We.codePages&&(it=We.codePages[0]),typeof it=="string"&&(it=We[it]),it)){for(St=!1,ft=[],ge=0,Se=T.length;ge<Se;ge++)(Dt=it[T.charCodeAt(ge)])?ft.push(String.fromCharCode(Dt)):ft.push(T[ge]),ft[ge].charCodeAt(0)>>8&&(St=!0);T=ft.join("")}for(ge=T.length;St===void 0&&ge!==0;)T.charCodeAt(ge-1)>>8&&(St=!0),ge--;if(!St)return T;for(ft=Y.noBOM?[]:[254,255],ge=0,Se=T.length;ge<Se;ge++){if((Ut=(Dt=T.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ft.push(Ut),ft.push(Dt-(Ut<<8))}return String.fromCharCode.apply(void 0,ft)},ri=v.__private__.pdfEscape=v.pdfEscape=function(T,Y){return La(T,Y).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mr=v.__private__.beginPage=function(T){De[++Yt]=[],Et[Yt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},wo(Yt),ye(De[J])},bo=function(T,Y){var ge,Se,Ue;switch(n=Y||n,typeof T=="string"&&(ge=C(T.toLowerCase()),Array.isArray(ge)&&(Se=ge[0],Ue=ge[1])),Array.isArray(T)&&(Se=T[0]*st,Ue=T[1]*st),isNaN(Se)&&(Se=s[0],Ue=s[1]),(Se>14400||Ue>14400)&&(Ln.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),Ue=Math.min(14400,Ue)),s=[Se,Ue],n.substr(0,1)){case"l":Ue>Se&&(s=[Ue,Se]);break;case"p":Se>Ue&&(s=[Ue,Se])}Mr(s),Os(gr),$(ia),Al!==0&&$(Al+" J"),Cl!==0&&$(Cl+" j"),Vt.publish("addPage",{pageNumber:Yt})},iu=function(T){T>0&&T<=Yt&&(De.splice(T,1),Et.splice(T,1),Yt--,J>Yt&&(J=Yt),this.setPage(J))},wo=function(T){T>0&&T<=Yt&&(J=T)},rs=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return De.length-1},xl=function(T,Y,ge){var Se,Ue=void 0;return ge=ge||{},T=T!==void 0?T:Ot[Rt].fontName,Y=Y!==void 0?Y:Ot[Rt].fontStyle,Se=T.toLowerCase(),Ct[Se]!==void 0&&Ct[Se][Y]!==void 0?Ue=Ct[Se][Y]:Ct[T]!==void 0&&Ct[T][Y]!==void 0?Ue=Ct[T][Y]:ge.disableWarning===!1&&Ln.warn("Unable to look up font label for font '"+T+"', '"+Y+"'. Refer to getFontList() for available fonts."),Ue||ge.noFallback||(Ue=Ct.times[Y])==null&&(Ue=Ct.times.normal),Ue},au=v.__private__.putInfo=function(){var T=mn(),Y=function(Se){return Se};for(var ge in m!==null&&(Y=Dn.encryptor(T,0)),$("<<"),$("/Producer ("+ri(Y("jsPDF "+Lt.version))+")"),mt)mt.hasOwnProperty(ge)&&mt[ge]&&$("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+ri(Y(mt[ge]))+")");$("/CreationDate ("+ri(Y(ce))+")"),$(">>"),$("endobj")},pa=v.__private__.putCatalog=function(T){var Y=(T=T||{}).rootDictionaryObjId||pr;switch(mn(),$("<<"),$("/Type /Catalog"),$("/Pages "+Y+" 0 R"),Le||(Le="fullwidth"),Le){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+Le;ge.substr(ge.length-1)==="%"&&(Le=parseInt(Le)/100),typeof Le=="number"&&$("/OpenAction [3 0 R /XYZ null null "+ne(Le)+"]")}switch(at||(at="continuous"),at){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Oe&&$("/PageMode /"+Oe),Vt.publish("putCatalog"),$(">>"),$("endobj")},bc=v.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(xe+1)),$("/Root "+xe+" 0 R"),$("/Info "+(xe-1)+" 0 R"),m!==null&&$("/Encrypt "+Dn.oid+" 0 R"),$("/ID [ <"+ee+"> <"+ee+"> ]"),$(">>")},su=v.__private__.putHeader=function(){$("%PDF-"+I),$("%")},ou=v.__private__.putXRef=function(){var T="0000000000";$("xref"),$("0 "+(xe+1)),$("0000000000 65535 f ");for(var Y=1;Y<=xe;Y++)typeof Ae[Y]=="function"?$((T+Ae[Y]()).slice(-10)+" 00000 n "):Ae[Y]!==void 0?$((T+Ae[Y]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},ta=v.__private__.buildDocument=function(){U(),ye(Ce),Vt.publish("buildDocument"),su(),ea(),Hr(),Ei(),m!==null&&xc(),au(),pa();var T=Ee;return ou(),bc(),$("startxref"),$(""+T),$("%%EOF"),ye(De[J]),Ce.join(`
`)},So=v.__private__.getBlob=function(T){return new Blob([oe(T)],{type:"application/pdf"})},No=v.output=v.__private__.output=Ii((function(T,Y){switch(typeof(Y=Y||{})=="string"?Y={filename:Y}:Y.filename=Y.filename||"generated.pdf",T){case void 0:return ta();case"save":v.save(Y.filename);break;case"arraybuffer":return oe(ta());case"blob":return So(ta());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(So(ta()))||void 0;Ln.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Se=ta();try{ge=Hp(Se)}catch{ge=Hp(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+Y.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var Ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Y.pdfObjectUrl&&(Ue=Y.pdfObjectUrl,We="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ue+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Y)+");<\/script></body></html>",ft=Mt.open();return ft!==null&&ft.document.write(it),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Y.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Y.filename+'" width="500px" height="400px" /></body></html>',Dt=Mt.open();if(Dt!==null){Dt.document.write(St);var Ut=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=Y.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Y)+'"></iframe></body></html>',Pn=Mt.open();if(Pn!==null&&(Pn.document.write(Zt),Pn.document.title=Y.filename),Pn||typeof safari>"u")return Pn;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",Y);default:return null}})),Ds=function(T){return Array.isArray(ka)===!0&&ka.indexOf(T)>-1};switch(i){case"pt":st=1;break;case"mm":st=72/25.4;break;case"cm":st=72/2.54;break;case"in":st=72;break;case"px":st=Ds("px_scaling")==1?.75:96/72;break;case"pc":case"em":st=12;break;case"ex":st=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);st=i}var Dn=null;H(),me();var bl=function(T){return m!==null?Dn.encryptor(T,0):function(Y){return Y}},_o=v.__private__.getPageInfo=v.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Et[T].objId,pageNumber:T,pageContext:Et[T]}},Tt=v.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Y in Et)if(Et[Y].objId===T)break;return _o(Y)},is=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Et[J].objId,pageNumber:J,pageContext:Et[J]}};v.addPage=function(){return bo.apply(this,arguments),this},v.setPage=function(){return wo.apply(this,arguments),ye.call(this,De[J]),this},v.insertPage=function(T){return this.addPage(),this.movePage(J,T),this},v.movePage=function(T,Y){var ge,Se;if(T>Y){ge=De[T],Se=Et[T];for(var Ue=T;Ue>Y;Ue--)De[Ue]=De[Ue-1],Et[Ue]=Et[Ue-1];De[Y]=ge,Et[Y]=Se,this.setPage(Y)}else if(T<Y){ge=De[T],Se=Et[T];for(var We=T;We<Y;We++)De[We]=De[We+1],Et[We]=Et[We+1];De[Y]=ge,Et[Y]=Se,this.setPage(Y)}return this},v.deletePage=function(){return iu.apply(this,arguments),this},v.__private__.text=v.text=function(T,Y,ge,Se,Ue){var We,it,ft,St,Dt,Ut,Zt,Pn,Un,Xn=(Se=Se||{}).scope||this;if(typeof T=="number"&&typeof Y=="number"&&(typeof ge=="string"||Array.isArray(ge))){var _r=ge;ge=Y,Y=T,T=_r}if(arguments[3]instanceof At?(G("The transform parameter of text() with a Matrix value"),Un=Ue):(ft=arguments[4],St=arguments[5],bn(Zt=arguments[3])==="object"&&Zt!==null||(typeof ft=="string"&&(St=ft,ft=null),typeof Zt=="string"&&(St=Zt,Zt=null),typeof Zt=="number"&&(ft=Zt,Zt=null),Se={flags:Zt,angle:ft,align:St})),isNaN(Y)||isNaN(ge)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return Xn;var lr="",jr=!1,yi=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:ls,Ma=Xn.internal.scaleFactor;function fu(Sn){return Sn=Sn.split("	").join(Array(Se.TabLen||9).join(" ")),ri(Sn,Zt)}function ko(Sn){for(var Nn,Zn=Sn.concat(),ir=[],xa=Zn.length;xa--;)typeof(Nn=Zn.shift())=="string"?ir.push(Nn):Array.isArray(Sn)&&(Nn.length===1||Nn[1]===void 0&&Nn[2]===void 0)?ir.push(Nn[0]):ir.push([Nn[0],Nn[1],Nn[2]]);return ir}function Lo(Sn,Nn){var Zn;if(typeof Sn=="string")Zn=Nn(Sn)[0];else if(Array.isArray(Sn)){for(var ir,xa,ba=Sn.concat(),Pr=[],Gs=ba.length;Gs--;)typeof(ir=ba.shift())=="string"?Pr.push(Nn(ir)[0]):Array.isArray(ir)&&typeof ir[0]=="string"&&(xa=Nn(ir[0],ir[1],ir[2]),Pr.push([xa[0],xa[1],xa[2]]));Zn=Pr}return Zn}var ga=!1,ja=!0;if(typeof T=="string")ga=!0;else if(Array.isArray(T)){var kl=T.concat();it=[];for(var Da,Vr=kl.length;Vr--;)(typeof(Da=kl.shift())!="string"||Array.isArray(Da)&&typeof Da[0]!="string")&&(ja=!1);ga=ja}if(ga===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var qs=Ie/Xn.internal.scaleFactor,fs=qs*(yi-1);switch(Se.baseline){case"bottom":ge-=fs;break;case"top":ge+=qs-fs;break;case"hanging":ge+=qs-2*fs;break;case"middle":ge+=qs/2-fs}if((Ut=Se.maxWidth||0)>0&&(typeof T=="string"?T=Xn.splitTextToSize(T,Ut):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce((function(Sn,Nn){return Sn.concat(Xn.splitTextToSize(Nn,Ut))}),[]))),We={text:T,x:Y,y:ge,options:Se,mutex:{pdfEscape:ri,activeFontKey:Rt,fonts:Ot,activeFontSize:Ie}},Vt.publish("preProcessText",We),T=We.text,ft=(Se=We.options).angle,!(Un instanceof At)&&ft&&typeof ft=="number"){ft*=Math.PI/180,Se.rotationDirection===0&&(ft=-ft),D===R.ADVANCED&&(ft=-ft);var hs=Math.cos(ft),Ro=Math.sin(ft);Un=new At(hs,Ro,-Ro,hs,0,0)}else ft&&ft instanceof At&&(Un=ft);D!==R.ADVANCED||Un||(Un=mi),(Dt=Se.charSpace||Eo)!==void 0&&(lr+=q(j(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pn=Se.horizontalScale)!==void 0&&(lr+=q(100*Pn)+` Tz
`),Se.lang;var Jr=-1,hu=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,Ll=Xn.internal.getCurrentPageInfo().pageContext;switch(hu){case 0:case!1:case"fill":Jr=0;break;case 1:case!0:case"stroke":Jr=1;break;case 2:case"fillThenStroke":Jr=2;break;case 3:case"invisible":Jr=3;break;case 4:case"fillAndAddForClipping":Jr=4;break;case 5:case"strokeAndAddPathForClipping":Jr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Jr=6;break;case 7:case"addToPathForClipping":Jr=7}var pu=Ll.usedRenderingMode!==void 0?Ll.usedRenderingMode:-1;Jr!==-1?lr+=Jr+` Tr
`:pu!==-1&&(lr+=`0 Tr
`),Jr!==-1&&(Ll.usedRenderingMode=Jr),St=Se.align||"left";var aa,Rl=Ie*yi,Nc=Xn.internal.pageSize.getWidth(),Yr=Ot[Rt];Dt=Se.charSpace||Eo,Ut=Se.maxWidth||0,Zt=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var Mi=[];if(Object.prototype.toString.call(T)==="[object Array]"){var vi;it=ko(T),St!=="left"&&(aa=it.map((function(Sn){return Xn.getStringUnitWidth(Sn,{font:Yr,charSpace:Dt,fontSize:Ie,doKerning:!1})*Ie/Ma})));var ji,Pa=0;if(St==="right"){Y-=aa[0],T=[],Vr=it.length;for(var sa=0;sa<Vr;sa++)sa===0?(ji=ra(Y),vi=Ri(ge)):(ji=j(Pa-aa[sa]),vi=-Rl),T.push([it[sa],ji,vi]),Pa=aa[sa]}else if(St==="center"){Y-=aa[0]/2,T=[],Vr=it.length;for(var oa=0;oa<Vr;oa++)oa===0?(ji=ra(Y),vi=Ri(ge)):(ji=j((Pa-aa[oa])/2),vi=-Rl),T.push([it[oa],ji,vi]),Pa=aa[oa]}else if(St==="left"){T=[],Vr=it.length;for(var Mo=0;Mo<Vr;Mo++)T.push(it[Mo])}else{if(St!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');T=[],Vr=it.length,Ut=Ut!==0?Ut:Nc;for(var Dr=0;Dr<Vr;Dr++)vi=Dr===0?Ri(ge):-Rl,ji=Dr===0?ra(Y):0,Dr<Vr-1?Mi.push(q(j((Ut-aa[Dr])/(it[Dr].split(" ").length-1)))):Mi.push(0),T.push([it[Dr],ji,vi])}}var ps=typeof Se.R2L=="boolean"?Se.R2L:je;ps===!0&&(T=Lo(T,(function(Sn,Nn,Zn){return[Sn.split("").reverse().join(""),Nn,Zn]}))),We={text:T,x:Y,y:ge,options:Se,mutex:{pdfEscape:ri,activeFontKey:Rt,fonts:Ot,activeFontSize:Ie}},Vt.publish("postProcessText",We),T=We.text,jr=We.mutex.isHex||!1;var Ua=Ot[Rt].encoding;Ua!=="WinAnsiEncoding"&&Ua!=="StandardEncoding"||(T=Lo(T,(function(Sn,Nn,Zn){return[fu(Sn),Nn,Zn]}))),it=ko(T),T=[];for(var ya,Di,Wr,Pi=0,ms=1,gs=Array.isArray(it[0])?ms:Pi,ai="",jo=function(Sn,Nn,Zn){var ir="";return Zn instanceof At?(Zn=typeof Se.angle=="number"?Qr(Zn,new At(1,0,0,1,Sn,Nn)):Qr(new At(1,0,0,1,Sn,Nn),Zn),D===R.ADVANCED&&(Zn=Qr(new At(1,0,0,-1,0,0),Zn)),ir=Zn.join(" ")+` Tm
`):ir=q(Sn)+" "+q(Nn)+` Td
`,ir},xi=0;xi<it.length;xi++){switch(ai="",gs){case ms:Wr=(jr?"<":"(")+it[xi][0]+(jr?">":")"),ya=parseFloat(it[xi][1]),Di=parseFloat(it[xi][2]);break;case Pi:Wr=(jr?"<":"(")+it[xi]+(jr?">":")"),ya=ra(Y),Di=Ri(ge)}Mi!==void 0&&Mi[xi]!==void 0&&(ai=Mi[xi]+` Tw
`),xi===0?T.push(ai+jo(ya,Di,Un)+Wr):gs===Pi?T.push(ai+Wr):gs===ms&&T.push(ai+jo(ya,Di,Un)+Wr)}T=gs===Pi?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var va=`BT
/`;return va+=Rt+" "+Ie+` Tf
`,va+=q(Ie*yi)+` TL
`,va+=Bs+`
`,va+=lr,va+=T,$(va+="ET"),w[Rt]=!0,Xn};var lu=v.__private__.clip=v.clip=function(T){return $(T==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return lu("evenodd")},v.__private__.discardPath=v.discardPath=function(){return $("n"),this};var ki=v.__private__.isValidStyle=function(T){var Y=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(Y=!0),Y};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(T){return ki(T)&&(h=T),this};var wl=v.__private__.getStyle=v.getStyle=function(T){var Y=h;switch(T){case"D":case"S":Y="S";break;case"F":Y="f";break;case"FD":case"DF":Y="B";break;case"f":case"f*":case"B":case"B*":Y=T}return Y},as=v.close=function(){return $("h"),this};v.stroke=function(){return $("S"),this},v.fill=function(T){return ii("f",T),this},v.fillEvenOdd=function(T){return ii("f*",T),this},v.fillStroke=function(T){return ii("B",T),this},v.fillStrokeEvenOdd=function(T){return ii("B*",T),this};var ii=function(T,Y){bn(Y)==="object"?ma(Y,T):$(T)},Ps=function(T){T===null||D===R.ADVANCED&&T===void 0||(T=wl(T),$(T))};function Us(T,Y,ge,Se,Ue){var We=new Qu(Y||this.boundingBox,ge||this.xStep,Se||this.yStep,this.gState,Ue||this.matrix);We.stream=this.stream;var it=T+"$$"+this.cloneIndex+++"$$";return hr(it,We),We}var ma=function(T,Y){var ge=pi[T.key],Se=Jt[ge];if(Se instanceof Wl)$("q"),$(Sl(Y)),Se.gState&&v.setGState(Se.gState),$(T.matrix.toString()+" cm"),$("/"+ge+" sh"),$("Q");else if(Se instanceof Qu){var Ue=new At(1,0,0,-1,0,ds());T.matrix&&(Ue=Ue.multiply(T.matrix||mi),ge=Us.call(Se,T.key,T.boundingBox,T.xStep,T.yStep,Ue).id),$("q"),$("/Pattern cs"),$("/"+ge+" scn"),Se.gState&&v.setGState(Se.gState),$(Y),$("Q")}},Sl=function(T){switch(T){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ss=v.moveTo=function(T,Y){return $(q(j(T))+" "+q(M(Y))+" m"),this},os=v.lineTo=function(T,Y){return $(q(j(T))+" "+q(M(Y))+" l"),this},na=v.curveTo=function(T,Y,ge,Se,Ue,We){return $([q(j(T)),q(M(Y)),q(j(ge)),q(M(Se)),q(j(Ue)),q(M(We)),"c"].join(" ")),this};v.__private__.line=v.line=function(T,Y,ge,Se,Ue){if(isNaN(T)||isNaN(Y)||isNaN(ge)||isNaN(Se)||!ki(Ue))throw new Error("Invalid arguments passed to jsPDF.line");return D===R.COMPAT?this.lines([[ge-T,Se-Y]],T,Y,[1,1],Ue||"S"):this.lines([[ge-T,Se-Y]],T,Y,[1,1]).stroke()},v.__private__.lines=v.lines=function(T,Y,ge,Se,Ue,We){var it,ft,St,Dt,Ut,Zt,Pn,Un,Xn,_r,lr,jr;if(typeof T=="number"&&(jr=ge,ge=Y,Y=T,T=jr),Se=Se||[1,1],We=We||!1,isNaN(Y)||isNaN(ge)||!Array.isArray(T)||!Array.isArray(Se)||!ki(Ue)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ss(Y,ge),it=Se[0],ft=Se[1],Dt=T.length,_r=Y,lr=ge,St=0;St<Dt;St++)(Ut=T[St]).length===2?(_r=Ut[0]*it+_r,lr=Ut[1]*ft+lr,os(_r,lr)):(Zt=Ut[0]*it+_r,Pn=Ut[1]*ft+lr,Un=Ut[2]*it+_r,Xn=Ut[3]*ft+lr,_r=Ut[4]*it+_r,lr=Ut[5]*ft+lr,na(Zt,Pn,Un,Xn,_r,lr));return We&&as(),Ps(Ue),this},v.path=function(T){for(var Y=0;Y<T.length;Y++){var ge=T[Y],Se=ge.c;switch(ge.op){case"m":ss(Se[0],Se[1]);break;case"l":os(Se[0],Se[1]);break;case"c":na.apply(this,Se);break;case"h":as()}}return this},v.__private__.rect=v.rect=function(T,Y,ge,Se,Ue){if(isNaN(T)||isNaN(Y)||isNaN(ge)||isNaN(Se)||!ki(Ue))throw new Error("Invalid arguments passed to jsPDF.rect");return D===R.COMPAT&&(Se=-Se),$([q(j(T)),q(M(Y)),q(j(ge)),q(j(Se)),"re"].join(" ")),Ps(Ue),this},v.__private__.triangle=v.triangle=function(T,Y,ge,Se,Ue,We,it){if(isNaN(T)||isNaN(Y)||isNaN(ge)||isNaN(Se)||isNaN(Ue)||isNaN(We)||!ki(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-T,Se-Y],[Ue-ge,We-Se],[T-Ue,Y-We]],T,Y,[1,1],it,!0),this},v.__private__.roundedRect=v.roundedRect=function(T,Y,ge,Se,Ue,We,it){if(isNaN(T)||isNaN(Y)||isNaN(ge)||isNaN(Se)||isNaN(Ue)||isNaN(We)||!ki(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return Ue=Math.min(Ue,.5*ge),We=Math.min(We,.5*Se),this.lines([[ge-2*Ue,0],[Ue*ft,0,Ue,We-We*ft,Ue,We],[0,Se-2*We],[0,We*ft,-Ue*ft,We,-Ue,We],[2*Ue-ge,0],[-Ue*ft,0,-Ue,-We*ft,-Ue,-We],[0,2*We-Se],[0,-We*ft,Ue*ft,-We,Ue,-We]],T+Ue,Y,[1,1],it,!0),this},v.__private__.ellipse=v.ellipse=function(T,Y,ge,Se,Ue){if(isNaN(T)||isNaN(Y)||isNaN(ge)||isNaN(Se)||!ki(Ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*ge,it=4/3*(Math.SQRT2-1)*Se;return ss(T+ge,Y),na(T+ge,Y-it,T+We,Y-Se,T,Y-Se),na(T-We,Y-Se,T-ge,Y-it,T-ge,Y),na(T-ge,Y+it,T-We,Y+Se,T,Y+Se),na(T+We,Y+Se,T+ge,Y+it,T+ge,Y),Ps(Ue),this},v.__private__.circle=v.circle=function(T,Y,ge,Se){if(isNaN(T)||isNaN(Y)||isNaN(ge)||!ki(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,Y,ge,ge,Se)},v.setFont=function(T,Y,ge){return ge&&(Y=se(Y,ge)),Rt=xl(T,Y,{disableWarning:!1}),this};var Ao=v.__private__.getFont=v.getFont=function(){return Ot[xl.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var T,Y,ge={};for(T in Ct)if(Ct.hasOwnProperty(T))for(Y in ge[T]=[],Ct[T])Ct[T].hasOwnProperty(Y)&&ge[T].push(Y);return ge},v.addFont=function(T,Y,ge,Se,Ue){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ue=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(ge=se(ge,Se)),Ue=Ue||"Identity-H",yl.call(this,T,Y,ge,Ue)};var ls,gr=t.lineWidth||.200025,Li=v.__private__.getLineWidth=v.getLineWidth=function(){return gr},Os=v.__private__.setLineWidth=v.setLineWidth=function(T){return gr=T,$(q(j(T))+" w"),this};v.__private__.setLineDash=Lt.API.setLineDash=Lt.API.setLineDashPattern=function(T,Y){if(T=T||[],Y=Y||0,isNaN(Y)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map((function(ge){return q(j(ge))})).join(" "),Y=q(j(Y)),$("["+T+"] "+Y+" d"),this};var us=v.__private__.getLineHeight=v.getLineHeight=function(){return Ie*ls};v.__private__.getLineHeight=v.getLineHeight=function(){return Ie*ls};var uu=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(ls=T),this},Co=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return ls};uu(t.lineHeight);var ra=v.__private__.getHorizontalCoordinate=function(T){return j(T)},Ri=v.__private__.getVerticalCoordinate=function(T){return D===R.ADVANCED?T:Et[J].mediaBox.topRightY-Et[J].mediaBox.bottomLeftY-j(T)},To=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(T){return q(ra(T))},Ra=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(T){return q(Ri(T))},ia=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return wn(ia)},v.__private__.setStrokeColor=v.setDrawColor=function(T,Y,ge,Se){return ia=mr({ch1:T,ch2:Y,ch3:ge,ch4:Se,pdfColorType:"draw",precision:2}),$(ia),this};var Nl=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return wn(Nl)},v.__private__.setFillColor=v.setFillColor=function(T,Y,ge,Se){return Nl=mr({ch1:T,ch2:Y,ch3:ge,ch4:Se,pdfColorType:"fill",precision:2}),$(Nl),this};var Bs=t.textColor||"0 g",_l=v.__private__.getTextColor=v.getTextColor=function(){return wn(Bs)};v.__private__.setTextColor=v.setTextColor=function(T,Y,ge,Se){return Bs=mr({ch1:T,ch2:Y,ch3:ge,ch4:Se,pdfColorType:"text",precision:3}),this};var Eo=t.charSpace,wc=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Eo||0)};v.__private__.setCharSpace=v.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Eo=T,this};var Al=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(T){var Y=v.CapJoinStyles[T];if(Y===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Al=Y,$(Y+" J"),this};var Cl=0;v.__private__.setLineJoin=v.setLineJoin=function(T){var Y=v.CapJoinStyles[T];if(Y===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cl=Y,$(Y+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(q(j(T))+" M"),this},v.GState=Rf,v.setGState=function(T){(T=typeof T=="string"?jt[Gn[T]]:cu(null,T)).equals(tr)||($("/"+T.id+" gs"),tr=T)};var cu=function(T,Y){if(!T||!Gn[T]){var ge=!1;for(var Se in jt)if(jt.hasOwnProperty(Se)&&jt[Se].equals(Y)){ge=!0;break}if(ge)Y=jt[Se];else{var Ue="GS"+(Object.keys(jt).length+1).toString(10);jt[Ue]=Y,Y.id=Ue}return T&&(Gn[T]=Y.id),Vt.publish("addGState",Y),Y}};v.addGState=function(T,Y){return cu(T,Y),this},v.saveGraphicsState=function(){return $("q"),Gr.push({key:Rt,size:Ie,color:Bs}),this},v.restoreGraphicsState=function(){$("Q");var T=Gr.pop();return Rt=T.key,Ie=T.size,Bs=T.color,tr=null,this},v.setCurrentTransformationMatrix=function(T){return $(T.toString()+" cm"),this},v.comment=function(T){return $("#"+T),this};var Fs=function(T,Y){var ge=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(We){isNaN(We)||(ge=parseFloat(We))}});var Se=Y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(We){isNaN(We)||(Se=parseFloat(We))}});var Ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ue},set:function(We){Ue=We.toString()}}),this},Tl=function(T,Y,ge,Se){Fs.call(this,T,Y),this.type="rect";var Ue=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ue},set:function(it){isNaN(it)||(Ue=parseFloat(it))}});var We=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(it){isNaN(it)||(We=parseFloat(it))}}),this},El=function(){this.page=Yt,this.currentPage=J,this.pages=De.slice(0),this.pagesContext=Et.slice(0),this.x=Rn,this.y=gt,this.matrix=on,this.width=zs(J),this.height=ds(J),this.outputDestination=Xe,this.id="",this.objectNumber=-1};El.prototype.restore=function(){Yt=this.page,J=this.currentPage,Et=this.pagesContext,De=this.pages,Rn=this.x,gt=this.y,on=this.matrix,Il(J,this.width),Io(J,this.height),Xe=this.outputDestination};var du=function(T,Y,ge,Se,Ue){Lr.push(new El),Yt=J=0,De=[],Rn=T,gt=Y,on=Ue,Mr([ge,Se])},Sc=function(T){if(Zr[T])Lr.pop().restore();else{var Y=new El,ge="Xo"+(Object.keys(nr).length+1).toString(10);Y.id=ge,Zr[T]=ge,nr[ge]=Y,Vt.publish("addFormObject",Y),Lr.pop().restore()}};for(var cs in v.beginFormObject=function(T,Y,ge,Se,Ue){return du(T,Y,ge,Se,Ue),this},v.endFormObject=function(T){return Sc(T),this},v.doFormObject=function(T,Y){var ge=nr[Zr[T]];return $("q"),$(Y.toString()+" cm"),$("/"+ge.id+" Do"),$("Q"),this},v.getFormObject=function(T){var Y=nr[Zr[T]];return{x:Y.x,y:Y.y,width:Y.width,height:Y.height,matrix:Y.matrix}},v.save=function(T,Y){return T=T||"generated.pdf",(Y=Y||{}).returnPromise=Y.returnPromise||!1,Y.returnPromise===!1?(Yl(So(ta()),T),typeof Yl.unload=="function"&&Mt.setTimeout&&setTimeout(Yl.unload,911),this):new Promise((function(ge,Se){try{var Ue=Yl(So(ta()),T);typeof Yl.unload=="function"&&Mt.setTimeout&&setTimeout(Yl.unload,911),ge(Ue)}catch(We){Se(We.message)}}))},Lt.API)Lt.API.hasOwnProperty(cs)&&(cs==="events"&&Lt.API.events.length?(function(T,Y){var ge,Se,Ue;for(Ue=Y.length-1;Ue!==-1;Ue--)ge=Y[Ue][0],Se=Y[Ue][1],T.subscribe.apply(T,[ge].concat(typeof Se=="function"?[Se]:Se))})(Vt,Lt.API.events):v[cs]=Lt.API[cs]);var zs=v.getPageWidth=function(T){return(Et[T=T||J].mediaBox.topRightX-Et[T].mediaBox.bottomLeftX)/st},Il=v.setPageWidth=function(T,Y){Et[T].mediaBox.topRightX=Y*st+Et[T].mediaBox.bottomLeftX},ds=v.getPageHeight=function(T){return(Et[T=T||J].mediaBox.topRightY-Et[T].mediaBox.bottomLeftY)/st},Io=v.setPageHeight=function(T,Y){Et[T].mediaBox.topRightY=Y*st+Et[T].mediaBox.bottomLeftY};return v.internal={pdfEscape:ri,getStyle:wl,getFont:Ao,getFontSize:be,getCharSpace:wc,getTextColor:_l,getLineHeight:us,getLineHeightFactor:Co,getLineWidth:Li,write:de,getHorizontalCoordinate:ra,getVerticalCoordinate:Ri,getCoordinateString:To,getVerticalCoordinateString:Ra,collections:{},newObject:mn,newAdditionalObject:Qi,newObjectDeferred:Mn,newObjectDeferredBegin:Nr,getFilters:gn,putStream:ei,events:Vt,scaleFactor:st,pageSize:{getWidth:function(){return zs(J)},setWidth:function(T){Il(J,T)},getHeight:function(){return ds(J)},setHeight:function(T){Io(J,T)}},encryptionOptions:m,encryption:Dn,getEncryptor:bl,output:No,getNumberOfPages:rs,pages:De,out:$,f2:ne,f3:F,getPageInfo:_o,getPageInfoByObjId:Tt,getCurrentPageInfo:is,getPDFVersion:A,Point:Fs,Rectangle:Tl,Matrix:At,hasHotfix:Ds},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return zs(J)},set:function(T){Il(J,T)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return ds(J)},set:function(T){Io(J,T)},enumerable:!0,configurable:!0}),vl.call(v,he),Rt="F1",bo(s,n),Vt.publish("initialized"),v}Ku.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ku.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Ku.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ku.prototype.processOwnerPassword=function(t,e){return Jp(Vp(e).substr(0,5),t)},Ku.prototype.encryptor=function(t,e){var n=Vp(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Jp(n,i)}},Rf.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bn(t)!==bn(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},Lt.API={events:[]},Lt.version="2.5.1";var or=Lt.API,Tm=1,nu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},al=function(t){return t.toFixed(5)};or.__acroform__={};var Zi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},V1=function(t){return t*Tm},ks=function(t){var e=new vv,n=vt.internal.getHeight(t)||0,i=vt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(zt(i)),Number(zt(n))],e},wC=or.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},SC=or.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},NC=or.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},cr=or.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return NC(t,e-1)},dr=or.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wC(t,e-1)},fr=or.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SC(t,e-1)},_C=or.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,s=t[0],o=t[1],l=t[2],c=t[3],d={};return d.lowerLeft_X=n(s)||0,d.lowerLeft_Y=i(o+c)||0,d.upperRight_X=n(s+l)||0,d.upperRight_Y=i(o)||0,[Number(zt(d.lowerLeft_X)),Number(zt(d.lowerLeft_Y)),Number(zt(d.upperRight_X)),Number(zt(d.upperRight_Y))]},AC=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=Yp(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+zt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=ks(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},Yp=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map((function(F){return F.split(`
`)})):s.map((function(F){return[F]}));var o=n,l=vt.internal.getHeight(t)||0;l=l<0?-l:l;var c=vt.internal.getWidth(t)||0;c=c<0?-c:c;var d=function(F,j,W){if(F+1<s.length){var M=j+" "+s[F+1][0];return hf(M,t,W).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var h,m,x=hf("3",t,o).height,w=t.multiline?l-o:(l-x)/2,v=w+=2,I=0,A=0,E=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+hf(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var C="",R=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var z=!1;if(s[D].length!==1&&E!==s[D].length-1){if((x+2)*(R+2)+2>l)continue e;C+=s[D][E],z=!0,A=D,D--}else{C=(C+=s[D][E]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var B=parseInt(D),se=d(B,C,o),q=D>=s.length-1;if(se&&!q){C+=" ",E=0;continue}if(se||q){if(q)A=B;else if(t.multiline&&(x+2)*(R+2)+2>l)continue e}else{if(!t.multiline||(x+2)*(R+2)+2>l)continue e;A=B}}for(var G="",Q=I;Q<=A;Q++){var ne=s[Q];if(t.multiline){if(Q===A){G+=ne[E]+" ",E=(E+1)%ne.length;continue}if(Q===I){G+=ne[ne.length-1]+" ";continue}}G+=ne[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,m=hf(G,t,o).width,t.textAlign){case"right":h=c-m-2;break;case"center":h=(c-m)/2;break;case"left":default:h=2}e+=zt(h)+" "+zt(v)+` Td
`,e+="("+nu(G)+`) Tj
`,e+=-zt(h)+` 0 Td
`,v=-(o+2),m=0,I=z?A:A+1,R++,C=""}break}return i.text=e,i.fontSize=o,i},hf=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},CC={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TC=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(i){return i.type===n.type&&i.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},EC=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),bn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[i]}},IC=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ts.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(CC)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tm=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new xv,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];o.objId=void 0,o.hasAnnotation&&TC(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(i,s){var o=!i;for(var l in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],d=[],h=c.Rect;if(c.Rect&&(c.Rect=_C(c.Rect,s)),s.internal.newObjectDeferredBegin(c.objId,!0),c.DA=vt.createDefaultAppearanceStream(c),bn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=AC(c);d.push({key:"AP",value:"<</N "+m+">>"}),s.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var x="";for(var w in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(w)){var v=c.appearanceStreamContent[w];if(x+="/"+w+" ",x+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var l in v)if(v.hasOwnProperty(l)){var I=v[l];typeof I=="function"&&(I=I.call(s,c)),x+="/"+l+" "+I+" ",s.internal.acroformPlugin.xForms.indexOf(I)>=0||s.internal.acroformPlugin.xForms.push(I)}}else typeof(I=v)=="function"&&(I=I.call(s,c)),x+="/"+l+" "+I,s.internal.acroformPlugin.xForms.indexOf(I)>=0||s.internal.acroformPlugin.xForms.push(I);x+=">>"}d.push({key:"AP",value:`<<
`+x+">>"})}s.internal.putStream({additionalKeyValues:d,objectId:c.objId}),s.internal.out("endobj")}o&&EC(s.internal.acroformPlugin.xForms,s)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},yv=or.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(o!==0&&(s+=" "),bn(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),s+="("+nu(i(t[o].toString()))+")"):s+=t[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wp=function(t,e,n){var i=function(s){return s};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+nu(i(t))+")"},Ls=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ls.prototype.toString=function(){return this.objId+" 0 R"},Ls.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ls.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],s=this[i];s&&(Array.isArray(s)?t.push({key:i,value:yv(s,this.objId,this.scope)}):s instanceof Ls?(s.scope=this.scope,t.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:i,value:s}))}return t};var vv=function(){Ls.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Zi(vv,Ls);var xv=function(){Ls.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+nu(n(t))+")"}},set:function(n){t=n}})};Zi(xv,Ls);var ts=function t(){Ls.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cr(e,3)},set:function(C){C?this.F=dr(e,3):this.F=fr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(C){i=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(C){i[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(C){i[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(C){i[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(C){i[3]=C}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Mf)return;o="FieldObject"+t.FieldNum++}var C=function(R){return R};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+nu(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Tm:h},set:function(C){h=C}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(C){m=C}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Mf||this instanceof Kl))return wp(x,this.objId,this.scope)},set:function(C){C=C.toString(),x=C}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof qr?w:wp(w,this.objId,this.scope)},set:function(C){C=C.toString(),w=this instanceof qr?C:C.substr(0,1)==="("?Wu(C.substr(1,C.length-2)):Wu(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qr?Wu(w.substr(1,w.length-1)):w},set:function(C){C=C.toString(),w=this instanceof qr?"/"+C:C}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof qr?v:wp(v,this.objId,this.scope)},set:function(C){C=C.toString(),v=this instanceof qr?C:C.substr(0,1)==="("?Wu(C.substr(1,C.length-2)):Wu(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qr?Wu(v.substr(1,v.length-1)):v},set:function(C){C=C.toString(),v=this instanceof qr?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(C){C=!!C,A=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(C){I=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,1)},set:function(C){C?this.Ff=dr(this.Ff,1):this.Ff=fr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,2)},set:function(C){C?this.Ff=dr(this.Ff,2):this.Ff=fr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,3)},set:function(C){C?this.Ff=dr(this.Ff,3):this.Ff=fr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');E=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(E){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Zi(ts,Ls);var ac=function(){ts.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yv(e,this.objId,this.scope)},set:function(n){var i,s;s=[],typeof(i=n)=="string"&&(s=(function(o,l,c){c||(c=1);for(var d,h=[];d=l.exec(o);)h.push(d[c]);return h})(i,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,18)},set:function(n){n?this.Ff=dr(this.Ff,18):this.Ff=fr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=dr(this.Ff,19):this.Ff=fr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,20)},set:function(n){n?(this.Ff=dr(this.Ff,20),e.sort()):this.Ff=fr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,22)},set:function(n){n?this.Ff=dr(this.Ff,22):this.Ff=fr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(n){n?this.Ff=dr(this.Ff,23):this.Ff=fr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,27)},set:function(n){n?this.Ff=dr(this.Ff,27):this.Ff=fr(this.Ff,27)}}),this.hasAppearanceStream=!1};Zi(ac,ts);var sc=function(){ac.call(this),this.fontName="helvetica",this.combo=!1};Zi(sc,ac);var oc=function(){sc.call(this),this.combo=!0};Zi(oc,sc);var wf=function(){oc.call(this),this.edit=!0};Zi(wf,oc);var qr=function(){ts.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,15)},set:function(n){n?this.Ff=dr(this.Ff,15):this.Ff=fr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,16)},set:function(n){n?this.Ff=dr(this.Ff,16):this.Ff=fr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,17)},set:function(n){n?this.Ff=dr(this.Ff,17):this.Ff=fr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(n){n?this.Ff=dr(this.Ff,26):this.Ff=fr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,s=[];for(i in s.push("<<"),e)s.push("/"+i+" ("+nu(n(e[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){bn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Zi(qr,ts);var Sf=function(){qr.call(this),this.pushButton=!0};Zi(Sf,qr);var lc=function(){qr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Zi(lc,qr);var Mf=function(){var t,e;ts.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(c){return c};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),i)l.push("/"+o+" ("+nu(s(i[o]))+")");return l.push(">>"),l.join(`
`)},set:function(s){bn(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zi(Mf,ts),lc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},lc.prototype.createOption=function(t){var e=new Mf;return e.Parent=this,e.optionName=t,this.Kids.push(e),kC.call(this.scope,e),e};var Nf=function(){qr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Zi(Nf,qr);var Kl=function(){ts.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,13)},set:function(e){e?this.Ff=dr(this.Ff,13):this.Ff=fr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,21)},set:function(e){e?this.Ff=dr(this.Ff,21):this.Ff=fr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,23)},set:function(e){e?this.Ff=dr(this.Ff,23):this.Ff=fr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,24)},set:function(e){e?this.Ff=dr(this.Ff,24):this.Ff=fr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,25)},set:function(e){e?this.Ff=dr(this.Ff,25):this.Ff=fr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,26)},set:function(e){e?this.Ff=dr(this.Ff,26):this.Ff=fr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zi(Kl,ts);var _f=function(){Kl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cr(this.Ff,14)},set:function(t){t?this.Ff=dr(this.Ff,14):this.Ff=fr(this.Ff,14)}}),this.password=!0};Zi(_f,Kl);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),o=Yp(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+zt(vt.internal.getWidth(t))+" "+zt(vt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+zt(o.fontSize)+" Tf "+s),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ks(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=[],o=vt.internal.getHeight(t),l=vt.internal.getWidth(t),c=Yp(t,t.caption);return s.push("1 g"),s.push("0 0 "+zt(l)+" "+zt(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+zt(l-1)+" "+zt(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+zt(c.fontSize)+" Tf "+i),s.push(c.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(vt.internal.getWidth(t))+" "+zt(vt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=vt.RadioButton.Circle.YesNormal,e.D[t]=vt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ks(t);e.scope=t.scope;var n=[],i=vt.internal.getWidth(t)<=vt.internal.getHeight(t)?vt.internal.getWidth(t)/4:vt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=vt.internal.Bezier_C,o=Number((i*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+al(vt.internal.getWidth(t)/2)+" "+al(vt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=[],i=vt.internal.getWidth(t)<=vt.internal.getHeight(t)?vt.internal.getWidth(t)/4:vt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),o=Number((s*vt.internal.Bezier_C).toFixed(5)),l=Number((i*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+al(vt.internal.getWidth(t)/2)+" "+al(vt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+al(vt.internal.getWidth(t)/2)+" "+al(vt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=[],i=vt.internal.getWidth(t)<=vt.internal.getHeight(t)?vt.internal.getWidth(t)/4:vt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),o=Number((s*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+al(vt.internal.getWidth(t)/2)+" "+al(vt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=vt.RadioButton.Cross.YesNormal,e.D[t]=vt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ks(t);e.scope=t.scope;var n=[],i=vt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+zt(vt.internal.getWidth(t)-2)+" "+zt(vt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(zt(i.x1.x)+" "+zt(i.x1.y)+" m"),n.push(zt(i.x2.x)+" "+zt(i.x2.y)+" l"),n.push(zt(i.x4.x)+" "+zt(i.x4.y)+" m"),n.push(zt(i.x3.x)+" "+zt(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=vt.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(vt.internal.getWidth(t))+" "+zt(vt.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+zt(vt.internal.getWidth(t)-2)+" "+zt(vt.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(zt(n.x1.x)+" "+zt(n.x1.y)+" m"),i.push(zt(n.x2.x)+" "+zt(n.x2.y)+" l"),i.push(zt(n.x4.x)+" "+zt(n.x4.y)+" m"),i.push(zt(n.x3.x)+" "+zt(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=ks(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(vt.internal.getWidth(t))+" "+zt(vt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=vt.internal.getWidth(t),n=vt.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},vt.internal.getWidth=function(t){var e=0;return bn(t)==="object"&&(e=V1(t.Rect[2])),e},vt.internal.getHeight=function(t){var e=0;return bn(t)==="object"&&(e=V1(t.Rect[3])),e};var kC=or.addField=function(t){if(IC(this,t),!(t instanceof ts))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};or.AcroFormChoiceField=ac,or.AcroFormListBox=sc,or.AcroFormComboBox=oc,or.AcroFormEditBox=wf,or.AcroFormButton=qr,or.AcroFormPushButton=Sf,or.AcroFormRadioButton=lc,or.AcroFormCheckBox=Nf,or.AcroFormTextField=Kl,or.AcroFormPasswordField=_f,or.AcroFormAppearance=vt,or.AcroForm={ChoiceField:ac,ListBox:sc,ComboBox:oc,EditBox:wf,Button:qr,PushButton:Sf,RadioButton:lc,CheckBox:Nf,TextField:Kl,PasswordField:_f,Appearance:vt},Lt.AcroForm={ChoiceField:ac,ListBox:sc,ComboBox:oc,EditBox:wf,Button:qr,PushButton:Sf,RadioButton:lc,CheckBox:Nf,TextField:Kl,PasswordField:_f,Appearance:vt};Lt.AcroForm;function bv(t){return t.reduce((function(e,n,i){return e[n]=i,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(F,j){var W,M,ce,ee,ae,me=e;if((j=j||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(se(F))for(ae in n)for(ce=n[ae],W=0;W<ce.length;W+=1){for(ee=!0,M=0;M<ce[W].length;M+=1)if(ce[W][M]!==void 0&&ce[W][M]!==F[M]){ee=!1;break}if(ee===!0){me=ae;break}}else for(ae in n)for(ce=n[ae],W=0;W<ce.length;W+=1){for(ee=!0,M=0;M<ce[W].length;M+=1)if(ce[W][M]!==void 0&&ce[W][M]!==F.charCodeAt(M)){ee=!1;break}if(ee===!0){me=ae;break}}return me===e&&j!==e&&(me=j),me},s=function F(j){for(var W=this.internal.write,M=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:j.width}),ee.push({key:"Height",value:j.height}),j.colorSpace===E.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===E.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var ae="",me=0,pe=j.transparency.length;me<pe;me++)ae+=j.transparency[me]+" "+j.transparency[me]+" ";ee.push({key:"Mask",value:"["+ae+"]"})}j.sMask!==void 0&&ee.push({key:"SMask",value:j.objectId+1+" 0 R"});var ve=j.filter!==void 0?["/"+j.filter]:void 0;if(M({data:j.data,additionalKeyValues:ee,alreadyAppliedFilters:ve,objectId:j.objectId}),W("endobj"),"sMask"in j&&j.sMask!==void 0){var H="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,L={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:H,data:j.sMask};"filter"in j&&(L.filter=j.filter),F.call(this,L)}if(j.colorSpace===E.INDEXED){var J=this.internal.newObject();M({data:G(new Uint8Array(j.palette)),objectId:J}),W("endobj")}},o=function(){var F=this.internal.collections.addImage_images;for(var j in F)s.call(this,F[j])},l=function(){var F,j=this.internal.collections.addImage_images,W=this.internal.write;for(var M in j)W("/I"+(F=j[M]).index,F.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var F=this.internal.collections.addImage_images;return c.call(this),F},h=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function(F){return typeof t["process"+F.toUpperCase()]=="function"},x=function(F){return bn(F)==="object"&&F.nodeType===1},w=function(F,j){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var W=""+F.getAttribute("src");if(W.indexOf("data:image/")===0)return cd(unescape(W).split("base64,").pop());var M=t.loadFile(W,!0);if(M!==void 0)return M}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ce;switch(j){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;case"JPEG":case"JPG":default:ce="image/jpeg"}return cd(F.toDataURL(ce,1).split("base64,").pop())}},v=function(F){var j=this.internal.collections.addImage_images;if(j){for(var W in j)if(F===j[W].alias)return j[W]}},I=function(F,j,W){return F||j||(F=-96,j=-96),F<0&&(F=-1*W.width*72/F/this.internal.scaleFactor),j<0&&(j=-1*W.height*72/j/this.internal.scaleFactor),F===0&&(F=j*W.width/W.height),j===0&&(j=F*W.height/W.width),[F,j]},A=function(F,j,W,M,ce,ee){var ae=I.call(this,W,M,ce),me=this.internal.getCoordinateString,pe=this.internal.getVerticalCoordinateString,ve=d.call(this);if(W=ae[0],M=ae[1],ve[ce.index]=ce,ee){ee*=Math.PI/180;var H=Math.cos(ee),L=Math.sin(ee),J=function(ie){return ie.toFixed(4)},K=[J(H),J(L),J(-1*L),J(H),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,me(F),pe(j+M),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([me(W),"0","0",me(M),"0","0","cm"].join(" "))):this.internal.write([me(W),"0","0",me(M),me(F),pe(j+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(F){var j,W,M=0;if(typeof F=="string")for(W=F.length,j=0;j<W;j++)M=(M<<5)-M+F.charCodeAt(j),M|=0;else if(se(F))for(W=F.byteLength/2,j=0;j<W;j++)M=(M<<5)-M+F[j],M|=0;return M},D=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var j=!0;return F.length===0&&(j=!1),F.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(j=!1),j},z=t.__addimage__.extractImageFromDataUrl=function(F){var j=(F=F||"").split("base64,"),W=null;if(j.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(M)&&(W={mimeType:M[1],charset:M[2],data:j[1]})}return W},B=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(F){return B()&&F instanceof ArrayBuffer};var se=t.__addimage__.isArrayBufferView=function(F){return B()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},q=t.__addimage__.binaryStringToUint8Array=function(F){for(var j=F.length,W=new Uint8Array(j),M=0;M<j;M++)W[M]=F.charCodeAt(M);return W},G=t.__addimage__.arrayBufferToBinaryString=function(F){for(var j="",W=se(F)?F:new Uint8Array(F),M=0;M<W.length;M+=8192)j+=String.fromCharCode.apply(null,W.subarray(M,M+8192));return j};t.addImage=function(){var F,j,W,M,ce,ee,ae,me,pe;if(typeof arguments[1]=="number"?(j=e,W=arguments[1],M=arguments[2],ce=arguments[3],ee=arguments[4],ae=arguments[5],me=arguments[6],pe=arguments[7]):(j=arguments[1],W=arguments[2],M=arguments[3],ce=arguments[4],ee=arguments[5],ae=arguments[6],me=arguments[7],pe=arguments[8]),bn(F=arguments[0])==="object"&&!x(F)&&"imageData"in F){var ve=F;F=ve.imageData,j=ve.format||j||e,W=ve.x||W||0,M=ve.y||M||0,ce=ve.w||ve.width||ce,ee=ve.h||ve.height||ee,ae=ve.alias||ae,me=ve.compression||me,pe=ve.rotation||ve.angle||pe}var H=this.internal.getFilters();if(me===void 0&&H.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(W)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=Q.call(this,F,j,ae,me);return A.call(this,W,M,ce,ee,L,pe),this};var Q=function(F,j,W,M){var ce,ee,ae;if(typeof F=="string"&&i(F)===e){F=unescape(F);var me=ne(F,!1);(me!==""||(me=t.loadFile(F,!0))!==void 0)&&(F=me)}if(x(F)&&(F=w(F,j)),j=i(F,j),!m(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((ae=W)==null||ae.length===0)&&(W=(function(pe){return typeof pe=="string"||se(pe)?R(pe):se(pe.data)?R(pe.data):null})(F)),(ce=v.call(this,W))||(B()&&(F instanceof Uint8Array||j==="RGBA"||(ee=F,F=q(F))),ce=this["process"+j.toUpperCase()](F,h.call(this),W,(function(pe){return pe&&typeof pe=="string"&&(pe=pe.toUpperCase()),pe in t.image_compression?pe:C.NONE})(M),ee)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},ne=t.__addimage__.convertBase64ToBinaryString=function(F,j){var W;j=typeof j!="boolean"||j;var M,ce="";if(typeof F=="string"){M=(W=z(F))!==null?W.data:F;try{ce=cd(M)}catch(ee){if(j)throw D(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ce};t.getImageProperties=function(F){var j,W,M="";if(x(F)&&(F=w(F)),typeof F=="string"&&i(F)===e&&((M=ne(F,!1))===""&&(M=t.loadFile(F)||""),F=M),W=i(F),!m(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(!B()||F instanceof Uint8Array||(F=q(F)),!(j=this["process"+W.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=W,j}})(Lt.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Lt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,s,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,m=!1,x=0;x<h.length&&!m;x++)switch((i=h[x]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){i=h[w];var v=this.internal.pdfEscape,I=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(A.objId),R=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+v(C(i.contents))+")",o+=" /Popup "+E.objId+" 0 R",o+=" /P "+d.objId+" 0 R",o+=" /T ("+v(C(R))+") >>",A.content=o;var D=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(o+=" /Open true"),o+=" >>",E.content=o,this.internal.write(A.objId,"0 R",E.objId,"0 R");break;case"freetext":s="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var z=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+v(I(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var B=this.annotations._nameMap[i.options.name];i.options.pageNumber=B.page,i.options.top=B.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+v(I(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var se=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+se+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,s,o,l){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(n),y:h(i),w:d(n+s),h:h(i+o)},options:l,type:"link"})},t.textWithLink=function(n,i,s,o){var l,c,d=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(n,c).length;l=Math.ceil(h*m)}else c=d,l=h;return this.text(n,i,s,o),s+=.2*h,o.align==="center"&&(i-=d/2),o.align==="right"&&(i-=d),this.link(i,s-h,c,l,o),d},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(Lt.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},c=t.__arabicParser__.isArabicEndLetter=function(A){return l(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(A){return l(A)&&s.indexOf(A.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return l(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(A){return l(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(A){return l(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(A){return l(A)&&o(A)&&e[A.charCodeAt(0)].length==4},x=t.__arabicParser__.resolveLigatures=function(A){var E=0,C=n,R="",D=0;for(E=0;E<A.length;E+=1)C[A.charCodeAt(E)]!==void 0?(D++,typeof(C=C[A.charCodeAt(E)])=="number"&&(R+=String.fromCharCode(C),C=n,D=0),E===A.length-1&&(C=n,R+=A.charAt(E-(D-1)),E-=D-1,D=0)):(C=n,R+=A.charAt(E-D),E-=D,D=0);return R};t.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&i[A.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(A,E,C){return l(A)?o(A)===!1?-1:!h(A)||!l(E)&&!l(C)||!l(C)&&c(E)||c(A)&&!l(E)||c(A)&&d(E)||c(A)&&c(E)?0:m(A)&&l(E)&&!c(E)&&l(C)&&h(C)?3:c(A)||!l(C)?1:2:-1},v=function(A){var E=0,C=0,R=0,D="",z="",B="",se=(A=A||"").split("\\s+"),q=[];for(E=0;E<se.length;E+=1){for(q.push(""),C=0;C<se[E].length;C+=1)D=se[E][C],z=se[E][C-1],B=se[E][C+1],l(D)?(R=w(D,z,B),q[E]+=R!==-1?String.fromCharCode(e[D.charCodeAt(0)][R]):D):q[E]+=D;q[E]=x(q[E])}return q.join(" ")},I=t.__arabicParser__.processArabic=t.processArabic=function(){var A,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(E)){var R=0;for(C=[],R=0;R<E.length;R+=1)Array.isArray(E[R])?C.push([v(E[R][0]),E[R][1],E[R][2]]):C.push([v(E[R])]);A=C}else A=v(E);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};t.events.push(["preProcessText",I])})(Lt.API),Lt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var s;if((n=n||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Lt.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(A){d=A}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(A){x=A}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(A){w=A}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(A){I=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return i.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,h){i.call(this);var m=(h=h||{}).fontSize||this.getFontSize(),x=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,v=0,I=0,A=0,E=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=h.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce((function(D,z){return D.concat(E.splitTextToSize(z,C))}),[])):d=Array.isArray(d)?d:[d];for(var R=0;R<d.length;R++)v<(A=this.getStringUnitWidth(d[R],{font:x})*m)&&(v=A);return v!==0&&(I=d.length),{w:v/=w,h:Math.max((I*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var d;d=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,x=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=x.top,v&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-m,d.y+m,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+m,{align:"center",baseline:"top",maxWidth:d.width-m-m}):this.text(d.text,d.x+m,d.y+m,{align:"left",baseline:"top",maxWidth:d.width-m-m})),this.internal.__cell__.lastCell=d,this};t.table=function(d,h,m,x,w){if(i.call(this),!m)throw new Error("No data for PDF table.");var v,I,A,E,C=[],R=[],D=[],z={},B={},se=[],q=[],G=(w=w||{}).autoSize||!1,Q=w.printHeaders!==!1,ne=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,F=w.margins||Object.assign({width:this.getPageWidth()},e),j=typeof w.padding=="number"?w.padding:3,W=w.headerBackgroundColor||"#c8c8c8",M=w.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=ne,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=M,this.setFontSize(ne),x==null)R=C=Object.keys(m[0]),D=C.map((function(){return"left"}));else if(Array.isArray(x)&&bn(x[0])==="object")for(C=x.map((function(ve){return ve.name})),R=x.map((function(ve){return ve.prompt||ve.name||""})),D=x.map((function(ve){return ve.align||"left"})),v=0;v<x.length;v+=1)B[x[v].name]=x[v].width*(19.049976/25.4);else Array.isArray(x)&&typeof x[0]=="string"&&(R=C=x,D=C.map((function(){return"left"})));if(G||Array.isArray(x)&&typeof x[0]=="string")for(v=0;v<C.length;v+=1){for(z[E=C[v]]=m.map((function(ve){return ve[E]})),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(R[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=z[E],this.setFont(void 0,"normal"),A=0;A<I.length;A+=1)se.push(this.getTextDimensions(I[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[E]=Math.max.apply(null,se)+j+j,se=[]}if(Q){var ce={};for(v=0;v<C.length;v+=1)ce[C[v]]={},ce[C[v]].text=R[v],ce[C[v]].align=D[v];var ee=c.call(this,ce,B);q=C.map((function(ve){return new o(d,h,B[ve],ee,ce[ve].text,void 0,ce[ve].align)})),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var ae=x.reduce((function(ve,H){return ve[H.name]=H.align,ve}),{});for(v=0;v<m.length;v+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:v,data:m[v]},this);var me=c.call(this,m[v],B);for(A=0;A<C.length;A+=1){var pe=m[v][C[A]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:v,col:A,data:pe},this),l.call(this,new o(d,h,B[C[A]],me,pe,v+2,ae[C[A]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var c=function(d,h){var m=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map((function(v){var I=d[v];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,h[v]-m-m)}),this).map((function(v){return this.getLineHeightFactor()*v.length*x/w+m+m}),this).reduce((function(v,I){return Math.max(v,I)}),0)};t.setTableHeaderRow=function(d){i.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){m=this.internal.__cell__.tableHeaderRow[v].clone(),h&&(m.y=this.internal.__cell__.margins.top||0,w.push(m)),m.lineNumber=d;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,m),this.setTextColor(I)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}})(Lt.API);var wv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Sv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Wp=bv(Sv),Nv=[100,200,300,400,500,600,700,800,900],LC=bv(Nv);function $p(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return wv[o=o||"normal"]?o:"normal"})(t.style),i=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),s=(function(o){return typeof Wp[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:i,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,i].join(" ")}}}function J1(t,e,n,i){var s;for(s=n;s>=0&&s<e.length;s+=i)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=i)if(t[e[s]])return t[e[s]]}var RC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Y1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function W1(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function MC(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},RC,n.genericFontFamilies||{}),o=null,l=null,c=0;c<e.length;++c)if(s[(o=$p(e[c])).family]&&(o.family=s[o.family]),t.hasOwnProperty(o.family)){l=t[o.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+W1(o)+"' and default family '"+i+"'.");if(l=(function(d,h){if(h[d])return h[d];var m=Wp[d],x=m<=Wp.normal?-1:1,w=J1(h,Sv,m,x);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w})(o.stretch,l),l=(function(d,h){if(h[d])return h[d];for(var m=wv[d],x=0;x<m.length;++x)if(h[m[x]])return h[m[x]];throw new Error("Could not find a matching font-style for "+d)})(o.style,l),!(l=(function(d,h){if(h[d])return h[d];if(d===400&&h[500])return h[500];if(d===500&&h[400])return h[400];var m=LC[d],x=J1(h,Nv,m,d<400?-1:1);if(!x)throw new Error("Could not find a matching font-weight for value "+d);return x})(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+W1(o)+"'.");return l}function $1(t){return t.trimLeft()}function jC(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function DC(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var pf,K1,X1,Sp=["times"];(function(t){var e,n,i,s,o,l,c,d,h,m=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new d,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new l,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new l,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new x(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,h=new m}]);var x=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=L;Object.defineProperty(this,"pdf",{get:function(){return J}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(ye){K=!!ye}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(ye){ie=!!ye}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(ye){isNaN(ye)||(xe=ye)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(ye){isNaN(ye)||(Ae=ye)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ye){var $;typeof ye=="number"?$=[ye,ye,ye,ye]:(($=new Array(4))[0]=ye[0],$[1]=ye.length>=2?ye[1]:$[0],$[2]=ye.length>=3?ye[2]:$[0],$[3]=ye.length>=4?ye[3]:$[1]),h.margin=$}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(ye){Ce=ye}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(ye){Ee=ye}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(ye){Re=ye}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ye){ye instanceof m&&(h=ye)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ye){h.path=ye}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(ye){De=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var $;$=w(ye),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var $=w(ye);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var He=null;function Xe(ye,$){if(He===null){var de=(function(oe){var he=[];return Object.keys(oe).forEach((function(Ie){oe[Ie].forEach((function(Le){var be=null;switch(Le){case"bold":be={family:Ie,weight:"bold"};break;case"italic":be={family:Ie,style:"italic"};break;case"bolditalic":be={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":be={family:Ie}}be!==null&&(be.ref={name:Ie,style:Le},he.push(be))}))})),he})(ye.getFontList());He=(function(oe){for(var he={},Ie=0;Ie<oe.length;++Ie){var Le=$p(oe[Ie]),be=Le.family,je=Le.stretch,Oe=Le.style,Je=Le.weight;he[be]=he[be]||{},he[be][je]=he[be][je]||{},he[be][je][Oe]=he[be][je][Oe]||{},he[be][je][Oe][Je]=Le}return he})(de.concat($))}return He}var U=null;Object.defineProperty(this,"fontFaces",{get:function(){return U},set:function(ye){He=null,U=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var $;if(this.ctx.font=ye,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var de=$[1],oe=($[2],$[3]),he=$[4],Ie=($[5],$[6]),Le=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Le==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Le==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var be=(function(mt){var Rt,st,Rn=[],gt=mt.trim();if(gt==="")return Sp;if(gt in Y1)return[Y1[gt]];for(;gt!=="";){switch(st=null,Rt=(gt=$1(gt)).charAt(0)){case'"':case"'":st=jC(gt.substring(1),Rt);break;default:st=DC(gt)}if(st===null||(Rn.push(st[0]),(gt=$1(st[1]))!==""&&gt.charAt(0)!==","))return Sp;gt=gt.replace(/^,/,"")}return Rn})(Ie);if(this.fontFaces){var je=MC(Xe(this.pdf,this.fontFaces),be.map((function(mt){return{family:mt,stretch:"normal",weight:oe,style:de}})));this.pdf.setFont(je.ref.name,je.ref.style)}else{var Oe="";(oe==="bold"||parseInt(oe,10)>=700||de==="bold")&&(Oe="bold"),de==="italic"&&(Oe+="italic"),Oe.length===0&&(Oe="normal");for(var Je="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<be.length;dt++){if(this.pdf.internal.getFont(be[dt],Oe,{noFallback:!0,disableWarning:!0})!==void 0){Je=be[dt];break}if(Oe==="bolditalic"&&this.pdf.internal.getFont(be[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Je=be[dt],Oe="bold";else if(this.pdf.internal.getFont(be[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Je=be[dt],Oe="normal";break}}if(Je===""){for(var pt=0;pt<be.length;pt++)if(at[be[pt]]){Je=at[be[pt]];break}}Je=Je===""?"Times":Je,this.pdf.setFont(Je,Oe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};x.prototype.setLineDash=function(L){this.lineDash=L},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){z.call(this,"fill",!1)},x.prototype.stroke=function(){z.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(L,J){if(isNaN(L)||isNaN(J))throw Ln.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new l(L,J));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(L,J)},x.prototype.closePath=function(){var L=new l(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&bn(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){L=new l(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(L.x,L.y)},x.prototype.lineTo=function(L,J){if(isNaN(L)||isNaN(J))throw Ln.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new l(L,J));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(K.x,K.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},x.prototype.quadraticCurveTo=function(L,J,K,ie){if(isNaN(K)||isNaN(ie)||isNaN(L)||isNaN(J))throw Ln.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new l(K,ie)),Ae=this.ctx.transform.applyToPoint(new l(L,J));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},x.prototype.bezierCurveTo=function(L,J,K,ie,xe,Ae){if(isNaN(xe)||isNaN(Ae)||isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie))throw Ln.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new l(xe,Ae)),Ee=this.ctx.transform.applyToPoint(new l(L,J)),Re=this.ctx.transform.applyToPoint(new l(K,ie));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Re.x,y2:Re.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new l(Ce.x,Ce.y)},x.prototype.arc=function(L,J,K,ie,xe,Ae){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie)||isNaN(xe))throw Ln.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new l(L,J));L=Ce.x,J=Ce.y;var Ee=this.ctx.transform.applyToPoint(new l(0,K)),Re=this.ctx.transform.applyToPoint(new l(0,0));K=Math.sqrt(Math.pow(Ee.x-Re.x,2)+Math.pow(Ee.y-Re.y,2))}Math.abs(xe-ie)>=2*Math.PI&&(ie=0,xe=2*Math.PI),this.path.push({type:"arc",x:L,y:J,radius:K,startAngle:ie,endAngle:xe,counterclockwise:Ae})},x.prototype.arcTo=function(L,J,K,ie,xe){throw new Error("arcTo not implemented.")},x.prototype.rect=function(L,J,K,ie){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie))throw Ln.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,J),this.lineTo(L+K,J),this.lineTo(L+K,J+ie),this.lineTo(L,J+ie),this.lineTo(L,J),this.lineTo(L+K,J),this.lineTo(L,J)},x.prototype.fillRect=function(L,J,K,ie){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie))throw Ln.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,J,K,ie),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},x.prototype.strokeRect=function(L,J,K,ie){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie))throw Ln.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(L,J,K,ie),this.stroke())},x.prototype.clearRect=function(L,J,K,ie){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie))throw Ln.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,J,K,ie))},x.prototype.save=function(L){L=typeof L!="boolean"||L;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},x.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(J),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(L){var J,K,ie,xe;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))J=0,K=0,ie=0,xe=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Ae!==null)J=parseInt(Ae[1]),K=parseInt(Ae[2]),ie=parseInt(Ae[3]),xe=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)J=parseInt(Ae[1]),K=parseInt(Ae[2]),ie=parseInt(Ae[3]),xe=parseFloat(Ae[4]);else{if(xe=1,typeof L=="string"&&L.charAt(0)!=="#"){var Ce=new pv(L);L=Ce.ok?Ce.toHex():"#000000"}L.length===4?(J=L.substring(1,2),J+=J,K=L.substring(2,3),K+=K,ie=L.substring(3,4),ie+=ie):(J=L.substring(1,3),K=L.substring(3,5),ie=L.substring(5,7)),J=parseInt(J,16),K=parseInt(K,16),ie=parseInt(ie,16)}}return{r:J,g:K,b:ie,a:xe,style:L}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(L,J,K,ie){if(isNaN(J)||isNaN(K)||typeof L!="string")throw Ln.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!v.call(this)){var xe=me(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;j.call(this,{text:L,x:J,y:K,scale:Ae,angle:xe,align:this.textAlign,maxWidth:ie})}},x.prototype.strokeText=function(L,J,K,ie){if(isNaN(J)||isNaN(K)||typeof L!="string")throw Ln.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){ie=isNaN(ie)?void 0:ie;var xe=me(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;j.call(this,{text:L,x:J,y:K,scale:Ae,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:ie})}},x.prototype.measureText=function(L){if(typeof L!="string")throw Ln.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,K=this.pdf.internal.scaleFactor,ie=J.internal.getFontSize(),xe=J.getStringUnitWidth(L)*ie/J.internal.scaleFactor,Ae=function(Ce){var Ee=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this};return new Ae({width:xe*=Math.round(96*K/72*1e4)/1e4})},x.prototype.scale=function(L,J){if(isNaN(L)||isNaN(J))throw Ln.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new d(L,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},x.prototype.rotate=function(L){if(isNaN(L))throw Ln.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new d(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},x.prototype.translate=function(L,J){if(isNaN(L)||isNaN(J))throw Ln.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new d(1,0,0,1,L,J);this.ctx.transform=this.ctx.transform.multiply(K)},x.prototype.transform=function(L,J,K,ie,xe,Ae){if(isNaN(L)||isNaN(J)||isNaN(K)||isNaN(ie)||isNaN(xe)||isNaN(Ae))throw Ln.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new d(L,J,K,ie,xe,Ae);this.ctx.transform=this.ctx.transform.multiply(Ce)},x.prototype.setTransform=function(L,J,K,ie,xe,Ae){L=isNaN(L)?1:L,J=isNaN(J)?0:J,K=isNaN(K)?0:K,ie=isNaN(ie)?1:ie,xe=isNaN(xe)?0:xe,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new d(L,J,K,ie,xe,Ae)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(L,J,K,ie,xe,Ae,Ce,Ee,Re){var De=this.pdf.getImageProperties(L),He=1,Xe=1,U=1,ye=1;ie!==void 0&&Ee!==void 0&&(U=Ee/ie,ye=Re/xe,He=De.width/ie*Ee/ie,Xe=De.height/xe*Re/xe),Ae===void 0&&(Ae=J,Ce=K,J=0,K=0),ie!==void 0&&Ee===void 0&&(Ee=ie,Re=xe),ie===void 0&&Ee===void 0&&(Ee=De.width,Re=De.height);for(var $,de=this.ctx.transform.decompose(),oe=me(de.rotate.shx),he=new d,Ie=(he=(he=(he=he.multiply(de.translate)).multiply(de.skew)).multiply(de.scale)).applyToRectangle(new c(Ae-J*U,Ce-K*ye,ie*He,xe*Xe)),Le=E.call(this,Ie),be=[],je=0;je<Le.length;je+=1)be.indexOf(Le[je])===-1&&be.push(Le[je]);if(D(be),this.autoPaging)for(var Oe=be[0],Je=be[be.length-1],at=Oe;at<Je+1;at++){this.pdf.setPage(at);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=at===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=at===1?0:mt+(at-2)*Rt;if(this.ctx.clip_path.length!==0){var Rn=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R($,this.posX+this.margin[3],-st+pt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Rn}var gt=JSON.parse(JSON.stringify(Ie));gt=R([gt],this.posX+this.margin[3],-st+pt+this.ctx.prevPageLastElemOffset)[0];var on=(at>Oe||at<Je)&&A.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Rt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,oe),on&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,oe)};var E=function(L,J,K){var ie=[];J=J||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":ie.push(Math.floor((L.y+xe)/K)+1);break;case"arc":ie.push(Math.floor((L.y+xe-L.radius)/K)+1),ie.push(Math.floor((L.y+xe+L.radius)/K)+1);break;case"qct":var Ae=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);ie.push(Math.floor((Ae.y+xe)/K)+1),ie.push(Math.floor((Ae.y+Ae.h+xe)/K)+1);break;case"bct":var Ce=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);ie.push(Math.floor((Ce.y+xe)/K)+1),ie.push(Math.floor((Ce.y+Ce.h+xe)/K)+1);break;case"rect":ie.push(Math.floor((L.y+xe)/K)+1),ie.push(Math.floor((L.y+L.h+xe)/K)+1)}for(var Ee=0;Ee<ie.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<ie[Ee];)C.call(this);return ie},C=function(){var L=this.fillStyle,J=this.strokeStyle,K=this.font,ie=this.lineCap,xe=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=J,this.font=K,this.lineCap=ie,this.lineWidth=xe,this.lineJoin=Ae},R=function(L,J,K){for(var ie=0;ie<L.length;ie++)switch(L[ie].type){case"bct":L[ie].x2+=J,L[ie].y2+=K;case"qct":L[ie].x1+=J,L[ie].y1+=K;case"mt":case"lt":case"arc":default:L[ie].x+=J,L[ie].y+=K}return L},D=function(L){return L.sort((function(J,K){return J-K}))},z=function(L,J){for(var K,ie,xe=this.fillStyle,Ae=this.strokeStyle,Ce=this.lineCap,Ee=this.lineWidth,Re=Math.abs(Ee*this.ctx.transform.scaleX),De=this.lineJoin,He=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),U=[],ye=0;ye<Xe.length;ye++)if(Xe[ye].x!==void 0)for(var $=E.call(this,Xe[ye]),de=0;de<$.length;de+=1)U.indexOf($[de])===-1&&U.push($[de]);for(var oe=0;oe<U.length;oe++)for(;this.pdf.internal.getNumberOfPages()<U[oe];)C.call(this);if(D(U),this.autoPaging)for(var he=U[0],Ie=U[U.length-1],Le=he;Le<Ie+1;Le++){this.pdf.setPage(Le),this.fillStyle=xe,this.strokeStyle=Ae,this.lineCap=Ce,this.lineWidth=Re,this.lineJoin=De;var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=Le===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=Le===1?0:Oe+(Le-2)*Je;if(this.ctx.clip_path.length!==0){var dt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(K,this.posX+this.margin[3],-at+je+this.ctx.prevPageLastElemOffset),B.call(this,L,!0),this.path=dt}if(ie=JSON.parse(JSON.stringify(He)),this.path=R(ie,this.posX+this.margin[3],-at+je+this.ctx.prevPageLastElemOffset),J===!1||Le===0){var pt=(Le>he||Le<Ie)&&A.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,Je,null).clip().discardPath()),B.call(this,L,J),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}else this.lineWidth=Re,B.call(this,L,J),this.lineWidth=Ee;this.path=He},B=function(L,J){if((L!=="stroke"||J||!I.call(this))&&(L==="stroke"||J||!v.call(this))){for(var K,ie,xe=[],Ae=this.path,Ce=0;Ce<Ae.length;Ce++){var Ee=Ae[Ce];switch(Ee.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Re=xe.length;if(Ae[Ce-1]&&!isNaN(Ae[Ce-1].x)&&(K=[Ee.x-Ae[Ce-1].x,Ee.y-Ae[Ce-1].y],Re>0)){for(;Re>=0;Re--)if(xe[Re-1].close!==!0&&xe[Re-1].begin!==!0){xe[Re-1].deltas.push(K),xe[Re-1].abs.push(Ee);break}}break;case"bct":K=[Ee.x1-Ae[Ce-1].x,Ee.y1-Ae[Ce-1].y,Ee.x2-Ae[Ce-1].x,Ee.y2-Ae[Ce-1].y,Ee.x-Ae[Ce-1].x,Ee.y-Ae[Ce-1].y],xe[xe.length-1].deltas.push(K);break;case"qct":var De=Ae[Ce-1].x+2/3*(Ee.x1-Ae[Ce-1].x),He=Ae[Ce-1].y+2/3*(Ee.y1-Ae[Ce-1].y),Xe=Ee.x+2/3*(Ee.x1-Ee.x),U=Ee.y+2/3*(Ee.y1-Ee.y),ye=Ee.x,$=Ee.y;K=[De-Ae[Ce-1].x,He-Ae[Ce-1].y,Xe-Ae[Ce-1].x,U-Ae[Ce-1].y,ye-Ae[Ce-1].x,$-Ae[Ce-1].y],xe[xe.length-1].deltas.push(K);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(Ee)}}ie=J?null:L==="stroke"?"stroke":"fill";for(var de=!1,oe=0;oe<xe.length;oe++)if(xe[oe].arc)for(var he=xe[oe].abs,Ie=0;Ie<he.length;Ie++){var Le=he[Ie];Le.type==="arc"?G.call(this,Le.x,Le.y,Le.radius,Le.startAngle,Le.endAngle,Le.counterclockwise,void 0,J,!de):W.call(this,Le.x,Le.y),de=!0}else if(xe[oe].close===!0)this.pdf.internal.out("h"),de=!1;else if(xe[oe].begin!==!0){var be=xe[oe].start.x,je=xe[oe].start.y;M.call(this,xe[oe].deltas,be,je),de=!0}ie&&Q.call(this,ie),J&&ne.call(this)}},se=function(L){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-K;case"top":return L+J-K;case"hanging":return L+J-2*K;case"middle":return L+J/2-K;case"ideographic":return L;case"alphabetic":default:return L}},q=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(J,K){this.colorStops.push([J,K])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(L,J,K,ie,xe,Ae,Ce,Ee,Re){for(var De=ee.call(this,K,ie,xe,Ae),He=0;He<De.length;He++){var Xe=De[He];He===0&&(Re?F.call(this,Xe.x1+L,Xe.y1+J):W.call(this,Xe.x1+L,Xe.y1+J)),ce.call(this,L,J,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}Ee?ne.call(this):Q.call(this,Ce)},Q=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ne=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(L,J){this.pdf.internal.out(n(L)+" "+i(J)+" m")},j=function(L){var J;switch(L.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var K=this.pdf.getTextDimensions(L.text),ie=se.call(this,L.y),xe=q.call(this,ie)-K.h,Ae=this.ctx.transform.applyToPoint(new l(L.x,ie)),Ce=this.ctx.transform.decompose(),Ee=new d;Ee=(Ee=(Ee=Ee.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var Re,De,He,Xe=this.ctx.transform.applyToRectangle(new c(L.x,ie,K.w,K.h)),U=Ee.applyToRectangle(new c(L.x,xe,K.w,K.h)),ye=E.call(this,U),$=[],de=0;de<ye.length;de+=1)$.indexOf(ye[de])===-1&&$.push(ye[de]);if(D($),this.autoPaging)for(var oe=$[0],he=$[$.length-1],Ie=oe;Ie<he+1;Ie++){this.pdf.setPage(Ie);var Le=Ie===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[2],Oe=je-this.margin[0],Je=this.pdf.internal.pageSize.width-this.margin[1],at=Je-this.margin[3],dt=Ie===1?0:be+(Ie-2)*Oe;if(this.ctx.clip_path.length!==0){var pt=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Re,this.posX+this.margin[3],-1*dt+Le),B.call(this,"fill",!0),this.path=pt}var mt=R([JSON.parse(JSON.stringify(U))],this.posX+this.margin[3],-dt+Le+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*L.scale),He=this.lineWidth,this.lineWidth=He*L.scale);var Rt=this.autoPaging!=="text";if(Rt||mt.y+mt.h<=je){if(Rt||mt.y>=Le&&mt.x<=Je){var st=Rt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Je-mt.x)[0],Rn=R([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-dt+Le+this.ctx.prevPageLastElemOffset)[0],gt=Rt&&(Ie>oe||Ie<he)&&A.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Oe,null).clip().discardPath()),this.pdf.text(st,Rn.x,Rn.y,{angle:L.angle,align:J,renderingMode:L.renderingMode}),gt&&this.pdf.restoreGraphicsState()}}else mt.y<je&&(this.ctx.prevPageLastElemOffset+=je-mt.y);L.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=He)}else L.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*L.scale),He=this.lineWidth,this.lineWidth=He*L.scale),this.pdf.text(L.text,Ae.x+this.posX,Ae.y+this.posY,{angle:L.angle,align:J,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=He)},W=function(L,J,K,ie){K=K||0,ie=ie||0,this.pdf.internal.out(n(L+K)+" "+i(J+ie)+" l")},M=function(L,J,K){return this.pdf.lines(L,J,K,null,null)},ce=function(L,J,K,ie,xe,Ae,Ce,Ee){this.pdf.internal.out([e(s(K+L)),e(o(ie+J)),e(s(xe+L)),e(o(Ae+J)),e(s(Ce+L)),e(o(Ee+J)),"c"].join(" "))},ee=function(L,J,K,ie){for(var xe=2*Math.PI,Ae=Math.PI/2;J>K;)J-=xe;var Ce=Math.abs(K-J);Ce<xe&&ie&&(Ce=xe-Ce);for(var Ee=[],Re=ie?-1:1,De=J;Ce>1e-5;){var He=De+Re*Math.min(Ce,Ae);Ee.push(ae.call(this,L,De,He)),Ce-=Math.abs(He-De),De=He}return Ee},ae=function(L,J,K){var ie=(K-J)/2,xe=L*Math.cos(ie),Ae=L*Math.sin(ie),Ce=xe,Ee=-Ae,Re=Ce*Ce+Ee*Ee,De=Re+Ce*xe+Ee*Ae,He=4/3*(Math.sqrt(2*Re*De)-De)/(Ce*Ae-Ee*xe),Xe=Ce-He*Ee,U=Ee+He*Ce,ye=Xe,$=-U,de=ie+J,oe=Math.cos(de),he=Math.sin(de);return{x1:L*Math.cos(J),y1:L*Math.sin(J),x2:Xe*oe-U*he,y2:Xe*he+U*oe,x3:ye*oe-$*he,y3:ye*he+$*oe,x4:L*Math.cos(K),y4:L*Math.sin(K)}},me=function(L){return 180*L/Math.PI},pe=function(L,J,K,ie,xe,Ae){var Ce=L+.5*(K-L),Ee=J+.5*(ie-J),Re=xe+.5*(K-xe),De=Ae+.5*(ie-Ae),He=Math.min(L,xe,Ce,Re),Xe=Math.max(L,xe,Ce,Re),U=Math.min(J,Ae,Ee,De),ye=Math.max(J,Ae,Ee,De);return new c(He,U,Xe-He,ye-U)},ve=function(L,J,K,ie,xe,Ae,Ce,Ee){var Re,De,He,Xe,U,ye,$,de,oe,he,Ie,Le,be,je,Oe=K-L,Je=ie-J,at=xe-K,dt=Ae-ie,pt=Ce-xe,mt=Ee-Ae;for(De=0;De<41;De++)oe=($=(He=L+(Re=De/40)*Oe)+Re*((U=K+Re*at)-He))+Re*(U+Re*(xe+Re*pt-U)-$),he=(de=(Xe=J+Re*Je)+Re*((ye=ie+Re*dt)-Xe))+Re*(ye+Re*(Ae+Re*mt-ye)-de),De==0?(Ie=oe,Le=he,be=oe,je=he):(Ie=Math.min(Ie,oe),Le=Math.min(Le,he),be=Math.max(be,oe),je=Math.max(je,he));return new c(Math.round(Ie),Math.round(Le),Math.round(be-Ie),Math.round(je-Le))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,J,K=(L=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:J}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Lt.API),(function(t){var e=function(o){var l,c,d,h,m,x,w,v,I,A;for(c=[],d=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(m=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(x=(m=((m=((m=((m=(m-(A=m%85))/85)-(I=m%85))/85)-(v=m%85))/85)-(w=m%85))/85)%85,c.push(x+33,w+33,v+33,I+33,A+33)):c.push(122);return(function(E,C){for(var R=C;R>0;R--)E.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,h,m,x=String,w="length",v=255,I="charCodeAt",A="slice",E="replace";for(o[A](-2),o=o[A](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),d=[],h=0,m=(o+=l="uuuuu"[A](o[w]%5||5))[w];m>h;h+=5)c=52200625*(o[I](h)-33)+614125*(o[I](h+1)-33)+7225*(o[I](h+2)-33)+85*(o[I](h+3)-33)+(o[I](h+4)-33),d.push(v&c>>24,v&c>>16,v&c>>8,v&c);return(function(C,R){for(var D=R;D>0;D--)C.pop()})(d,l[w]),x.fromCharCode.apply(x,d)},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return o=(l=Gp(l)).reduce((function(d,h){return d+String.fromCharCode(h)}),"")};t.processDataByFilters=function(o,l){var c=0,d=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map((function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)})).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}})(Lt.API),(function(t){t.loadFile=function(e,n,i){return(function(s,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(d,h,m){var x=new XMLHttpRequest,w=0,v=function(I){var A=I.length,E=[],C=String.fromCharCode;for(w=0;w<A;w+=1)E.push(C(255&I.charCodeAt(w)));return E.join("")};if(x.open("GET",d,!h),x.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(x.onload=function(){x.status===200?m(v(this.responseText)):m(void 0)}),x.send(null),h&&x.status===200)return v(x.responseText)})(s,o,l)}catch{}return c})(e,n,i)},t.loadImageFile=t.loadFile})(Lt.API),(function(t){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):Up(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))})).then((function(l){return l.default?l.default:l}))}function n(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):Up(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load dompurify: "+l))})).then((function(l){return l.default?l.default:l}))}var i=function(l){var c=bn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return h=(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then((function(){switch(c=c||(function(d){switch(i(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l)){case"string":return this.then(n).then((function(d){return this.set({src:s("div",{innerHTML:l,dompurify:d})})}));case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=(function d(h,m){for(var x=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)m!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||x.appendChild(d(w,m));return h.nodeType===1&&(h.nodeName==="CANVAS"?(x.width=h.width,x.height=h.height,x.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(x.value=h.value),x.addEventListener("load",(function(){x.scrollTop=h.scrollTop,x.scrollLeft=h.scrollLeft}),!0)),x})(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)})).then((function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var w=0;w<h.length;++w){var v=h[w],I=v.src.find((function(A){return A.format==="truetype"}));I&&d.addFont(I.url,v.ref.name,v.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),c(this.prop.container,x)})).then((function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(l,c)}))},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}}))},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(l){if(i(l)!=="object")return this;var c=Object.keys(l||{}).map((function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}}),this);return this.then((function(){return this.thenList(c)}))},o.prototype.get=function(l,c){return this.then((function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d}))},o.prototype.setMargin=function(l){return this.then((function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l})).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then((function(){(l=l||Lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l}))},o.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,(function(h,m){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,(function(x){return d.updateProgress(null,h),x})).then(h,m).then((function(x){return d.updateProgress(1),x}))}))},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),m=d.call(h,l,c);return o.convert(m,this.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach((function(d){c=c.thenCore(d)})),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then((function(){throw new Error(l)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Lt.getPageSize=function(l,c,d){if(bn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var m,x=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var v,I=0,A=0;if(w.hasOwnProperty(x))I=w[x][1]/m,A=w[x][0]/m;else try{I=d[1],A=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",A>I&&(v=A,A=I,I=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",I>A&&(v=A,A=I,I=v)}return{width:A,height:I,unit:c,k:m,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($p):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}})(Lt.API),Lt.API.addJS=function(t){return X1=t,this.internal.events.subscribe("postPutResources",(function(){pf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),K1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+X1+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){pf!==void 0&&K1!==void 0&&this.internal.out("/Names <</JavaScript "+pf+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),o=0;o<s.length;o++){var l=s[o],c=i.exec(l);if(c!=null){var d=c[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,m=[];for(o=0;o<h;o++){var x=n.internal.newObject();m.push(x);var w=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<m.length;o++)n.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,s,o){var l={title:s,options:o,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var l=i.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var d=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,s){for(var o=0;o<s.children.length;o++)i.count++,this.count_r(i,s.children[o]);return i.count}}])})(Lt.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,s,o,l,c){var d,h=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(d=(function(x){for(var w,v=256*x.charCodeAt(4)+x.charCodeAt(5),I=x.length,A={width:0,height:0,numcomponents:1},E=4;E<I;E+=2){if(E+=v,e.indexOf(x.charCodeAt(E+1))!==-1){w=256*x.charCodeAt(E+5)+x.charCodeAt(E+6),A={width:256*x.charCodeAt(E+7)+x.charCodeAt(E+8),height:w,numcomponents:x.charCodeAt(E+9)};break}v=256*x.charCodeAt(E+2)+x.charCodeAt(E+3)}return A})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:n,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:s}}return m}})(Lt.API);var $u,mf,Z1,Q1,ey,PC=(function(){var t,e,n;function i(o){var l,c,d,h,m,x,w,v,I,A,E,C,R,D;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(l=this.readUInt32(),I=(function(){var z,B;for(B=[],z=0;z<4;++z)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),h=this.readUInt16()||100,x.delay=1e3*m/h,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for(I==="fdAT"&&(this.pos+=4,l-=4),o=(x!=null?x.data:void 0)||this.imgData,C=0;0<=l?C<l:C>l;0<=l?++C:--C)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((A=d-this.transparency.indexed.length)>0)for(R=0;0<=A?R<A:R>A;0<=A?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":w=(E=this.read(l)).indexOf(0),v=String.fromCharCode.apply(String,E.slice(0,w)),this.text[v]=String.fromCharCode.apply(String,E.slice(w+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(o){var l,c;for(c=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),d=0,h=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function m(x,w,v,I){var A,E,C,R,D,z,B,se,q,G,Q,ne,F,j,W,M,ce,ee,ae,me,pe,ve=Math.ceil((h.width-x)/v),H=Math.ceil((h.height-w)/I),L=h.width==ve&&h.height==H;for(j=l*ve,ne=L?c:new Uint8Array(j*H),z=o.length,F=0,E=0;F<H&&d<z;){switch(o[d++]){case 0:for(R=ce=0;ce<j;R=ce+=1)ne[E++]=o[d++];break;case 1:for(R=ee=0;ee<j;R=ee+=1)A=o[d++],D=R<l?0:ne[E-l],ne[E++]=(A+D)%256;break;case 2:for(R=ae=0;ae<j;R=ae+=1)A=o[d++],C=(R-R%l)/l,W=F&&ne[(F-1)*j+C*l+R%l],ne[E++]=(W+A)%256;break;case 3:for(R=me=0;me<j;R=me+=1)A=o[d++],C=(R-R%l)/l,D=R<l?0:ne[E-l],W=F&&ne[(F-1)*j+C*l+R%l],ne[E++]=(A+Math.floor((D+W)/2))%256;break;case 4:for(R=pe=0;pe<j;R=pe+=1)A=o[d++],C=(R-R%l)/l,D=R<l?0:ne[E-l],F===0?W=M=0:(W=ne[(F-1)*j+C*l+R%l],M=C&&ne[(F-1)*j+(C-1)*l+R%l]),B=D+W-M,se=Math.abs(B-D),G=Math.abs(B-W),Q=Math.abs(B-M),q=se<=G&&se<=Q?D:G<=Q?W:M,ne[E++]=(A+q)%256;break;default:throw new Error("Invalid filter algorithm: "+o[d-1])}if(!L){var J=((w+F*I)*h.width+x)*l,K=F*j;for(R=0;R<ve;R+=1){for(var ie=0;ie<l;ie+=1)c[J++]=ne[K++];J+=(v-1)*l}}F++}}return o=gC(o),h.interlaceMethod==1?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),c},i.prototype.decodePalette=function(){var o,l,c,d,h,m,x,w,v;for(c=this.palette,m=this.transparency.indexed||[],h=new Uint8Array((m.length||0)+c.length),d=0,o=0,l=x=0,w=c.length;x<w;l=x+=3)h[d++]=c[l],h[d++]=c[l+1],h[d++]=c[l+2],h[d++]=(v=m[o++])!=null?v:255;return h},i.prototype.copyToImageData=function(o,l){var c,d,h,m,x,w,v,I,A,E,C;if(d=this.colors,A=null,c=this.hasAlphaChannel,this.palette.length&&(A=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),d=4,c=!0),I=(h=o.data||o).length,x=A||l,m=w=0,d===1)for(;m<I;)v=A?4*l[m/4]:w,E=x[v++],h[m++]=E,h[m++]=E,h[m++]=E,h[m++]=c?x[v++]:255,w=v;else for(;m<I;)v=A?4*l[m/4]:w,h[m++]=x[v++],h[m++]=x[v++],h[m++]=x[v++],h[m++]=c?x[v++]:255,w=v},i.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(Mt)==="[object Window]"){try{e=Mt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(o){var l;if(s()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(o){var l,c,d,h,m,x,w,v;if(this.animation){for(v=[],c=m=0,x=(w=this.animation.frames).length;m<x;c=++m)l=w[c],d=o.createImageData(l.width,l.height),h=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(d,h),l.imageData=d,v.push(l.image=t(d));return v}},i.prototype.renderFrame=function(o,l){var c,d,h;return c=(d=this.animation.frames)[l],h=d[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?o.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&o.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&o.clearRect(c.xOffset,c.yOffset,c.width,c.height),o.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(o){var l,c,d,h,m,x,w=this;return c=0,x=this.animation,h=x.numFrames,d=x.frames,m=x.numPlays,(l=function(){var v,I;if(v=c++%h,I=d[v],w.renderFrame(o,v),h>1&&c/h<m)return w.animation._timeout=setTimeout(l,I.delay)})()},i.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},i.prototype.render=function(o){var l,c;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},i})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function UC(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,l=1<<(7&s)+1;t[e++],t[e++];var c=null,d=null;o&&(c=e,d=l,e+=3*l);var h=!0,m=[],x=0,w=null,v=0,I=null;for(this.width=n,this.height=i;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,I=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=t[e++];x=t[e++]|t[e++]<<8,w=t[e++],(1&A)==0&&(w=null),v=A>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,z=t[e++],B=z>>6&1,se=1<<(7&z)+1,q=c,G=d,Q=!1;z>>7&&(Q=!0,q=e,G=se,e+=3*se);var ne=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}m.push({x:E,y:C,width:R,height:D,has_local_palette:Q,palette_offset:q,palette_size:G,data_offset:ne,data_length:e-ne,transparent_index:w,interlaced:!!B,delay:x,disposal:v});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return I},this.frameInfo=function(j){if(j<0||j>=m.length)throw new Error("Frame index out of range.");return m[j]},this.decodeAndBlitFrameBGRA=function(j,W){var M=this.frameInfo(j),ce=M.width*M.height,ee=new Uint8Array(ce);ty(t,M.data_offset,ee,ce);var ae=M.palette_offset,me=M.transparent_index;me===null&&(me=256);var pe=M.width,ve=n-pe,H=pe,L=4*(M.y*n+M.x),J=4*((M.y+M.height)*n+M.x),K=L,ie=4*ve;M.interlaced===!0&&(ie+=4*n*7);for(var xe=8,Ae=0,Ce=ee.length;Ae<Ce;++Ae){var Ee=ee[Ae];if(H===0&&(H=pe,(K+=ie)>=J&&(ie=4*ve+4*n*(xe-1),K=L+(pe+ve)*(xe<<1),xe>>=1)),Ee===me)K+=4;else{var Re=t[ae+3*Ee],De=t[ae+3*Ee+1],He=t[ae+3*Ee+2];W[K++]=He,W[K++]=De,W[K++]=Re,W[K++]=255}--H}},this.decodeAndBlitFrameRGBA=function(j,W){var M=this.frameInfo(j),ce=M.width*M.height,ee=new Uint8Array(ce);ty(t,M.data_offset,ee,ce);var ae=M.palette_offset,me=M.transparent_index;me===null&&(me=256);var pe=M.width,ve=n-pe,H=pe,L=4*(M.y*n+M.x),J=4*((M.y+M.height)*n+M.x),K=L,ie=4*ve;M.interlaced===!0&&(ie+=4*n*7);for(var xe=8,Ae=0,Ce=ee.length;Ae<Ce;++Ae){var Ee=ee[Ae];if(H===0&&(H=pe,(K+=ie)>=J&&(ie=4*ve+4*n*(xe-1),K=L+(pe+ve)*(xe<<1),xe>>=1)),Ee===me)K+=4;else{var Re=t[ae+3*Ee],De=t[ae+3*Ee+1],He=t[ae+3*Ee+2];W[K++]=Re,W[K++]=De,W[K++]=He,W[K++]=255}--H}}}function ty(t,e,n,i){for(var s=t[e++],o=1<<s,l=o+1,c=l+1,d=s+1,h=(1<<d)-1,m=0,x=0,w=0,v=t[e++],I=new Int32Array(4096),A=null;;){for(;m<16&&v!==0;)x|=t[e++]<<m,m+=8,v===1?v=t[e++]:--v;if(m<d)break;var E=x&h;if(x>>=d,m-=d,E!==o){if(E===l)break;for(var C=E<c?E:A,R=0,D=C;D>o;)D=I[D]>>8,++R;var z=D;if(w+R+(C!==E?1:0)>i)return void Ln.log("Warning, gif stream longer than expected.");n[w++]=z;var B=w+=R;for(C!==E&&(n[w++]=z),D=C;R--;)D=I[D],n[--B]=255&D,D>>=8;A!==null&&c<4096&&(I[c++]=A<<8|z,c>=h+1&&d<12&&(++d,h=h<<1|1)),A=E}else c=l+1,h=(1<<(d=s+1))-1,A=null}return w!==i&&Ln.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Np(t){var e,n,i,s,o,l=Math.floor,c=new Array(64),d=new Array(64),h=new Array(64),m=new Array(64),x=new Array(65535),w=new Array(65535),v=new Array(64),I=new Array(64),A=[],E=0,C=7,R=new Array(64),D=new Array(64),z=new Array(64),B=new Array(256),se=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(L,J){for(var K=0,ie=0,xe=new Array,Ae=1;Ae<=16;Ae++){for(var Ce=1;Ce<=L[Ae];Ce++)xe[J[ie]]=[],xe[J[ie]][0]=K,xe[J[ie]][1]=Ae,ie++,K++;K*=2}return xe}function ae(L){for(var J=L[0],K=L[1]-1;K>=0;)J&1<<K&&(E|=1<<C),K--,--C<0&&(E==255?(me(255),me(0)):me(E),C=7,E=0)}function me(L){A.push(L)}function pe(L){me(L>>8&255),me(255&L)}function ve(L,J,K,ie,xe){for(var Ae,Ce=xe[0],Ee=xe[240],Re=(function(he,Ie){var Le,be,je,Oe,Je,at,dt,pt,mt,Rt,st=0;for(mt=0;mt<8;++mt){Le=he[st],be=he[st+1],je=he[st+2],Oe=he[st+3],Je=he[st+4],at=he[st+5],dt=he[st+6];var Rn=Le+(pt=he[st+7]),gt=Le-pt,on=be+dt,Ot=be-dt,Ct=je+at,Gr=je-at,Jt=Oe+Je,pi=Oe-Je,jt=Rn+Jt,Gn=Rn-Jt,tr=on+Ct,Yt=on-Ct;he[st]=jt+tr,he[st+4]=jt-tr;var Et=.707106781*(Yt+Gn);he[st+2]=Gn+Et,he[st+6]=Gn-Et;var Vt=.382683433*((jt=pi+Gr)-(Yt=Ot+gt)),ka=.5411961*jt+Vt,nr=1.306562965*Yt+Vt,Zr=.707106781*(tr=Gr+Ot),Lr=gt+Zr,At=gt-Zr;he[st+5]=At+ka,he[st+3]=At-ka,he[st+1]=Lr+nr,he[st+7]=Lr-nr,st+=8}for(st=0,mt=0;mt<8;++mt){Le=he[st],be=he[st+8],je=he[st+16],Oe=he[st+24],Je=he[st+32],at=he[st+40],dt=he[st+48];var Qr=Le+(pt=he[st+56]),mi=Le-pt,hr=be+dt,mn=be-dt,Mn=je+at,Nr=je-at,Qi=Oe+Je,pr=Oe-Je,fn=Qr+Qi,wn=Qr-Qi,mr=hr+Mn,gn=hr-Mn;he[st]=fn+mr,he[st+32]=fn-mr;var ei=.707106781*(gn+wn);he[st+16]=wn+ei,he[st+48]=wn-ei;var Ti=.382683433*((fn=pr+Nr)-(gn=mn+mi)),ea=.5411961*fn+Ti,gi=1.306562965*gn+Ti,ti=.707106781*(mr=Nr+mn),ni=mi+ti,rt=mi-ti;he[st+40]=rt+ea,he[st+24]=rt-ea,he[st+8]=ni+gi,he[st+56]=ni-gi,st++}for(mt=0;mt<64;++mt)Rt=he[mt]*Ie[mt],v[mt]=Rt>0?Rt+.5|0:Rt-.5|0;return v})(L,J),De=0;De<64;++De)I[q[De]]=Re[De];var He=I[0]-K;K=I[0],He==0?ae(ie[0]):(ae(ie[w[Ae=32767+He]]),ae(x[Ae]));for(var Xe=63;Xe>0&&I[Xe]==0;)Xe--;if(Xe==0)return ae(Ce),K;for(var U,ye=1;ye<=Xe;){for(var $=ye;I[ye]==0&&ye<=Xe;)++ye;var de=ye-$;if(de>=16){U=de>>4;for(var oe=1;oe<=U;++oe)ae(Ee);de&=15}Ae=32767+I[ye],ae(xe[(de<<4)+w[Ae]]),ae(x[Ae]),ye++}return Xe!=63&&ae(Ce),K}function H(L){L=Math.min(Math.max(L,1),100),o!=L&&((function(J){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var xe=l((K[ie]*J+50)/100);xe=Math.min(Math.max(xe,1),255),c[q[ie]]=xe}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var Ee=l((Ae[Ce]*J+50)/100);Ee=Math.min(Math.max(Ee,1),255),d[q[Ce]]=Ee}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,He=0;He<8;He++)for(var Xe=0;Xe<8;Xe++)h[De]=1/(c[q[De]]*Re[He]*Re[Xe]*8),m[De]=1/(d[q[De]]*Re[He]*Re[Xe]*8),De++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),o=L)}this.encode=function(L,J){J&&H(J),A=new Array,E=0,C=7,pe(65496),pe(65504),pe(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),pe(1),pe(1),me(0),me(0),(function(){pe(65499),pe(132),me(0);for(var be=0;be<64;be++)me(c[be]);me(1);for(var je=0;je<64;je++)me(d[je])})(),(function(be,je){pe(65472),pe(17),me(8),pe(je),pe(be),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(L.width,L.height),(function(){pe(65476),pe(418),me(0);for(var be=0;be<16;be++)me(G[be+1]);for(var je=0;je<=11;je++)me(Q[je]);me(16);for(var Oe=0;Oe<16;Oe++)me(ne[Oe+1]);for(var Je=0;Je<=161;Je++)me(F[Je]);me(1);for(var at=0;at<16;at++)me(j[at+1]);for(var dt=0;dt<=11;dt++)me(W[dt]);me(17);for(var pt=0;pt<16;pt++)me(M[pt+1]);for(var mt=0;mt<=161;mt++)me(ce[mt])})(),pe(65498),pe(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var K=0,ie=0,xe=0;E=0,C=7,this.encode.displayName="_encode_";for(var Ae,Ce,Ee,Re,De,He,Xe,U,ye,$=L.data,de=L.width,oe=L.height,he=4*de,Ie=0;Ie<oe;){for(Ae=0;Ae<he;){for(De=he*Ie+Ae,Xe=-1,U=0,ye=0;ye<64;ye++)He=De+(U=ye>>3)*he+(Xe=4*(7&ye)),Ie+U>=oe&&(He-=he*(Ie+1+U-oe)),Ae+Xe>=he&&(He-=Ae+Xe-he+4),Ce=$[He++],Ee=$[He++],Re=$[He++],R[ye]=(se[Ce]+se[Ee+256>>0]+se[Re+512>>0]>>16)-128,D[ye]=(se[Ce+768>>0]+se[Ee+1024>>0]+se[Re+1280>>0]>>16)-128,z[ye]=(se[Ce+1280>>0]+se[Ee+1536>>0]+se[Re+1792>>0]>>16)-128;K=ve(R,h,K,e,i),ie=ve(D,m,ie,n,s),xe=ve(z,m,xe,n,s),Ae+=32}Ie+=8}if(C>=0){var Le=[];Le[1]=C+1,Le[0]=(1<<C+1)-1,ae(Le)}return pe(65497),new Uint8Array(A)},t=t||50,(function(){for(var L=String.fromCharCode,J=0;J<256;J++)B[J]=L(J)})(),e=ee(G,Q),n=ee(j,W),i=ee(ne,F),s=ee(M,ce),(function(){for(var L=1,J=2,K=1;K<=15;K++){for(var ie=L;ie<J;ie++)w[32767+ie]=K,x[32767+ie]=[],x[32767+ie][1]=K,x[32767+ie][0]=ie;for(var xe=-(J-1);xe<=-L;xe++)w[32767+xe]=K,x[32767+xe]=[],x[32767+xe][1]=K,x[32767+xe][0]=J-1+xe;L<<=1,J<<=1}})(),(function(){for(var L=0;L<256;L++)se[L]=19595*L,se[L+256>>0]=38470*L,se[L+512>>0]=7471*L+32768,se[L+768>>0]=-11059*L,se[L+1024>>0]=-21709*L,se[L+1280>>0]=32768*L+8421375,se[L+1536>>0]=-27439*L,se[L+1792>>0]=-5329*L})(),H(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $a(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ny(t){function e(G){if(!G)throw Error("assert :P")}function n(G,Q,ne){for(var F=0;4>F;F++)if(G[Q+F]!=ne.charCodeAt(F))return!0;return!1}function i(G,Q,ne,F,j){for(var W=0;W<j;W++)G[Q+W]=ne[F+W]}function s(G,Q,ne,F){for(var j=0;j<F;j++)G[Q+j]=ne}function o(G){return new Int32Array(G)}function l(G,Q){for(var ne=[],F=0;F<G;F++)ne.push(new Q);return ne}function c(G,Q){var ne=[];return(function F(j,W,M){for(var ce=M[W],ee=0;ee<ce&&(j.push(M.length>W+1?[]:new Q),!(M.length<W+1));ee++)F(j[ee],W+1,M)})(ne,0,G),ne}var d=function(){var G=this;function Q(y,N){for(var k=1<<N-1>>>0;y&k;)k>>>=1;return k?(y&k-1)+k:y}function ne(y,N,k,P,V){e(!(P%k));do y[N+(P-=k)]=V;while(0<P)}function F(y,N,k,P,V){if(e(2328>=V),512>=V)var X=o(512);else if((X=o(V))==null)return 0;return(function(Z,te,le,fe,Ne,Fe){var Be,Me,et=te,Ye=1<<le,_e=o(16),ke=o(16);for(e(Ne!=0),e(fe!=null),e(Z!=null),e(0<le),Me=0;Me<Ne;++Me){if(15<fe[Me])return 0;++_e[fe[Me]]}if(_e[0]==Ne)return 0;for(ke[1]=0,Be=1;15>Be;++Be){if(_e[Be]>1<<Be)return 0;ke[Be+1]=ke[Be]+_e[Be]}for(Me=0;Me<Ne;++Me)Be=fe[Me],0<fe[Me]&&(Fe[ke[Be]++]=Me);if(ke[15]==1)return(fe=new j).g=0,fe.value=Fe[0],ne(Z,et,1,Ye,fe),Ye;var Ze,nt=-1,Ke=Ye-1,ct=0,ot=1,wt=1,ut=1<<le;for(Me=0,Be=1,Ne=2;Be<=le;++Be,Ne<<=1){if(ot+=wt<<=1,0>(wt-=_e[Be]))return 0;for(;0<_e[Be];--_e[Be])(fe=new j).g=Be,fe.value=Fe[Me++],ne(Z,et+ct,Ne,ut,fe),ct=Q(ct,Be)}for(Be=le+1,Ne=2;15>=Be;++Be,Ne<<=1){if(ot+=wt<<=1,0>(wt-=_e[Be]))return 0;for(;0<_e[Be];--_e[Be]){if(fe=new j,(ct&Ke)!=nt){for(et+=ut,Ze=1<<(nt=Be)-le;15>nt&&!(0>=(Ze-=_e[nt]));)++nt,Ze<<=1;Ye+=ut=1<<(Ze=nt-le),Z[te+(nt=ct&Ke)].g=Ze+le,Z[te+nt].value=et-te-nt}fe.g=Be-le,fe.value=Fe[Me++],ne(Z,et+(ct>>le),Ne,ut,fe),ct=Q(ct,Be)}}return ot!=2*ke[15]-1?0:Ye})(y,N,k,P,V,X)}function j(){this.value=this.g=0}function W(){this.value=this.g=0}function M(){this.G=l(5,j),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Vr,W)}function ce(y,N,k,P){e(y!=null),e(N!=null),e(2147483648>P),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=N,y.pa=k,y.Jd=N,y.Yc=k+P,y.Zc=4<=P?k+P-4+1:k,Ae(y)}function ee(y,N){for(var k=0;0<N--;)k|=Ee(y,128)<<N;return k}function ae(y,N){var k=ee(y,N);return Ce(y)?-k:k}function me(y,N,k,P){var V,X=0;for(e(y!=null),e(N!=null),e(4294967288>P),y.Sb=P,y.Ra=0,y.u=0,y.h=0,4<P&&(P=4),V=0;V<P;++V)X+=N[k+V]<<8*V;y.Ra=X,y.bb=P,y.oa=N,y.pa=k}function pe(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<hs-8>>>0,++y.bb,y.u-=8;K(y)&&(y.h=1,y.u=0)}function ve(y,N){if(e(0<=N),!y.h&&N<=fs){var k=J(y)&qs[N];return y.u+=N,pe(y),k}return y.h=1,y.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(y){return y.Ra>>>(y.u&hs-1)>>>0}function K(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>hs}function ie(y,N){y.u=N,y.h=K(y)}function xe(y){y.u>=Ro&&(e(y.u>=Ro),pe(y))}function Ae(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function Ce(y){return ee(y,1)}function Ee(y,N){var k=y.Ca;0>y.b&&Ae(y);var P=y.b,V=k*N>>>8,X=(y.I>>>P>V)+0;for(X?(k-=V,y.I-=V+1<<P>>>0):k=V+1,P=k,V=0;256<=P;)V+=8,P>>=8;return P=7^V+Jr[P],y.b-=P,y.Ca=(k<<P)-1,X}function Re(y,N,k){y[N+0]=k>>24&255,y[N+1]=k>>16&255,y[N+2]=k>>8&255,y[N+3]=k>>0&255}function De(y,N){return y[N+0]<<0|y[N+1]<<8}function He(y,N){return De(y,N)|y[N+2]<<16}function Xe(y,N){return De(y,N)|De(y,N+2)<<16}function U(y,N){var k=1<<N;return e(y!=null),e(0<N),y.X=o(k),y.X==null?0:(y.Mb=32-N,y.Xa=N,1)}function ye(y,N){e(y!=null),e(N!=null),e(y.Xa==N.Xa),i(N.X,0,y.X,0,1<<N.Xa)}function $(){this.X=[],this.Xa=this.Mb=0}function de(y,N,k,P){e(k!=null),e(P!=null);var V=k[0],X=P[0];return V==0&&(V=(y*X+N/2)/N),X==0&&(X=(N*V+y/2)/y),0>=V||0>=X?0:(k[0]=V,P[0]=X,1)}function oe(y,N){return y+(1<<N)-1>>>N}function he(y,N){return((4278255360&y)+(4278255360&N)>>>0&4278255360)+((16711935&y)+(16711935&N)>>>0&16711935)>>>0}function Ie(y,N){G[N]=function(k,P,V,X,Z,te,le){var fe;for(fe=0;fe<Z;++fe){var Ne=G[y](te[le+fe-1],V,X+fe);te[le+fe]=he(k[P+fe],Ne)}}}function Le(){this.ud=this.hd=this.jd=0}function be(y,N){return((4278124286&(y^N))>>>1)+(y&N)>>>0}function je(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function Oe(y,N){return je(y+(y-N+.5>>1))}function Je(y,N,k){return Math.abs(N-k)-Math.abs(y-k)}function at(y,N,k,P,V,X,Z){for(P=X[Z-1],k=0;k<V;++k)X[Z+k]=P=he(y[N+k],P)}function dt(y,N,k,P,V){var X;for(X=0;X<k;++X){var Z=y[N+X],te=Z>>8&255,le=16711935&(le=(le=16711935&Z)+((te<<16)+te));P[V+X]=(4278255360&Z)+le>>>0}}function pt(y,N){N.jd=y>>0&255,N.hd=y>>8&255,N.ud=y>>16&255}function mt(y,N,k,P,V,X){var Z;for(Z=0;Z<P;++Z){var te=N[k+Z],le=te>>>8,fe=te,Ne=255&(Ne=(Ne=te>>>16)+((y.jd<<24>>24)*(le<<24>>24)>>>5));fe=255&(fe=(fe=fe+((y.hd<<24>>24)*(le<<24>>24)>>>5))+((y.ud<<24>>24)*(Ne<<24>>24)>>>5)),V[X+Z]=(4278255360&te)+(Ne<<16)+fe}}function Rt(y,N,k,P,V){G[N]=function(X,Z,te,le,fe,Ne,Fe,Be,Me){for(le=Fe;le<Be;++le)for(Fe=0;Fe<Me;++Fe)fe[Ne++]=V(te[P(X[Z++])])},G[y]=function(X,Z,te,le,fe,Ne,Fe){var Be=8>>X.b,Me=X.Ea,et=X.K[0],Ye=X.w;if(8>Be)for(X=(1<<X.b)-1,Ye=(1<<Be)-1;Z<te;++Z){var _e,ke=0;for(_e=0;_e<Me;++_e)_e&X||(ke=P(le[fe++])),Ne[Fe++]=V(et[ke&Ye]),ke>>=Be}else G["VP8LMapColor"+k](le,fe,et,Ye,Ne,Fe,Z,te,Me)}}function st(y,N,k,P,V){for(k=N+k;N<k;){var X=y[N++];P[V++]=X>>16&255,P[V++]=X>>8&255,P[V++]=X>>0&255}}function Rn(y,N,k,P,V){for(k=N+k;N<k;){var X=y[N++];P[V++]=X>>16&255,P[V++]=X>>8&255,P[V++]=X>>0&255,P[V++]=X>>24&255}}function gt(y,N,k,P,V){for(k=N+k;N<k;){var X=(Z=y[N++])>>16&240|Z>>12&15,Z=Z>>0&240|Z>>28&15;P[V++]=X,P[V++]=Z}}function on(y,N,k,P,V){for(k=N+k;N<k;){var X=(Z=y[N++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;P[V++]=X,P[V++]=Z}}function Ot(y,N,k,P,V){for(k=N+k;N<k;){var X=y[N++];P[V++]=X>>0&255,P[V++]=X>>8&255,P[V++]=X>>16&255}}function Ct(y,N,k,P,V,X){if(X==0)for(k=N+k;N<k;)Re(P,((X=y[N++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),V+=32;else i(P,V,y,N,k)}function Gr(y,N){G[N][0]=G[y+"0"],G[N][1]=G[y+"1"],G[N][2]=G[y+"2"],G[N][3]=G[y+"3"],G[N][4]=G[y+"4"],G[N][5]=G[y+"5"],G[N][6]=G[y+"6"],G[N][7]=G[y+"7"],G[N][8]=G[y+"8"],G[N][9]=G[y+"9"],G[N][10]=G[y+"10"],G[N][11]=G[y+"11"],G[N][12]=G[y+"12"],G[N][13]=G[y+"13"],G[N][14]=G[y+"0"],G[N][15]=G[y+"0"]}function Jt(y){return y==Ul||y==xu||y==Po||y==bu}function pi(){this.eb=[],this.size=this.A=this.fb=0}function jt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Gn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new pi,this.f.kb=new jt,this.sd=null}function tr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Et(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Vt(y,N){var k=y.T,P=N.ba.f.RGBA,V=P.eb,X=P.fb+y.ka*P.A,Z=Tr[N.ba.S],te=y.y,le=y.O,fe=y.f,Ne=y.N,Fe=y.ea,Be=y.W,Me=N.cc,et=N.dc,Ye=N.Mc,_e=N.Nc,ke=y.ka,Ze=y.ka+y.T,nt=y.U,Ke=nt+1>>1;for(ke==0?Z(te,le,null,null,fe,Ne,Fe,Be,fe,Ne,Fe,Be,V,X,null,null,nt):(Z(N.ec,N.fc,te,le,Me,et,Ye,_e,fe,Ne,Fe,Be,V,X-P.A,V,X,nt),++k);ke+2<Ze;ke+=2)Me=fe,et=Ne,Ye=Fe,_e=Be,Ne+=y.Rc,Be+=y.Rc,X+=2*P.A,Z(te,(le+=2*y.fa)-y.fa,te,le,Me,et,Ye,_e,fe,Ne,Fe,Be,V,X-P.A,V,X,nt);return le+=y.fa,y.j+Ze<y.o?(i(N.ec,N.fc,te,le,nt),i(N.cc,N.dc,fe,Ne,Ke),i(N.Mc,N.Nc,Fe,Be,Ke),k--):1&Ze||Z(te,le,null,null,fe,Ne,Fe,Be,fe,Ne,Fe,Be,V,X+P.A,null,null,nt),k}function ka(y,N,k){var P=y.F,V=[y.J];if(P!=null){var X=y.U,Z=N.ba.S,te=Z==Pl||Z==Po;N=N.ba.f.RGBA;var le=[0],fe=y.ka;le[0]=y.T,y.Kb&&(fe==0?--le[0]:(--fe,V[0]-=y.width),y.j+y.ka+y.T==y.o&&(le[0]=y.o-y.j-fe));var Ne=N.eb;fe=N.fb+fe*N.A,y=Gs(P,V[0],y.width,X,le,Ne,fe+(te?0:3),N.A),e(k==le),y&&Jt(Z)&&ba(Ne,fe,te,X,le,N.A)}return 0}function nr(y){var N=y.ma,k=N.ba.S,P=11>k,V=k==Or||k==Ui||k==Pl||k==Do||k==12||Jt(k);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!ja(N.Oa,y,V?11:12))return 0;if(V&&Jt(k)&&it(),y.da)alert("todo:use_scaling");else{if(P){if(N.Ib=Et,y.Kb){if(k=y.U+1>>1,N.memory=o(y.U+2*k),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+y.U,N.Mc=N.cc,N.Nc=N.dc+k,N.Ib=Vt,it()}}else alert("todo:EmitYUV");V&&(N.Jb=ka,P&&Ue())}if(P&&!Ns){for(y=0;256>y;++y)Er[y]=89858*(y-128)+Bo>>Gi,Wf[y]=-22014*(y-128)+Bo,wd[y]=-45773*(y-128),Au[y]=113618*(y-128)+Bo>>Gi;for(y=Ys;y<Ss;++y)N=76283*(y-16)+Bo>>Gi,$f[y-Ys]=yi(N,255),Kf[y-Ys]=yi(N+8>>4,15);Ns=1}return 1}function Zr(y){var N=y.ma,k=y.U,P=y.T;return e(!(1&y.ka)),0>=k||0>=P?0:(k=N.Ib(y,N),N.Jb!=null&&N.Jb(y,N,k),N.Dc+=k,1)}function Lr(y){y.ma.memory=null}function At(y,N,k,P){return ve(y,8)!=47?0:(N[0]=ve(y,14)+1,k[0]=ve(y,14)+1,P[0]=ve(y,1),ve(y,3)!=0?0:!y.h)}function Qr(y,N){if(4>y)return y+1;var k=y-2>>1;return(2+(1&y)<<k)+ve(N,k)+1}function mi(y,N){return 120<N?N-120:1<=(k=((k=Bi[N-1])>>4)*y+(8-(15&k)))?k:1;var k}function hr(y,N,k){var P=J(k),V=y[N+=255&P].g-8;return 0<V&&(ie(k,k.u+8),P=J(k),N+=y[N].value,N+=P&(1<<V)-1),ie(k,k.u+y[N].g),y[N].value}function mn(y,N,k){return k.g+=y.g,k.value+=y.value<<N>>>0,e(8>=k.g),y.g}function Mn(y,N,k){var P=y.xc;return e((N=P==0?0:y.vc[y.md*(k>>P)+(N>>P)])<y.Wb),y.Ya[N]}function Nr(y,N,k,P){var V=y.ab,X=y.c*N,Z=y.C;N=Z+N;var te=k,le=P;for(P=y.Ta,k=y.Ua;0<V--;){var fe=y.gc[V],Ne=Z,Fe=N,Be=te,Me=le,et=(le=P,te=k,fe.Ea);switch(e(Ne<Fe),e(Fe<=fe.nc),fe.hc){case 2:pu(Be,Me,(Fe-Ne)*et,le,te);break;case 0:var Ye=Ne,_e=Fe,ke=le,Ze=te,nt=(ut=fe).Ea;Ye==0&&(hu(Be,Me,null,null,1,ke,Ze),at(Be,Me+1,0,0,nt-1,ke,Ze+1),Me+=nt,Ze+=nt,++Ye);for(var Ke=1<<ut.b,ct=Ke-1,ot=oe(nt,ut.b),wt=ut.K,ut=ut.w+(Ye>>ut.b)*ot;Ye<_e;){var an=wt,$t=ut,Qt=1;for(Ll(Be,Me,ke,Ze-nt,1,ke,Ze);Qt<nt;){var Bt=(Qt&~ct)+Ke;Bt>nt&&(Bt=nt),(0,Mi[an[$t++]>>8&15])(Be,Me+ +Qt,ke,Ze+Qt-nt,Bt-Qt,ke,Ze+Qt),Qt=Bt}Me+=nt,Ze+=nt,++Ye&ct||(ut+=ot)}Fe!=fe.nc&&i(le,te-et,le,te+(Fe-Ne-1)*et,et);break;case 1:for(et=Be,_e=Me,nt=(Be=fe.Ea)-(Ze=Be&~(ke=(Me=1<<fe.b)-1)),Ye=oe(Be,fe.b),Ke=fe.K,fe=fe.w+(Ne>>fe.b)*Ye;Ne<Fe;){for(ct=Ke,ot=fe,wt=new Le,ut=_e+Ze,an=_e+Be;_e<ut;)pt(ct[ot++],wt),vi(wt,et,_e,Me,le,te),_e+=Me,te+=Me;_e<an&&(pt(ct[ot++],wt),vi(wt,et,_e,nt,le,te),_e+=nt,te+=nt),++Ne&ke||(fe+=Ye)}break;case 3:if(Be==le&&Me==te&&0<fe.b){for(_e=le,Be=et=te+(Fe-Ne)*et-(Ze=(Fe-Ne)*oe(fe.Ea,fe.b)),Me=le,ke=te,Ye=[],Ze=(nt=Ze)-1;0<=Ze;--Ze)Ye[Ze]=Me[ke+Ze];for(Ze=nt-1;0<=Ze;--Ze)_e[Be+Ze]=Ye[Ze];aa(fe,Ne,Fe,le,et,le,te)}else aa(fe,Ne,Fe,Be,Me,le,te)}te=P,le=k}le!=k&&i(P,k,te,le,X)}function Qi(y,N){var k=y.V,P=y.Ba+y.c*y.C,V=N-y.C;if(e(N<=y.l.o),e(16>=V),0<V){var X=y.l,Z=y.Ta,te=y.Ua,le=X.width;if(Nr(y,V,k,P),V=te=[te],e((k=y.C)<(P=N)),e(X.v<X.va),P>X.o&&(P=X.o),k<X.j){var fe=X.j-k;k=X.j,V[0]+=fe*le}if(k>=P?k=0:(V[0]+=4*X.v,X.ka=k-X.j,X.U=X.va-X.v,X.T=P-k,k=1),k){if(te=te[0],11>(k=y.ca).S){var Ne=k.f.RGBA,Fe=(P=k.S,V=X.U,X=X.T,fe=Ne.eb,Ne.A),Be=X;for(Ne=Ne.fb+y.Ma*Ne.A;0<Be--;){var Me=Z,et=te,Ye=V,_e=fe,ke=Ne;switch(P){case yu:ji(Me,et,Ye,_e,ke);break;case Or:Pa(Me,et,Ye,_e,ke);break;case Ul:Pa(Me,et,Ye,_e,ke),ba(_e,ke,0,Ye,1,0);break;case vu:Mo(Me,et,Ye,_e,ke);break;case Ui:Ct(Me,et,Ye,_e,ke,1);break;case xu:Ct(Me,et,Ye,_e,ke,1),ba(_e,ke,0,Ye,1,0);break;case Pl:Ct(Me,et,Ye,_e,ke,0);break;case Po:Ct(Me,et,Ye,_e,ke,0),ba(_e,ke,1,Ye,1,0);break;case Do:sa(Me,et,Ye,_e,ke);break;case bu:sa(Me,et,Ye,_e,ke),Pr(_e,ke,Ye,1,0);break;case ys:oa(Me,et,Ye,_e,ke);break;default:e(0)}te+=le,Ne+=Fe}y.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=k.height)}}y.C=N,e(y.C<=y.i)}function pr(y){var N;if(0<y.ua)return 0;for(N=0;N<y.Wb;++N){var k=y.Ya[N].G,P=y.Ya[N].H;if(0<k[1][P[1]+0].g||0<k[2][P[2]+0].g||0<k[3][P[3]+0].g)return 0}return 1}function fn(y,N,k,P,V,X){if(y.Z!=0){var Z=y.qd,te=y.rd;for(e(Ba[y.Z]!=null);N<k;++N)Ba[y.Z](Z,te,P,V,P,V,X),Z=P,te=V,V+=X;y.qd=Z,y.rd=te}}function wn(y,N){var k=y.l.ma,P=k.Z==0||k.Z==1?y.l.j:y.C;if(P=y.C<P?P:y.C,e(N<=y.l.o),N>P){var V=y.l.width,X=k.ca,Z=k.tb+V*P,te=y.V,le=y.Ba+y.c*P,fe=y.gc;e(y.ab==1),e(fe[0].hc==3),Nc(fe[0],P,N,te,le,X,Z),fn(k,P,N,X,Z,V)}y.C=y.Ma=N}function mr(y,N,k,P,V,X,Z){var te=y.$/P,le=y.$%P,fe=y.m,Ne=y.s,Fe=k+y.$,Be=Fe;V=k+P*V;var Me=k+P*X,et=280+Ne.ua,Ye=y.Pb?te:16777216,_e=0<Ne.ua?Ne.Wa:null,ke=Ne.wc,Ze=Fe<Me?Mn(Ne,le,te):null;e(y.C<X),e(Me<=V);var nt=!1;e:for(;;){for(;nt||Fe<Me;){var Ke=0;if(te>=Ye){var ct=Fe-k;e((Ye=y).Pb),Ye.wd=Ye.m,Ye.xd=ct,0<Ye.s.ua&&ye(Ye.s.Wa,Ye.s.vb),Ye=te+vs}if(le&ke||(Ze=Mn(Ne,le,te)),e(Ze!=null),Ze.Qb&&(N[Fe]=Ze.qb,nt=!0),!nt)if(xe(fe),Ze.jc){Ke=fe,ct=N;var ot=Fe,wt=Ze.pd[J(Ke)&Vr-1];e(Ze.jc),256>wt.g?(ie(Ke,Ke.u+wt.g),ct[ot]=wt.value,Ke=0):(ie(Ke,Ke.u+wt.g-256),e(256<=wt.value),Ke=wt.value),Ke==0&&(nt=!0)}else Ke=hr(Ze.G[0],Ze.H[0],fe);if(fe.h)break;if(nt||256>Ke){if(!nt)if(Ze.nd)N[Fe]=(Ze.qb|Ke<<8)>>>0;else{if(xe(fe),nt=hr(Ze.G[1],Ze.H[1],fe),xe(fe),ct=hr(Ze.G[2],Ze.H[2],fe),ot=hr(Ze.G[3],Ze.H[3],fe),fe.h)break;N[Fe]=(ot<<24|nt<<16|Ke<<8|ct)>>>0}if(nt=!1,++Fe,++le>=P&&(le=0,++te,Z!=null&&te<=X&&!(te%16)&&Z(y,te),_e!=null))for(;Be<Fe;)Ke=N[Be++],_e.X[(506832829*Ke&4294967295)>>>_e.Mb]=Ke}else if(280>Ke){if(Ke=Qr(Ke-256,fe),ct=hr(Ze.G[4],Ze.H[4],fe),xe(fe),ct=mi(P,ct=Qr(ct,fe)),fe.h)break;if(Fe-k<ct||V-Fe<Ke)break e;for(ot=0;ot<Ke;++ot)N[Fe+ot]=N[Fe+ot-ct];for(Fe+=Ke,le+=Ke;le>=P;)le-=P,++te,Z!=null&&te<=X&&!(te%16)&&Z(y,te);if(e(Fe<=V),le&ke&&(Ze=Mn(Ne,le,te)),_e!=null)for(;Be<Fe;)Ke=N[Be++],_e.X[(506832829*Ke&4294967295)>>>_e.Mb]=Ke}else{if(!(Ke<et))break e;for(nt=Ke-280,e(_e!=null);Be<Fe;)Ke=N[Be++],_e.X[(506832829*Ke&4294967295)>>>_e.Mb]=Ke;Ke=Fe,e(!(nt>>>(ct=_e).Xa)),N[Ke]=ct.X[nt],nt=!0}nt||e(fe.h==K(fe))}if(y.Pb&&fe.h&&Fe<V)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&ye(y.s.vb,y.s.Wa);else{if(fe.h)break e;Z!=null&&Z(y,te>X?X:te),y.a=0,y.$=Fe-k}return 1}return y.a=3,0}function gn(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var N=y.Wa;N!=null&&(N.X=null),y.vb=null,e(y!=null)}function ei(){var y=new Sc;return y==null?null:(y.a=0,y.xb=Ac,Gr("Predictor","VP8LPredictors"),Gr("Predictor","VP8LPredictors_C"),Gr("PredictorAdd","VP8LPredictorsAdd"),Gr("PredictorAdd","VP8LPredictorsAdd_C"),pu=dt,vi=mt,ji=st,Pa=Rn,sa=gt,oa=on,Mo=Ot,G.VP8LMapColor32b=Rl,G.VP8LMapColor8b=Yr,y)}function Ti(y,N,k,P,V){var X=1,Z=[y],te=[N],le=P.m,fe=P.s,Ne=null,Fe=0;e:for(;;){if(k)for(;X&&ve(le,1);){var Be=Z,Me=te,et=P,Ye=1,_e=et.m,ke=et.gc[et.ab],Ze=ve(_e,2);if(et.Oc&1<<Ze)X=0;else{switch(et.Oc|=1<<Ze,ke.hc=Ze,ke.Ea=Be[0],ke.nc=Me[0],ke.K=[null],++et.ab,e(4>=et.ab),Ze){case 0:case 1:ke.b=ve(_e,3)+2,Ye=Ti(oe(ke.Ea,ke.b),oe(ke.nc,ke.b),0,et,ke.K),ke.K=ke.K[0];break;case 3:var nt,Ke=ve(_e,8)+1,ct=16<Ke?0:4<Ke?1:2<Ke?2:3;if(Be[0]=oe(ke.Ea,ct),ke.b=ct,nt=Ye=Ti(Ke,1,0,et,ke.K)){var ot,wt=Ke,ut=ke,an=1<<(8>>ut.b),$t=o(an);if($t==null)nt=0;else{var Qt=ut.K[0],Bt=ut.w;for($t[0]=ut.K[0][0],ot=1;ot<1*wt;++ot)$t[ot]=he(Qt[Bt+ot],$t[ot-1]);for(;ot<4*an;++ot)$t[ot]=0;ut.K[0]=null,ut.K[0]=$t,nt=1}}Ye=nt;break;case 2:break;default:e(0)}X=Ye}}if(Z=Z[0],te=te[0],X&&ve(le,1)&&!(X=1<=(Fe=ve(le,4))&&11>=Fe)){P.a=3;break e}var hn;if(hn=X)t:{var ln,It,yn,yr=P,Vn=Z,Br=te,nn=Fe,Ir=k,si=yr.m,ur=yr.s,Jn=[null],vr=1,Si=0,Hi=Fi[nn];n:for(;;){if(Ir&&ve(si,1)){var ar=ve(si,3)+2,er=oe(Vn,ar),xr=oe(Br,ar),Ni=er*xr;if(!Ti(er,xr,0,yr,Jn))break n;for(Jn=Jn[0],ur.xc=ar,ln=0;ln<Ni;++ln){var Sa=Jn[ln]>>8&65535;Jn[ln]=Sa,Sa>=vr&&(vr=Sa+1)}}if(si.h)break n;for(It=0;5>It;++It){var On=Vs[It];!It&&0<nn&&(On+=1<<nn),Si<On&&(Si=On)}var Na=l(vr*Hi,j),oi=vr,Yn=l(oi,M);if(Yn==null)var Ws=null;else e(65536>=oi),Ws=Yn;var _i=o(Si);if(Ws==null||_i==null||Na==null){yr.a=1;break n}var Pt=Na;for(ln=yn=0;ln<vr;++ln){var Ht=Ws[ln],In=Ht.G,Fa=Ht.H,$s=0,_a=1,zl=0;for(It=0;5>It;++It){On=Vs[It],In[It]=Pt,Fa[It]=yn,!It&&0<nn&&(On+=1<<nn);i:{var _s,As=On,Tu=yr,_n=_i,Tc=Pt,Ec=yn,Eu=0,za=Tu.m,Xf=ve(za,1);if(s(_n,0,0,As),Xf){var Ic=ve(za,1)+1,kc=ve(za,1),Iu=ve(za,kc==0?1:8);_n[Iu]=1,Ic==2&&(_n[Iu=ve(za,8)]=1);var br=1}else{var Wn=o(19),ql=ve(za,4)+4;if(19<ql){Tu.a=3;var Cs=0;break i}for(_s=0;_s<ql;++_s)Wn[Ol[_s]]=ve(za,3);var zo=void 0,Ks=void 0,Aa=Tu,ku=Wn,qo=As,Lu=_n,Ru=0,qa=Aa.m,Lc=8,Rc=l(128,j);r:for(;F(Rc,0,7,ku,19);){if(ve(qa,1)){var Sd=2+2*ve(qa,3);if((zo=2+ve(qa,Sd))>qo)break r}else zo=qo;for(Ks=0;Ks<qo&&zo--;){xe(qa);var Mc=Rc[0+(127&J(qa))];ie(qa,qa.u+Mc.g);var Ts=Mc.value;if(16>Ts)Lu[Ks++]=Ts,Ts!=0&&(Lc=Ts);else{var Nd=Ts==16,_d=Ts-16,Ad=Uo[_d],jc=ve(qa,Oi[_d])+Ad;if(Ks+jc>qo)break r;for(var Cd=Nd?Lc:0;0<jc--;)Lu[Ks++]=Cd}}Ru=1;break r}Ru||(Aa.a=3),br=Ru}(br=br&&!za.h)&&(Eu=F(Tc,Ec,8,_n,As)),br&&Eu!=0?Cs=Eu:(Tu.a=3,Cs=0)}if(Cs==0)break n;if(_a&&wu[It]==1&&(_a=Pt[yn].g==0),$s+=Pt[yn].g,yn+=Cs,3>=It){var Xs,Mu=_i[0];for(Xs=1;Xs<On;++Xs)_i[Xs]>Mu&&(Mu=_i[Xs]);zl+=Mu}}if(Ht.nd=_a,Ht.Qb=0,_a&&(Ht.qb=(In[3][Fa[3]+0].value<<24|In[1][Fa[1]+0].value<<16|In[2][Fa[2]+0].value)>>>0,$s==0&&256>In[0][Fa[0]+0].value&&(Ht.Qb=1,Ht.qb+=In[0][Fa[0]+0].value<<8)),Ht.jc=!Ht.Qb&&6>zl,Ht.jc){var Gl,Ca=Ht;for(Gl=0;Gl<Vr;++Gl){var Ga=Gl,Ha=Ca.pd[Ga],ju=Ca.G[0][Ca.H[0]+Ga];256<=ju.value?(Ha.g=ju.g+256,Ha.value=ju.value):(Ha.g=0,Ha.value=0,Ga>>=mn(ju,8,Ha),Ga>>=mn(Ca.G[1][Ca.H[1]+Ga],16,Ha),Ga>>=mn(Ca.G[2][Ca.H[2]+Ga],0,Ha),mn(Ca.G[3][Ca.H[3]+Ga],24,Ha))}}}ur.vc=Jn,ur.Wb=vr,ur.Ya=Ws,ur.yc=Na,hn=1;break t}hn=0}if(!(X=hn)){P.a=3;break e}if(0<Fe){if(fe.ua=1<<Fe,!U(fe.Wa,Fe)){P.a=1,X=0;break e}}else fe.ua=0;var Du=P,Zs=Z,Td=te,Go=Du.s,Ho=Go.xc;if(Du.c=Zs,Du.i=Td,Go.md=oe(Zs,Ho),Go.wc=Ho==0?-1:(1<<Ho)-1,k){P.xb=xs;break e}if((Ne=o(Z*te))==null){P.a=1,X=0;break e}X=(X=mr(P,Ne,0,Z,te,te,null))&&!le.h;break e}return X?(V!=null?V[0]=Ne:(e(Ne==null),e(k)),P.$=0,k||gn(fe)):gn(fe),X}function ea(y,N){var k=y.c*y.i,P=k+N+16*N;return e(y.c<=N),y.V=o(P),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+k+N,1)}function gi(y,N){var k=y.C,P=N-k,V=y.V,X=y.Ba+y.c*k;for(e(N<=y.l.o);0<P;){var Z=16<P?16:P,te=y.l.ma,le=y.l.width,fe=le*Z,Ne=te.ca,Fe=te.tb+le*k,Be=y.Ta,Me=y.Ua;Nr(y,Z,V,X),bi(Be,Me,Ne,Fe,fe),fn(te,k,k+Z,Ne,Fe,le),P-=Z,V+=Z*y.c,k+=Z}e(k==N),y.C=y.Ma=N}function ti(){this.ub=this.yd=this.td=this.Rb=0}function ni(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function lt(){this.Yb=(function(){var y=[];return(function N(k,P,V){for(var X=V[P],Z=0;Z<X&&(k.push(V.length>P+1?[]:0),!(V.length<P+1));Z++)N(k[Z],P+1,V)})(y,0,[3,11]),y})()}function rn(){this.jb=o(3),this.Wc=c([4,8],lt),this.Xc=c([4,17],lt)}function qt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function Rr(){this.Na=this.la=0}function Tn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rr(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xc(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new rr),this.aa=0,this.l=new vo}function ml(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ru(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new ti,this.Kc=new ni,this.ed=new qt,this.Qa=new rt,this.Ic=this.$c=this.Aa=0,this.D=new xc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,H),this.ia=0,this.pb=l(4,Tn),this.Pa=new rn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ml),this.Hd=0,this.rb=Array(new Rr),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rr),this.L=this.aa=0,this.gd=c([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xo(){var y=new ru;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,wi||(wi=gl)),y}function jn(y,N,k){return y.a==0&&(y.a=N,y.sc=k,y.cb=0),0}function Ei(y,N,k){return 3<=k&&y[N+0]==157&&y[N+1]==1&&y[N+2]==42}function Hr(y,N){if(y==null)return 0;if(y.a=0,y.sc="OK",N==null)return jn(y,2,"null VP8Io passed to VP8GetHeaders()");var k=N.data,P=N.w,V=N.ha;if(4>V)return jn(y,7,"Truncated header.");var X=k[P+0]|k[P+1]<<8|k[P+2]<<16,Z=y.Od;if(Z.Rb=!(1&X),Z.td=X>>1&7,Z.yd=X>>4&1,Z.ub=X>>5,3<Z.td)return jn(y,3,"Incorrect keyframe parameters.");if(!Z.yd)return jn(y,4,"Frame not displayable.");P+=3,V-=3;var te=y.Kc;if(Z.Rb){if(7>V)return jn(y,7,"cannot parse picture header");if(!Ei(k,P,V))return jn(y,3,"Bad code word");te.c=16383&(k[P+4]<<8|k[P+3]),te.Td=k[P+4]>>6,te.i=16383&(k[P+6]<<8|k[P+5]),te.Ud=k[P+6]>>6,P+=7,V-=7,y.za=te.c+15>>4,y.Ub=te.i+15>>4,N.width=te.c,N.height=te.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,s((X=y.Pa).jb,0,255,X.jb.length),e((X=y.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,s(X.Zb,0,0,X.Zb.length),s(X.Lb,0,0,X.Lb)}if(Z.ub>V)return jn(y,7,"bad partition length");ce(X=y.m,k,P,Z.ub),P+=Z.ub,V-=Z.ub,Z.Rb&&(te.Ld=Ce(X),te.Kd=Ce(X)),te=y.Qa;var le,fe=y.Pa;if(e(X!=null),e(te!=null),te.Cb=Ce(X),te.Cb){if(te.Bb=Ce(X),Ce(X)){for(te.Fb=Ce(X),le=0;4>le;++le)te.Zb[le]=Ce(X)?ae(X,7):0;for(le=0;4>le;++le)te.Lb[le]=Ce(X)?ae(X,6):0}if(te.Bb)for(le=0;3>le;++le)fe.jb[le]=Ce(X)?ee(X,8):255}else te.Bb=0;if(X.Ka)return jn(y,3,"cannot parse segment header");if((te=y.ed).zd=Ce(X),te.Tb=ee(X,6),te.wb=ee(X,3),te.Pc=Ce(X),te.Pc&&Ce(X)){for(fe=0;4>fe;++fe)Ce(X)&&(te.vd[fe]=ae(X,6));for(fe=0;4>fe;++fe)Ce(X)&&(te.od[fe]=ae(X,6))}if(y.L=te.Tb==0?0:te.zd?1:2,X.Ka)return jn(y,3,"cannot parse filter header");var Ne=V;if(V=le=P,P=le+Ne,te=Ne,y.Xb=(1<<ee(y.m,2))-1,Ne<3*(fe=y.Xb))k=7;else{for(le+=3*fe,te-=3*fe,Ne=0;Ne<fe;++Ne){var Fe=k[V+0]|k[V+1]<<8|k[V+2]<<16;Fe>te&&(Fe=te),ce(y.Jc[+Ne],k,le,Fe),le+=Fe,te-=Fe,V+=3}ce(y.Jc[+fe],k,le,te),k=le<P?0:5}if(k!=0)return jn(y,k,"cannot parse partitions");for(k=ee(le=y.m,7),V=Ce(le)?ae(le,4):0,P=Ce(le)?ae(le,4):0,te=Ce(le)?ae(le,4):0,fe=Ce(le)?ae(le,4):0,le=Ce(le)?ae(le,4):0,Ne=y.Qa,Fe=0;4>Fe;++Fe){if(Ne.Cb){var Be=Ne.Zb[Fe];Ne.Fb||(Be+=k)}else{if(0<Fe){y.pb[Fe]=y.pb[0];continue}Be=k}var Me=y.pb[Fe];Me.Sc[0]=zi[yi(Be+V,127)],Me.Sc[1]=qi[yi(Be+0,127)],Me.Eb[0]=2*zi[yi(Be+P,127)],Me.Eb[1]=101581*qi[yi(Be+te,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=zi[yi(Be+fe,117)],Me.Qc[1]=qi[yi(Be+le,127)],Me.lc=Be+le}if(!Z.Rb)return jn(y,4,"Not a key frame.");for(Ce(X),Z=y.Pa,k=0;4>k;++k){for(V=0;8>V;++V)for(P=0;3>P;++P)for(te=0;11>te;++te)fe=Ee(X,En[k][V][P][te])?ee(X,8):bd[k][V][P][te],Z.Wc[k][V].Yb[P][te]=fe;for(V=0;17>V;++V)Z.Xc[k][V]=Z.Wc[k][Wt[V]]}return y.kc=Ce(X),y.kc&&(y.Bd=ee(X,8)),y.cb=1}function gl(y,N,k,P,V,X,Z){var te=N[V].Yb[k];for(k=0;16>V;++V){if(!Ee(y,te[k+0]))return V;for(;!Ee(y,te[k+1]);)if(te=N[++V].Yb[0],k=0,V==16)return 16;var le=N[V+1].Yb;if(Ee(y,te[k+2])){var fe=y,Ne=0;if(Ee(fe,(Be=te)[(Fe=k)+3]))if(Ee(fe,Be[Fe+6])){for(te=0,Fe=2*(Ne=Ee(fe,Be[Fe+8]))+(Be=Ee(fe,Be[Fe+9+Ne])),Ne=0,Be=xd[Fe];Be[te];++te)Ne+=Ne+Ee(fe,Be[te]);Ne+=3+(8<<Fe)}else Ee(fe,Be[Fe+7])?(Ne=7+2*Ee(fe,165),Ne+=Ee(fe,145)):Ne=5+Ee(fe,159);else Ne=Ee(fe,Be[Fe+4])?3+Ee(fe,Be[Fe+5]):2;te=le[2]}else Ne=1,te=le[1];le=Z+_c[V],0>(fe=y).b&&Ae(fe);var Fe,Be=fe.b,Me=(Fe=fe.Ca>>1)-(fe.I>>Be)>>31;--fe.b,fe.Ca+=Me,fe.Ca|=1,fe.I-=(Fe+1&Me)<<Be,X[le]=((Ne^Me)-Me)*P[(0<V)+0]}return 16}function yl(y){var N=y.rb[y.sb-1];N.la=0,N.Na=0,s(y.zc,0,0,y.zc.length),y.ja=0}function vl(y,N){if(y==null)return 0;if(N==null)return jn(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!Hr(y,N))return 0;if(e(y.cb),N.ac==null||N.ac(N)){N.ob&&(y.L=0);var k=Fo[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=N.v-k>>4,y.zb=N.j-k>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=N.o+15+k>>4,y.Hb=N.va+15+k>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var P=y.ed;for(k=0;4>k;++k){var V;if(y.Qa.Cb){var X=y.Qa.Lb[k];y.Qa.Fb||(X+=P.Tb)}else X=P.Tb;for(V=0;1>=V;++V){var Z=y.gd[k][V],te=X;if(P.Pc&&(te+=P.vd[0],V&&(te+=P.od[0])),0<(te=0>te?0:63<te?63:te)){var le=te;0<P.wb&&(le=4<P.wb?le>>2:le>>1)>9-P.wb&&(le=9-P.wb),1>le&&(le=1),Z.dd=le,Z.tc=2*te+le,Z.ld=40<=te?2:15<=te?1:0}else Z.tc=0;Z.La=V}}}k=0}else jn(y,6,"Frame setup failed"),k=y.a;if(k=k==0){if(k){y.$c=0,0<y.Aa||(y.Ic=Fl);e:{k=y.Ic,P=4*(le=y.za);var fe=32*le,Ne=le+1,Fe=0<y.L?le*(0<y.Aa?2:1):0,Be=(y.Aa==2?2:1)*le;if((Z=P+832+(V=3*(16*k+Fo[y.L])/2*fe)+(X=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=Z)k=0;else{if(Z>y.Vb){if(y.Vb=0,y.Ec=o(Z),y.Fc=0,y.Ec==null){k=jn(y,1,"no memory during frame initialization.");break e}y.Vb=Z}Z=y.Ec,te=y.Fc,y.Ac=Z,y.Bc=te,te+=P,y.Gd=l(fe,ml),y.Hd=0,y.rb=l(Ne+1,Rr),y.sb=1,y.wa=Fe?l(Fe,sn):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=le),e(!0),y.oc=Z,y.pc=te,te+=832,y.ya=l(Be,rr),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=le),y.R=16*le,y.B=8*le,le=(fe=Fo[y.L])*y.R,fe=fe/2*y.B,y.sa=Z,y.ta=te+le,y.qa=y.sa,y.ra=y.ta+16*k*y.R+fe,y.Ha=y.qa,y.Ia=y.ra+8*k*y.B+fe,y.$c=0,te+=V,y.mb=X?Z:null,y.nb=X?te:null,e(te+X<=y.Fc+y.Vb),yl(y),s(y.Ac,y.Bc,0,P),k=1}}if(k){if(N.ka=0,N.y=y.sa,N.O=y.ta,N.f=y.qa,N.N=y.ra,N.ea=y.Ha,N.Vd=y.Ia,N.fa=y.R,N.Rc=y.B,N.F=null,N.J=0,!gu){for(k=-255;255>=k;++k)Hs[255+k]=0>k?-k:k;for(k=-1020;1020>=k;++k)mu[1020+k]=-128>k?-128:127<k?127:k;for(k=-112;112>=k;++k)Ml[112+k]=-16>k?-16:15<k?15:k;for(k=-255;510>=k;++k)jl[255+k]=0>k?0:255<k?255:k;gu=1}Dr=au,ps=iu,ya=wo,Di=rs,Wr=xl,Ua=bo,Pi=Nl,ms=Bs,gs=wc,ai=Al,jo=_l,xi=Eo,va=Cl,Sn=cu,Nn=Co,Zn=ra,ir=Ri,xa=To,Hn[0]=ki,Hn[1]=bc,Hn[2]=is,Hn[3]=lu,Hn[4]=wl,Hn[5]=ii,Hn[6]=as,Hn[7]=Ps,Hn[8]=ma,Hn[9]=Us,$r[0]=Ds,$r[1]=ou,$r[2]=ta,$r[3]=So,$r[4]=Dn,$r[5]=bl,$r[6]=_o,la[0]=na,la[1]=su,la[2]=Sl,la[3]=ss,la[4]=ls,la[5]=Ao,la[6]=gr,k=1}else k=0}k&&(k=(function(Me,et){for(Me.M=0;Me.M<Me.Va;++Me.M){var Ye,_e=Me.Jc[Me.M&Me.Xb],ke=Me.m,Ze=Me;for(Ye=0;Ye<Ze.za;++Ye){var nt=ke,Ke=Ze,ct=Ke.Ac,ot=Ke.Bc+4*Ye,wt=Ke.zc,ut=Ke.ya[Ke.aa+Ye];if(Ke.Qa.Bb?ut.$b=Ee(nt,Ke.Pa.jb[0])?2+Ee(nt,Ke.Pa.jb[2]):Ee(nt,Ke.Pa.jb[1]):ut.$b=0,Ke.kc&&(ut.Ad=Ee(nt,Ke.Bd)),ut.Za=!Ee(nt,145)+0,ut.Za){var an=ut.Ob,$t=0;for(Ke=0;4>Ke;++Ke){var Qt,Bt=wt[0+Ke];for(Qt=0;4>Qt;++Qt){Bt=Cr[ct[ot+Qt]][Bt];for(var hn=Su[Ee(nt,Bt[0])];0<hn;)hn=Su[2*hn+Ee(nt,Bt[hn])];Bt=-hn,ct[ot+Qt]=Bt}i(an,$t,ct,ot,4),$t+=4,wt[0+Ke]=Bt}}else Bt=Ee(nt,156)?Ee(nt,128)?1:3:Ee(nt,163)?2:0,ut.Ob[0]=Bt,s(ct,ot,Bt,4),s(wt,0,Bt,4);ut.Dd=Ee(nt,142)?Ee(nt,114)?Ee(nt,183)?1:3:2:0}if(Ze.m.Ka)return jn(Me,7,"Premature end-of-partition0 encountered.");for(;Me.ja<Me.za;++Me.ja){if(Ze=_e,nt=(ke=Me).rb[ke.sb-1],ct=ke.rb[ke.sb+ke.ja],Ye=ke.ya[ke.aa+ke.ja],ot=ke.kc?Ye.Ad:0)nt.la=ct.la=0,Ye.Za||(nt.Na=ct.Na=0),Ye.Hc=0,Ye.Gc=0,Ye.ia=0;else{var ln,It;if(nt=ct,ct=Ze,ot=ke.Pa.Xc,wt=ke.ya[ke.aa+ke.ja],ut=ke.pb[wt.$b],Ke=wt.ad,an=0,$t=ke.rb[ke.sb-1],Bt=Qt=0,s(Ke,an,0,384),wt.Za)var yn=0,yr=ot[3];else{hn=o(16);var Vn=nt.Na+$t.Na;if(Vn=wi(ct,ot[1],Vn,ut.Eb,0,hn,0),nt.Na=$t.Na=(0<Vn)+0,1<Vn)Dr(hn,0,Ke,an);else{var Br=hn[0]+3>>3;for(hn=0;256>hn;hn+=16)Ke[an+hn]=Br}yn=1,yr=ot[0]}var nn=15&nt.la,Ir=15&$t.la;for(hn=0;4>hn;++hn){var si=1&Ir;for(Br=It=0;4>Br;++Br)nn=nn>>1|(si=(Vn=wi(ct,yr,Vn=si+(1&nn),ut.Sc,yn,Ke,an))>yn)<<7,It=It<<2|(3<Vn?3:1<Vn?2:Ke[an+0]!=0),an+=16;nn>>=4,Ir=Ir>>1|si<<7,Qt=(Qt<<8|It)>>>0}for(yr=nn,yn=Ir>>4,ln=0;4>ln;ln+=2){for(It=0,nn=nt.la>>4+ln,Ir=$t.la>>4+ln,hn=0;2>hn;++hn){for(si=1&Ir,Br=0;2>Br;++Br)Vn=si+(1&nn),nn=nn>>1|(si=0<(Vn=wi(ct,ot[2],Vn,ut.Qc,0,Ke,an)))<<3,It=It<<2|(3<Vn?3:1<Vn?2:Ke[an+0]!=0),an+=16;nn>>=2,Ir=Ir>>1|si<<5}Bt|=It<<4*ln,yr|=nn<<4<<ln,yn|=(240&Ir)<<ln}nt.la=yr,$t.la=yn,wt.Hc=Qt,wt.Gc=Bt,wt.ia=43690&Bt?0:ut.ia,ot=!(Qt|Bt)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[Ye.$b][Ye.Za],ke.wa[ke.Y+ke.ja].La|=!ot),Ze.Ka)return jn(Me,7,"Premature end-of-file encountered.")}if(yl(Me),ke=et,Ze=1,Ye=(_e=Me).D,nt=0<_e.L&&_e.M>=_e.zb&&_e.M<=_e.Va,_e.Aa==0)e:{if(Ye.M=_e.M,Ye.uc=nt,Lo(_e,Ye),Ze=1,Ye=(It=_e.D).Nb,nt=(Bt=Fo[_e.L])*_e.R,ct=Bt/2*_e.B,hn=16*Ye*_e.R,Br=8*Ye*_e.B,ot=_e.sa,wt=_e.ta-nt+hn,ut=_e.qa,Ke=_e.ra-ct+Br,an=_e.Ha,$t=_e.Ia-ct+Br,Ir=(nn=It.M)==0,Qt=nn>=_e.Va-1,_e.Aa==2&&Lo(_e,It),It.uc)for(si=(Vn=_e).D.M,e(Vn.D.uc),It=Vn.yb;It<Vn.Hb;++It){yn=It,yr=si;var ur=(Jn=(On=Vn).D).Nb;ln=On.R;var Jn=Jn.wa[Jn.Y+yn],vr=On.sa,Si=On.ta+16*ur*ln+16*yn,Hi=Jn.dd,ar=Jn.tc;if(ar!=0)if(e(3<=ar),On.L==1)0<yn&&Zn(vr,Si,ln,ar+4),Jn.La&&xa(vr,Si,ln,ar),0<yr&&Nn(vr,Si,ln,ar+4),Jn.La&&ir(vr,Si,ln,ar);else{var er=On.B,xr=On.qa,Ni=On.ra+8*ur*er+8*yn,Sa=On.Ha,On=On.Ia+8*ur*er+8*yn;ur=Jn.ld,0<yn&&(ms(vr,Si,ln,ar+4,Hi,ur),ai(xr,Ni,Sa,On,er,ar+4,Hi,ur)),Jn.La&&(xi(vr,Si,ln,ar,Hi,ur),Sn(xr,Ni,Sa,On,er,ar,Hi,ur)),0<yr&&(Pi(vr,Si,ln,ar+4,Hi,ur),gs(xr,Ni,Sa,On,er,ar+4,Hi,ur)),Jn.La&&(jo(vr,Si,ln,ar,Hi,ur),va(xr,Ni,Sa,On,er,ar,Hi,ur))}}if(_e.ia&&alert("todo:DitherRow"),ke.put!=null){if(It=16*nn,nn=16*(nn+1),Ir?(ke.y=_e.sa,ke.O=_e.ta+hn,ke.f=_e.qa,ke.N=_e.ra+Br,ke.ea=_e.Ha,ke.W=_e.Ia+Br):(It-=Bt,ke.y=ot,ke.O=wt,ke.f=ut,ke.N=Ke,ke.ea=an,ke.W=$t),Qt||(nn-=Bt),nn>ke.o&&(nn=ke.o),ke.F=null,ke.J=null,_e.Fa!=null&&0<_e.Fa.length&&It<nn&&(ke.J=Io(_e,ke,It,nn-It),ke.F=_e.mb,ke.F==null&&ke.F.length==0)){Ze=jn(_e,3,"Could not decode alpha data.");break e}It<ke.j&&(Bt=ke.j-It,It=ke.j,e(!(1&Bt)),ke.O+=_e.R*Bt,ke.N+=_e.B*(Bt>>1),ke.W+=_e.B*(Bt>>1),ke.F!=null&&(ke.J+=ke.width*Bt)),It<nn&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=It-ke.j,ke.U=ke.va-ke.v,ke.T=nn-It,Ze=ke.put(ke))}Ye+1!=_e.Ic||Qt||(i(_e.sa,_e.ta-nt,ot,wt+16*_e.R,nt),i(_e.qa,_e.ra-ct,ut,Ke+8*_e.B,ct),i(_e.Ha,_e.Ia-ct,an,$t+8*_e.B,ct))}if(!Ze)return jn(Me,6,"Output aborted.")}return 1})(y,N)),N.bc!=null&&N.bc(N),k&=1}return k?(y.cb=0,k):0}function Ii(y,N,k,P,V){V=y[N+k+32*P]+(V>>3),y[N+k+32*P]=-256&V?0>V?0:255:V}function La(y,N,k,P,V,X){Ii(y,N,0,k,P+V),Ii(y,N,1,k,P+X),Ii(y,N,2,k,P-X),Ii(y,N,3,k,P-V)}function ri(y){return(20091*y>>16)+y}function Mr(y,N,k,P){var V,X=0,Z=o(16);for(V=0;4>V;++V){var te=y[N+0]+y[N+8],le=y[N+0]-y[N+8],fe=(35468*y[N+4]>>16)-ri(y[N+12]),Ne=ri(y[N+4])+(35468*y[N+12]>>16);Z[X+0]=te+Ne,Z[X+1]=le+fe,Z[X+2]=le-fe,Z[X+3]=te-Ne,X+=4,N++}for(V=X=0;4>V;++V)te=(y=Z[X+0]+4)+Z[X+8],le=y-Z[X+8],fe=(35468*Z[X+4]>>16)-ri(Z[X+12]),Ii(k,P,0,0,te+(Ne=ri(Z[X+4])+(35468*Z[X+12]>>16))),Ii(k,P,1,0,le+fe),Ii(k,P,2,0,le-fe),Ii(k,P,3,0,te-Ne),X++,P+=32}function bo(y,N,k,P){var V=y[N+0]+4,X=35468*y[N+4]>>16,Z=ri(y[N+4]),te=35468*y[N+1]>>16;La(k,P,0,V+Z,y=ri(y[N+1]),te),La(k,P,1,V+X,y,te),La(k,P,2,V-X,y,te),La(k,P,3,V-Z,y,te)}function iu(y,N,k,P,V){Mr(y,N,k,P),V&&Mr(y,N+16,k,P+4)}function wo(y,N,k,P){ps(y,N+0,k,P,1),ps(y,N+32,k,P+128,1)}function rs(y,N,k,P){var V;for(y=y[N+0]+4,V=0;4>V;++V)for(N=0;4>N;++N)Ii(k,P,N,V,y)}function xl(y,N,k,P){y[N+0]&&Di(y,N+0,k,P),y[N+16]&&Di(y,N+16,k,P+4),y[N+32]&&Di(y,N+32,k,P+128),y[N+48]&&Di(y,N+48,k,P+128+4)}function au(y,N,k,P){var V,X=o(16);for(V=0;4>V;++V){var Z=y[N+0+V]+y[N+12+V],te=y[N+4+V]+y[N+8+V],le=y[N+4+V]-y[N+8+V],fe=y[N+0+V]-y[N+12+V];X[0+V]=Z+te,X[8+V]=Z-te,X[4+V]=fe+le,X[12+V]=fe-le}for(V=0;4>V;++V)Z=(y=X[0+4*V]+3)+X[3+4*V],te=X[1+4*V]+X[2+4*V],le=X[1+4*V]-X[2+4*V],fe=y-X[3+4*V],k[P+0]=Z+te>>3,k[P+16]=fe+le>>3,k[P+32]=Z-te>>3,k[P+48]=fe-le>>3,P+=64}function pa(y,N,k){var P,V=N-32,X=Ur,Z=255-y[V-1];for(P=0;P<k;++P){var te,le=X,fe=Z+y[N-1];for(te=0;te<k;++te)y[N+te]=le[fe+y[V+te]];N+=32}}function bc(y,N){pa(y,N,4)}function su(y,N){pa(y,N,8)}function ou(y,N){pa(y,N,16)}function ta(y,N){var k;for(k=0;16>k;++k)i(y,N+32*k,y,N-32,16)}function So(y,N){var k;for(k=16;0<k;--k)s(y,N,y[N-1],16),N+=32}function No(y,N,k){var P;for(P=0;16>P;++P)s(N,k+32*P,y,16)}function Ds(y,N){var k,P=16;for(k=0;16>k;++k)P+=y[N-1+32*k]+y[N+k-32];No(P>>5,y,N)}function Dn(y,N){var k,P=8;for(k=0;16>k;++k)P+=y[N-1+32*k];No(P>>4,y,N)}function bl(y,N){var k,P=8;for(k=0;16>k;++k)P+=y[N+k-32];No(P>>4,y,N)}function _o(y,N){No(128,y,N)}function Tt(y,N,k){return y+2*N+k+2>>2}function is(y,N){var k,P=N-32;for(P=new Uint8Array([Tt(y[P-1],y[P+0],y[P+1]),Tt(y[P+0],y[P+1],y[P+2]),Tt(y[P+1],y[P+2],y[P+3]),Tt(y[P+2],y[P+3],y[P+4])]),k=0;4>k;++k)i(y,N+32*k,P,0,P.length)}function lu(y,N){var k=y[N-1],P=y[N-1+32],V=y[N-1+64],X=y[N-1+96];Re(y,N+0,16843009*Tt(y[N-1-32],k,P)),Re(y,N+32,16843009*Tt(k,P,V)),Re(y,N+64,16843009*Tt(P,V,X)),Re(y,N+96,16843009*Tt(V,X,X))}function ki(y,N){var k,P=4;for(k=0;4>k;++k)P+=y[N+k-32]+y[N-1+32*k];for(P>>=3,k=0;4>k;++k)s(y,N+32*k,P,4)}function wl(y,N){var k=y[N-1+0],P=y[N-1+32],V=y[N-1+64],X=y[N-1-32],Z=y[N+0-32],te=y[N+1-32],le=y[N+2-32],fe=y[N+3-32];y[N+0+96]=Tt(P,V,y[N-1+96]),y[N+1+96]=y[N+0+64]=Tt(k,P,V),y[N+2+96]=y[N+1+64]=y[N+0+32]=Tt(X,k,P),y[N+3+96]=y[N+2+64]=y[N+1+32]=y[N+0+0]=Tt(Z,X,k),y[N+3+64]=y[N+2+32]=y[N+1+0]=Tt(te,Z,X),y[N+3+32]=y[N+2+0]=Tt(le,te,Z),y[N+3+0]=Tt(fe,le,te)}function as(y,N){var k=y[N+1-32],P=y[N+2-32],V=y[N+3-32],X=y[N+4-32],Z=y[N+5-32],te=y[N+6-32],le=y[N+7-32];y[N+0+0]=Tt(y[N+0-32],k,P),y[N+1+0]=y[N+0+32]=Tt(k,P,V),y[N+2+0]=y[N+1+32]=y[N+0+64]=Tt(P,V,X),y[N+3+0]=y[N+2+32]=y[N+1+64]=y[N+0+96]=Tt(V,X,Z),y[N+3+32]=y[N+2+64]=y[N+1+96]=Tt(X,Z,te),y[N+3+64]=y[N+2+96]=Tt(Z,te,le),y[N+3+96]=Tt(te,le,le)}function ii(y,N){var k=y[N-1+0],P=y[N-1+32],V=y[N-1+64],X=y[N-1-32],Z=y[N+0-32],te=y[N+1-32],le=y[N+2-32],fe=y[N+3-32];y[N+0+0]=y[N+1+64]=X+Z+1>>1,y[N+1+0]=y[N+2+64]=Z+te+1>>1,y[N+2+0]=y[N+3+64]=te+le+1>>1,y[N+3+0]=le+fe+1>>1,y[N+0+96]=Tt(V,P,k),y[N+0+64]=Tt(P,k,X),y[N+0+32]=y[N+1+96]=Tt(k,X,Z),y[N+1+32]=y[N+2+96]=Tt(X,Z,te),y[N+2+32]=y[N+3+96]=Tt(Z,te,le),y[N+3+32]=Tt(te,le,fe)}function Ps(y,N){var k=y[N+0-32],P=y[N+1-32],V=y[N+2-32],X=y[N+3-32],Z=y[N+4-32],te=y[N+5-32],le=y[N+6-32],fe=y[N+7-32];y[N+0+0]=k+P+1>>1,y[N+1+0]=y[N+0+64]=P+V+1>>1,y[N+2+0]=y[N+1+64]=V+X+1>>1,y[N+3+0]=y[N+2+64]=X+Z+1>>1,y[N+0+32]=Tt(k,P,V),y[N+1+32]=y[N+0+96]=Tt(P,V,X),y[N+2+32]=y[N+1+96]=Tt(V,X,Z),y[N+3+32]=y[N+2+96]=Tt(X,Z,te),y[N+3+64]=Tt(Z,te,le),y[N+3+96]=Tt(te,le,fe)}function Us(y,N){var k=y[N-1+0],P=y[N-1+32],V=y[N-1+64],X=y[N-1+96];y[N+0+0]=k+P+1>>1,y[N+2+0]=y[N+0+32]=P+V+1>>1,y[N+2+32]=y[N+0+64]=V+X+1>>1,y[N+1+0]=Tt(k,P,V),y[N+3+0]=y[N+1+32]=Tt(P,V,X),y[N+3+32]=y[N+1+64]=Tt(V,X,X),y[N+3+64]=y[N+2+64]=y[N+0+96]=y[N+1+96]=y[N+2+96]=y[N+3+96]=X}function ma(y,N){var k=y[N-1+0],P=y[N-1+32],V=y[N-1+64],X=y[N-1+96],Z=y[N-1-32],te=y[N+0-32],le=y[N+1-32],fe=y[N+2-32];y[N+0+0]=y[N+2+32]=k+Z+1>>1,y[N+0+32]=y[N+2+64]=P+k+1>>1,y[N+0+64]=y[N+2+96]=V+P+1>>1,y[N+0+96]=X+V+1>>1,y[N+3+0]=Tt(te,le,fe),y[N+2+0]=Tt(Z,te,le),y[N+1+0]=y[N+3+32]=Tt(k,Z,te),y[N+1+32]=y[N+3+64]=Tt(P,k,Z),y[N+1+64]=y[N+3+96]=Tt(V,P,k),y[N+1+96]=Tt(X,V,P)}function Sl(y,N){var k;for(k=0;8>k;++k)i(y,N+32*k,y,N-32,8)}function ss(y,N){var k;for(k=0;8>k;++k)s(y,N,y[N-1],8),N+=32}function os(y,N,k){var P;for(P=0;8>P;++P)s(N,k+32*P,y,8)}function na(y,N){var k,P=8;for(k=0;8>k;++k)P+=y[N+k-32]+y[N-1+32*k];os(P>>4,y,N)}function Ao(y,N){var k,P=4;for(k=0;8>k;++k)P+=y[N+k-32];os(P>>3,y,N)}function ls(y,N){var k,P=4;for(k=0;8>k;++k)P+=y[N-1+32*k];os(P>>3,y,N)}function gr(y,N){os(128,y,N)}function Li(y,N,k){var P=y[N-k],V=y[N+0],X=3*(V-P)+Oa[1020+y[N-2*k]-y[N+k]],Z=Dl[112+(X+4>>3)];y[N-k]=Ur[255+P+Dl[112+(X+3>>3)]],y[N+0]=Ur[255+V-Z]}function Os(y,N,k,P){var V=y[N+0],X=y[N+k];return Ar[255+y[N-2*k]-y[N-k]]>P||Ar[255+X-V]>P}function us(y,N,k,P){return 4*Ar[255+y[N-k]-y[N+0]]+Ar[255+y[N-2*k]-y[N+k]]<=P}function uu(y,N,k,P,V){var X=y[N-3*k],Z=y[N-2*k],te=y[N-k],le=y[N+0],fe=y[N+k],Ne=y[N+2*k],Fe=y[N+3*k];return 4*Ar[255+te-le]+Ar[255+Z-fe]>P?0:Ar[255+y[N-4*k]-X]<=V&&Ar[255+X-Z]<=V&&Ar[255+Z-te]<=V&&Ar[255+Fe-Ne]<=V&&Ar[255+Ne-fe]<=V&&Ar[255+fe-le]<=V}function Co(y,N,k,P){var V=2*P+1;for(P=0;16>P;++P)us(y,N+P,k,V)&&Li(y,N+P,k)}function ra(y,N,k,P){var V=2*P+1;for(P=0;16>P;++P)us(y,N+P*k,1,V)&&Li(y,N+P*k,1)}function Ri(y,N,k,P){var V;for(V=3;0<V;--V)Co(y,N+=4*k,k,P)}function To(y,N,k,P){var V;for(V=3;0<V;--V)ra(y,N+=4,k,P)}function Ra(y,N,k,P,V,X,Z,te){for(X=2*X+1;0<V--;){if(uu(y,N,k,X,Z))if(Os(y,N,k,te))Li(y,N,k);else{var le=y,fe=N,Ne=k,Fe=le[fe-2*Ne],Be=le[fe-Ne],Me=le[fe+0],et=le[fe+Ne],Ye=le[fe+2*Ne],_e=27*(Ze=Oa[1020+3*(Me-Be)+Oa[1020+Fe-et]])+63>>7,ke=18*Ze+63>>7,Ze=9*Ze+63>>7;le[fe-3*Ne]=Ur[255+le[fe-3*Ne]+Ze],le[fe-2*Ne]=Ur[255+Fe+ke],le[fe-Ne]=Ur[255+Be+_e],le[fe+0]=Ur[255+Me-_e],le[fe+Ne]=Ur[255+et-ke],le[fe+2*Ne]=Ur[255+Ye-Ze]}N+=P}}function ia(y,N,k,P,V,X,Z,te){for(X=2*X+1;0<V--;){if(uu(y,N,k,X,Z))if(Os(y,N,k,te))Li(y,N,k);else{var le=y,fe=N,Ne=k,Fe=le[fe-Ne],Be=le[fe+0],Me=le[fe+Ne],et=Dl[112+((Ye=3*(Be-Fe))+4>>3)],Ye=Dl[112+(Ye+3>>3)],_e=et+1>>1;le[fe-2*Ne]=Ur[255+le[fe-2*Ne]+_e],le[fe-Ne]=Ur[255+Fe+Ye],le[fe+0]=Ur[255+Be-et],le[fe+Ne]=Ur[255+Me-_e]}N+=P}}function Nl(y,N,k,P,V,X){Ra(y,N,k,1,16,P,V,X)}function Bs(y,N,k,P,V,X){Ra(y,N,1,k,16,P,V,X)}function _l(y,N,k,P,V,X){var Z;for(Z=3;0<Z;--Z)ia(y,N+=4*k,k,1,16,P,V,X)}function Eo(y,N,k,P,V,X){var Z;for(Z=3;0<Z;--Z)ia(y,N+=4,1,k,16,P,V,X)}function wc(y,N,k,P,V,X,Z,te){Ra(y,N,V,1,8,X,Z,te),Ra(k,P,V,1,8,X,Z,te)}function Al(y,N,k,P,V,X,Z,te){Ra(y,N,1,V,8,X,Z,te),Ra(k,P,1,V,8,X,Z,te)}function Cl(y,N,k,P,V,X,Z,te){ia(y,N+4*V,V,1,8,X,Z,te),ia(k,P+4*V,V,1,8,X,Z,te)}function cu(y,N,k,P,V,X,Z,te){ia(y,N+4,1,V,8,X,Z,te),ia(k,P+4,1,V,8,X,Z,te)}function Fs(){this.ba=new Gn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Tl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function El(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function du(){this.ua=0,this.Wa=new $,this.vb=new $,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new j}function Sc(){this.xb=this.a=0,this.l=new vo,this.ca=new Gn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new du,this.ab=0,this.gc=l(4,El),this.Oc=0}function cs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function zs(y,N,k,P,V,X,Z){for(y=y==null?0:y[N+0],N=0;N<Z;++N)V[X+N]=y+k[P+N]&255,y=V[X+N]}function Il(y,N,k,P,V,X,Z){var te;if(y==null)zs(null,null,k,P,V,X,Z);else for(te=0;te<Z;++te)V[X+te]=y[N+te]+k[P+te]&255}function ds(y,N,k,P,V,X,Z){if(y==null)zs(null,null,k,P,V,X,Z);else{var te,le=y[N+0],fe=le,Ne=le;for(te=0;te<Z;++te)fe=Ne+(le=y[N+te])-fe,Ne=k[P+te]+(-256&fe?0>fe?0:255:fe)&255,fe=le,V[X+te]=Ne}}function Io(y,N,k,P){var V=N.width,X=N.o;if(e(y!=null&&N!=null),0>k||0>=P||k+P>X)return null;if(!y.Cc){if(y.ga==null){var Z;if(y.ga=new cs,(Z=y.ga==null)||(Z=N.width*N.o,e(y.Gb.length==0),y.Gb=o(Z),y.Uc=0,y.Gb==null?Z=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,Z=1),Z=!Z),!Z){Z=y.ga;var te=y.Fa,le=y.P,fe=y.qc,Ne=y.mb,Fe=y.nb,Be=le+1,Me=fe-1,et=Z.l;if(e(te!=null&&Ne!=null&&N!=null),Ba[0]=null,Ba[1]=zs,Ba[2]=Il,Ba[3]=ds,Z.ca=Ne,Z.tb=Fe,Z.c=N.width,Z.i=N.height,e(0<Z.c&&0<Z.i),1>=fe)N=0;else if(Z.$a=te[le+0]>>0&3,Z.Z=te[le+0]>>2&3,Z.Lc=te[le+0]>>4&3,le=te[le+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||le)N=0;else if(et.put=Zr,et.ac=nr,et.bc=Lr,et.ma=Z,et.width=N.width,et.height=N.height,et.Da=N.Da,et.v=N.v,et.va=N.va,et.j=N.j,et.o=N.o,Z.$a)e:{e(Z.$a==1),N=ei();t:for(;;){if(N==null){N=0;break e}if(e(Z!=null),Z.mc=N,N.c=Z.c,N.i=Z.i,N.l=Z.l,N.l.ma=Z,N.l.width=Z.c,N.l.height=Z.i,N.a=0,me(N.m,te,Be,Me),!Ti(Z.c,Z.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&pr(N.s)?(Z.ic=1,te=N.c*N.i,N.Ta=null,N.Ua=0,N.V=o(te),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(Z.ic=0,N=ea(N,Z.c)),!N))break t;N=1;break e}Z.mc=null,N=0}else N=Me>=Z.c*Z.i;Z=!N}if(Z)return null;y.ga.Lc!=1?y.Ga=0:P=X-k}e(y.ga!=null),e(k+P<=X);e:{if(N=(te=y.ga).c,X=te.l.o,te.$a==0){if(Be=y.rc,Me=y.Vc,et=y.Fa,le=y.P+1+k*N,fe=y.mb,Ne=y.nb+k*N,e(le<=y.P+y.qc),te.Z!=0)for(e(Ba[te.Z]!=null),Z=0;Z<P;++Z)Ba[te.Z](Be,Me,et,le,fe,Ne,N),Be=fe,Me=Ne,Ne+=N,le+=N;else for(Z=0;Z<P;++Z)i(fe,Ne,et,le,N),Be=fe,Me=Ne,Ne+=N,le+=N;y.rc=Be,y.Vc=Me}else{if(e(te.mc!=null),N=k+P,e((Z=te.mc)!=null),e(N<=Z.i),Z.C>=N)N=1;else if(te.ic||Ue(),te.ic){te=Z.V,Be=Z.Ba,Me=Z.c;var Ye=Z.i,_e=(et=1,le=Z.$/Me,fe=Z.$%Me,Ne=Z.m,Fe=Z.s,Z.$),ke=Me*Ye,Ze=Me*N,nt=Fe.wc,Ke=_e<Ze?Mn(Fe,fe,le):null;e(_e<=ke),e(N<=Ye),e(pr(Fe));t:for(;;){for(;!Ne.h&&_e<Ze;){if(fe&nt||(Ke=Mn(Fe,fe,le)),e(Ke!=null),xe(Ne),256>(Ye=hr(Ke.G[0],Ke.H[0],Ne)))te[Be+_e]=Ye,++_e,++fe>=Me&&(fe=0,++le<=N&&!(le%16)&&wn(Z,le));else{if(!(280>Ye)){et=0;break t}Ye=Qr(Ye-256,Ne);var ct,ot=hr(Ke.G[4],Ke.H[4],Ne);if(xe(Ne),!(_e>=(ot=mi(Me,ot=Qr(ot,Ne)))&&ke-_e>=Ye)){et=0;break t}for(ct=0;ct<Ye;++ct)te[Be+_e+ct]=te[Be+_e+ct-ot];for(_e+=Ye,fe+=Ye;fe>=Me;)fe-=Me,++le<=N&&!(le%16)&&wn(Z,le);_e<Ze&&fe&nt&&(Ke=Mn(Fe,fe,le))}e(Ne.h==K(Ne))}wn(Z,le>N?N:le);break t}!et||Ne.h&&_e<ke?(et=0,Z.a=Ne.h?5:3):Z.$=_e,N=et}else N=mr(Z,Z.V,Z.Ba,Z.c,Z.i,N,gi);if(!N){P=0;break e}}k+P>=X&&(y.Cc=1),P=1}if(!P)return null;if(y.Cc&&((P=y.ga)!=null&&(P.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+k*V}function T(y,N,k,P,V,X){for(;0<V--;){var Z,te=y,le=N+(k?1:0),fe=y,Ne=N+(k?0:3);for(Z=0;Z<P;++Z){var Fe=fe[Ne+4*Z];Fe!=255&&(Fe*=32897,te[le+4*Z+0]=te[le+4*Z+0]*Fe>>23,te[le+4*Z+1]=te[le+4*Z+1]*Fe>>23,te[le+4*Z+2]=te[le+4*Z+2]*Fe>>23)}N+=X}}function Y(y,N,k,P,V){for(;0<P--;){var X;for(X=0;X<k;++X){var Z=y[N+2*X+0],te=15&(fe=y[N+2*X+1]),le=4369*te,fe=(240&fe|fe>>4)*le>>16;y[N+2*X+0]=(240&Z|Z>>4)*le>>16&240|(15&Z|Z<<4)*le>>16>>4&15,y[N+2*X+1]=240&fe|te}N+=V}}function ge(y,N,k,P,V,X,Z,te){var le,fe,Ne=255;for(fe=0;fe<V;++fe){for(le=0;le<P;++le){var Fe=y[N+le];X[Z+4*le]=Fe,Ne&=Fe}N+=k,Z+=te}return Ne!=255}function Se(y,N,k,P,V){var X;for(X=0;X<V;++X)k[P+X]=y[N+X]>>8}function Ue(){ba=T,Pr=Y,Gs=ge,bi=Se}function We(y,N,k){G[y]=function(P,V,X,Z,te,le,fe,Ne,Fe,Be,Me,et,Ye,_e,ke,Ze,nt){var Ke,ct=nt-1>>1,ot=te[le+0]|fe[Ne+0]<<16,wt=Fe[Be+0]|Me[et+0]<<16;e(P!=null);var ut=3*ot+wt+131074>>2;for(N(P[V+0],255&ut,ut>>16,Ye,_e),X!=null&&(ut=3*wt+ot+131074>>2,N(X[Z+0],255&ut,ut>>16,ke,Ze)),Ke=1;Ke<=ct;++Ke){var an=te[le+Ke]|fe[Ne+Ke]<<16,$t=Fe[Be+Ke]|Me[et+Ke]<<16,Qt=ot+an+wt+$t+524296,Bt=Qt+2*(an+wt)>>3;ut=Bt+ot>>1,ot=(Qt=Qt+2*(ot+$t)>>3)+an>>1,N(P[V+2*Ke-1],255&ut,ut>>16,Ye,_e+(2*Ke-1)*k),N(P[V+2*Ke-0],255&ot,ot>>16,Ye,_e+(2*Ke-0)*k),X!=null&&(ut=Qt+wt>>1,ot=Bt+$t>>1,N(X[Z+2*Ke-1],255&ut,ut>>16,ke,Ze+(2*Ke-1)*k),N(X[Z+2*Ke+0],255&ot,ot>>16,ke,Ze+(2*Ke+0)*k)),ot=an,wt=$t}1&nt||(ut=3*ot+wt+131074>>2,N(P[V+nt-1],255&ut,ut>>16,Ye,_e+(nt-1)*k),X!=null&&(ut=3*wt+ot+131074>>2,N(X[Z+nt-1],255&ut,ut>>16,ke,Ze+(nt-1)*k)))}}function it(){Tr[yu]=Js,Tr[Or]=Oo,Tr[vu]=Cc,Tr[Ui]=Nu,Tr[Pl]=bs,Tr[Do]=wa,Tr[ys]=ws,Tr[Ul]=Oo,Tr[xu]=Nu,Tr[Po]=bs,Tr[bu]=wa}function ft(y){return y&-16384?0>y?0:255:y>>_u}function St(y,N){return ft((19077*y>>8)+(26149*N>>8)-14234)}function Dt(y,N,k){return ft((19077*y>>8)-(6419*N>>8)-(13320*k>>8)+8708)}function Ut(y,N){return ft((19077*y>>8)+(33050*N>>8)-17685)}function Zt(y,N,k,P,V){P[V+0]=St(y,k),P[V+1]=Dt(y,N,k),P[V+2]=Ut(y,N)}function Pn(y,N,k,P,V){P[V+0]=Ut(y,N),P[V+1]=Dt(y,N,k),P[V+2]=St(y,k)}function Un(y,N,k,P,V){var X=Dt(y,N,k);N=X<<3&224|Ut(y,N)>>3,P[V+0]=248&St(y,k)|X>>5,P[V+1]=N}function Xn(y,N,k,P,V){var X=240&Ut(y,N)|15;P[V+0]=240&St(y,k)|Dt(y,N,k)>>4,P[V+1]=X}function _r(y,N,k,P,V){P[V+0]=255,Zt(y,N,k,P,V+1)}function lr(y,N,k,P,V){Pn(y,N,k,P,V),P[V+3]=255}function jr(y,N,k,P,V){Zt(y,N,k,P,V),P[V+3]=255}function yi(y,N){return 0>y?0:y>N?N:y}function Ma(y,N,k){G[y]=function(P,V,X,Z,te,le,fe,Ne,Fe){for(var Be=Ne+(-2&Fe)*k;Ne!=Be;)N(P[V+0],X[Z+0],te[le+0],fe,Ne),N(P[V+1],X[Z+0],te[le+0],fe,Ne+k),V+=2,++Z,++le,Ne+=2*k;1&Fe&&N(P[V+0],X[Z+0],te[le+0],fe,Ne)}}function fu(y,N,k){return k==0?y==0?N==0?6:5:N==0?4:0:k}function ko(y,N,k,P,V){switch(y>>>30){case 3:ps(N,k,P,V,0);break;case 2:Ua(N,k,P,V);break;case 1:Di(N,k,P,V)}}function Lo(y,N){var k,P,V=N.M,X=N.Nb,Z=y.oc,te=y.pc+40,le=y.oc,fe=y.pc+584,Ne=y.oc,Fe=y.pc+600;for(k=0;16>k;++k)Z[te+32*k-1]=129;for(k=0;8>k;++k)le[fe+32*k-1]=129,Ne[Fe+32*k-1]=129;for(0<V?Z[te-1-32]=le[fe-1-32]=Ne[Fe-1-32]=129:(s(Z,te-32-1,127,21),s(le,fe-32-1,127,9),s(Ne,Fe-32-1,127,9)),P=0;P<y.za;++P){var Be=N.ya[N.aa+P];if(0<P){for(k=-1;16>k;++k)i(Z,te+32*k-4,Z,te+32*k+12,4);for(k=-1;8>k;++k)i(le,fe+32*k-4,le,fe+32*k+4,4),i(Ne,Fe+32*k-4,Ne,Fe+32*k+4,4)}var Me=y.Gd,et=y.Hd+P,Ye=Be.ad,_e=Be.Hc;if(0<V&&(i(Z,te-32,Me[et].y,0,16),i(le,fe-32,Me[et].f,0,8),i(Ne,Fe-32,Me[et].ea,0,8)),Be.Za){var ke=Z,Ze=te-32+16;for(0<V&&(P>=y.za-1?s(ke,Ze,Me[et].y[15],4):i(ke,Ze,Me[et+1].y,0,4)),k=0;4>k;k++)ke[Ze+128+k]=ke[Ze+256+k]=ke[Ze+384+k]=ke[Ze+0+k];for(k=0;16>k;++k,_e<<=2)ke=Z,Ze=te+Qn[k],Hn[Be.Ob[k]](ke,Ze),ko(_e,Ye,16*+k,ke,Ze)}else if(ke=fu(P,V,Be.Ob[0]),$r[ke](Z,te),_e!=0)for(k=0;16>k;++k,_e<<=2)ko(_e,Ye,16*+k,Z,te+Qn[k]);for(k=Be.Gc,ke=fu(P,V,Be.Dd),la[ke](le,fe),la[ke](Ne,Fe),_e=Ye,ke=le,Ze=fe,255&(Be=k>>0)&&(170&Be?ya(_e,256,ke,Ze):Wr(_e,256,ke,Ze)),Be=Ne,_e=Fe,255&(k>>=8)&&(170&k?ya(Ye,320,Be,_e):Wr(Ye,320,Be,_e)),V<y.Ub-1&&(i(Me[et].y,0,Z,te+480,16),i(Me[et].f,0,le,fe+224,8),i(Me[et].ea,0,Ne,Fe+224,8)),k=8*X*y.B,Me=y.sa,et=y.ta+16*P+16*X*y.R,Ye=y.qa,Be=y.ra+8*P+k,_e=y.Ha,ke=y.Ia+8*P+k,k=0;16>k;++k)i(Me,et+k*y.R,Z,te+32*k,16);for(k=0;8>k;++k)i(Ye,Be+k*y.B,le,fe+32*k,8),i(_e,ke+k*y.B,Ne,Fe+32*k,8)}}function ga(y,N,k,P,V,X,Z,te,le){var fe=[0],Ne=[0],Fe=0,Be=le!=null?le.kd:0,Me=le??new Tl;if(y==null||12>k)return 7;Me.data=y,Me.w=N,Me.ha=k,N=[N],k=[k],Me.gb=[Me.gb];e:{var et=N,Ye=k,_e=Me.gb;if(e(y!=null),e(Ye!=null),e(_e!=null),_e[0]=0,12<=Ye[0]&&!n(y,et[0],"RIFF")){if(n(y,et[0]+8,"WEBP")){_e=3;break e}var ke=Xe(y,et[0]+4);if(12>ke||4294967286<ke){_e=3;break e}if(Be&&ke>Ye[0]-8){_e=7;break e}_e[0]=ke,et[0]+=12,Ye[0]-=12}_e=0}if(_e!=0)return _e;for(ke=0<Me.gb[0],k=k[0];;){e:{var Ze=y;Ye=N,_e=k;var nt=fe,Ke=Ne,ct=et=[0];if((ut=Fe=[Fe])[0]=0,8>_e[0])_e=7;else{if(!n(Ze,Ye[0],"VP8X")){if(Xe(Ze,Ye[0]+4)!=10){_e=3;break e}if(18>_e[0]){_e=7;break e}var ot=Xe(Ze,Ye[0]+8),wt=1+He(Ze,Ye[0]+12);if(2147483648<=wt*(Ze=1+He(Ze,Ye[0]+15))){_e=3;break e}ct!=null&&(ct[0]=ot),nt!=null&&(nt[0]=wt),Ke!=null&&(Ke[0]=Ze),Ye[0]+=18,_e[0]-=18,ut[0]=1}_e=0}}if(Fe=Fe[0],et=et[0],_e!=0)return _e;if(Ye=!!(2&et),!ke&&Fe)return 3;if(X!=null&&(X[0]=!!(16&et)),Z!=null&&(Z[0]=Ye),te!=null&&(te[0]=0),Z=fe[0],et=Ne[0],Fe&&Ye&&le==null){_e=0;break}if(4>k){_e=7;break}if(ke&&Fe||!ke&&!Fe&&!n(y,N[0],"ALPH")){k=[k],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{ot=y,_e=N,ke=k;var ut=Me.gb;nt=Me.na,Ke=Me.P,ct=Me.Sa,wt=22,e(ot!=null),e(ke!=null),Ze=_e[0];var an=ke[0];for(e(nt!=null),e(ct!=null),nt[0]=null,Ke[0]=null,ct[0]=0;;){if(_e[0]=Ze,ke[0]=an,8>an){_e=7;break e}var $t=Xe(ot,Ze+4);if(4294967286<$t){_e=3;break e}var Qt=8+$t+1&-2;if(wt+=Qt,0<ut&&wt>ut){_e=3;break e}if(!n(ot,Ze,"VP8 ")||!n(ot,Ze,"VP8L")){_e=0;break e}if(an[0]<Qt){_e=7;break e}n(ot,Ze,"ALPH")||(nt[0]=ot,Ke[0]=Ze+8,ct[0]=$t),Ze+=Qt,an-=Qt}}if(k=k[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],_e!=0)break}k=[k],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(ut=y,_e=N,ke=k,nt=Me.gb[0],Ke=Me.Ja,ct=Me.xa,ot=_e[0],Ze=!n(ut,ot,"VP8 "),wt=!n(ut,ot,"VP8L"),e(ut!=null),e(ke!=null),e(Ke!=null),e(ct!=null),8>ke[0])_e=7;else{if(Ze||wt){if(ut=Xe(ut,ot+4),12<=nt&&ut>nt-12){_e=3;break e}if(Be&&ut>ke[0]-8){_e=7;break e}Ke[0]=ut,_e[0]+=8,ke[0]-=8,ct[0]=wt}else ct[0]=5<=ke[0]&&ut[ot+0]==47&&!(ut[ot+4]>>5),Ke[0]=ke[0];_e=0}if(k=k[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],N=N[0],_e!=0)break;if(4294967286<Me.Ja)return 3;if(te==null||Ye||(te[0]=Me.xa?2:1),Z=[Z],et=[et],Me.xa){if(5>k){_e=7;break}te=Z,Be=et,Ye=X,y==null||5>k?y=0:5<=k&&y[N+0]==47&&!(y[N+4]>>5)?(ke=[0],ut=[0],nt=[0],me(Ke=new L,y,N,k),At(Ke,ke,ut,nt)?(te!=null&&(te[0]=ke[0]),Be!=null&&(Be[0]=ut[0]),Ye!=null&&(Ye[0]=nt[0]),y=1):y=0):y=0}else{if(10>k){_e=7;break}te=et,y==null||10>k||!Ei(y,N+3,k-3)?y=0:(Be=y[N+0]|y[N+1]<<8|y[N+2]<<16,Ye=16383&(y[N+7]<<8|y[N+6]),y=16383&(y[N+9]<<8|y[N+8]),1&Be||3<(Be>>1&7)||!(Be>>4&1)||Be>>5>=Me.Ja||!Ye||!y?y=0:(Z&&(Z[0]=Ye),te&&(te[0]=y),y=1))}if(!y||(Z=Z[0],et=et[0],Fe&&(fe[0]!=Z||Ne[0]!=et)))return 3;le!=null&&(le[0]=Me,le.offset=N-le.w,e(4294967286>N-le.w),e(le.offset==le.ha-k));break}return _e==0||_e==7&&Fe&&le==null?(X!=null&&(X[0]|=Me.na!=null&&0<Me.na.length),P!=null&&(P[0]=Z),V!=null&&(V[0]=et),0):_e}function ja(y,N,k){var P=N.width,V=N.height,X=0,Z=0,te=P,le=V;if(N.Da=y!=null&&0<y.Da,N.Da&&(te=y.cd,le=y.bd,X=y.v,Z=y.j,11>k||(X&=-2,Z&=-2),0>X||0>Z||0>=te||0>=le||X+te>P||Z+le>V))return 0;if(N.v=X,N.j=Z,N.va=X+te,N.o=Z+le,N.U=te,N.T=le,N.da=y!=null&&0<y.da,N.da){if(!de(te,le,k=[y.ib],X=[y.hb]))return 0;N.ib=k[0],N.hb=X[0]}return N.ob=y!=null&&y.ob,N.Kb=y==null||!y.Sd,N.da&&(N.ob=N.ib<3*P/4&&N.hb<3*V/4,N.Kb=0),1}function kl(y){if(y==null)return 2;if(11>y.S){var N=y.f.RGBA;N.fb+=(y.height-1)*N.A,N.A=-N.A}else N=y.f.kb,y=y.height,N.O+=(y-1)*N.fa,N.fa=-N.fa,N.N+=(y-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(y-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(y-1)*N.lb,N.lb=-N.lb);return 0}function Da(y,N,k,P){if(P==null||0>=y||0>=N)return 2;if(k!=null){if(k.Da){var V=k.cd,X=k.bd,Z=-2&k.v,te=-2&k.j;if(0>Z||0>te||0>=V||0>=X||Z+V>y||te+X>N)return 2;y=V,N=X}if(k.da){if(!de(y,N,V=[k.ib],X=[k.hb]))return 2;y=V[0],N=X[0]}}P.width=y,P.height=N;e:{var le=P.width,fe=P.height;if(y=P.S,0>=le||0>=fe||!(y>=yu&&13>y))y=2;else{if(0>=P.Rd&&P.sd==null){Z=X=V=N=0;var Ne=(te=le*Cu[y])*fe;if(11>y||(X=(fe+1)/2*(N=(le+1)/2),y==12&&(Z=(V=le)*fe)),(fe=o(Ne+2*X+Z))==null){y=1;break e}P.sd=fe,11>y?((le=P.f.RGBA).eb=fe,le.fb=0,le.A=te,le.size=Ne):((le=P.f.kb).y=fe,le.O=0,le.fa=te,le.Fd=Ne,le.f=fe,le.N=0+Ne,le.Ab=N,le.Cd=X,le.ea=fe,le.W=0+Ne+X,le.Db=N,le.Ed=X,y==12&&(le.F=fe,le.J=0+Ne+2*X),le.Tc=Z,le.lb=V)}if(N=1,V=P.S,X=P.width,Z=P.height,V>=yu&&13>V)if(11>V)y=P.f.RGBA,N&=(te=Math.abs(y.A))*(Z-1)+X<=y.size,N&=te>=X*Cu[V],N&=y.eb!=null;else{y=P.f.kb,te=(X+1)/2,Ne=(Z+1)/2,le=Math.abs(y.fa),fe=Math.abs(y.Ab);var Fe=Math.abs(y.Db),Be=Math.abs(y.lb),Me=Be*(Z-1)+X;N&=le*(Z-1)+X<=y.Fd,N&=fe*(Ne-1)+te<=y.Cd,N=(N&=Fe*(Ne-1)+te<=y.Ed)&le>=X&fe>=te&Fe>=te,N&=y.y!=null,N&=y.f!=null,N&=y.ea!=null,V==12&&(N&=Be>=X,N&=Me<=y.Tc,N&=y.F!=null)}else N=0;y=N?0:2}}return y!=0||k!=null&&k.fd&&(y=kl(P)),y}var Vr=64,qs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fs=24,hs=32,Ro=8,Jr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(y){return y},G.Predictor2=function(y,N,k){return N[k+0]},G.Predictor3=function(y,N,k){return N[k+1]},G.Predictor4=function(y,N,k){return N[k-1]},G.Predictor5=function(y,N,k){return be(be(y,N[k+1]),N[k+0])},G.Predictor6=function(y,N,k){return be(y,N[k-1])},G.Predictor7=function(y,N,k){return be(y,N[k+0])},G.Predictor8=function(y,N,k){return be(N[k-1],N[k+0])},G.Predictor9=function(y,N,k){return be(N[k+0],N[k+1])},G.Predictor10=function(y,N,k){return be(be(y,N[k-1]),be(N[k+0],N[k+1]))},G.Predictor11=function(y,N,k){var P=N[k+0];return 0>=Je(P>>24&255,y>>24&255,(N=N[k-1])>>24&255)+Je(P>>16&255,y>>16&255,N>>16&255)+Je(P>>8&255,y>>8&255,N>>8&255)+Je(255&P,255&y,255&N)?P:y},G.Predictor12=function(y,N,k){var P=N[k+0];return(je((y>>24&255)+(P>>24&255)-((N=N[k-1])>>24&255))<<24|je((y>>16&255)+(P>>16&255)-(N>>16&255))<<16|je((y>>8&255)+(P>>8&255)-(N>>8&255))<<8|je((255&y)+(255&P)-(255&N)))>>>0},G.Predictor13=function(y,N,k){var P=N[k-1];return(Oe((y=be(y,N[k+0]))>>24&255,P>>24&255)<<24|Oe(y>>16&255,P>>16&255)<<16|Oe(y>>8&255,P>>8&255)<<8|Oe(y>>0&255,P>>0&255))>>>0};var hu=G.PredictorAdd0;G.PredictorAdd1=at,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var Ll=G.PredictorAdd2;Rt("ColorIndexInverseTransform","MapARGB","32b",(function(y){return y>>8&255}),(function(y){return y})),Rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(y){return y}),(function(y){return y>>8&255}));var pu,aa=G.ColorIndexInverseTransform,Rl=G.MapARGB,Nc=G.VP8LColorIndexInverseTransformAlpha,Yr=G.MapAlpha,Mi=G.VP8LPredictorsAdd=[];Mi.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var vi,ji,Pa,sa,oa,Mo,Dr,ps,Ua,ya,Di,Wr,Pi,ms,gs,ai,jo,xi,va,Sn,Nn,Zn,ir,xa,ba,Pr,Gs,bi,Hs=o(511),mu=o(2041),Ml=o(225),jl=o(767),gu=0,Oa=mu,Dl=Ml,Ur=jl,Ar=Hs,yu=0,Or=1,vu=2,Ui=3,Pl=4,Do=5,ys=6,Ul=7,xu=8,Po=9,bu=10,Oi=[2,3,7],Uo=[3,3,11],Vs=[280,256,256,256,40],wu=[0,1,1,1,0],Ol=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Bi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Fi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vs=8,zi=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wi=null,xd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_c=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Su=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],En=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wt=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$r=[],Hn=[],la=[],xs=1,Ac=2,Ba=[],Tr=[];We("UpsampleRgbLinePair",Zt,3),We("UpsampleBgrLinePair",Pn,3),We("UpsampleRgbaLinePair",jr,4),We("UpsampleBgraLinePair",lr,4),We("UpsampleArgbLinePair",_r,4),We("UpsampleRgba4444LinePair",Xn,2),We("UpsampleRgb565LinePair",Un,2);var Js=G.UpsampleRgbLinePair,Cc=G.UpsampleBgrLinePair,Oo=G.UpsampleRgbaLinePair,Nu=G.UpsampleBgraLinePair,bs=G.UpsampleArgbLinePair,wa=G.UpsampleRgba4444LinePair,ws=G.UpsampleRgb565LinePair,Gi=16,Bo=1<<Gi-1,Ys=-227,Ss=482,_u=6,Ns=0,Er=o(256),Au=o(256),wd=o(256),Wf=o(256),$f=o(Ss-Ys),Kf=o(Ss-Ys);Ma("YuvToRgbRow",Zt,3),Ma("YuvToBgrRow",Pn,3),Ma("YuvToRgbaRow",jr,4),Ma("YuvToBgraRow",lr,4),Ma("YuvToArgbRow",_r,4),Ma("YuvToRgba4444Row",Xn,2),Ma("YuvToRgb565Row",Un,2);var Qn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fo=[0,2,8],Bl=[8,7,6,4,4,2,2,2,1,1,1,1],Fl=1;this.WebPDecodeRGBA=function(y,N,k,P,V){var X=Or,Z=new Fs,te=new Gn;Z.ba=te,te.S=X,te.width=[te.width],te.height=[te.height];var le=te.width,fe=te.height,Ne=new tr;if(Ne==null||y==null)var Fe=2;else e(Ne!=null),Fe=ga(y,N,k,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Fe!=0?le=0:(le!=null&&(le[0]=Ne.width[0]),fe!=null&&(fe[0]=Ne.height[0]),le=1),le){te.width=te.width[0],te.height=te.height[0],P!=null&&(P[0]=te.width),V!=null&&(V[0]=te.height);e:{if(P=new vo,(V=new Tl).data=y,V.w=N,V.ha=k,V.kd=1,N=[0],e(V!=null),((y=ga(V.data,V.w,V.ha,null,null,null,N,null,V))==0||y==7)&&N[0]&&(y=4),(N=y)==0){if(e(Z!=null),P.data=V.data,P.w=V.w+V.offset,P.ha=V.ha-V.offset,P.put=Zr,P.ac=nr,P.bc=Lr,P.ma=Z,V.xa){if((y=ei())==null){Z=1;break e}if((function(Be,Me){var et=[0],Ye=[0],_e=[0];t:for(;;){if(Be==null)return 0;if(Me==null)return Be.a=2,0;if(Be.l=Me,Be.a=0,me(Be.m,Me.data,Me.w,Me.ha),!At(Be.m,et,Ye,_e)){Be.a=3;break t}if(Be.xb=Ac,Me.width=et[0],Me.height=Ye[0],!Ti(et[0],Ye[0],1,Be,null))break t;return 1}return e(Be.a!=0),0})(y,P)){if(P=(N=Da(P.width,P.height,Z.Oa,Z.ba))==0){t:{P=y;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((k=P.l)!=null),e((V=k.ma)!=null),P.xb!=0){if(P.ca=V.ba,P.tb=V.tb,e(P.ca!=null),!ja(V.Oa,k,Ui)){P.a=2;break n}if(!ea(P,k.width)||k.da)break n;if((k.da||Jt(P.ca.S))&&Ue(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Ue()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!U(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!mr(P,P.V,P.Ba,P.c,P.i,k.o,Qi))break n;V.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(N=y.a)}else N=y.a}else{if((y=new xo)==null){Z=1;break e}if(y.Fa=V.na,y.P=V.P,y.qc=V.Sa,Hr(y,P)){if((N=Da(P.width,P.height,Z.Oa,Z.ba))==0){if(y.Aa=0,k=Z.Oa,e((V=y)!=null),k!=null){if(0<(le=0>(le=k.Md)?0:100<le?255:255*le/100)){for(fe=Ne=0;4>fe;++fe)12>(Fe=V.pb[fe]).lc&&(Fe.ia=le*Bl[0>Fe.lc?0:Fe.lc]>>3),Ne|=Fe.ia;Ne&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=k.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}vl(y,P)||(N=y.a)}}else N=y.a}N==0&&Z.Oa!=null&&Z.Oa.fd&&(N=kl(Z.ba))}Z=N}X=Z!=0?null:11>X?te.f.RGBA.eb:te.f.kb.y}else X=null;return X};var Cu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(G,Q){for(var ne="",F=0;F<4;F++)ne+=String.fromCharCode(G[Q++]);return ne}function m(G,Q){return(G[Q+0]<<0|G[Q+1]<<8|G[Q+2]<<16)>>>0}function x(G,Q){return(G[Q+0]<<0|G[Q+1]<<8|G[Q+2]<<16|G[Q+3]<<24)>>>0}new d;var w=[0],v=[0],I=[],A=new d,E=t,C=(function(G,Q){var ne={},F=0,j=!1,W=0,M=0;if(ne.frames=[],!(function(J,K,ie,xe){for(var Ae=0;Ae<xe;Ae++)if(J[K+Ae]!=ie.charCodeAt(Ae))return!0;return!1})(G,Q,"RIFF",4)){var ce,ee;for(x(G,Q+=4),Q+=8;Q<G.length;){var ae=h(G,Q),me=x(G,Q+=4);Q+=4;var pe=me+(1&me);switch(ae){case"VP8 ":case"VP8L":ne.frames[F]===void 0&&(ne.frames[F]={}),(L=ne.frames[F]).src_off=j?M:Q-8,L.src_size=W+me+8,F++,j&&(j=!1,W=0,M=0);break;case"VP8X":(L=ne.header={}).feature_flags=G[Q];var ve=Q+4;L.canvas_width=1+m(G,ve),ve+=3,L.canvas_height=1+m(G,ve),ve+=3;break;case"ALPH":j=!0,W=pe+8,M=Q-8;break;case"ANIM":(L=ne.header).bgcolor=x(G,Q),ve=Q+4,L.loop_count=(ce=G)[(ee=ve)+0]<<0|ce[ee+1]<<8,ve+=2;break;case"ANMF":var H,L;(L=ne.frames[F]={}).offset_x=2*m(G,Q),Q+=3,L.offset_y=2*m(G,Q),Q+=3,L.width=1+m(G,Q),Q+=3,L.height=1+m(G,Q),Q+=3,L.duration=m(G,Q),Q+=3,H=G[Q++],L.dispose=1&H,L.blend=H>>1&1}ae!="ANMF"&&(Q+=pe)}return ne}})(E,0);C.response=E,C.rgbaoutput=!0,C.dataurl=!1;var R=C.header?C.header:null,D=C.frames?C.frames:null;if(R){R.loop_counter=R.loop_count,w=[R.canvas_height],v=[R.canvas_width];for(var z=0;z<D.length&&D[z].blend!=0;z++);}var B=D[0],se=A.WebPDecodeRGBA(E,B.src_off,B.src_size,v,w);B.rgba=se,B.imgwidth=v[0],B.imgheight=w[0];for(var q=0;q<v[0]*w[0]*4;q++)I[q]=se[q];return this.width=v,this.height=w,this.data=I,this}(function(t){var e=function(){return typeof Gp=="function"},n=function(w,v,I,A){var E=4,C=l;switch(A){case t.image_compression.FAST:E=1,C=o;break;case t.image_compression.MEDIUM:E=6,C=c;break;case t.image_compression.SLOW:E=9,C=d}w=i(w,v,I,C);var R=Gp(w,{level:E});return t.__addimage__.arrayBufferToBinaryString(R)},i=function(w,v,I,A){for(var E,C,R,D=w.length/v,z=new Uint8Array(w.length+D),B=m(),se=0;se<D;se+=1){if(R=se*v,E=w.subarray(R,R+v),A)z.set(A(E,I,C),R+se);else{for(var q,G=B.length,Q=[];q<G;q+=1)Q[q]=B[q](E,I,C);var ne=x(Q.concat());z.set(Q[ne],R+se)}C=E}return z},s=function(w){var v=Array.apply([],w);return v.unshift(0),v},o=function(w,v){var I,A=[],E=w.length;A[0]=1;for(var C=0;C<E;C+=1)I=w[C-v]||0,A[C+1]=w[C]-I+256&255;return A},l=function(w,v,I){var A,E=[],C=w.length;E[0]=2;for(var R=0;R<C;R+=1)A=I&&I[R]||0,E[R+1]=w[R]-A+256&255;return E},c=function(w,v,I){var A,E,C=[],R=w.length;C[0]=3;for(var D=0;D<R;D+=1)A=w[D-v]||0,E=I&&I[D]||0,C[D+1]=w[D]+256-(A+E>>>1)&255;return C},d=function(w,v,I){var A,E,C,R,D=[],z=w.length;D[0]=4;for(var B=0;B<z;B+=1)A=w[B-v]||0,E=I&&I[B]||0,C=I&&I[B-v]||0,R=h(A,E,C),D[B+1]=w[B]-R+256&255;return D},h=function(w,v,I){if(w===v&&v===I)return w;var A=Math.abs(v-I),E=Math.abs(w-I),C=Math.abs(w+v-I-I);return A<=E&&A<=C?w:E<=C?v:I},m=function(){return[s,o,l,c,d]},x=function(w){var v=w.map((function(I){return I.reduce((function(A,E){return A+Math.abs(E)}),0)}));return v.indexOf(Math.min.apply(null,v))};t.processPNG=function(w,v,I,A){var E,C,R,D,z,B,se,q,G,Q,ne,F,j,W,M,ce=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(R=new PC(w)).imgData,C=R.bits,E=R.colorSpace,z=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){G=(q=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,ne=new Uint8Array(G*R.colors),Q=new Uint8Array(G);var ae,me=R.pixelBitlength-R.bits;for(W=0,M=0;W<G;W++){for(j=q[W],ae=0;ae<me;)ne[M++]=j>>>ae&255,ae+=R.bits;Q[W]=j>>>ae&255}}if(R.bits===16){G=(q=new Uint32Array(R.decodePixels().buffer)).length,ne=new Uint8Array(G*(32/R.pixelBitlength)*R.colors),Q=new Uint8Array(G*(32/R.pixelBitlength)),F=R.colors>1,W=0,M=0;for(var pe=0;W<G;)j=q[W++],ne[M++]=j>>>0&255,F&&(ne[M++]=j>>>16&255,j=q[W++],ne[M++]=j>>>0&255),Q[pe++]=j>>>16&255;C=8}A!==t.image_compression.NONE&&e()?(w=n(ne,R.width*R.colors,R.colors,A),se=n(Q,R.width,1,A)):(w=ne,se=Q,ce=void 0)}if(R.colorType===3&&(E=this.color_spaces.INDEXED,B=R.palette,R.transparency.indexed)){var ve=R.transparency.indexed,H=0;for(W=0,G=ve.length;W<G;++W)H+=ve[W];if((H/=255)===G-1&&ve.indexOf(0)!==-1)D=[ve.indexOf(0)];else if(H!==G){for(q=R.decodePixels(),Q=new Uint8Array(q.length),W=0,G=q.length;W<G;W++)Q[W]=ve[q[W]];se=n(Q,R.width,1)}}var L=(function(J){var K;switch(J){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K})(A);return ce===this.decode.FLATE_DECODE&&(ee="/Predictor "+L+" "),ee+="/Colors "+z+" /BitsPerComponent "+C+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(se&&this.__addimage__.isArrayBuffer(se)||this.__addimage__.isArrayBufferView(se))&&(se=this.__addimage__.arrayBufferToBinaryString(se)),{alias:I,data:w,index:v,filter:ce,decodeParameters:ee,transparency:D,palette:B,sMask:se,predictor:L,width:R.width,height:R.height,bitsPerComponent:C,colorSpace:E}}}})(Lt.API),(function(t){t.processGIF89A=function(e,n,i,s){var o=new UC(e),l=o.width,c=o.height,d=[];o.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:l,height:c},m=new Np(100).encode(h,100);return t.processJPEG.call(this,m,n,i,s)},t.processGIF87A=t.processGIF89A})(Lt.API),$a.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$a.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ln.log("bit decode error:"+n)}},$a.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*s*4,c=0;c<8&&8*s+c<this.width;c++){var d=this.palette[o>>7-c&1];this.data[l+4*c]=d.blue,this.data[l+4*c+1]=d.green,this.data[l+4*c+2]=d.red,this.data[l+4*c+3]=255}n!==0&&(this.pos+=4-n)}},$a.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*s*4,c=o>>4,d=15&o,h=this.palette[c];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*s+1>=this.width)break;h=this.palette[d],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},$a.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(s<this.palette.length){var l=this.palette[s];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},$a.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,d=(o>>10&e)/e*255|0,h=o>>15?255:0,m=i*this.width*4+4*s;this.data[m]=d,this.data[m+1]=c,this.data[m+2]=l,this.data[m+3]=h}this.pos+=t}},$a.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&n)/n*255|0,h=(l>>11)/e*255|0,m=s*this.width*4+4*o;this.data[m]=h,this.data[m+1]=d,this.data[m+2]=c,this.data[m+3]=255}this.pos+=t}},$a.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=o,this.data[l+1]=s,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},$a.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=s,this.data[c+2]=i,this.data[c+3]=l}},$a.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,i,s){var o=new $a(e,!1),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new Np(100).encode(d,100);return t.processJPEG.call(this,h,n,i,s)}})(Lt.API),ny.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,i,s){var o=new ny(e),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new Np(100).encode(d,100);return t.processJPEG.call(this,h,n,i,s)}})(Lt.API),Lt.API.processRGBA=function(t,e,n){for(var i=t.data,s=i.length,o=new Uint8Array(s/4*3),l=new Uint8Array(s/4),c=0,d=0,h=0;h<s;h+=4){var m=i[h],x=i[h+1],w=i[h+2],v=i[h+3];o[c++]=m,o[c++]=x,o[c++]=w,l[d++]=v}var I=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:I,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Lt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},$u=Lt.API,mf=$u.getCharWidthsArray=function(t,e){var n,i,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:s.metadata.Unicode.widths,d=c.fof?c.fof:1,h=e.kerning?e.kerning:s.metadata.Unicode.kerning,m=h.fof?h.fof:1,x=e.doKerning!==!1,w=0,v=t.length,I=0,A=c[0]||d,E=[];for(n=0;n<v;n++)i=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?E.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+l*(1e3/o)||0)/1e3):(w=x&&bn(h[i])==="object"&&!isNaN(parseInt(h[i][I],10))?h[i][I]/m:0,E.push((c[i]||A)/d+w)),I=i;return E},Z1=$u.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return $u.processArabic&&(t=$u.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,s)/n:mf.apply(this,arguments).reduce((function(o,l){return o+l}),0)},Q1=function(t,e,n,i){for(var s=[],o=0,l=t.length,c=0;o!==l&&c+e[o]<n;)c+=e[o],o++;s.push(t.slice(0,o));var d=o;for(c=0;o!==l;)c+e[o]>i&&(s.push(t.slice(d,o)),c=0,d=o),c+=e[o],o++;return d!==o&&s.push(t.slice(d,o)),s},ey=function(t,e,n){n||(n={});var i,s,o,l,c,d,h,m=[],x=[m],w=n.textIndent||0,v=0,I=0,A=t.split(" "),E=mf.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?A[0].length+2:n.lineIndent||0){var C=Array(d).join(" "),R=[];A.map((function(z){(z=z.split(/\s*\n/)).length>1?R=R.concat(z.map((function(B,se){return(se&&B.length?`
`:"")+B}))):R.push(z[0])})),A=R,d=Z1.apply(this,[C,n])}for(o=0,l=A.length;o<l;o++){var D=0;if(i=A[o],d&&i[0]==`
`&&(i=i.substr(1),D=1),w+v+(I=(s=mf.apply(this,[i,n])).reduce((function(z,B){return z+B}),0))>e||D){if(I>e){for(c=Q1.apply(this,[i,s,e-(w+v),e]),m.push(c.shift()),m=[c.pop()];c.length;)x.push([c.shift()]);I=s.slice(i.length-(m[0]?m[0].length:0)).reduce((function(z,B){return z+B}),0)}else m=[i];x.push(m),w=I+d,v=E}else m.push(i),w+=v+I,v=E}return h=d?function(z,B){return(B?C:"")+z.join(" ")}:function(z){return z.join(" ")},x.map(h)},$u.splitTextToSize=function(t,e,n){var i,s=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var x=this.internal.getFont(m.fontName,m.fontStyle);return x.metadata.Unicode?{widths:x.metadata.Unicode.widths||{0:1},kerning:x.metadata.Unicode.kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/s;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=n.lineIndent;var c,d,h=[];for(c=0,d=i.length;c<d;c++)h=h.concat(ey.apply(this,[i[c],l,o]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=e[s];var o=function(x){return"0x"+parseInt(x,10).toString(16)},l=t.__fontmetrics__.compress=function(x){var w,v,I,A,E=["{"];for(var C in x){if(w=x[C],isNaN(parseInt(C,10))?v="'"+C+"'":(C=parseInt(C,10),v=(v=o(C).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof w=="number")w<0?(I=o(w).slice(3),A="-"):(I=o(w).slice(2),A=""),I=A+I.slice(0,-1)+i[I.slice(-1)];else{if(bn(w)!=="object")throw new Error("Don't know what to do with value type "+bn(w)+".");I=l(w)}E.push(v+I)}return E.push("}"),E.join("")},c=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,v,I,A,E={},C=1,R=E,D=[],z="",B="",se=x.length-1,q=1;q<se;q+=1)(A=x[q])=="'"?w?(I=w.join(""),w=void 0):w=[]:w?w.push(A):A=="{"?(D.push([R,I]),R={},I=void 0):A=="}"?((v=D.pop())[0][v[1]]=R,I=void 0,R=v[0]):A=="-"?C=-1:I===void 0?n.hasOwnProperty(A)?(z+=n[A],I=parseInt(z,16)*C,C=1,z=""):z+=A:n.hasOwnProperty(A)?(B+=n[A],R[I]=parseInt(B,16)*C,C=1,I=void 0,B=""):B+=A;return E},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var w=x.font,v=m.Unicode[w.postScriptName];v&&(w.metadata.Unicode={},w.metadata.Unicode.widths=v.widths,w.metadata.Unicode.kerning=v.kerning);var I=h.Unicode[w.postScriptName];I&&(w.metadata.Unicode.encoding=I,w.encoding=I.codePages[0])}])})(Lt.API),(function(t){var e=function(n){for(var i=n.length,s=new Uint8Array(i),o=0;o<i;o++)s[o]=n.charCodeAt(o);return s};t.API.events.push(["addFont",function(n){var i=void 0,s=n.font,o=n.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(cd(c)),l.metadata=t.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,i)}}])})(Lt),(function(t){function e(){return(Mt.canvg?Promise.resolve(Mt.canvg):Up(()=>import("./index.es-CAkfR0XX.js"),[])).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}Lt.API.addSvgAsImage=function(n,i,s,o,l,c,d,h){if(isNaN(i)||isNaN(s))throw Ln.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw Ln.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=o,m.height=l;var x=m.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,m.width,m.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then((function(I){return I.fromString(x,n,w)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(I){return I.render(w)})).then((function(){v.addImage(m.toDataURL("image/jpeg",1),i,s,o,l,d,h)}))}})(),Lt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(e,n);return this},Lt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,s,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),d=[],h=0,m=0,x=0;function w(I,A){var E,C=!1;for(E=0;E<I.length;E+=1)I[E]===A&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var v=c.length;for(x=0;x<v;x+=1)n[c[x]].value=n[c[x]].defaultValue,n[c[x]].explicitSet=!1}if(bn(t)==="object"){for(s in t)if(o=t[s],w(c,s)&&o!==void 0){if(n[s].type==="boolean"&&typeof o=="boolean")n[s].value=o;else if(n[s].type==="name"&&w(n[s].valueSet,o))n[s].value=o;else if(n[s].type==="integer"&&Number.isInteger(o))n[s].value=o;else if(n[s].type==="array"){for(h=0;h<o.length;h+=1)if(i=!0,o[h].length===1&&typeof o[h][0]=="number")d.push(String(o[h]-1));else if(o[h].length>1){for(m=0;m<o[h].length;m+=1)typeof o[h][m]!="number"&&(i=!1);i===!0&&d.push([o[h][0]-1,o[h][1]-1].join(" "))}n[s].value="["+d.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var I,A=[];for(I in n)n[I].explicitSet===!0&&(n[I].type==="name"?A.push("/"+I+" /"+n[I].value):A.push("/"+I+" "+n[I].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+l.length+c.length+s.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(s+o+l+c+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Lt.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,l){for(var c,d=l.metadata.Unicode.widths,h=["","0","00","000","0000"],m=[""],x=0,w=o.length;x<w;++x){if(c=l.metadata.characterToGlyph(o.charCodeAt(x)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(x),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(h[4-c.length],c)}return m.join("")},i=function(o){var l,c,d,h,m,x,w;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],x=0,w=(c=Object.keys(o).sort((function(v,I){return v-I}))).length;x<w;x++)l=c[x],d.length>=100&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(h=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+h+">"));return d.length&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),m+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,m=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var x=c.metadata.Unicode.widths,w=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),v="",I=0;I<w.length;I++)v+=String.fromCharCode(w[I]);var A=h();m({data:v,addLength1:!0,objectId:A}),d("endobj");var E=h();m({data:i(c.metadata.toUnicode),addLength1:!0,objectId:E}),d("endobj");var C=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Xu(c.fontName)),d("/FontFile2 "+A+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var R=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+Xu(c.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+t.API.PDFObject.convert(x)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+E+" 0 R"),d("/BaseFont /"+Xu(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+R+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,m=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var x=c.metadata.rawData,w="",v=0;v<x.length;v++)w+=String.fromCharCode(x[v]);var I=h();m({data:w,addLength1:!0,objectId:I}),d("endobj");var A=h();m({data:i(c.metadata.toUnicode),addLength1:!0,objectId:A}),d("endobj");var E=h();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+I+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+Xu(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=h();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Xu(c.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]);var s=function(o){var l,c=o.text||"",d=o.x,h=o.y,m=o.options||{},x=o.mutex||{},w=x.pdfEscape,v=x.activeFontKey,I=x.fonts,A=v,E="",C=0,R="",D=I[A].encoding;if(I[A].encoding!=="Identity-H")return{text:c,x:d,y:h,options:m,mutex:x};for(R=c,A=v,Array.isArray(c)&&(R=c[0]),C=0;C<R.length;C+=1)I[A].metadata.hasOwnProperty("cmap")&&(l=I[A].metadata.cmap.unicode.codeMap[R[C].charCodeAt(0)]),l||R[C].charCodeAt(0)<256&&I[A].metadata.hasOwnProperty("Unicode")?E+=R[C]:E+="";var z="";return parseInt(A.slice(1))<14||D==="WinAnsiEncoding"?z=w(E,A).split("").map((function(B){return B.charCodeAt(0).toString(16)})).join(""):D==="Identity-H"&&(z=n(E,I[A])),x.isHex=!0,{text:z,x:d,y:h,options:m,mutex:x}};e.events.push(["postProcessText",function(o){var l=o.text||"",c=[],d={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?c.push([s(Object.assign({},d,{text:l[h][0]})).text,l[h][1],l[h][2]]):c.push(s(Object.assign({},d,{text:l[h]})).text);o.text=c}else o.text=s(Object.assign({},d,{text:l})).text}])})(Lt),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Lt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var s,o,l,c,d,h,m,x=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,D=0;this.__bidiEngine__={};var z=function(F){var j=F.charCodeAt(),W=j>>8,M=A[W];return M!==void 0?x[256*M+(255&j)]:W===252||W===253?"AL":C.test(W)?"L":W===8?"R":"N"},B=function(F){for(var j,W=0;W<F.length;W++){if((j=z(F.charAt(W)))==="L")return!1;if(j==="R")return!0}return!1},se=function(F,j,W,M){var ce,ee,ae,me,pe=j[M];switch(pe){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(pe="AN");break;case"AL":R=!0,pe="R";break;case"WS":pe="N";break;case"CS":M<1||M+1>=j.length||(ce=W[M-1])!=="EN"&&ce!=="AN"||(ee=j[M+1])!=="EN"&&ee!=="AN"?pe="N":R&&(ee="AN"),pe=ee===ce?ee:"N";break;case"ES":pe=(ce=M>0?W[M-1]:"B")==="EN"&&M+1<j.length&&j[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&W[M-1]==="EN"){pe="EN";break}if(R){pe="N";break}for(ae=M+1,me=j.length;ae<me&&j[ae]==="ET";)ae++;pe=ae<me&&j[ae]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(me=j.length,ae=M+1;ae<me&&j[ae]==="NSM";)ae++;if(ae<me){var ve=F[M],H=ve>=1425&&ve<=2303||ve===64286;if(ce=j[ae],H&&(ce==="R"||ce==="AL")){pe="R";break}}}pe=M<1||(ce=j[M-1])==="B"?"N":W[M-1];break;case"B":R=!1,s=!0,pe=D;break;case"S":o=!0,pe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":pe="N"}return pe},q=function(F,j,W){var M=F.split("");return W&&G(M,W,{hiLevel:D}),M.reverse(),j&&j.reverse(),M.join("")},G=function(F,j,W){var M,ce,ee,ae,me,pe=-1,ve=F.length,H=0,L=[],J=D?v:w,K=[];for(R=!1,s=!1,o=!1,ce=0;ce<ve;ce++)K[ce]=z(F[ce]);for(ee=0;ee<ve;ee++){if(me=H,L[ee]=se(F,K,L,ee),M=240&(H=J[me][I[L[ee]]]),H&=15,j[ee]=ae=J[H][5],M>0)if(M===16){for(ce=pe;ce<ee;ce++)j[ce]=1;pe=-1}else pe=-1;if(J[H][6])pe===-1&&(pe=ee);else if(pe>-1){for(ce=pe;ce<ee;ce++)j[ce]=ae;pe=-1}K[ee]==="B"&&(j[ee]=0),W.hiLevel|=ae}o&&(function(ie,xe,Ae){for(var Ce=0;Ce<Ae;Ce++)if(ie[Ce]==="S"){xe[Ce]=D;for(var Ee=Ce-1;Ee>=0&&ie[Ee]==="WS";Ee--)xe[Ee]=D}})(K,j,ve)},Q=function(F,j,W,M,ce){if(!(ce.hiLevel<F)){if(F===1&&D===1&&!s)return j.reverse(),void(W&&W.reverse());for(var ee,ae,me,pe,ve=j.length,H=0;H<ve;){if(M[H]>=F){for(me=H+1;me<ve&&M[me]>=F;)me++;for(pe=H,ae=me-1;pe<ae;pe++,ae--)ee=j[pe],j[pe]=j[ae],j[ae]=ee,W&&(ee=W[pe],W[pe]=W[ae],W[ae]=ee);H=me}H++}}},ne=function(F,j,W){var M=F.split(""),ce={hiLevel:D};return W||(W=[]),G(M,W,ce),(function(ee,ae,me){if(me.hiLevel!==0&&m)for(var pe,ve=0;ve<ee.length;ve++)ae[ve]===1&&(pe=E.indexOf(ee[ve]))>=0&&(ee[ve]=E[pe+1])})(M,W,ce),Q(2,M,j,W,ce),Q(1,M,j,W,ce),M.join("")};return this.__bidiEngine__.doBidiReorder=function(F,j,W){if((function(ce,ee){if(ee)for(var ae=0;ae<ce.length;ae++)ee[ae]=ae;c===void 0&&(c=B(ce)),h===void 0&&(h=B(ce))})(F,j),l||!d||h)if(l&&d&&c^h)D=c?1:0,F=q(F,j,W);else if(!l&&d&&h)D=c?1:0,F=ne(F,j,W),F=q(F,j);else if(!l||c||d||h){if(l&&!d&&c^h)F=q(F,j),c?(D=0,F=ne(F,j,W)):(D=1,F=ne(F,j,W),F=q(F,j));else if(l&&c&&!d&&h)D=1,F=ne(F,j,W),F=q(F,j);else if(!l&&!d&&c^h){var M=m;c?(D=1,F=ne(F,j,W),D=0,m=!1,F=ne(F,j,W),m=M):(D=0,F=ne(F,j,W),F=q(F,j),D=1,m=!1,F=ne(F,j,W),m=M,F=q(F,j))}}else D=0,F=ne(F,j,W);else D=c?1:0,F=ne(F,j,W);return F},this.__bidiEngine__.setOptions=function(F){F&&(l=F.isInputVisual,d=F.isOutputVisual,c=F.isInputRtl,h=F.isOutputRtl,m=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var s=i.text,o=(i.x,i.y,i.options||{}),l=(i.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var c=0;for(l=[],c=0;c<s.length;c+=1)Object.prototype.toString.call(s[c])==="[object Array]"?l.push([n.doBidiReorder(s[c][0]),s[c][1],s[c][2]]):l.push([n.doBidiReorder(s[c])]);i.text=l}else i.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])})(Lt),Lt.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new dl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new ZC(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new OC(this.contents),this.head=new FC(this),this.name=new VC(this),this.cmap=new _v(this),this.toUnicode={},this.hhea=new zC(this),this.maxp=new JC(this),this.hmtx=new YC(this),this.post=new GC(this),this.os2=new qC(this),this.loca=new XC(this),this.glyf=new WC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,d,h;for(h=[],l=0,c=(d=this.bbox).length;l<c;l++)e=d[l],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),(32768&(n=s>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var s,o,l,c;for(l=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)s=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t})();var ns,dl=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,s;for(s=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,s,o,l,c,d;return e=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^d)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*s+16777216*o+65536*l+256*c+d},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,s,o;for(o=[],i=0,s=e.length;i<s;i++)n=e[i],o.push(this.writeByte(n));return o},t})(),OC=(function(){var t;function e(n){var i,s,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,s,o,l,c,d,h,m,x,w,v,I,A;for(A in v=Object.keys(n).length,d=Math.log(2),x=16*Math.floor(Math.log(v)/d),l=Math.floor(x/d),m=16*v-x,(s=new dl).writeInt(this.scalarType),s.writeShort(v),s.writeShort(x),s.writeShort(l),s.writeShort(m),o=16*v,h=s.pos+o,c=null,I=[],n)for(w=n[A],s.writeString(A),s.writeInt(t(w)),s.writeInt(h),s.writeInt(w.length),I=I.concat(w),A==="head"&&(c=h),h+=w.length;h%4;)I.push(0),h++;return s.write(I),i=2981146554-t(s.data),s.pos=c+8,s.writeUInt32(i),s.data},t=function(n){var i,s,o,l;for(n=Av.call(n);n.length%4;)n.push(0);for(o=new dl(n),s=0,i=0,l=n.length;i<l;i=i+=4)s+=o.readUInt32();return 4294967295&s},e})(),BC={}.hasOwnProperty,js=function(t,e){for(var n in e)BC.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ns=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var FC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new dl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),ry=(function(){function t(e,n){var i,s,o,l,c,d,h,m,x,w,v,I,A,E,C,R,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),x=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(v=e.readUInt16(),w=v/2,e.pos+=6,o=(function(){var z,B;for(B=[],d=z=0;0<=w?z<w:z>w;d=0<=w?++z:--z)B.push(e.readUInt16());return B})(),e.pos+=2,A=(function(){var z,B;for(B=[],d=z=0;0<=w?z<w:z>w;d=0<=w?++z:--z)B.push(e.readUInt16());return B})(),h=(function(){var z,B;for(B=[],d=z=0;0<=w?z<w:z>w;d=0<=w?++z:--z)B.push(e.readUInt16());return B})(),m=(function(){var z,B;for(B=[],d=z=0;0<=w?z<w:z>w;d=0<=w?++z:--z)B.push(e.readUInt16());return B})(),s=(this.length-e.pos+this.offset)/2,c=(function(){var z,B;for(B=[],d=z=0;0<=s?z<s:z>s;d=0<=s?++z:--z)B.push(e.readUInt16());return B})(),d=C=0,D=o.length;C<D;d=++C)for(E=o[d],i=R=I=A[d];I<=E?R<=E:R>=E;i=I<=E?++R:--R)m[d]===0?l=i+h[d]:(l=c[m[d]/2+(i-I)-(w-d)]||0)!==0&&(l+=h[d]),this.codeMap[i]=65535&l}e.pos=x}return t.encode=function(e,n){var i,s,o,l,c,d,h,m,x,w,v,I,A,E,C,R,D,z,B,se,q,G,Q,ne,F,j,W,M,ce,ee,ae,me,pe,ve,H,L,J,K,ie,xe,Ae,Ce,Ee,Re,De,He;switch(M=new dl,l=Object.keys(e).sort((function(Xe,U){return Xe-U})),n){case"macroman":for(A=0,E=(function(){var Xe=[];for(I=0;I<256;++I)Xe.push(0);return Xe})(),R={0:0},o={},ce=0,pe=l.length;ce<pe;ce++)R[Ee=e[s=l[ce]]]==null&&(R[Ee]=++A),o[s]={old:e[s],new:R[e[s]]},E[s]=R[e[s]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(E),{charMap:o,subtable:M.data,maxGlyphID:A+1};case"unicode":for(j=[],x=[],D=0,R={},i={},C=h=null,ee=0,ve=l.length;ee<ve;ee++)R[B=e[s=l[ee]]]==null&&(R[B]=++D),i[s]={old:B,new:R[B]},c=R[B]-s,C!=null&&c===h||(C&&x.push(C),j.push(s),h=c),C=s;for(C&&x.push(C),x.push(65535),j.push(65535),ne=2*(Q=j.length),G=2*Math.pow(Math.log(Q)/Math.LN2,2),w=Math.log(G/2)/Math.LN2,q=2*Q-G,d=[],se=[],v=[],I=ae=0,H=j.length;ae<H;I=++ae){if(F=j[I],m=x[I],F===65535){d.push(0),se.push(0);break}if(F-(W=i[F].new)>=32768)for(d.push(0),se.push(2*(v.length+Q-I)),s=me=F;F<=m?me<=m:me>=m;s=F<=m?++me:--me)v.push(i[s].new);else d.push(W-F),se.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*Q+2*v.length),M.writeUInt16(0),M.writeUInt16(ne),M.writeUInt16(G),M.writeUInt16(w),M.writeUInt16(q),Ae=0,L=x.length;Ae<L;Ae++)s=x[Ae],M.writeUInt16(s);for(M.writeUInt16(0),Ce=0,J=j.length;Ce<J;Ce++)s=j[Ce],M.writeUInt16(s);for(Re=0,K=d.length;Re<K;Re++)c=d[Re],M.writeUInt16(c);for(De=0,ie=se.length;De<ie;De++)z=se[De],M.writeUInt16(z);for(He=0,xe=v.length;He<xe;He++)A=v[He],M.writeUInt16(A);return{charMap:i,subtable:M.data,maxGlyphID:D+1}}},t})(),_v=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,s,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)i=new ry(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var s,o;return i==null&&(i="macroman"),s=ry.encode(n,i),(o=new dl).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},e})(),zC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),qC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,s;for(s=[],i=0;i<10;++i)s.push(n.readByte());return s})(),this.charRange=(function(){var i,s;for(s=[],i=0;i<4;++i)s.push(n.readInt());return s})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(n.readInt());return s})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),GC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="post",e.prototype.parse=function(n){var i,s,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(s=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)i=n.readByte(),o.push(this.names.push(n.readString(i)));return o;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var c,d,h;for(h=[],l=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;l=0<=d?++c:--c)h.push(n.readUInt32());return h}).call(this)}},e})(),HC=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},VC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="name",e.prototype.parse=function(n){var i,s,o,l,c,d,h,m,x,w,v;for(n.pos=this.offset,n.readShort(),i=n.readShort(),d=n.readShort(),s=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+d+n.readShort()});for(h={},l=x=0,w=s.length;x<w;l=++x)o=s[l],n.pos=o.offset,m=n.readString(o.length),c=new HC(m,o),h[v=o.nameID]==null&&(h[v]=[]),h[o.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e})(),JC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),YC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,s,o,l,c,d,h;for(n.pos=this.offset,this.metrics=[],i=0,d=this.file.hhea.numberOfMetrics;0<=d?i<d:i>d;i=0<=d?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var m,x;for(x=[],i=m=0;0<=o?m<o:m>o;i=0<=o?++m:--m)x.push(n.readInt16());return x})(),this.widths=(function(){var m,x,w,v;for(v=[],m=0,x=(w=this.metrics).length;m<x;m++)l=w[m],v.push(l.advance);return v}).call(this),s=this.widths[this.widths.length-1],h=[],i=c=0;0<=o?c<o:c>o;i=0<=o?++c:--c)h.push(this.widths.push(s));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),Av=[].slice,WC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,s,o,l,c,d,h,m,x,w;return n in this.cache?this.cache[n]:(l=this.file.loca,i=this.file.contents,s=l.indexOf(n),(o=l.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+s,c=(d=new dl(i.read(o))).readShort(),m=d.readShort(),w=d.readShort(),h=d.readShort(),x=d.readShort(),this.cache[n]=c===-1?new KC(d,m,w,h,x):new $C(d,c,m,w,h,x),this.cache[n]))},e.prototype.encode=function(n,i,s){var o,l,c,d,h;for(c=[],l=[],d=0,h=i.length;d<h;d++)o=n[i[d]],l.push(c.length),o&&(c=c.concat(o.encode(s)));return l.push(c.length),{table:c,offsets:l}},e})(),$C=(function(){function t(e,n,i,s,o,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=s,this.xMax=o,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),KC=(function(){function t(e,n,i,s,o){var l,c;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new dl(Av.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),XC=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,ns),e.prototype.tag="loca",e.prototype.parse=function(n){var i,s;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var o,l;for(l=[],s=0,o=this.length;s<o;s+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],s=0,o=this.length;s<o;s+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var s=new Uint32Array(this.offsets.length),o=0,l=0,c=0;c<s.length;++c)if(s[c]=o,l<i.length&&i[l]==c){++l,s[c]=o;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(o+=h)}for(var m=new Array(4*s.length),x=0;x<s.length;++x)m[4*x+3]=255&s[x],m[4*x+2]=(65280&s[x])>>8,m[4*x+1]=(16711680&s[x])>>16,m[4*x]=(4278190080&s[x])>>24;return m},e})(),ZC=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,s,o;for(n in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)i=o[n],e[n]=s[i];return e},t.prototype.glyphsFor=function(e){var n,i,s,o,l,c,d;for(s={},l=0,c=e.length;l<c;l++)s[o=e[l]]=this.font.glyf.glyphFor(o);for(o in n=[],s)(i=s[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in d=this.glyphsFor(n))i=d[o],s[o]=i;return s},t.prototype.encode=function(e,n){var i,s,o,l,c,d,h,m,x,w,v,I,A,E,C;for(s in i=_v.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),v={0:0},C=i.charMap)v[(d=C[s]).old]=d.new;for(I in w=i.maxGlyphID,l)I in v||(v[I]=w++);return m=(function(R){var D,z;for(D in z={},R)z[R[D]]=D;return z})(v),x=Object.keys(m).sort((function(R,D){return R-D})),A=(function(){var R,D,z;for(z=[],R=0,D=x.length;R<D;R++)c=x[R],z.push(m[c]);return z})(),o=this.font.glyf.encode(l,A,v),h=this.font.loca.encode(o.offsets,A),E={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t})();Lt.API.PDFObject=(function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,s,o,l;if(Array.isArray(n))return"["+(function(){var c,d,h;for(h=[],c=0,d=n.length;c<d;c++)i=n[c],h.push(e.convert(i));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in o=["<<"],n)l=n[s],o.push("/"+s+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+n},e})();const QC=({book:t,onClose:e})=>{const[n,i]=ue.useState(0),[s,o]=ue.useState(18),[l,c]=ue.useState(!1);ue.useEffect(()=>{const m=document.getElementById("book-content-area");m&&(m.scrollTop=0)},[n]);const d=()=>{const m=new Lt;m.setFontSize(24),m.text(t.title||"Untitled Story",105,100,{align:"center"}),m.setFontSize(12),m.text("Generated by StoryWeaver",105,110,{align:"center"}),t.chapters.forEach((x,w)=>{m.addPage(),m.setFontSize(18),m.text(`Chapter ${w+1}: ${x.title}`,20,20),m.setFontSize(12);const v=m.splitTextToSize(x.content||"",170);m.text(v,20,30)}),m.save(`${t.title||"story"}.pdf`),c(!1)},h=()=>{let m=`${t.title||"Untitled Story"}

`;t.chapters.forEach((I,A)=>{m+=`Chapter ${A+1}: ${I.title}
`,m+=`${"-".repeat(20)}
`,m+=`${I.content||""}

`,m+=`${"=".repeat(20)}

`});const x=new Blob([m],{type:"text/plain"}),w=URL.createObjectURL(x),v=document.createElement("a");v.href=w,v.download=`${t.title||"story"}.txt`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(w),c(!1)};return!t.chapters||t.chapters.length===0?f.jsx("div",{className:"absolute inset-0 z-50 bg-brand-bg flex items-center justify-center",children:f.jsxs("div",{className:"text-center p-8",children:[f.jsx("p",{className:"text-brand-text-muted mb-4",children:"No chapters found in this book."}),f.jsx("button",{onClick:e,className:"px-4 py-2 bg-brand-secondary text-white rounded-lg",children:"Close"})]})}):f.jsxs("div",{className:"absolute inset-0 z-50 bg-brand-bg flex flex-col animate-in zoom-in-95 duration-300",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-brand-surface/80 backdrop-blur-md z-20",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ms,{className:"w-6 h-6 text-brand-secondary"}),f.jsxs("div",{children:[f.jsx("h2",{className:"font-serif font-bold text-lg text-brand-text leading-tight",children:t.title||"Untitled Story"}),f.jsxs("p",{className:"text-xs text-brand-text-muted",children:["Chapter ",n+1," of ",t.chapters.length]})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>c(!l),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-brand-text-muted hover:text-white transition text-sm font-medium",children:[f.jsx(po,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),l&&f.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-brand-surface border border-white/10 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[f.jsxs("button",{onClick:d,className:"w-full text-left px-4 py-3 hover:bg-white/5 text-brand-text text-sm flex items-center gap-2",children:[f.jsx("span",{className:"font-bold text-red-400",children:"PDF"})," Document"]}),f.jsxs("button",{onClick:h,className:"w-full text-left px-4 py-3 hover:bg-white/5 text-brand-text text-sm flex items-center gap-2 border-t border-white/5",children:[f.jsx("span",{className:"font-bold text-blue-400",children:"TXT"})," Plain Text"]})]})]}),f.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-white/5 rounded-lg p-1",children:[f.jsx("button",{onClick:()=>o(Math.max(14,s-2)),className:"w-8 h-8 flex items-center justify-center text-brand-text-muted hover:text-white font-serif text-sm",children:"A-"}),f.jsx("button",{onClick:()=>o(Math.min(28,s+2)),className:"w-8 h-8 flex items-center justify-center text-brand-text-muted hover:text-white font-serif text-lg",children:"A+"})]}),f.jsx("button",{onClick:e,className:"p-2 text-brand-text-muted hover:text-white transition rounded-full hover:bg-white/10",children:f.jsx(hl,{className:"w-6 h-6"})})]})]}),f.jsx("div",{id:"book-content-area",className:"flex-grow overflow-y-auto custom-scrollbar p-4 md:p-12 bg-brand-bg relative",onClick:()=>c(!1),children:f.jsxs("div",{className:"max-w-3xl mx-auto bg-brand-surface/30 p-8 md:p-16 rounded-lg shadow-2xl min-h-full border border-white/5",children:[f.jsxs("div",{className:"mb-12 text-center",children:[f.jsxs("span",{className:"text-brand-secondary text-xs font-bold uppercase tracking-[0.2em] mb-2 block",children:["Chapter ",n+1]}),f.jsx("h3",{className:"font-serif text-3xl md:text-4xl font-bold text-brand-text",children:t.chapters[n].title}),f.jsx("div",{className:"w-16 h-1 bg-brand-secondary/50 mx-auto mt-6 rounded-full"})]}),f.jsx("div",{className:"prose prose-invert prose-lg max-w-none font-serif leading-loose text-brand-text/90 whitespace-pre-wrap",style:{fontSize:`${s}px`},children:t.chapters[n].content||f.jsx("span",{className:"italic opacity-50",children:"This scene has no text yet."})}),f.jsx("div",{className:"mt-16 flex justify-center",children:f.jsx("span",{className:"text-brand-text-muted text-2xl opacity-50",children:"***"})})]})}),f.jsxs("div",{className:"p-4 border-t border-white/10 bg-brand-surface/80 backdrop-blur-md flex justify-between items-center z-20",children:[f.jsxs("button",{onClick:()=>i(Math.max(0,n-1)),disabled:n===0,className:"flex items-center gap-2 px-4 py-3 rounded-xl hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed text-brand-text font-medium transition",children:[f.jsx(uc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),f.jsx("div",{className:"h-1.5 w-32 md:w-64 bg-white/10 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-brand-secondary transition-all duration-300 ease-out",style:{width:`${(n+1)/t.chapters.length*100}%`}})}),f.jsxs("button",{onClick:()=>i(Math.min(t.chapters.length-1,n+1)),disabled:n===t.chapters.length-1,className:"flex items-center gap-2 px-4 py-3 rounded-xl hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed text-brand-text font-medium transition",children:[f.jsx("span",{className:"hidden sm:inline",children:"Next"}),f.jsx(Xl,{className:"w-5 h-5"})]})]})]})},eT=({scenes:t,allCharacters:e,onGenerateImage:n,onGenerateCharacterImage:i})=>{const[s,o]=ue.useState(0),[l,c]=ue.useState(!0),d=t[s],h=ec.useMemo(()=>!d||!d.characterIds?[]:e.filter(w=>d.characterIds.includes(w.id)),[d,e]),m=()=>{s<t.length-1&&o(s+1)},x=()=>{s>0&&o(s-1)};return t.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted p-10 text-center",children:[f.jsx("div",{className:"p-6 bg-brand-surface rounded-full mb-4 opacity-50",children:f.jsx(ha,{className:"w-16 h-16"})}),f.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Scenes Available"}),f.jsx("p",{children:"Create scenes in the Story view to experience them here."})]}):f.jsxs("div",{className:"flex flex-col h-full max-h-[calc(100vh-6rem)] gap-4 p-4 lg:p-0",children:[f.jsxs("div",{className:"flex-grow relative rounded-2xl overflow-hidden shadow-2xl border border-white/10 bg-black group",children:[d.headerImage?f.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out",style:{backgroundImage:`url(${d.headerImage})`},children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"})}):f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-bg to-brand-surface flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-brand-text-muted mb-4 opacity-50 italic",children:"No visual generated for this scene."}),f.jsxs("button",{onClick:()=>n(d),className:"flex items-center gap-2 bg-brand-secondary/20 hover:bg-brand-secondary text-brand-secondary hover:text-white px-6 py-3 rounded-full transition border border-brand-secondary/30",children:[f.jsx(Xi,{className:"w-5 h-5"}),"Generate Scene Art"]})]})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center items-end px-10 pb-[180px] gap-4 lg:gap-16 pointer-events-none",children:h.map((w,v)=>f.jsxs("div",{className:"relative flex flex-col items-center transition-all duration-500 transform translate-y-0",children:[w.headerImage?f.jsx("img",{src:w.headerImage,alt:w.name,className:"w-32 h-32 lg:w-64 lg:h-64 object-cover rounded-2xl shadow-2xl border-2 border-white/10 transform hover:scale-105 transition pointer-events-auto"}):f.jsxs("div",{className:"w-32 h-32 lg:w-48 lg:h-64 bg-brand-surface/80 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20 flex flex-col items-center justify-center text-center p-4 pointer-events-auto",children:[f.jsx(pc,{className:"w-12 h-12 text-brand-text-muted mb-2 opacity-50"}),f.jsx("span",{className:"text-xs text-brand-text-muted font-bold",children:w.name}),f.jsx("button",{onClick:()=>i(w),className:"mt-2 text-[10px] bg-brand-secondary text-white px-2 py-1 rounded hover:bg-opacity-80 transition",children:"Generate"})]}),f.jsx("div",{className:"mt-2 bg-black/60 backdrop-blur-md px-3 py-1 rounded-lg border border-white/10 text-xs lg:text-sm font-bold text-white shadow-lg",children:w.name})]},w.id))}),"const [isTextVisible, setIsTextVisible] = useState(true); // ... (existing code)",f.jsxs("div",{className:`absolute bottom-6 left-4 right-4 lg:left-12 lg:right-12 transition-all duration-300 ease-in-out flex flex-col ${l?"min-h-[140px] max-h-[35vh] bg-brand-surface/90 border border-white/10 p-6":"h-12 w-auto self-start bg-transparent border-none p-0"}`,children:[f.jsxs("div",{className:`flex justify-between items-center ${l?"mb-2":"absolute bottom-0 left-0 bg-brand-surface/90 backdrop-blur-xl border border-white/10 rounded-full px-4 py-2 shadow-lg"}`,children:[l&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h3",{className:"text-xl font-serif font-bold text-brand-secondary drop-shadow-sm truncate max-w-[200px]",children:d.title}),f.jsxs("span",{className:"text-xs font-mono text-brand-text-muted bg-black/20 px-2 py-1 rounded",children:["Scene ",s+1,"/",t.length]})]}),f.jsx("button",{onClick:()=>c(!l),className:`text-xs font-bold uppercase tracking-wider text-brand-text-muted hover:text-white transition flex items-center gap-2 ${!l&&"w-full h-full"}`,children:l?f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"Hide Text"})," ",f.jsx(Of,{className:"w-4 h-4"})]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-brand-secondary",children:"Show Text"})," ",f.jsx(om,{className:"w-4 h-4"})]})})]}),l&&f.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2",children:f.jsx("p",{className:"text-lg font-serif leading-relaxed text-brand-text/90 whitespace-pre-wrap",children:d.fullText||d.summary||f.jsx("span",{className:"italic opacity-50",children:"No text available for this scene."})})})]}),f.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-4 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[f.jsx("button",{onClick:x,disabled:s===0,className:"pointer-events-auto w-12 h-12 rounded-full bg-black/50 hover:bg-brand-secondary text-white flex items-center justify-center backdrop-blur-md border border-white/10 transition-all transform hover:scale-110 disabled:opacity-0 disabled:pointer-events-none",children:f.jsx(uc,{className:"w-6 h-6"})}),f.jsx("button",{onClick:m,disabled:s===t.length-1,className:"pointer-events-auto w-12 h-12 rounded-full bg-black/50 hover:bg-brand-secondary text-white flex items-center justify-center backdrop-blur-md border border-white/10 transition-all transform hover:scale-110 disabled:opacity-0 disabled:pointer-events-none",children:f.jsx(Xl,{className:"w-6 h-6"})})]})]}),f.jsx("div",{className:"h-24 flex gap-3 overflow-x-auto custom-scrollbar pb-2 px-2",children:t.map((w,v)=>f.jsxs("button",{onClick:()=>o(v),className:`relative min-w-[140px] rounded-xl overflow-hidden border-2 transition-all duration-200 group flex-shrink-0 ${v===s?"border-brand-secondary scale-105 shadow-lg shadow-brand-secondary/20":"border-transparent opacity-60 hover:opacity-100"}`,children:[w.headerImage?f.jsx("img",{src:w.headerImage,className:"w-full h-full object-cover",alt:w.title}):f.jsx("div",{className:"w-full h-full bg-brand-surface flex items-center justify-center text-brand-text-muted text-xs italic px-2 text-center",children:w.title}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex items-end p-2",children:f.jsxs("span",{className:"text-[10px] font-bold text-white truncate w-full text-left",children:[v+1,". ",w.title]})})]},w.id))})]})},Em=()=>f.jsxs("svg",{className:"animate-spin h-8 w-8 text-brand-secondary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tT=({onComplete:t,existingCharacters:e})=>{const[n,i]=ue.useState(1),[s,o]=ue.useState("Superhero"),[l,c]=ue.useState({role:"hero"}),[d,h]=ue.useState({role:"co-star"}),[m,x]=ue.useState({role:"villain"}),[w,v]=ue.useState(!1),I=ue.useRef(null),A=ue.useRef(null),E=ue.useRef(null),C=Q=>new Promise(ne=>{const F=new FileReader;F.onload=()=>{const j=F.result;typeof j=="string"&&ne(j.split(",")[1]||j)},F.readAsDataURL(Q)}),R=async(Q,ne)=>{var j;const F=(j=Q.target.files)==null?void 0:j[0];if(F){const W=await C(F);(ne==="hero"?c:ne==="co-star"?h:x)(ce=>({...ce,image:W}))}},D=(Q,ne)=>{const F=e.find(j=>j.id===Q);if(F){const j=ne==="hero"?c:ne==="co-star"?h:x;let W;F.headerImage&&F.headerImage.startsWith("data:image")&&(W=F.headerImage.split(",")[1]),j({name:F.name,description:`${F.initialInfo} ${F.visualStats?`Appearance: ${F.visualStats.height}, ${F.visualStats.build}, ${F.visualStats.distinguishingFeatures}`:""}`,image:W,role:ne})}},z=async()=>{if(l.description){v(!0);try{const Q=await qA(l.description,s);x({name:Q.name,description:Q.desc,image:Q.image,role:"villain"})}catch(Q){console.error(Q)}finally{v(!1)}}},B=()=>n===1?!!l.name&&!!l.description&&!!l.image:n===2?!!d.name&&!!d.description&&!!d.image:n===3?!!m.name&&!!m.description&&!!m.image:!1,se=()=>{n<3?i(n+1):t(l,d,m,s)},q=Q=>Q.startsWith("/9j/")?"image/jpeg":Q.startsWith("iVBORw0KGgo")?"image/png":"image/jpeg",G=(Q,ne,F,j)=>f.jsxs("div",{className:"glass-panel p-8 rounded-2xl border border-white/10 animate-in fade-in slide-in-from-right-8 duration-500",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("h3",{className:"text-3xl font-banger text-brand-secondary uppercase tracking-wider drop-shadow-md",children:["Casting The ",Q]}),e.length>0&&f.jsxs("div",{className:"relative group",children:[f.jsxs("select",{className:"appearance-none bg-brand-bg/50 border border-brand-primary/50 text-brand-text-muted text-sm rounded-lg px-4 py-2 pr-8 hover:text-white hover:border-brand-secondary cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-secondary/50",onChange:W=>D(W.target.value,Q),defaultValue:"",children:[f.jsx("option",{value:"",disabled:!0,children:"Import from Story..."}),e.map(W=>f.jsxs("option",{value:W.id,children:[W.name," (",W.type,")"]},W.id))]}),f.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-brand-text-muted",children:f.jsx(hm,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[f.jsxs("div",{className:"flex-shrink-0 w-full md:w-auto flex flex-col items-center gap-4",children:[f.jsx("div",{onClick:()=>{var W;return(W=j.current)==null?void 0:W.click()},className:"relative w-64 h-64 rounded-2xl overflow-hidden border-2 border-dashed border-white/20 hover:border-brand-secondary cursor-pointer group transition-all duration-300 shadow-2xl bg-black/20",children:ne.image?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:`data:${q(ne.image)};base64,${ne.image}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",alt:Q}),f.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center text-white gap-2",children:[f.jsx(Ff,{className:"w-8 h-8"}),f.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Change Photo"})]})]}):f.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-brand-text-muted group-hover:text-brand-secondary transition-colors gap-3",children:[f.jsx("div",{className:"p-4 bg-white/5 rounded-full group-hover:bg-brand-secondary/20 transition-colors",children:f.jsx(pc,{className:"w-12 h-12"})}),f.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Upload Portrait"})]})}),f.jsx("button",{onClick:()=>{var W;return(W=j.current)==null?void 0:W.click()},className:"text-xs bg-brand-primary/50 hover:bg-brand-secondary hover:text-white text-brand-text-muted px-4 py-2 rounded-full transition border border-white/5",children:ne.image?"Replace Image":"Select Image File"}),f.jsx("input",{type:"file",ref:j,onChange:W=>R(W,Q),className:"hidden",accept:"image/*"})]}),f.jsxs("div",{className:"flex-grow w-full space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Character Name"}),f.jsx("input",{value:ne.name||"",onChange:W=>F({...ne,name:W.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition text-lg font-medium",placeholder:`Name the ${Q}...`})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Visual Description"}),f.jsx("textarea",{value:ne.description||"",onChange:W=>F({...ne,description:W.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",placeholder:"Describe features, costume, colors, and accessories...",rows:4})]}),Q==="villain"&&n===3&&f.jsxs("button",{onClick:z,disabled:w||!l.description,className:"w-full flex items-center justify-center gap-2 bg-red-900/30 hover:bg-red-900/50 border border-red-500/30 text-red-400 font-bold py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:[w?f.jsx(Em,{}):f.jsx(Xi,{className:"w-5 h-5"}),w?"Concocting Evil...":"Generate Villain based on Hero"]})]})]})]});return f.jsxs("div",{className:"max-w-5xl mx-auto p-6 lg:p-10",children:[f.jsxs("div",{className:"text-center mb-10",children:[f.jsx("h1",{className:"text-5xl font-banger text-transparent bg-clip-text bg-gradient-to-r from-brand-secondary to-brand-accent drop-shadow-sm mb-2",children:"Infinite Heroes"}),f.jsx("p",{className:"text-brand-text-muted font-serif text-lg",children:"Assemble your cast and forge a legend."})]}),f.jsx("div",{className:"flex justify-center gap-4 mb-10",children:["Hero","Co-Star","Villain"].map((Q,ne)=>{const F=n===ne+1,j=n>ne+1;return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-banger text-xl transition-all duration-300 ${F?"bg-brand-secondary text-white scale-110 shadow-lg shadow-brand-secondary/30":j?"bg-green-500 text-white":"bg-brand-primary/30 text-brand-text-muted"}`,children:j?f.jsx(ul,{className:"w-6 h-6"}):ne+1}),f.jsx("span",{className:`font-bold uppercase tracking-wider text-sm hidden md:block ${F?"text-white":"text-brand-text-muted/50"}`,children:Q}),ne<2&&f.jsx("div",{className:"w-12 h-0.5 bg-white/10 mx-2 hidden md:block"})]},ne)})}),f.jsxs("div",{className:"min-h-[500px]",children:[n===1&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-8 max-w-xs mx-auto",children:[f.jsx("label",{className:"block text-center text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Comic Genre"}),f.jsxs("select",{value:s,onChange:Q=>o(Q.target.value),className:"w-full bg-brand-surface border border-brand-secondary/50 text-brand-text text-center font-banger text-xl py-2 rounded-xl focus:ring-2 focus:ring-brand-secondary",children:[f.jsx("option",{children:"Superhero"}),f.jsx("option",{children:"Sci-Fi"}),f.jsx("option",{children:"Fantasy"}),f.jsx("option",{children:"Noir"}),f.jsx("option",{children:"Horror"}),f.jsx("option",{children:"Cyberpunk"})]})]}),G("hero",l,c,I)]}),n===2&&G("co-star",d,h,A),n===3&&G("villain",m,x,E)]}),f.jsx("div",{className:"mt-10 flex justify-end",children:f.jsxs("button",{onClick:se,disabled:!B(),className:"group flex items-center gap-3 bg-gradient-to-r from-brand-secondary to-brand-accent text-white font-banger text-2xl px-10 py-4 rounded-xl shadow-lg shadow-brand-secondary/20 hover:scale-105 hover:shadow-brand-secondary/40 transition-all disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed",children:[n===3?"LAUNCH CREATOR":"NEXT STEP",f.jsx(Xl,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})})]})},iy=({imageUrl:t,narrative:e,pageIndex:n})=>{if(!(t&&t.length>100))return f.jsxs("div",{className:"w-full h-full bg-white flex flex-col items-center justify-center border-4 border-black p-4 text-center relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 opacity-10 bg-[image:radial-gradient(circle,#000_1px,transparent_1px)] bg-[length:10px_10px]"}),f.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[f.jsx("div",{className:"w-16 h-16 mb-4 text-black animate-pulse",children:f.jsx(Xi,{className:"w-full h-full"})}),f.jsxs("p",{className:"font-banger text-2xl text-black tracking-widest mb-2",children:["INKING PAGE ",n,"..."]}),f.jsx("p",{className:"font-comic text-sm text-gray-600",children:"The AI artist is drawing this panel."})]})]});const s=o=>o.startsWith("/9j/")?"image/jpeg":o.startsWith("iVBORw0KGgo")?"image/png":"image/jpeg";return f.jsxs("div",{className:"w-full h-full relative overflow-hidden border-4 border-black bg-white group",children:[f.jsx("img",{src:`data:${s(t)};base64,${t}`,className:"w-full h-full object-cover",alt:`Page ${n}`}),f.jsx("div",{className:"gloss-overlay"}),f.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between pointer-events-none",children:[(e==null?void 0:e.caption)&&f.jsx("div",{className:"bg-brand-comic-yellow border-2 border-black p-3 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] max-w-[80%] self-start transform -rotate-1",children:f.jsx("p",{className:"font-comic font-bold text-sm uppercase text-black leading-snug",children:e.caption})}),(e==null?void 0:e.dialogue)&&f.jsx("div",{className:"bg-white border-2 border-black p-4 rounded-[50%] shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] self-end max-w-[70%] speech-bubble text-center mt-auto mb-12 mr-4",children:f.jsx("p",{className:"font-comic font-bold text-base text-black leading-tight",children:e.dialogue})})]}),f.jsx("div",{className:"absolute bottom-2 right-2 font-banger text-black bg-white border border-black px-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] z-20",children:n}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto z-30",children:[f.jsx("button",{onClick:()=>{const o=document.createElement("a");o.href=`data:${s(t)};base64,${t}`,o.download=`comic_page_${n}.png`,o.click()},className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-cyan hover:text-white transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Download Image",children:f.jsx(po,{className:"w-4 h-4"})}),f.jsx("button",{className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-cyan hover:text-white transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Regenerate Image",children:f.jsx(My,{className:"w-4 h-4"})}),f.jsx("button",{className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-yellow hover:text-black transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Edit Text",children:f.jsx(vd,{className:"w-4 h-4"})})]})]})},nT=({faces:t})=>{const[e,n]=ue.useState(0),i=[];for(let l=0;l<t.length;l+=2)i.push({front:t[l],back:t[l+1]});const s=()=>{e<i.length&&n(e+1)},o=l=>{l.stopPropagation(),e>0&&n(e-1)};return f.jsxs("div",{className:"w-full h-full flex items-center justify-center comic-scene overflow-hidden bg-slate-900 p-8",children:[f.jsxs("div",{className:`book w-[300px] h-[450px] md:w-[400px] md:h-[600px] ${e>0?"translate-x-[50%]":""}`,children:[f.jsx("div",{className:"absolute inset-0 bg-white border-l-4 border-gray-300 rounded-r-lg shadow-2xl",style:{transform:"translateZ(-2px)"}}),i.map((l,c)=>{var m,x,w,v,I,A,E;const d=i.length-c,h=c<e;return f.jsxs("div",{className:`paper cursor-pointer ${h?"flipped":""}`,style:{zIndex:h?c:d},onClick:s,children:[f.jsxs("div",{className:"front border-l border-gray-200",children:[f.jsx(iy,{imageUrl:(m=l.front)==null?void 0:m.imageUrl,narrative:(x=l.front)==null?void 0:x.narrative,pageIndex:((w=l.front)==null?void 0:w.pageIndex)||0}),((v=l.front)==null?void 0:v.type)==="cover"&&f.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[f.jsx("h1",{className:"font-banger text-6xl text-brand-comic-yellow drop-shadow-[4px_4px_0px_#000] stroke-black",children:"INFINITE"}),f.jsx("h1",{className:"font-banger text-6xl text-white drop-shadow-[4px_4px_0px_#000]",children:"HEROES"}),f.jsx("div",{className:"mt-8 bg-brand-comic-red text-white font-banger px-4 py-1 border-2 border-black transform rotate-3",children:"TAP TO OPEN"})]})]}),f.jsx("div",{className:"back border-r border-gray-200",onClick:o,children:l.back?f.jsx(iy,{imageUrl:(I=l.back)==null?void 0:I.imageUrl,narrative:(A=l.back)==null?void 0:A.narrative,pageIndex:((E=l.back)==null?void 0:E.pageIndex)||0}):f.jsx("div",{className:"w-full h-full bg-white flex items-center justify-center font-banger text-2xl",children:"THE END"})})]},c)})]}),f.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-4",children:[f.jsx("button",{onClick:l=>{l.stopPropagation(),e>0&&n(e-1)},className:"bg-white border-2 border-black font-banger px-4 py-2 hover:bg-gray-100 disabled:opacity-50",disabled:e===0,children:"PREV"}),f.jsx("button",{onClick:l=>{l.stopPropagation(),e<i.length&&n(e+1)},className:"bg-brand-comic-cyan border-2 border-black font-banger px-4 py-2 hover:brightness-110 disabled:opacity-50",disabled:e===i.length,children:"NEXT"})]})]})},rT=({faces:t})=>{const e=t.filter(n=>n.type==="story");return f.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-brand-surface border-l border-white/10",children:[f.jsx("h3",{className:"font-banger text-xl text-white mb-4 tracking-wider",children:"STORY MAP"}),f.jsxs("div",{className:"space-y-4 relative",children:[f.jsx("div",{className:"absolute top-2 bottom-2 left-2 w-0.5 bg-white/20"}),e.map((n,i)=>{var s,o;return f.jsxs("div",{className:"relative pl-6",children:[f.jsx("div",{className:`absolute left-0 top-1 w-4 h-4 rounded-full border-2 border-brand-bg ${n.isLoading?"bg-yellow-400 animate-pulse":"bg-brand-comic-cyan"}`}),f.jsxs("div",{className:"bg-white/5 p-3 rounded border border-white/10 hover:bg-white/10 transition",children:[f.jsxs("div",{className:"flex justify-between mb-1",children:[f.jsxs("span",{className:"font-banger text-sm text-brand-secondary",children:["PAGE ",n.pageIndex]}),n.isLoading&&f.jsx("span",{className:"text-xs text-yellow-400 animate-pulse",children:"GENERATING..."})]}),f.jsx("p",{className:"text-xs text-gray-300 font-comic line-clamp-3",children:((s=n.narrative)==null?void 0:s.caption)||((o=n.narrative)==null?void 0:o.dialogue)||"Writing..."})]})]},n.id)})]})]})},iT=({pageIndex:t,genre:e})=>{const n=ue.useRef(null);ue.useEffect(()=>(n.current=new(window.AudioContext||window.webkitAudioContext),()=>{var o;(o=n.current)==null||o.close()}),[]);const i=()=>{if(!n.current)return;const o=n.current,l=o.createOscillator(),c=o.createGain();l.type="sine",l.frequency.setValueAtTime(800,o.currentTime),l.frequency.exponentialRampToValueAtTime(100,o.currentTime+.3),c.gain.setValueAtTime(.2,o.currentTime),c.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),l.connect(c),c.connect(o.destination),l.start(),l.stop(o.currentTime+.3)},s=()=>{if(!n.current)return;const o=n.current,l=o.createOscillator(),c=o.createGain();e.toLowerCase().includes("horror")?(l.type="sawtooth",l.frequency.setValueAtTime(50,o.currentTime),c.gain.setValueAtTime(.1,o.currentTime),c.gain.linearRampToValueAtTime(0,o.currentTime+2)):e.toLowerCase().includes("comedy")?(l.type="triangle",l.frequency.setValueAtTime(400,o.currentTime),l.frequency.linearRampToValueAtTime(600,o.currentTime+.1),c.gain.setValueAtTime(.1,o.currentTime),c.gain.linearRampToValueAtTime(0,o.currentTime+.5)):(l.type="square",l.frequency.setValueAtTime(100,o.currentTime),c.gain.setValueAtTime(.05,o.currentTime),c.gain.exponentialRampToValueAtTime(.01,o.currentTime+.5)),l.connect(c),c.connect(o.destination),l.start(),l.stop(o.currentTime+2)};return ue.useEffect(()=>{t>0&&(i(),Math.random()>.7&&s())},[t]),null},aT=({storyPremise:t,scenes:e})=>{const[n,i]=ue.useState([]),[s,o]=ue.useState(!1),[l,c]=ue.useState(null),d=ue.useRef(!1),h=I=>{const A=[{id:"cover",type:"cover",imageUrl:I.image,pageIndex:0,choices:[],isLoading:!1},{id:"p1",type:"story",pageIndex:1,choices:[],isLoading:!0},{id:"p2",type:"story",pageIndex:2,choices:[],isLoading:!0}];return i(A),A},m=ue.useCallback(async(I,A,E)=>{var se;if(!d.current)return;const C=I.findIndex(q=>q.isLoading);if(C===-1){o(!1);return}const R=I[C],D=R.pageIndex||1;o(!0),c(null);const z=I.slice(0,C).filter(q=>q.narrative).map(q=>{var G,Q;return`Page ${q.pageIndex}: ${((G=q.narrative)==null?void 0:G.caption)||""} ${((Q=q.narrative)==null?void 0:Q.dialogue)||""}`}).join(`
`),B=`STORY PREMISE: ${t||"Original Adventure"}

        RELEVANT SCENES: ${(e==null?void 0:e.slice(0,3).map(q=>q.summary).join("; "))||"None"}`;try{const q=E.map(ee=>ee.name),G=((se=E.find(ee=>ee.role==="villain"))==null?void 0:se.description)||"Evil villain",Q=await FA(z,D,A,q,G,B),ne=[...I];ne[C]={...R,narrative:Q},i(ne);const F=E.find(ee=>ee.role==="hero"),j=E.find(ee=>ee.role==="co-star"),W=E.find(ee=>ee.role==="villain"),M=await zA(Q,A,F,j,W),ce=[...ne];ce[C]={...ne[C],imageUrl:M,isLoading:!1},D<10?ce.push({id:`p${D+1}`,type:"story",pageIndex:D+1,choices:[],isLoading:!0}):ce.push({id:"back",type:"back_cover",pageIndex:11,choices:[],isLoading:!1}),i(ce),m(ce,A,E)}catch(q){console.error("Generation Error",q),c(q.message||"Failed to generate page"),o(!1)}},[t,e]);return{faces:n,isGenerating:s,error:l,startGeneration:(I,A)=>{d.current=!0;const E=A.find(C=>C.role==="hero");if(E){const C=h(E);m(C,I,A)}},stopGeneration:()=>{d.current=!1,o(!1)},regeneratePage:(I,A,E)=>{const C=[...n],R=C.findIndex(D=>D.pageIndex===I);if(R!==-1){C[R]={...C[R],isLoading:!0,imageUrl:void 0,narrative:void 0};const D=C.slice(0,R+1);D[R]={...D[R],isLoading:!0,imageUrl:void 0,narrative:void 0},i(D),d.current=!0,m(D,A,E)}}}},sT=({storyPremise:t,scenes:e,characters:n})=>{var C;const[i,s]=ue.useState("setup"),[o,l]=ue.useState("Superhero"),[c,d]=ue.useState([]),{faces:h,isGenerating:m,error:x,startGeneration:w,stopGeneration:v,regeneratePage:I}=aT({storyPremise:t,scenes:e}),A=(R,D,z,B)=>{d([R,D,z]),l(B),s("create"),w(B,[R,D,z])},E=()=>{const R=[...h].reverse().find(D=>D.type==="story"&&!D.isLoading);R&&I(R.pageIndex,o,c)};return f.jsx("div",{className:"w-full h-full flex flex-col relative",children:i==="setup"?f.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:f.jsx(tT,{onComplete:A,existingCharacters:n||[]})}):f.jsxs("div",{className:"flex-grow flex overflow-hidden animate-in fade-in duration-700",children:[f.jsx(iT,{pageIndex:h.filter(R=>!R.isLoading).length,genre:o}),f.jsxs("div",{className:"flex-grow relative flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/20 pointer-events-none"}),f.jsx("div",{className:"absolute top-4 left-4 z-10 flex gap-2",children:f.jsxs("button",{onClick:()=>{v(),s("setup")},className:"glass-panel px-4 py-2 rounded-full text-white hover:bg-white/10 flex items-center gap-2 font-bold transition border border-white/10",children:[f.jsx(uc,{className:"w-4 h-4"})," BACK TO SETUP"]})}),x&&f.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-20 bg-red-500/90 text-white px-6 py-3 rounded-lg shadow-xl backdrop-blur-md border border-red-400",children:[f.jsx("p",{className:"font-bold flex items-center gap-2",children:" Generation Failed"}),f.jsx("p",{className:"text-sm opacity-90",children:x}),f.jsx("button",{onClick:E,className:"mt-2 bg-white/20 hover:bg-white/30 px-3 py-1 rounded text-sm w-full transition",children:"Try Again"})]}),m&&f.jsxs("div",{className:"absolute top-4 right-4 z-10 glass-panel px-4 py-2 rounded-full flex items-center gap-2 border border-brand-secondary/30",children:[f.jsx(Xi,{className:"w-4 h-4 text-brand-secondary animate-spin"}),f.jsxs("span",{className:"text-xs font-bold text-brand-secondary uppercase tracking-wider",children:["Generating Page ",(C=h.find(R=>R.isLoading))==null?void 0:C.pageIndex,"..."]})]}),f.jsx("div",{className:"relative z-0 transform scale-90 lg:scale-100 transition-transform duration-500",children:f.jsx(nT,{faces:h})}),!m&&h.length>3&&f.jsx("div",{className:"absolute bottom-8 right-8 z-10",children:f.jsxs("button",{onClick:E,className:"glass-panel px-4 py-2 rounded-full text-white hover:bg-white/10 flex items-center gap-2 font-bold transition border border-white/10",title:"Regenerate the last page",children:[f.jsx("span",{className:"w-4 h-4",children:""})," REGENERATE PAGE"]})})]}),f.jsx("div",{className:"w-80 hidden xl:block h-full border-l border-white/10 glass-panel z-10",children:f.jsx(rT,{faces:h})})]})})},oT=({activeView:t,setActiveView:e,isSidebarOpen:n,setIsSidebarOpen:i,theme:s,setShowThemeSettings:o,setShowOnboarding:l})=>{const{saveProject:c,loadProject:d,saveStatus:h}=ho(),m=ue.useRef(null),x=w=>{var I;const v=(I=w.target.files)==null?void 0:I[0];v&&d(v),m.current&&(m.current.value="")};return f.jsx("div",{className:`${n?"w-80":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out relative z-20`,children:f.jsxs("div",{className:`h-full w-80 flex flex-col glass-panel border-r border-white/10 overflow-hidden ${n?"opacity-100":"opacity-0"} transition-opacity duration-200`,children:[f.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-white/5",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-brand-secondary to-brand-accent flex items-center justify-center shadow-lg shadow-brand-secondary/20",children:f.jsx(Ms,{className:"w-5 h-5 text-white"})}),f.jsx("h1",{className:"font-serif font-bold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-brand-secondary to-brand-accent",children:"StoryWeaver"})]}),f.jsx("button",{onClick:()=>i(!1),"aria-label":"Close Sidebar",className:"p-1.5 hover:bg-white/10 rounded-md transition-colors text-brand-text-muted hover:text-brand-text",children:f.jsx(uc,{className:"w-5 h-5"})})]}),f.jsxs("nav",{className:"flex-grow px-3 space-y-2 mt-4",children:[f.jsxs("a",{href:"/",className:"w-full flex items-center gap-3 p-3 rounded-xl text-brand-text-muted hover:text-brand-text hover:bg-white/5 transition-all duration-200",children:[f.jsx(uc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Back to Dashboard"})]}),f.jsx("div",{className:"h-px bg-white/10 my-2 mx-2"}),f.jsxs("button",{onClick:()=>e("story"),title:"Story Context",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="story"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(Ms,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Story Context"})]}),f.jsxs("button",{onClick:()=>e("characters"),title:"Characters",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="characters"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(cc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Characters"})]}),f.jsxs("button",{onClick:()=>e("items"),title:"Items",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="items"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold text-xs border border-current rounded-full",children:"I"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Items"})]}),f.jsxs("button",{onClick:()=>e("map"),title:"Story Map",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="map"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(ol,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Story Map"})]}),f.jsxs("button",{onClick:()=>e("world"),title:"Visual Inspiration",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="world"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(tc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Visual Inspiration"})]}),f.jsxs("button",{onClick:()=>e("timeline"),title:"Timeline",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="timeline"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(Bf,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Timeline"})]}),f.jsxs("button",{onClick:()=>e("visual"),title:"Visual View",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="visual"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(tc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Visual View"})]}),f.jsxs("button",{onClick:()=>e("comic"),title:"Comic Creator",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="comic"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(jb,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Comic Creator"})]}),f.jsxs("button",{onClick:()=>e("notes"),title:"Notes",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="notes"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(Ty,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Notes"})]}),f.jsxs("button",{onClick:()=>e("video"),title:"Video Creator",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="video"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(tc,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Video Creator"})]}),f.jsxs("button",{onClick:()=>e("assets"),title:"Asset Library",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${t==="assets"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[f.jsx(ha,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Asset Library"})]})]}),f.jsxs("div",{className:"p-4 border-t border-white/5 space-y-2",children:[f.jsxs("button",{onClick:()=>c(),disabled:h==="saving",className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition group",children:[f.jsx(hc,{className:`w-5 h-5 ${h==="saved"?"text-green-400":""}`}),f.jsx("span",{className:"hidden lg:block text-sm font-medium",children:h==="saving"?"Zipping...":h==="saved"?"Saved!":"Save Project"})]}),f.jsxs("button",{onClick:()=>{var w;return(w=m.current)==null?void 0:w.click()},className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[f.jsx(hm,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Load Project"})]}),f.jsx("input",{type:"file",ref:m,onChange:x,accept:".zip,.json",title:"Load Project File",className:"hidden"}),f.jsxs("button",{onClick:()=>o(!0),title:"Appearance",className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[s==="dark"?f.jsx(gm,{className:"w-5 h-5"}):f.jsx(Ly,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Appearance"})]}),f.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[f.jsx(Rb,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Guide"})]})]})]})})},lT=({character:t,onSave:e,onClose:n})=>{var G,Q;const[i,s]=ue.useState("stats"),[o,l]=ue.useState(!1),[c,d]=ue.useState(t.visualStats||{height:"",build:"",hairColor:"",eyeColor:"",distinguishingFeatures:""}),[h,m]=ue.useState(t.outfits||[]),[x,w]=ue.useState(t.activeOutfitId||((Q=(G=t.outfits)==null?void 0:G[0])==null?void 0:Q.id)||""),[v,I]=ue.useState(""),[A,E]=ue.useState(""),C=ue.useRef(null),R=ue.useRef(null),D=()=>{e(t.id,{visualStats:c,outfits:h,activeOutfitId:x}),n()},z=async ne=>{var j;const F=(j=ne.target.files)==null?void 0:j[0];if(F){l(!0);try{const W=await Dp(F,"PHYSICAL_TRAITS");W.description&&d(M=>({...M,distinguishingFeatures:(M.distinguishingFeatures+`
`+W.description).trim()}))}catch(W){console.error("Analysis failed",W)}finally{l(!1)}}},B=()=>{if(!v.trim())return;const ne={id:`outfit_${Date.now()}`,name:v,description:A},F=[...h,ne];m(F),x||w(ne.id),I(""),E("")},se=ne=>{m(F=>F.filter(j=>j.id!==ne)),x===ne&&w("")},q=async ne=>{var j;const F=(j=ne.target.files)==null?void 0:j[0];if(F){l(!0);try{const W=await Dp(F,"OUTFIT_DETAILS");W.description&&E(W.description)}catch(W){console.error("Analysis failed",W)}finally{l(!1)}}};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:f.jsxs("div",{className:"glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full max-w-4xl h-[85vh] flex flex-col border border-white/10",children:[f.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:f.jsx(Ry,{className:"w-6 h-6 text-brand-secondary"})}),f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold text-brand-text font-serif",children:["Visual Profile: ",t.name]}),f.jsx("p",{className:"text-xs text-brand-text-muted",children:"Manage appearance for image generation consistency."})]})]}),f.jsx("button",{onClick:n,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5",children:f.jsx(hl,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"flex h-full overflow-hidden",children:[f.jsxs("div",{className:"w-48 border-r border-white/10 p-4 flex flex-col gap-2 bg-brand-bg/30",children:[f.jsxs("button",{onClick:()=>s("stats"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition ${i==="stats"?"bg-brand-secondary/20 text-white":"text-brand-text-muted hover:bg-white/5"}`,children:[f.jsx(pc,{className:"w-4 h-4"})," Body & Face"]}),f.jsxs("button",{onClick:()=>s("outfits"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition ${i==="outfits"?"bg-brand-secondary/20 text-white":"text-brand-text-muted hover:bg-white/5"}`,children:[f.jsx(c2,{className:"w-4 h-4"})," Wardrobe"]})]}),f.jsxs("div",{className:"flex-grow p-6 overflow-y-auto custom-scrollbar bg-brand-bg/20",children:[i==="stats"&&f.jsx("div",{className:"space-y-6 max-w-2xl",children:f.jsxs("div",{className:"bg-brand-surface/40 p-4 rounded-xl border border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-bold text-brand-text",children:"Physical Attributes"}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>{var ne;return(ne=C.current)==null?void 0:ne.click()},disabled:o,className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition",children:[o?f.jsx(Xi,{className:"w-3 h-3 animate-spin"}):f.jsx(Ff,{className:"w-3 h-3"}),o?"Analyzing...":"Analyze Image"]}),f.jsx("input",{type:"file",ref:C,className:"hidden",accept:"image/*",onChange:z})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Height"}),f.jsx("input",{type:"text",value:c.height,onChange:ne=>d({...c,height:ne.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. 6'2, Tall"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Body Build"}),f.jsx("input",{type:"text",value:c.build,onChange:ne=>d({...c,build:ne.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Muscular, Slender"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Hair Color/Style"}),f.jsx("input",{type:"text",value:c.hairColor,onChange:ne=>d({...c,hairColor:ne.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Short black, curly red"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Eye Color"}),f.jsx("input",{type:"text",value:c.eyeColor,onChange:ne=>d({...c,eyeColor:ne.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Piercing blue"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Distinguishing Features"}),f.jsx("textarea",{rows:4,value:c.distinguishingFeatures,onChange:ne=>d({...c,distinguishingFeatures:ne.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary resize-none",placeholder:"Scars, tattoos, glasses, facial structure..."})]})]})}),i==="outfits"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(ne=>f.jsxs("div",{onClick:()=>w(ne.id),className:`p-4 rounded-xl border transition-all cursor-pointer group relative ${x===ne.id?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-surface/40 border-white/5 hover:border-white/20"}`,children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(c2,{className:`w-4 h-4 ${x===ne.id?"text-brand-secondary":"text-brand-text-muted"}`}),f.jsx("h4",{className:"font-bold text-brand-text",children:ne.name})]}),x===ne.id&&f.jsx("span",{className:"text-[10px] bg-brand-secondary text-white px-2 py-0.5 rounded-full",children:"Active"})]}),f.jsx("p",{className:"text-sm text-brand-text-muted line-clamp-3",children:ne.description}),f.jsx("button",{onClick:F=>{F.stopPropagation(),se(ne.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 p-1.5 bg-red-900/50 text-red-400 hover:text-white rounded-lg transition",children:f.jsx(eu,{className:"w-3 h-3"})})]},ne.id))}),f.jsxs("div",{className:"bg-brand-bg/30 border-2 border-dashed border-white/10 rounded-xl p-6",children:[f.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-4 flex items-center gap-2",children:[f.jsx(ll,{className:"w-4 h-4"})," Add New Outfit"]}),f.jsxs("div",{className:"flex gap-4 mb-4",children:[f.jsx("input",{type:"text",value:v,onChange:ne=>I(ne.target.value),placeholder:"Outfit Name (e.g. Battle Armor)",className:"flex-1 bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm"}),f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:()=>{var ne;return(ne=R.current)==null?void 0:ne.click()},disabled:o,className:"h-full flex items-center gap-2 bg-brand-primary/50 hover:bg-brand-primary text-white px-4 py-2 rounded-lg transition text-sm",title:"Upload image to describe outfit",children:o?f.jsx(Xi,{className:"w-4 h-4 animate-spin"}):f.jsx(ha,{className:"w-4 h-4"})}),f.jsx("input",{type:"file",ref:R,className:"hidden",accept:"image/*",onChange:q})]})]}),f.jsx("textarea",{value:A,onChange:ne=>E(ne.target.value),rows:3,placeholder:"Detailed description of clothing, colors, materials...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm mb-4 resize-none"}),f.jsx("button",{onClick:B,disabled:!v.trim(),className:"w-full bg-brand-secondary/20 hover:bg-brand-secondary text-brand-secondary hover:text-white font-bold py-2 rounded-lg transition disabled:opacity-50",children:"Add Outfit"})]})]})]})]}),f.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl",children:[f.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition",children:"Cancel"}),f.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:[f.jsx(hc,{className:"w-5 h-5"})," Save Visuals"]})]})]})})},uT=t=>{switch(t){case _t.PROTAGONIST:return"#fbbF24";case _t.ANTAGONIST:return"#f87171";case _t.DEUTERAGONIST:return"#6ee7b7";case _t.MENTOR:return"#60a5fa";case _t.LOVE_INTEREST:return"#f472b6";case _t.FOIL:return"#c084fc";default:return"#9ca3af"}},cT=({data:t})=>{const o=Math.min(400,300)/2-40,l=ue.useMemo(()=>{const c=new Map,d=2*Math.PI/t.nodes.length;return t.nodes.forEach((h,m)=>{const x=200+o*Math.cos(m*d-Math.PI/2),w=150+o*Math.sin(m*d-Math.PI/2);c.set(h.id,{x,y:w})}),c},[t.nodes,200,150,o]);return f.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full h-auto",children:[t.links.map((c,d)=>{const h=l.get(c.source),m=l.get(c.target);if(!h||!m)return null;const x=(h.x+m.x)/2,w=(h.y+m.y)/2,v={stroke:"#4b5563",strokeWidth:c.strength==="Strong"?2:1,strokeDasharray:c.strength==="Weak"?"4 2":"none"};return f.jsxs("g",{children:[f.jsx("line",{x1:h.x,y1:h.y,x2:m.x,y2:m.y,style:v}),f.jsx("text",{x,y:w,fill:"#d1d5db",fontSize:"8",textAnchor:"middle",dominantBaseline:"middle",className:"font-sans",paintOrder:"stroke",stroke:"#16213e",strokeWidth:"2px",strokeLinecap:"butt",strokeLinejoin:"miter",children:c.dynamic})]},`${c.source}-${c.target}-${d}`)}),t.nodes.map(c=>{const d=l.get(c.id);if(!d)return null;const h=uT(c.type);return f.jsxs("g",{children:[f.jsx("circle",{cx:d.x,cy:d.y,r:"15",fill:h,stroke:"#16213e",strokeWidth:"2"}),f.jsx("text",{x:d.x,y:d.y+25,fill:"#f3f4f6",fontSize:"10",textAnchor:"middle",className:"font-bold font-serif",children:c.name})]},c.id)})]})},dT=({generatedContent:t,isLoading:e,loadingMessage:n,error:i,onGenerateTimeline:s,onUpdateScene:o,onSave:l})=>{const[c,d]=ue.useState("idle"),[h,m]=ue.useState(!1),[x,w]=ue.useState(!1),v=()=>{if(!(t!=null&&t.content))return"";const{content:D,type:z}=t;if(typeof D=="string")return D;if(Array.isArray(D)){if(z==="OUTLINE"){const B=D;let se="",q="";return B.forEach(G=>{G.act!==q&&(q=G.act,se+=`
## ${q} ##

`),se+=`Title: ${G.title}
Summary: ${G.summary}

`}),se}return D.map(B=>`Title: ${B.title}
Summary: ${B.summary}`).join(`

`)}if(typeof D=="object"){if("name"in D&&"appearance"in D){const B=D;return`Name: ${B.name}

Appearance: ${B.appearance}

History: ${B.history}

Significance: ${B.significance}`}return JSON.stringify(D,null,2)}return""},I=()=>{const D=v();D&&(navigator.clipboard.writeText(D),d("copied"),setTimeout(()=>d("idle"),2e3))},A=()=>{const D=v();if(D){const z=new Blob([D],{type:"text/plain"}),B=URL.createObjectURL(z),se=document.createElement("a");se.href=B;const q=(t==null?void 0:t.title.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"generated_content";se.download=`${q}.txt`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(B)}},E=()=>{typeof(t==null?void 0:t.content)=="string"&&s(t.content)},C=()=>{t&&t.type===xt.SETTING_GENERATOR&&t.sourceId&&o&&typeof t.content=="string"&&(o(t.sourceId,{settingDescription:t.content}),m(!0),setTimeout(()=>m(!1),3e3))},R=()=>{if(!t)return null;if(t.type==="RELATIONSHIP_WEB_VISUAL"&&typeof t.content=="object"&&"nodes"in t.content)return f.jsx(cT,{data:t.content});if(t.type===xt.OUTLINE_GENERATOR&&Array.isArray(t.content)){const B=t.content.reduce((se,q)=>((se[q.act]=se[q.act]||[]).push(q),se),{});return f.jsx("div",{className:"space-y-4",children:Object.entries(B).map(([se,q])=>f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-bold text-brand-secondary font-serif mb-2 border-b border-brand-primary/50 pb-1",children:se}),f.jsx("div",{className:"space-y-3",children:q.map((G,Q)=>f.jsxs("div",{className:"bg-brand-bg/40 p-3 rounded-lg border-l-4 border-brand-primary hover:bg-brand-bg/60 transition",children:[f.jsx("h5",{className:"font-bold text-brand-text",children:G.title}),f.jsx("p",{className:"text-sm text-brand-text-muted font-serif mt-1",children:G.summary})]},Q))})]},se))})}if(t.type==="OBJECT_DATA"&&typeof t.content=="object"&&"name"in t.content){const z=t.content;return f.jsxs("div",{className:"space-y-4 text-brand-text-muted font-serif",children:[f.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[f.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"Appearance"}),f.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:z.appearance})]}),f.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[f.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"History"}),f.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:z.history})]}),f.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[f.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"Significance"}),f.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:z.significance})]})]})}if(t.type==="TIMELINE"&&typeof t.content=="string")return f.jsx("p",{className:"whitespace-pre-wrap font-serif leading-relaxed text-brand-secondary/90",children:t.content});if(Array.isArray(t.content))return f.jsx("div",{className:"space-y-3",children:t.content.map((z,B)=>f.jsxs("div",{className:"bg-brand-bg/40 p-3 rounded-lg border-l-4 border-brand-secondary hover:bg-brand-bg/60 transition",children:[f.jsx("h4",{className:"font-bold text-brand-text",children:z.title}),f.jsx("p",{className:"text-sm text-brand-text-muted font-serif mt-1",children:z.summary})]},B))});let D=t.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return f.jsx("div",{className:"prose prose-invert max-w-none prose-p:text-brand-text prose-strong:text-brand-text-muted whitespace-pre-wrap font-serif leading-relaxed text-base",dangerouslySetInnerHTML:{__html:D}})};return f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsx("div",{className:"flex justify-between items-center mb-4",children:f.jsx("div",{className:"flex items-center gap-3",children:t&&!e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:I,title:"Copy to Clipboard",className:"text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60",children:c==="copied"?f.jsx("span",{className:"text-xs text-green-400 font-bold px-1",children:"Copied!"}):f.jsx(Ty,{className:"w-4 h-4"})}),f.jsx("button",{onClick:A,title:"Download as Text",className:"text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60",children:f.jsx(po,{className:"w-4 h-4"})}),l&&f.jsx("button",{onClick:()=>{t&&(l(t),w(!0),setTimeout(()=>w(!1),2e3))},title:"Save to Materials",className:`text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60 ${x?"text-green-400":""}`,children:x?f.jsx("span",{className:"text-xs font-bold px-1",children:"Saved!"}):f.jsx(Ay,{className:"w-4 h-4"})}),t.type===xt.SETTING_GENERATOR&&t.sourceId&&f.jsxs("button",{onClick:C,disabled:h,className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold transition ${h?"bg-green-500/20 text-green-400":"bg-brand-secondary/20 text-brand-secondary hover:bg-brand-secondary hover:text-white"}`,children:[f.jsx(ol,{className:"w-3 h-3"}),h?"Updated Scene!":"Update Scene Setting"]})]})})}),f.jsxs("div",{className:"bg-brand-primary/30 rounded-xl border border-brand-primary/40 flex-grow p-6 overflow-y-auto relative min-h-[200px] custom-scrollbar shadow-inner",children:[e&&f.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-brand-surface/80 backdrop-blur-sm z-10 rounded-xl",children:[f.jsx(Em,{}),f.jsx("p",{className:"mt-3 text-brand-text-muted font-medium animate-pulse",children:n||"Weaving magic..."})]}),i&&f.jsx("div",{className:"text-red-400 p-4 bg-red-900/30 border border-red-500/30 rounded-xl whitespace-pre-wrap",children:i}),!e&&!i&&!t&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-brand-text-muted/50",children:[f.jsx(Ms,{className:"w-20 h-20 mb-4 opacity-20"}),f.jsx("p",{className:"text-lg font-semibold",children:"Your story awaits."}),f.jsx("p",{className:"text-sm opacity-70",children:"Select a tool to start generating content."})]}),t&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-brand-secondary font-serif border-b border-white/10 pb-2",children:t.title}),R(),t.type===xt.PLOT_IDEAS&&!e&&f.jsx("div",{className:"pt-6 text-center",children:f.jsxs("button",{onClick:E,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-500 hover:to-teal-500 text-white font-bold py-3 px-6 rounded-full transition duration-300 flex items-center gap-2 mx-auto shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[f.jsx(Bf,{className:"w-5 h-5"}),"Generate Story Timeline"]})})]})]})]})},fT=({generatedContent:t,onClose:e,isLoading:n,loadingMessage:i,error:s,onGenerateTimeline:o,onUpdateScene:l,onSave:c})=>f.jsx(Lf,{isOpen:!0,onClose:e,title:t.title||"Generated Output",maxWidth:"4xl",children:f.jsx("div",{className:"max-h-[70vh] flex flex-col",children:f.jsx(dT,{generatedContent:t,isLoading:n,loadingMessage:i,error:s,onGenerateTimeline:o,onUpdateScene:l,onSave:d=>{c(d),e()}})})}),Kp=[{name:"Cosmic (Default)",primary:"99 102 241",secondary:"139 92 246",accent:"56 189 248",hex:"#8B5CF6"},{name:"Nature",primary:"16 185 129",secondary:"5 150 105",accent:"132 204 22",hex:"#10B981"},{name:"Sunset",primary:"249 115 22",secondary:"234 88 12",accent:"251 113 133",hex:"#F97316"},{name:"Ocean",primary:"59 130 246",secondary:"37 99 235",accent:"34 211 238",hex:"#3B82F6"},{name:"Berry",primary:"219 39 119",secondary:"190 24 93",accent:"244 114 182",hex:"#DB2777"}],hT=({isOpen:t,onClose:e,currentTheme:n,onToggleTheme:i,currentThemeColorName:s,onSelectThemeColor:o})=>t?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:f.jsxs("div",{className:"w-full max-w-md bg-brand-surface border border-white/10 rounded-2xl shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-brand-text-muted hover:text-white transition",children:f.jsx(hl,{className:"w-5 h-5"})}),f.jsx("h2",{className:"text-2xl font-serif font-bold text-brand-text mb-6",children:"Appearance"}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Display Mode"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("button",{onClick:()=>n!=="light"&&i(),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition ${n==="light"?"bg-brand-secondary/10 border-brand-secondary text-brand-secondary":"bg-white/5 border-transparent text-brand-text-muted hover:bg-white/10"}`,children:[f.jsx(gm,{className:"w-6 h-6"}),f.jsx("span",{className:"font-medium",children:"Light"})]}),f.jsxs("button",{onClick:()=>n!=="dark"&&i(),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition ${n==="dark"?"bg-brand-secondary/10 border-brand-secondary text-brand-secondary":"bg-white/5 border-transparent text-brand-text-muted hover:bg-white/10"}`,children:[f.jsx(Ly,{className:"w-6 h-6"}),f.jsx("span",{className:"font-medium",children:"Dark"})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Accent Color"}),f.jsx("div",{className:"grid grid-cols-5 gap-3",children:Kp.map(l=>f.jsx("button",{onClick:()=>o(l),className:`group relative w-full aspect-square rounded-full flex items-center justify-center transition-transform hover:scale-110 ${s===l.name?"ring-2 ring-white ring-offset-2 ring-offset-brand-bg":""}`,style:{backgroundColor:l.hex},title:l.name,children:s===l.name&&f.jsx(Db,{className:"w-5 h-5 text-white drop-shadow-md"})},l.name))})]})]}),f.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 flex justify-end",children:f.jsx("button",{onClick:e,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-opacity-90 transition font-medium",children:"Done"})})]})}):null,pT=Array.from({length:21},(t,e)=>e*50),mT=["1:2","9:16","2:3","3:4","5:6","1:1","6:5","4:3","3:2","16:9","2:1"],gT=["5","6","6.1","7"],yT=({scene:t,onGenerateStoryboard:e,onGenerateSketch:n,onUpdateShot:i,onClose:s,isGenerating:o})=>{const[l,c]=ue.useState(null),d=ue.useRef(null),[h,m]=ue.useState(null),[x,w]=ue.useState(100),[v,I]=ue.useState("16:9"),[A,E]=ue.useState("6"),C=(q,G)=>{navigator.clipboard.writeText(q),c(G),setTimeout(()=>c(null),2e3)},R=q=>{var Q;const G=(Q=q.target.files)==null?void 0:Q[0];if(G&&h){const ne=new FileReader;ne.onloadend=()=>{i(h,{finalImage:ne.result}),m(null)},ne.readAsDataURL(G)}},D=q=>{var G;m(q),(G=d.current)==null||G.click()},z=t.storyboard||[],B=!!t.script,se=!!t.settingDescription;return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:f.jsxs("div",{className:"bg-brand-bg w-full h-full max-w-[95vw] max-h-[95vh] rounded-2xl shadow-2xl border border-white/10 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-brand-surface",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"p-3 bg-brand-secondary/20 rounded-lg text-brand-secondary",children:f.jsx(Zl,{className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsxs("h2",{className:"text-2xl font-bold text-brand-text font-serif",children:["Storyboard: ",t.title]}),f.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[f.jsx("span",{className:`px-2 py-0.5 rounded ${B?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:B?"Script Ready":"No Script"}),f.jsx("span",{className:`px-2 py-0.5 rounded ${se?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:se?"Setting Ready":"No Setting"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex gap-2 mr-2",children:[f.jsx("select",{value:A,onChange:q=>E(q.target.value),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Midjourney Version",children:gT.map(q=>f.jsxs("option",{value:q,children:["v",q]},q))}),f.jsx("select",{value:v,onChange:q=>I(q.target.value),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Aspect Ratio",children:mT.map(q=>f.jsx("option",{value:q,children:q},q))}),f.jsx("select",{value:x,onChange:q=>w(Number(q.target.value)),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Stylize",children:pT.map(q=>f.jsxs("option",{value:q,children:["s",q]},q))})]}),f.jsxs("button",{onClick:()=>e({stylize:x,aspectRatio:v,version:A}),disabled:o,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?f.jsx(Em,{}):f.jsx(Xi,{className:"w-5 h-5"}),z.length>0?"Regenerate Shots":"Generate Storyboard"]}),f.jsx("button",{onClick:s,className:"p-2 text-brand-text-muted hover:text-white transition rounded-lg hover:bg-white/5",title:"Close","aria-label":"Close",children:f.jsx(hl,{className:"w-8 h-8"})})]})]}),f.jsx("div",{className:"flex-grow overflow-y-auto p-6 bg-brand-bg/50 custom-scrollbar",children:z.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-brand-text-muted opacity-50",children:[f.jsx(Zl,{className:"w-24 h-24 mb-4"}),f.jsx("p",{className:"text-lg",children:"No shots generated yet."}),f.jsx("p",{className:"text-sm max-w-md text-center mt-2",children:"The AI will analyze the script, setting, and characters to create a cinematic shot list with sketches."})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:z.map((q,G)=>f.jsxs("div",{className:"bg-brand-surface rounded-xl border border-white/5 overflow-hidden flex flex-col shadow-lg group hover:border-brand-secondary/30 transition-all duration-300",children:[f.jsxs("div",{className:"p-3 bg-black/20 border-b border-white/5 flex justify-between items-center",children:[f.jsxs("span",{className:"text-xs font-mono text-brand-text-muted bg-white/5 px-2 py-1 rounded",children:["Shot ",G+1]}),f.jsx("span",{className:"font-bold text-sm text-brand-secondary",children:q.shotType})]}),f.jsxs("div",{className:"relative aspect-video bg-black flex items-center justify-center overflow-hidden",children:[q.finalImage?f.jsx("img",{src:q.finalImage,alt:"Final",className:"w-full h-full object-cover"}):q.sketchImage?f.jsx("img",{src:q.sketchImage.startsWith("data:")?q.sketchImage:`data:image/jpeg;base64,${q.sketchImage}`,alt:"Sketch",className:"w-full h-full object-cover opacity-80 grayscale contrast-125"}):f.jsxs("div",{className:"text-center p-4",children:[f.jsxs("p",{className:"text-xs text-brand-text-muted mb-2 italic",children:['"',q.visualDescription,'"']}),f.jsx("button",{onClick:()=>n(q.id,q.visualDescription),className:"text-xs bg-brand-primary/50 hover:bg-brand-secondary text-white px-3 py-1.5 rounded-full transition",children:"Generate Sketch"})]}),f.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[f.jsx("button",{onClick:()=>D(q.id),className:"p-2 bg-white/10 hover:bg-brand-secondary rounded-full text-white transition",title:"Upload Midjourney Image",children:f.jsx(ha,{className:"w-5 h-5"})}),!q.sketchImage&&!q.finalImage&&f.jsx("button",{onClick:()=>n(q.id,q.visualDescription),className:"p-2 bg-white/10 hover:bg-brand-secondary rounded-full text-white transition",title:"Generate Pencil Sketch",children:f.jsx(Xi,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"p-4 flex-grow flex flex-col gap-2 bg-brand-bg/30",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-brand-text-muted",children:"Midjourney Prompt"}),f.jsx("button",{onClick:()=>C(q.midjourneyPrompt,q.id),className:`text-xs flex items-center gap-1 ${l===q.id?"text-green-400":"text-brand-text-muted hover:text-white"}`,children:l===q.id?"Copied!":f.jsxs(f.Fragment,{children:[f.jsx(po,{className:"w-3 h-3 rotate-180"})," Copy"]})})]}),f.jsx("p",{className:"text-xs text-brand-text-muted font-mono bg-black/30 p-2 rounded border border-white/5 line-clamp-3 hover:line-clamp-none transition-all cursor-text select-all",children:q.midjourneyPrompt})]})]},q.id))})}),f.jsx("input",{type:"file",ref:d,className:"hidden",accept:"image/*",onChange:R,"aria-label":"Upload Image",title:"Upload Image"})]})})},vT={[xt.DIALOGUE_GENERATOR]:{title:"Dialogue Generator",description:"Select exactly two characters to generate a conversation.",minChars:2,maxChars:2,minScenes:0,showChars:!0,showScenes:!1},[xt.TRANSITION]:{title:"Scene Transition",description:"Select exactly two scenes to generate a narrative bridge between them.",minChars:0,minScenes:2,maxScenes:2,showChars:!1,showScenes:!0},[xt.RELATIONSHIP_WEB]:{title:"Relationship Web",description:"Select at least two characters to map their dynamics.",minChars:2,minScenes:0,showChars:!0,showScenes:!1},[xt.CHAPTER]:{title:"Chapter Writer",description:"Select the characters present in this chapter and any previous scenes for context.",minChars:1,minScenes:0,showChars:!0,showScenes:!0},[xt.PLOT_IDEAS]:{title:"Plot Ideas",description:"Select key characters and scenes to ground the plot suggestions.",minChars:0,minScenes:0,showChars:!0,showScenes:!0},[xt.MIDJOURNEY_PROMPTS]:{title:"Midjourney Prompt Writer",description:"Select a scene to visualize and the characters present. Uses character profiles and uploaded images for accuracy.",minChars:0,minScenes:1,maxScenes:1,showChars:!0,showScenes:!0},[xt.SETTING_GENERATOR]:{title:"Describe a Setting",description:"Select a specific scene to generate a detailed, multi-sensory description of its location.",minChars:0,minScenes:1,maxScenes:1,showChars:!1,showScenes:!0}},xT=t=>{const e={className:"w-4 h-4"};switch(t){case"Protagonist":return f.jsx(um,{...e,className:"w-4 h-4 text-amber-400"});case"Antagonist":return f.jsx(cm,{...e,className:"w-4 h-4 text-red-400"});case"Mentor":return f.jsx(fm,{...e,className:"w-4 h-4 text-blue-400"});case"Love Interest":return f.jsx(dm,{...e,className:"w-4 h-4 text-pink-400"});default:return f.jsx(pc,{...e,className:"w-4 h-4 text-gray-400"})}},bT=({tool:t,characters:e,scenes:n,initialSelectedCharIds:i,initialSelectedSceneIds:s,onConfirm:o,onClose:l})=>{const c=vT[t],[d,h]=ue.useState(new Set(i)),[m,x]=ue.useState(new Set(s)),[w,v]=ue.useState(!1);if(ue.useEffect(()=>{if(!c)return;const E=d.size,C=m.size;let R=!0;E<c.minChars&&(R=!1),c.maxChars!==void 0&&E>c.maxChars&&(R=!1),C<c.minScenes&&(R=!1),c.maxScenes!==void 0&&C>c.maxScenes&&(R=!1),v(R)},[d,m,c]),!c)return null;const I=E=>{const C=new Set(d);C.has(E)?C.delete(E):C.add(E),h(C)},A=E=>{const C=new Set(m);c.maxScenes===1?(C.clear(),C.add(E)):C.has(E)?C.delete(E):C.add(E),x(C)};return f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:f.jsxs("div",{className:"glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-white/10",children:[f.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10 bg-gradient-to-r from-brand-surface/50 to-brand-bg/50",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-bold text-brand-text flex items-center gap-2",children:[t===xt.MIDJOURNEY_PROMPTS?f.jsx(Ff,{className:"w-5 h-5 text-brand-secondary"}):t===xt.SETTING_GENERATOR?f.jsx(ky,{className:"w-5 h-5 text-brand-secondary"}):f.jsx(Xi,{className:"w-5 h-5 text-brand-secondary"}),c.title]}),f.jsx("p",{className:"text-sm text-brand-text-muted mt-1",children:c.description})]}),f.jsx("button",{onClick:l,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5",children:f.jsx(hl,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"flex-grow overflow-y-auto p-6 custom-scrollbar",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.showChars&&f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsx("div",{className:"flex justify-between items-center mb-3",children:f.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider",children:["Characters ",f.jsxs("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${d.size>=c.minChars&&(c.maxChars===void 0||d.size<=c.maxChars)?"bg-green-500/20 text-green-400":"bg-brand-primary/40 text-brand-text-muted"}`,children:[d.size," / ",c.maxChars?c.maxChars:""]})]})}),f.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 max-h-[50vh] custom-scrollbar",children:e.length===0?f.jsx("p",{className:"text-sm italic text-brand-text-muted",children:"No characters available."}):e.map(E=>f.jsxs("div",{onClick:()=>I(E.id),className:`p-3 rounded-lg border transition-all cursor-pointer flex items-center gap-3 ${d.has(E.id)?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-bg/40 border-transparent hover:bg-brand-bg/60 hover:border-white/5"}`,children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border transition ${d.has(E.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:d.has(E.id)&&f.jsx(ul,{className:"w-4 h-4 text-white"})}),f.jsx("div",{className:"flex-grow min-w-0",children:f.jsxs("div",{className:"flex items-center gap-2",children:[xT(E.type),f.jsx("span",{className:`font-medium truncate ${d.has(E.id)?"text-brand-text":"text-brand-text-muted"}`,children:E.name})]})})]},E.id))})]}),c.showScenes&&f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsx("div",{className:"flex justify-between items-center mb-3",children:f.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider",children:["Scenes ",f.jsxs("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${m.size>=c.minScenes&&(c.maxScenes===void 0||m.size<=c.maxScenes)?"bg-green-500/20 text-green-400":"bg-brand-primary/40 text-brand-text-muted"}`,children:[m.size," / ",c.maxScenes?c.maxScenes:""]})]})}),f.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 max-h-[50vh] custom-scrollbar",children:n.length===0?f.jsx("p",{className:"text-sm italic text-brand-text-muted",children:"No scenes available."}):n.map((E,C)=>f.jsxs("div",{onClick:()=>A(E.id),className:`p-3 rounded-lg border transition-all cursor-pointer flex items-center gap-3 ${m.has(E.id)?"bg-teal-500/10 border-teal-500 ring-1 ring-teal-500/30":"bg-brand-bg/40 border-transparent hover:bg-brand-bg/60 hover:border-white/5"}`,children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border transition ${m.has(E.id)?"bg-teal-500 border-teal-500":"border-brand-text-muted/50"}`,children:m.has(E.id)&&f.jsx(ul,{className:"w-4 h-4 text-white"})}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-xs text-brand-text-muted font-mono",children:["#",C+1]}),f.jsx("span",{className:`font-medium truncate ${m.has(E.id)?"text-brand-text":"text-brand-text-muted"}`,children:E.title})]}),f.jsx("p",{className:"text-xs text-brand-text-muted truncate opacity-70",children:E.summary})]})]},E.id))})]})]})}),f.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl",children:[f.jsx("button",{onClick:l,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition font-medium border border-transparent hover:border-white/5",children:"Cancel"}),f.jsxs("button",{onClick:()=>o(d,m),disabled:!w,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-8 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx(Xi,{className:"w-5 h-5"}),"Generate"]})]})]})})},wT=({onGenerate:t,isLoading:e,characters:n,scenes:i,selectedCharacterIds:s,selectedSceneIds:o,onBatchUpdateSelection:l,hasContent:c})=>{const[d,h]=ue.useState(null),m=[{id:xt.CHAPTER,label:"Generate Chapter",icon:f.jsx(Ms,{className:"w-5 h-5"}),description:"Writes the next chapter based on selected characters and scenes.",color:"bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-rose-900/20",needsModal:!0},{id:xt.DIALOGUE_GENERATOR,label:"Dialogue Generator",icon:f.jsx(kb,{className:"w-5 h-5"}),description:"Generates a dialogue snippet between two characters.",color:"bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 shadow-sky-900/20",needsModal:!0},{id:xt.MIDJOURNEY_PROMPTS,label:"Midjourney Prompt Writer",icon:f.jsx(Ff,{className:"w-5 h-5"}),description:"Generates a list of detailed visual prompts for scenes and characters.",color:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 shadow-indigo-900/20",needsModal:!0},{id:xt.SETTING_GENERATOR,label:"Describe a Setting",icon:f.jsx(ky,{className:"w-5 h-5"}),description:"Generates a rich, multi-sensory description of a specific scene's location.",color:"bg-gradient-to-r from-teal-400 to-cyan-500 hover:from-teal-500 hover:to-cyan-600 shadow-teal-900/20",needsModal:!0},{id:xt.RELATIONSHIP_WEB,label:"Relationship Web",icon:f.jsx(_b,{className:"w-5 h-5"}),description:"Analyzes the dynamics between selected characters.",color:"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 shadow-purple-900/20",needsModal:!0},{id:xt.PLOT_IDEAS,label:"Plot Ideas",icon:f.jsx(lm,{className:"w-5 h-5"}),description:"Brainstorms new plot twists and ideas for your story.",color:"bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 shadow-amber-900/20",needsModal:!0},{id:xt.TRANSITION,label:"Generate Transition",icon:f.jsx(Cy,{className:"w-5 h-5"}),description:"Generates a narrative transition between two scenes.",color:"bg-gradient-to-r from-emerald-400 to-teal-500 hover:from-emerald-500 hover:to-teal-600 shadow-emerald-900/20",needsModal:!0},{id:xt.MAP_GENERATOR,label:"Generate World Map",icon:f.jsx(ol,{className:"w-5 h-5"}),description:"Analyzes all content to generate a world map with key locations.",color:"bg-gradient-to-r from-blue-400 to-indigo-500 hover:from-blue-500 hover:to-indigo-600 shadow-blue-900/20",needsModal:!1}],x=[{id:xt.OUTLINE_GENERATOR,label:"Generate Outline",icon:f.jsx(Lb,{className:"w-5 h-5"}),description:"Generates a structured story outline based on your premise and characters.",color:"bg-gradient-to-r from-fuchsia-500 to-rose-500 hover:from-fuchsia-600 hover:to-rose-600 shadow-fuchsia-900/20",needsModal:!1},{id:xt.OBJECT_GENERATOR,label:"Invent Object/MacGuffin",icon:f.jsx(Iy,{className:"w-5 h-5"}),description:"Creates a unique object or artifact with history and significance.",color:"bg-gradient-to-r from-indigo-400 to-violet-500 hover:from-indigo-500 hover:to-violet-600 shadow-indigo-900/20",needsModal:!1}],w=E=>{const C=s.size,R=o.size;switch(E){case xt.DIALOGUE_GENERATOR:return C===2;case xt.RELATIONSHIP_WEB:return C>=2;case xt.TRANSITION:return R===2;case xt.MIDJOURNEY_PROMPTS:case xt.SETTING_GENERATOR:return R===1;case xt.CHAPTER:return C>0&&R>0;default:return!1}},v=E=>{E.needsModal?h(E.id):t(E.id)},I=(E,C)=>{l("character",E),l("scene",C),d&&t(d,{characterIds:E,sceneIds:C}),h(null)},A=E=>{const C=e,R=w(E.id);return f.jsxs("button",{onClick:()=>v(E),disabled:C,className:`w-full flex items-center justify-start gap-3 text-white text-sm font-bold py-3 px-5 rounded-xl transition-all duration-300 border disabled:opacity-50 disabled:cursor-not-allowed 
                ${C?"bg-gray-700 border-white/10":R?`${E.color} border-white/40 ring-2 ring-white/20 scale-[1.02] shadow-xl`:`${E.color} border-white/10 shadow-lg hover:scale-[1.02] hover:border-white/20`}`,title:E.description,children:[f.jsxs("div",{className:"p-1.5 bg-white/20 rounded-lg backdrop-blur-sm relative",children:[E.icon,R&&f.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-white rounded-full animate-pulse shadow-sm"})]}),f.jsxs("div",{className:"flex flex-col items-start text-left",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[E.label,R&&f.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded-full uppercase tracking-wider font-extrabold",children:"Best Match"})]}),R&&f.jsx("span",{className:"text-[10px] font-normal opacity-90 mt-0.5",children:"Recommended based on selection"})]})]},E.id)};return f.jsxs(f.Fragment,{children:[d&&f.jsx(bT,{tool:d,characters:n,scenes:i,initialSelectedCharIds:s,initialSelectedSceneIds:o,onClose:()=>h(null),onConfirm:I}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("div",{className:"grid grid-cols-1 gap-3",children:m.map(A)}),f.jsxs("div",{className:"pt-2",children:[f.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-brand-text-muted mb-3 border-b border-white/10 pb-2",children:"Brainstorming"}),f.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.map(A)})]})]})]})},ST=({onGenerate:t,isLoading:e})=>{const[n,i]=ue.useState(""),s=o=>{n.trim()&&t(n,o)};return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("textarea",{value:n,onChange:o=>i(o.target.value),rows:4,placeholder:"Ask the AI to do anything with your story context... e.g., 'Write a scene where Kaelen confronts the Baron' or 'Suggest a new title for the story'.",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",disabled:e}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[f.jsx("button",{onClick:()=>s("selection"),disabled:e||!n.trim(),className:"w-full flex items-center justify-center gap-2 text-white font-bold py-2.5 px-4 rounded-xl transition duration-300 bg-blue-600/80 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-md border border-white/5",title:"Uses selected characters, scenes, and materials as context.",children:"Generate from Selection"}),f.jsx("button",{onClick:()=>s("all"),disabled:e||!n.trim(),className:"w-full flex items-center justify-center gap-2 text-white font-bold py-2.5 px-4 rounded-xl transition duration-300 bg-purple-600/80 hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-md border border-white/5",title:"Uses your story premise and ALL characters, scenes, and materials as context.",children:"Generate from All"})]})]})},NT=({materials:t,onSelect:e})=>{const{deleteSavedMaterial:n}=ho(),i=o=>{const l={className:"w-4 h-4 text-brand-text-muted"};switch(o){case xt.CHAPTER:return f.jsx(Ms,{...l});case"CHARACTER_PROFILE":return f.jsx(sm,{...l});case"TIMELINE":return f.jsx(Bf,{...l});case xt.SCENE_WRITER:return f.jsx(fd,{...l});case"IMAGE":return f.jsx(ha,{...l});case"VIDEO":return f.jsx(tc,{...l});default:return f.jsx(Ay,{...l})}},s=(o,l)=>{if(o.stopPropagation(),typeof l.content!="string")return;const c=document.createElement("a");if(l.type==="IMAGE"||l.type.includes("VIDEO")){let d=l.content;!d.startsWith("data:")&&!d.startsWith("http")&&(d=`data:image/png;base64,${l.content}`),c.href=d,c.download=`${l.title.replace(/[^a-z0-9]/gi,"_")}.${l.type==="IMAGE"?"png":"mp4"}`}else{const d=new Blob([l.content],{type:"text/plain"});c.href=URL.createObjectURL(d),c.download=`${l.title.replace(/[^a-z0-9]/gi,"_")}.txt`}document.body.appendChild(c),c.click(),document.body.removeChild(c)};return t.length===0?f.jsx("div",{className:"p-4 text-center text-brand-text-muted text-xs italic border border-white/5 rounded-lg bg-white/5",children:"No recent generations yet. Start creating!"}):f.jsx("div",{className:"space-y-3",children:t.slice(0,10).map(o=>f.jsxs("div",{onClick:()=>e(o),className:"group relative flex items-start gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-brand-secondary/30 transition-all cursor-pointer overflow-hidden",children:[f.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-black/20 flex items-center justify-center overflow-hidden border border-white/10",children:o.type==="IMAGE"&&typeof o.content=="string"?f.jsx("img",{src:o.content.startsWith("data:")?o.content:`data:image/png;base64,${o.content}`,alt:o.title,className:"w-full h-full object-cover"}):i(o.type)}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsx("h4",{className:"text-sm font-medium text-brand-text truncate pr-6",children:o.title}),f.jsx("p",{className:"text-[10px] text-brand-text-muted uppercase tracking-wider mt-0.5",children:o.type.replace(/_/g," ")})]}),f.jsxs("div",{className:"absolute right-2 top-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-brand-surface/90 rounded-lg p-1 backdrop-blur-sm shadow-lg border border-white/10",children:[f.jsx("button",{onClick:l=>s(l,o),className:"p-1.5 hover:bg-white/10 rounded text-brand-text-muted hover:text-brand-secondary transition",title:"Download",children:f.jsx(po,{className:"w-3 h-3"})}),f.jsx("button",{onClick:l=>{l.stopPropagation(),n(o.id)},className:"p-1.5 hover:bg-red-500/10 rounded text-brand-text-muted hover:text-red-400 transition",title:"Delete",children:f.jsx(eu,{className:"w-3 h-3"})})]})]},o.id))})},_T=({isRightPanelOpen:t,setIsRightPanelOpen:e,onGenerate:n,onGenerateWithContext:i,onGenerateTimeline:s,selectedCharacterIds:o,selectedSceneIds:l,onBatchUpdateSelection:c,filteredMaterials:d,onSaveMaterial:h,onViewImage:m})=>{const{isLoading:x,loadingMessage:w,error:v,generatedContent:I,setGeneratedContent:A,characters:E,scenes:C,deleteSavedMaterial:R,updateScene:D}=ho();return f.jsxs("aside",{className:`fixed inset-y-0 right-0 z-40 w-80 lg:w-96 glass-panel border-l border-white/10 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${t?"translate-x-0":"translate-x-full"}`,children:[f.jsx("button",{onClick:()=>e(!t),className:"absolute top-1/2 -left-3 w-6 h-12 bg-brand-surface border border-white/10 rounded-l-lg flex items-center justify-center text-brand-text-muted hover:text-white cursor-pointer z-50 shadow-md",title:"Toggle Assistant",children:t?f.jsx(Xl,{className:"w-4 h-4"}):f.jsx(uc,{className:"w-4 h-4"})}),f.jsx("div",{className:"p-5 border-b border-white/5 bg-brand-surface/50 backdrop-blur-xl",children:f.jsxs("h2",{className:"text-lg font-bold text-brand-text flex items-center gap-2",children:[f.jsx(Xi,{className:"w-5 h-5 text-brand-secondary"}),"AI Assistant"]})}),f.jsxs("div",{className:"flex-grow overflow-y-auto p-4 custom-scrollbar space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Toolkit"}),f.jsx(wT,{onGenerate:n,isLoading:x,characters:E,scenes:C,selectedCharacterIds:o,selectedSceneIds:l,onBatchUpdateSelection:c,hasContent:C.length>0})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Chat / Command"}),f.jsx(ST,{onGenerate:i,isLoading:x})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Recent Generations"}),f.jsx(NT,{materials:d,onSelect:z=>{z.type==="IMAGE"?m(z):(A({title:z.title,content:z.content,type:z.type,sourceId:void 0}),e(!0))}})]})]})]})},AT=[{name:"Sci-Fi",premise:"In a future where humanity has colonized Mars, a lone scientist discovers an ancient alien artifact that threatens to unravel the fabric of reality."},{name:"Fantasy",premise:"A young elf, exiled from her forest home, must team up with a grizzled dwarf warrior to stop a blight that corrupts everything it touches."},{name:"Mystery",premise:"In the rain-soaked streets of a 1940s city, a cynical private detective takes on a case of a missing heiress that leads him into a web of conspiracy and betrayal."}],CT=({storyPremise:t,setStoryPremise:e,storyTextToAnalyze:n,setStoryTextToAnalyze:i,onAnalyze:s,isLoading:o})=>f.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"story-premise",className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Story Premise"}),f.jsx("textarea",{id:"story-premise",value:t,onChange:l=>e(l.target.value),rows:3,placeholder:"A world where memories can be traded as currency...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none"}),f.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:AT.map(l=>f.jsxs("button",{type:"button",onClick:()=>e(l.premise),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted px-3 py-1.5 rounded-full hover:bg-brand-secondary hover:text-white hover:border-brand-secondary transition",children:[l.name," Idea"]},l.name))})]}),f.jsxs("div",{className:"flex-grow flex flex-col",children:[f.jsx("label",{htmlFor:"story-importer",className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Story Importer"}),f.jsx("textarea",{id:"story-importer",value:n,onChange:l=>i(l.target.value),placeholder:"Paste your existing story, chapters, or notes here...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition flex-grow resize-none min-h-[120px]"})]}),f.jsx("button",{onClick:s,disabled:o,className:"w-full flex items-center justify-center gap-2 bg-brand-secondary text-white font-bold py-3 px-4 rounded-xl hover:bg-opacity-90 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-brand-secondary/20",children:o?"Analyzing...":"Analyze Story"})]}),TT=({storyPremise:t,setStoryPremise:e,storyTextToAnalyze:n,setStoryTextToAnalyze:i,onAnalyze:s,isLoading:o,characters:l,scenes:c,savedMaterials:d,items:h,onCompileBook:m,onGenerate:x,filteredScenes:w,selectedSceneIds:v,onToggleSelect:I,onUpdateScene:A,onDeleteScene:E,onGenerateSceneDetails:C,onGenerateSceneImage:R,onOpenStoryboard:D,reorderScenes:z,onOpenSplitView:B,addScene:se})=>{const{loadProject:q}=ho(),[G,Q]=ue.useState(zr.CINEMATIC),ne=ue.useRef(null);return f.jsxs("div",{className:"flex flex-col gap-8",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:f.jsx(CT,{storyPremise:t,setStoryPremise:e,storyTextToAnalyze:n,setStoryTextToAnalyze:i,onAnalyze:s,isLoading:o})}),f.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5 flex flex-col justify-center items-center text-center space-y-4",children:[f.jsx("h3",{className:"text-xl font-serif font-bold text-brand-text",children:"Story Statistics"}),f.jsxs("div",{className:"flex gap-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-3xl font-bold text-brand-secondary",children:l.length}),f.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Characters"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-3xl font-bold text-brand-accent",children:c.length}),f.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Scenes"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:d.length}),f.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Saved Items"})]})]}),c.length>0&&f.jsxs("button",{onClick:m,className:"mt-4 flex items-center gap-2 bg-gradient-to-r from-brand-secondary to-brand-accent text-white font-bold py-2 px-6 rounded-full hover:opacity-90 transition shadow-lg transform hover:scale-105",children:[f.jsx(Ms,{className:"w-5 h-5"}),"Read Story"]})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-end mb-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-serif font-bold text-brand-text",children:"Scene List"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:G,onChange:F=>Q(F.target.value),className:"appearance-none bg-brand-surface border border-white/10 text-xs px-3 py-1.5 rounded-full text-brand-text pr-8 focus:ring-1 focus:ring-brand-secondary outline-none","aria-label":"Image Style",children:Object.values(zr).map(F=>f.jsx("option",{value:F,children:F},F))}),f.jsx(ha,{className:"w-3 h-3 absolute right-3 top-1/2 -translate-y-1/2 text-brand-text-muted pointer-events-none"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>x(xt.REASSESS_FLOW),disabled:o||c.length<2,className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition border border-white/10",children:[f.jsx(Cb,{className:"w-3 h-3"})," Reassess Flow"]}),f.jsx("input",{type:"file",ref:ne,onChange:F=>{var W;const j=(W=F.target.files)==null?void 0:W[0];j&&q(j),ne.current&&(ne.current.value="")},accept:".json",className:"hidden","aria-label":"Import Project"}),f.jsxs("button",{onClick:()=>{var F;return(F=ne.current)==null?void 0:F.click()},className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition border border-white/10",children:[f.jsx(hm,{className:"w-3 h-3"})," Import"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[w.map((F,j)=>f.jsx(Am,{scene:F,isSelected:v.has(F.id),onToggleSelect:()=>I(F.id,"scene"),onUpdate:A,onDelete:()=>E(F.id),onExport:()=>{},allCharacters:l,allItems:h,isLoading:o,onGenerateDetails:C,onGenerateImage:W=>R(W,G),onOpenStoryboard:W=>D(W.id),isFirst:j===0,isLast:j===c.length-1,layout:"vertical",onMove:W=>{if(W==="up"&&j>0){const M=[...c];[M[j],M[j-1]]=[M[j-1],M[j]],z(M)}else if(W==="down"&&j<c.length-1){const M=[...c];[M[j],M[j+1]]=[M[j+1],M[j]],z(M)}},onOpenSplitView:()=>B("scene",F.id)},F.id)),f.jsxs("button",{onClick:se,className:"h-full min-h-[200px] border-2 border-dashed border-white/10 rounded-xl text-brand-text-muted hover:text-white hover:border-brand-secondary/50 hover:bg-brand-secondary/5 transition flex flex-col justify-center items-center gap-3 group",children:[f.jsx("div",{className:"p-3 bg-white/5 rounded-full group-hover:bg-white/10 transition",children:f.jsx(ll,{className:"w-6 h-6"})}),f.jsx("span",{className:"font-medium",children:"Add New Scene"})]})]})]})]})},Cv={[_t.PROTAGONIST]:"The main character the story follows, whose fate is most closely tied to the resolution of the plot.",[_t.ANTAGONIST]:"The primary character or force that opposes the protagonist, creating the central conflict of the story.",[_t.DEUTERAGONIST]:"A secondary main character who is crucial to the plot and often serves as a close companion or counterpoint to the protagonist.",[_t.MENTOR]:"A wise and experienced character who guides, teaches, or provides aid to the protagonist.",[_t.LOVE_INTEREST]:"A character with whom another key character, often the protagonist, has a romantic relationship or tension.",[_t.FOIL]:"A character who contrasts with the protagonist to highlight particular qualities or traits of the main character.",[_t.SUPPORTING_CHARACTER]:"A recurring character who has a significant role in the story but is not the primary focus.",[_t.MINOR_CHARACTER]:"A character with a small, often brief role, used to advance the plot or reveal information about other characters."},ET=[{name:"Reluctant Hero",info:"A simple farmhand who discovers they are the chosen one destined to defeat a great evil, but they would rather live a quiet life.",traits:"Humble, Brave, Stubborn"},{name:"Charismatic Villain",info:"A charming and intelligent leader who believes their ruthless methods are a necessary evil to bring order to a chaotic world.",traits:"Cunning, Eloquent, Ruthless"},{name:"Quirky Mentor",info:"An eccentric old wizard who has forgotten more about magic than most will ever know, offering cryptic but profound advice.",traits:"Wise, Eccentric, Forgetful"}],IT={[_t.PROTAGONIST]:["Brave","Determined","Reluctant","Idealistic","Resilient","Empathetic"],[_t.ANTAGONIST]:["Ruthless","Cunning","Ambitious","Vengeful","Manipulative","Obsessive"],[_t.DEUTERAGONIST]:["Loyal","Supportive","Pragmatic","Protective","Reliable","Grounded"],[_t.MENTOR]:["Wise","Patient","Mysterious","Strict","Encouraging","World-weary"],[_t.LOVE_INTEREST]:["Charming","Compassionate","Independent","Witty","Devoted","Gentle"],[_t.FOIL]:["Reckless","Cynical","Arrogant","Cowardly","Chaotic","Optimistic"],[_t.SUPPORTING_CHARACTER]:["Friendly","Helpful","Observant","Funny","Resourceful","Dependable"],[_t.MINOR_CHARACTER]:["Talkative","Grumpy","Nervous","Suspicious","Clumsy","Forgettable"]},kT=({onCreateCharacter:t,isLoading:e})=>{var ne;const[n,i]=ue.useState(""),[s,o]=ue.useState(_t.PROTAGONIST),[l,c]=ue.useState(""),[d,h]=ue.useState(""),[m,x]=ue.useState(""),[w,v]=ue.useState(""),[I,A]=ue.useState(null),[E,C]=ue.useState(null),[R,D]=ue.useState(!1),z=ue.useRef(null),B=F=>{if(F.preventDefault(),!n.trim()||!l.trim()){v("Name and initial info cannot be empty.");return}v(""),t(n,s,l,d,m,E||void 0),i(""),c(""),h(""),x(""),A(null),C(null)},se=F=>{i(F.name),c(F.info),h(F.traits),x("")},q=F=>{d?d.toLowerCase().includes(F.toLowerCase())||h(j=>`${j}, ${F}`):h(F)},G=F=>{var W;const j=(W=F.target.files)==null?void 0:W[0];if(j){A(j);const M=new FileReader;M.onloadend=()=>{C(M.result)},M.readAsDataURL(j)}},Q=async()=>{if(I){D(!0),v("");try{const F=await Dp(I);F.description&&c(j=>j?`${j}

[Visuals]: ${F.description}`:`[Visuals]: ${F.description}`),F.traits&&h(j=>j?`${j}, ${F.traits}`:F.traits)}catch(F){console.error(F),v("Failed to analyze image.")}finally{D(!1)}}};return f.jsx("div",{className:"flex flex-col gap-4",children:f.jsxs("form",{onSubmit:B,className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"char-name",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Name"}),f.jsx("input",{id:"char-name",type:"text",value:n,onChange:F=>i(F.target.value),placeholder:"e.g., Kaelen the Shadowmancer",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"char-type",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Type"}),f.jsx("select",{id:"char-type",value:s,onChange:F=>o(F.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",children:Object.values(_t).map(F=>f.jsx("option",{value:F,children:F},F))}),f.jsx("p",{className:"text-xs text-brand-text-muted mt-2 p-3 bg-brand-primary/30 rounded-lg border border-brand-primary/30",children:Cv[s]})]}),f.jsxs("div",{className:"bg-brand-primary/30 p-4 rounded-xl border border-brand-primary/40",children:[f.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-3",children:"Character Portrait (Optional)"}),f.jsxs("div",{className:"flex gap-4 items-start",children:[f.jsx("div",{onClick:()=>{var F;return(F=z.current)==null?void 0:F.click()},className:"w-24 h-24 flex-shrink-0 bg-brand-bg/50 border-2 border-dashed border-brand-text-muted/50 rounded-xl flex items-center justify-center cursor-pointer hover:border-brand-secondary hover:bg-brand-primary/50 transition overflow-hidden",children:E?f.jsx("img",{src:E,alt:"Preview",className:"w-full h-full object-cover"}):f.jsx(ha,{className:"w-8 h-8 text-brand-text-muted"})}),f.jsx("input",{type:"file",ref:z,onChange:G,accept:"image/*",className:"hidden"}),f.jsxs("div",{className:"flex-grow pt-1",children:[f.jsx("p",{className:"text-xs text-brand-text-muted mb-3 leading-relaxed",children:"Upload an image to generate traits or use as the profile header."}),f.jsxs("button",{type:"button",onClick:Q,disabled:!I||R,className:"text-xs flex items-center gap-2 bg-brand-secondary/90 text-white px-3 py-2 rounded-lg hover:bg-brand-secondary transition disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[f.jsx(Iy,{className:"w-3 h-3"}),R?"Analyzing Visuals...":"Analyze Image for Traits"]})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"char-traits",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Key Traits"}),f.jsx("input",{id:"char-traits",type:"text",value:d,onChange:F=>h(F.target.value),placeholder:"e.g., Brave, Cunning, Loyal",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"}),f.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 items-center",children:[f.jsx("span",{className:"text-xs text-brand-text-muted font-semibold mr-1",children:"Quick Traits:"}),(ne=IT[s])==null?void 0:ne.map(F=>f.jsx("button",{type:"button",onClick:()=>q(F),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted hover:text-white hover:border-brand-secondary hover:bg-brand-secondary/80 px-2.5 py-1 rounded-full transition duration-200",children:F},F))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"char-info",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Initial Info & Core Idea"}),f.jsx("textarea",{id:"char-info",value:l,onChange:F=>c(F.target.value),rows:3,placeholder:"A disgraced knight seeking redemption, haunted by the ghost of the king he failed to protect.",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"char-backstory",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Backstory (Optional)"}),f.jsx("textarea",{id:"char-backstory",value:m,onChange:F=>x(F.target.value),rows:3,placeholder:"Detailed history, childhood, or key past events...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),f.jsx(Pp,{title:"Use a Template",defaultCollapsed:!0,children:f.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:ET.map(F=>f.jsx("button",{type:"button",onClick:()=>se(F),className:"text-xs bg-brand-primary/40 text-brand-text-muted px-2 py-1 rounded-md hover:bg-brand-primary hover:text-white transition border border-transparent hover:border-brand-primary",children:F.name},F.name))})}),w&&f.jsx("p",{className:"text-red-400 text-sm p-2 bg-red-900/20 border border-red-900/30 rounded-md",children:w}),f.jsxs("button",{type:"submit",disabled:e||R,className:"w-full flex items-center justify-center gap-2 bg-brand-secondary text-white font-bold py-3 px-4 rounded-xl hover:bg-opacity-90 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-brand-secondary/20",children:[f.jsx(sm,{className:"w-5 h-5"}),e?"Generating...":"Create Character Profile"]})]})})},LT=t=>{switch(t){case _t.PROTAGONIST:return"#fbbF24";case _t.ANTAGONIST:return"#f87171";case _t.DEUTERAGONIST:return"#6ee7b7";case _t.MENTOR:return"#60a5fa";case _t.LOVE_INTEREST:return"#f472b6";case _t.FOIL:return"#c084fc";default:return"#9ca3af"}},RT=(t,e)=>{const n={className:"w-5 h-5 flex-shrink-0",style:{color:e}};switch(t){case _t.PROTAGONIST:return f.jsx(um,{...n});case _t.ANTAGONIST:return f.jsx(cm,{...n});case _t.DEUTERAGONIST:return f.jsx(cc,{...n});case _t.SUPPORTING_CHARACTER:return f.jsx(cc,{...n});case _t.MENTOR:return f.jsx(fm,{...n});case _t.LOVE_INTEREST:return f.jsx(dm,{...n});case _t.FOIL:return f.jsx(_y,{...n});case _t.MINOR_CHARACTER:return f.jsx(pc,{...n});default:return null}},MT=()=>f.jsx("div",{className:"space-y-3",children:Object.values(_t).map(t=>{const e=LT(t),n=RT(t,e),i=Cv[t];return f.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-white/5 transition",children:[n,f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-sm",style:{color:e},children:t}),f.jsx("p",{className:"text-xs text-brand-text-muted leading-relaxed",children:i})]})]},t)})}),jT=({onCreateCharacter:t,isLoading:e,filteredCharacters:n,selectedCharacterIds:i,onToggleSelect:s,onDeleteCharacter:o,onUpdateCharacter:l,onGenerateCharacterImage:c,onOpenVisuals:d,onOpenSplitView:h})=>{const[m,x]=ue.useState(zr.CONCEPT_ART);return f.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"xl:col-span-2 glass-card p-6 rounded-2xl border border-white/5",children:[f.jsx("h2",{className:"text-xl font-serif font-bold mb-4",children:"Character Builder"}),f.jsx(kT,{onCreateCharacter:t,isLoading:e})]}),f.jsxs("div",{className:"xl:col-span-1 glass-card p-6 rounded-2xl border border-white/5",children:[f.jsx("h2",{className:"text-xl font-serif font-bold mb-4",children:"Archetypes"}),f.jsx(MT,{})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-end mb-4",children:[f.jsx("h2",{className:"text-2xl font-serif font-bold",children:"Cast of Characters"}),f.jsx("div",{className:"flex items-center gap-4",children:f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:m,onChange:w=>x(w.target.value),className:"appearance-none bg-brand-surface border border-white/10 text-xs px-3 py-1.5 rounded-full text-brand-text pr-8 focus:ring-1 focus:ring-brand-secondary outline-none","aria-label":"Image Style",children:Object.values(zr).map(w=>f.jsx("option",{value:w,children:w},w))}),f.jsx(ha,{className:"w-3 h-3 absolute right-3 top-1/2 -translate-y-1/2 text-brand-text-muted pointer-events-none"})]})})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:n.length>0?n.map(w=>f.jsx(lv,{character:w,isSelected:i.has(w.id),onToggleSelect:()=>s(w.id,"character"),onDelete:()=>o(w.id),onUpdate:l,onExport:()=>{},onGenerateImage:v=>c(v,m),onOpenVisuals:v=>d(v),onOpenSplitView:()=>h("character",w.id)},w.id)):f.jsxs("div",{className:"col-span-full text-center py-20 text-brand-text-muted",children:[f.jsx(cc,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),f.jsx("p",{children:"No characters found. Create one to get started!"})]})})]})]})},DT=({mapData:t,selectedLocationIds:e,onToggleSelectLocation:n,onUpdateLocation:i,onExport:s,onViewScenes:o,isAddingPin:l,onAddPin:c})=>{const[d,h]=ue.useState(t.locations[0]||null),[m,x]=ue.useState(!1),[w,v]=ue.useState("");ue.useEffect(()=>{d?(v(d.description),x(!1)):t.locations.length>0?h(t.locations[0]):h(null)},[d,t.locations]);const I=()=>{d&&(i(d.id,{description:w}),x(!1))},A=E=>{if(l&&c){const C=E.currentTarget.getBoundingClientRect(),R=(E.clientX-C.left)/C.width*100,D=(E.clientY-C.top)/C.height*100;c(R,D)}};return f.jsxs("div",{className:"flex flex-col gap-6",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("div",{className:"glass-card p-4 rounded-lg border border-white/10 bg-brand-surface/40 w-full",children:f.jsx("p",{className:"text-sm text-brand-text-muted font-serif italic leading-relaxed",children:t.worldDescription})}),f.jsx("button",{onClick:s,title:"Export Map Data",className:"ml-4 text-brand-text-muted hover:text-white transition p-2 rounded-lg hover:bg-white/10 border border-transparent hover:border-white/20",children:f.jsx(po,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:`relative w-full aspect-video bg-[#0f172a] rounded-xl border border-brand-primary/50 overflow-hidden shadow-2xl group select-none ${l?"cursor-crosshair ring-2 ring-brand-primary ring-offset-2 ring-offset-black":""}`,onClick:A,children:[f.jsx("div",{className:"absolute inset-0 opacity-20 bg-[size:40px_40px] bg-[image:linear-gradient(rgba(56,189,248,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(56,189,248,0.1)_1px,transparent_1px)]"}),f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_20%,rgba(15,23,42,0.8)_100%)] pointer-events-none"}),f.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-10 pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[f.jsx("path",{d:"M0,50 Q25,20 50,50 T100,50",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"}),f.jsx("path",{d:"M0,70 Q40,40 70,70 T100,30",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"}),f.jsx("path",{d:"M0,30 Q30,60 60,30 T100,80",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"})]}),t.locations.map(E=>f.jsx("button",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 z-10 group/pin left-[--x] top-[--y]",style:{"--x":`${E.x}%`,"--y":`${E.y}%`},onClick:C=>{C.stopPropagation(),h(E)},children:f.jsxs("div",{className:"relative flex flex-col items-center",children:[(d==null?void 0:d.id)===E.id&&f.jsx("span",{className:"absolute w-8 h-8 bg-brand-secondary/30 rounded-full animate-ping"}),f.jsx(u2,{className:`w-6 h-6 transition-transform duration-300 hover:scale-125 ${(d==null?void 0:d.id)===E.id?"text-brand-secondary drop-shadow-[0_0_10px_rgba(var(--color-secondary),1)]":"text-brand-text-muted hover:text-white"}`}),f.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover/pin:block z-20 whitespace-nowrap",children:[f.jsxs("div",{className:"bg-brand-surface/90 backdrop-blur-md border border-white/10 text-brand-text text-xs px-3 py-2 rounded-lg shadow-xl max-w-[200px]",children:[f.jsx("div",{className:"font-bold mb-1",children:E.name}),f.jsx("div",{className:"text-brand-text-muted text-[10px] whitespace-normal line-clamp-2 leading-tight",children:E.description})]}),f.jsx("div",{className:"w-2 h-2 bg-brand-surface/90 rotate-45 absolute left-1/2 -translate-x-1/2 -bottom-1 border-r border-b border-white/10"})]}),f.jsx("span",{className:`mt-1 text-[10px] font-bold tracking-wider uppercase shadow-black drop-shadow-md ${(d==null?void 0:d.id)===E.id?"text-brand-secondary":"text-brand-text-muted/70 group-hover/pin:text-white"}`,children:E.name})]})},E.id))]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3 pb-2 border-b border-white/10",children:"Location Details"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.locations.map(E=>f.jsxs("div",{onClick:()=>h(E),className:`relative p-4 rounded-xl border transition-all duration-300 cursor-pointer group overflow-hidden ${(d==null?void 0:d.id)===E.id?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-surface/40 border-white/5 hover:border-white/20 hover:bg-brand-surface/60"}`,children:[f.jsx("div",{className:`absolute top-3 right-3 w-3 h-3 rounded-full border ${(d==null?void 0:d.id)===E.id?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/30"}`}),f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(u2,{className:`w-4 h-4 ${(d==null?void 0:d.id)===E.id?"text-brand-secondary":"text-brand-text-muted"}`}),f.jsx("h4",{className:`font-bold text-sm ${(d==null?void 0:d.id)===E.id?"text-brand-text":"text-brand-text-muted group-hover:text-brand-text"}`,children:E.name})]}),(d==null?void 0:d.id)===E.id&&m?f.jsx("textarea",{value:w,onChange:C=>v(C.target.value),rows:3,onClick:C=>C.stopPropagation(),className:"w-full bg-black/20 border border-white/10 rounded-md p-2 text-xs text-brand-text focus:outline-none focus:border-brand-secondary resize-none","aria-label":"Location Description"}):f.jsx("p",{className:"text-xs text-brand-text-muted font-serif leading-relaxed line-clamp-4",children:E.description}),(d==null?void 0:d.id)===E.id&&f.jsx("div",{className:"mt-3 pt-2 border-t border-white/5 flex justify-end gap-2",children:m?f.jsx("button",{onClick:C=>{C.stopPropagation(),I()},className:"text-green-400 hover:text-green-300 text-xs font-bold px-2 py-1 rounded bg-green-900/20",children:"Save"}):f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:C=>{C.stopPropagation(),x(!0)},className:"text-brand-text-muted hover:text-white text-xs flex items-center gap-1 px-2 py-1 rounded hover:bg-white/5",children:[f.jsx(vd,{className:"w-3 h-3"})," Edit"]}),o&&f.jsxs("button",{onClick:C=>{C.stopPropagation(),o(E.name)},className:"text-brand-secondary hover:text-white text-xs flex items-center gap-1 px-2 py-1 rounded hover:bg-brand-secondary/20",children:[f.jsx(Ms,{className:"w-3 h-3"})," View Scenes"]})]})})]},E.id))})]})]})},PT=({onGenerate:t,isLoading:e,mapData:n,selectedLocationIds:i,onToggleSelectLocation:s,onUpdateLocation:o,onExportData:l,onViewLocationScenes:c})=>{const[d,h]=ue.useState(!1),[m,x]=ue.useState(!1);return f.jsxs("div",{className:"h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-4",children:[f.jsxs("div",{className:"glass-panel p-4 rounded-xl border border-white/10 flex justify-between items-center shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:f.jsx(ol,{className:"w-6 h-6 text-brand-secondary"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-serif font-bold text-white",children:"Story Map"}),f.jsx("p",{className:"text-xs text-brand-text-muted",children:"Geography & Locations"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>x(!m),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition ${m?"bg-brand-primary text-white":"bg-white/5 text-brand-text-muted hover:text-white hover:bg-white/10"}`,title:"Add Manual Location",children:[f.jsx(ll,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Add Pin"})]}),f.jsxs("button",{onClick:()=>h(!d),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition ${d?"bg-white/10 text-white":"bg-white/5 text-brand-text-muted hover:text-white hover:bg-white/10"}`,title:"Map Settings",children:[f.jsx(Ub,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),f.jsx("div",{className:"h-6 w-px bg-white/10 mx-2"}),f.jsxs("button",{onClick:()=>t(xt.MAP_GENERATOR),disabled:e,className:"flex items-center gap-2 bg-brand-secondary text-white text-sm font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx(ol,{className:"w-4 h-4"}),e?"Generating...":"Generate Map"]})]})]}),d&&f.jsxs("div",{className:"glass-panel p-4 rounded-xl border border-white/10 animate-in slide-in-from-top-2",children:[f.jsx("h3",{className:"text-sm font-bold text-brand-text mb-3",children:"Generation Settings"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Terrain Type"}),f.jsxs("select",{title:"Terrain Type",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[f.jsx("option",{children:"Fantasy (Forests, Mountains)"}),f.jsx("option",{children:"Sci-Fi (Planets, Space Stations)"}),f.jsx("option",{children:"Modern (Cities, Roads)"}),f.jsx("option",{children:"Post-Apocalyptic (Ruins, Wastelands)"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Climate"}),f.jsxs("select",{title:"Climate",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[f.jsx("option",{children:"Temperate"}),f.jsx("option",{children:"Tropical"}),f.jsx("option",{children:"Arid / Desert"}),f.jsx("option",{children:"Arctic / Tundra"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Map Style"}),f.jsxs("select",{title:"Map Style",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[f.jsx("option",{children:"Parchment / Hand Drawn"}),f.jsx("option",{children:"Satellite / Realistic"}),f.jsx("option",{children:"Blueprint / Schematic"}),f.jsx("option",{children:"Holographic"})]})]})]})]}),f.jsx("div",{className:"flex-grow glass-card rounded-2xl border border-white/5 overflow-hidden relative flex flex-col",children:n?f.jsx(DT,{mapData:n,selectedLocationIds:i,onToggleSelectLocation:w=>s(w,"location"),onUpdateLocation:o,onExport:()=>l("json"),onViewScenes:c,isAddingPin:m,onAddPin:(w,v)=>{console.log(`Add pin at ${w}, ${v}`),x(!1)}}):f.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-brand-text-muted",children:[f.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-4",children:f.jsx(ol,{className:"w-10 h-10 opacity-50"})}),f.jsx("p",{className:"text-lg font-medium mb-2",children:"No Map Generated"}),f.jsx("p",{className:"text-sm opacity-70 max-w-md text-center",children:`Use the "Generate Map" button to create a world based on your story's context, or check your settings above.`})]})})]})},UT=[{name:"Story Ideas",prompt:"Generate some potential story ideas, themes, and character concepts based on this video."},{name:"Scene Description",prompt:"Analyze the cinematography, color palette, and setting in this video to create a rich, descriptive scene for a story."},{name:"Character Study",prompt:"Based on the main figure in this video, create a character profile, including their likely motivations, flaws, and backstory."}],OT=({onAnalyze:t,isLoading:e})=>{const[n,i]=ue.useState("file"),[s,o]=ue.useState(null),[l,c]=ue.useState(""),[d,h]=ue.useState("Generate some potential story ideas, themes, and character concepts based on this video."),[m,x]=ue.useState(""),w=I=>{var E;const A=(E=I.target.files)==null?void 0:E[0];A&&(o(A),x(""))},v=()=>{if(n==="file"&&!s){x("Please select a video file to upload.");return}if(n==="url"&&!l.trim()){x("Please enter a YouTube URL.");return}if(!d.trim()){x("Please provide a prompt for the analysis.");return}x(""),t(n==="file"?s:null,n==="url"?l:"",d)};return f.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[f.jsxs("div",{className:"flex bg-brand-bg/40 rounded-lg p-1 border border-white/5",children:[f.jsx("button",{onClick:()=>i("file"),className:`w-1/2 py-1.5 rounded-md text-sm font-semibold transition ${n==="file"?"bg-brand-secondary text-white shadow-sm":"text-brand-text-muted hover:text-white"}`,children:"Upload Video"}),f.jsx("button",{onClick:()=>i("url"),className:`w-1/2 py-1.5 rounded-md text-sm font-semibold transition ${n==="url"?"bg-brand-secondary text-white shadow-sm":"text-brand-text-muted hover:text-white"}`,children:"YouTube URL"})]}),n==="file"?f.jsxs("div",{children:[f.jsx("label",{htmlFor:"video-upload",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Video File"}),f.jsx("input",{id:"video-upload",type:"file",accept:"video/*",onChange:w,className:"w-full text-sm text-brand-text file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/50 file:text-brand-secondary hover:file:bg-brand-primary transition cursor-pointer"}),s&&f.jsxs("p",{className:"text-xs text-brand-text-muted mt-2 pl-1",children:["Selected: ",f.jsx("span",{className:"text-brand-text",children:s.name})]})]}):f.jsxs("div",{children:[f.jsx("label",{htmlFor:"video-url",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"YouTube Video URL"}),f.jsx("input",{id:"video-url",type:"text",value:l,onChange:I=>c(I.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"video-prompt",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Analysis Prompt"}),f.jsx("textarea",{id:"video-prompt",value:d,onChange:I=>h(I.target.value),rows:3,className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"}),f.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:UT.map(I=>f.jsx("button",{type:"button",onClick:()=>h(I.prompt),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted px-2.5 py-1 rounded-full hover:bg-brand-secondary hover:text-white hover:border-brand-secondary transition",children:I.name},I.name))})]}),m&&f.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 p-2 rounded-lg border border-red-500/20",children:m}),f.jsxs("button",{onClick:v,disabled:e,className:"w-full flex items-center justify-center gap-2 bg-purple-600/90 text-white font-bold py-3 px-4 rounded-xl hover:bg-purple-500 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-purple-900/20",children:[f.jsx(Ab,{className:"w-5 h-5"}),e?"Analyzing...":"Analyze for Inspiration"]})]})},BT=({isLoading:t,onAnalyzeVideo:e})=>f.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:f.jsx(tc,{className:"w-6 h-6 text-brand-secondary"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-serif font-bold text-white",children:"Visual Inspiration"}),f.jsx("p",{className:"text-xs text-brand-text-muted",children:"Video Analysis & Mood Boards"})]})]}),f.jsx(OT,{onAnalyze:e,isLoading:t})]}),f.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5 opacity-50",children:[f.jsx("h3",{className:"text-lg font-bold text-brand-text mb-2",children:"World Lore (Coming Soon)"}),f.jsx("p",{className:"text-sm text-brand-text-muted",children:"Define the history, laws of physics, and magic systems of your world."})]})]}),FT=({scenes:t,allCharacters:e,selectedSceneIds:n,onToggleSelect:i,onUpdateScene:s,onDeleteScene:o,onAddScene:l,onReorderScenes:c,onExportScene:d,isLoading:h,onGenerateDetails:m,onGenerateImage:x,onMoveScene:w})=>{const v=ue.useRef(null),I=ue.useRef(null),A=(z,B)=>{v.current=B,z.dataTransfer.effectAllowed="move"},E=()=>{if(v.current&&I.current&&v.current!==I.current){const z=[...t],B=t.findIndex(G=>G.id===v.current),se=t.findIndex(G=>G.id===I.current),[q]=z.splice(B,1);z.splice(se,0,q),c(z)}v.current=null,I.current=null},[C,R]=ec.useState(null),D=(z,B,se)=>{I.current=B,R(se)};return f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 pb-4",children:[t.map((z,B)=>f.jsxs("div",{className:"relative",draggable:!0,onDragStart:se=>A(se,z.id),onDragEnter:se=>D(se,z.id,B),onDragOver:se=>se.preventDefault(),onDragEnd:()=>{E(),R(null)},children:[C===B&&v.current!==z.id&&f.jsx("div",{className:"absolute -left-2 top-0 bottom-0 w-1 bg-brand-secondary rounded-full shadow-[0_0_10px_rgba(var(--color-secondary),0.8)] z-20 animate-pulse"}),f.jsx("div",{className:"absolute -top-2 -left-2 z-10 bg-brand-surface border border-brand-primary/50 text-xs font-mono text-brand-text-muted px-2 py-0.5 rounded-full shadow-sm",children:B+1}),f.jsx(Am,{scene:z,isSelected:n.has(z.id),onToggleSelect:()=>i(z.id),onUpdate:s,onDelete:o,onExport:d,allCharacters:e,isLoading:h,onGenerateDetails:m,onGenerateImage:x,layout:"horizontal",onMove:w,isFirst:B===0,isLast:B===t.length-1})]},z.id)),f.jsxs("button",{onClick:l,title:"Add New Scene",className:"h-full min-h-[140px] flex flex-col items-center justify-center bg-brand-primary/10 border-2 border-dashed border-brand-primary/30 text-brand-text-muted hover:bg-brand-secondary/10 hover:text-brand-secondary hover:border-brand-secondary/50 transition-all duration-300 rounded-lg group gap-2",children:[f.jsx("div",{className:"p-3 bg-brand-primary/20 rounded-full group-hover:bg-brand-secondary/20 transition-colors",children:f.jsx(ll,{className:"w-6 h-6"})}),f.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Add Scene"})]})]})},zT=({onGenerate:t,scenes:e,allCharacters:n,selectedSceneIds:i,onToggleSelect:s,onUpdateScene:o,onDeleteScene:l,onAddScene:c,onReorderScenes:d,isLoading:h,onGenerateDetails:m,onGenerateImage:x})=>f.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:f.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-serif font-bold",children:"Story Timeline"}),f.jsx("div",{className:"flex gap-2",children:f.jsxs("button",{onClick:()=>t(xt.PLOT_IDEAS),className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-2 rounded-lg transition",children:[f.jsx(lm,{className:"w-3 h-3"})," Brainstorm Plots"]})})]}),e.length>0?f.jsx(FT,{scenes:e,allCharacters:n,selectedSceneIds:i,onToggleSelect:w=>s(w,"scene"),onUpdateScene:o,onDeleteScene:l,onAddScene:c,onReorderScenes:d,onExportScene:()=>{},isLoading:h,onGenerateDetails:m,onGenerateImage:x,onMoveScene:(w,v)=>{}}):f.jsxs("div",{className:"text-center py-20 text-brand-text-muted",children:[f.jsx(Bf,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),f.jsx("p",{children:"Add scenes to visualize your timeline."})]})]})}),qT=()=>{const{notes:t,addNote:e,updateNote:n,deleteNote:i}=ho(),[s,o]=ue.useState(null),[l,c]=ue.useState(""),d=ue.useMemo(()=>{if(!l)return t;const w=l.toLowerCase();return t.filter(v=>v.title.toLowerCase().includes(w)||v.content.toLowerCase().includes(w))},[t,l]),h=ue.useMemo(()=>t.find(w=>w.id===s),[t,s]),m=()=>{const w={id:`note_${Date.now()}`,title:"New Note",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(w),o(w.id)},x=(w,v)=>{w.stopPropagation(),window.confirm("Are you sure you want to delete this note?")&&(i(v),s===v&&o(null))};return f.jsxs("div",{className:"flex h-full animate-in fade-in duration-500",children:[f.jsxs("div",{className:"w-1/3 border-r border-white/10 flex flex-col bg-brand-surface/30 backdrop-blur-sm",children:[f.jsxs("div",{className:"p-4 border-b border-white/10 space-y-4",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-bold font-serif text-brand-text",children:"Notes"}),f.jsxs("button",{onClick:m,className:"p-2 bg-brand-primary hover:bg-brand-primary-hover text-white rounded-lg transition-colors flex items-center gap-2 text-sm font-medium",children:[f.jsx(ll,{className:"w-4 h-4"}),"New Note"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-text-muted"}),f.jsx("input",{type:"text",placeholder:"Search notes...",value:l,onChange:w=>c(w.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg pl-9 pr-3 py-2 text-sm text-brand-text focus:ring-1 focus:ring-brand-secondary outline-none transition-all"})]})]}),f.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2",children:d.length===0?f.jsx("div",{className:"text-center text-brand-text-muted py-8 text-sm",children:"No notes found."}):d.map(w=>f.jsxs("div",{onClick:()=>o(w.id),className:`group p-3 rounded-lg cursor-pointer transition-all border ${s===w.id?"bg-brand-primary/10 border-brand-primary/30":"hover:bg-white/5 border-transparent hover:border-white/5"}`,children:[f.jsxs("div",{className:"flex justify-between items-start mb-1",children:[f.jsx("h3",{className:`font-medium truncate ${s===w.id?"text-brand-primary":"text-brand-text"}`,children:w.title||"Untitled Note"}),f.jsx("button",{onClick:v=>x(v,w.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:f.jsx(eu,{className:"w-3.5 h-3.5"})})]}),f.jsx("p",{className:"text-xs text-brand-text-muted line-clamp-2",children:w.content||"No content..."}),f.jsx("div",{className:"mt-2 text-[10px] text-brand-text-muted/50",children:new Date(w.updatedAt).toLocaleDateString()})]},w.id))})]}),f.jsx("div",{className:"w-2/3 flex flex-col bg-brand-bg/50",children:h?f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"p-6 border-b border-white/10",children:[f.jsx("input",{type:"text",value:h.title,onChange:w=>n(h.id,{title:w.target.value}),className:"w-full bg-transparent text-3xl font-serif font-bold text-brand-text placeholder-brand-text-muted/30 outline-none",placeholder:"Note Title"}),f.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-brand-text-muted",children:[f.jsxs("span",{children:["Last edited: ",new Date(h.updatedAt).toLocaleString()]}),h.relatedType&&f.jsxs("span",{className:"px-2 py-0.5 bg-brand-surface rounded-full border border-white/5",children:["Linked to ",h.relatedType]})]})]}),f.jsx("div",{className:"flex-grow p-6",children:f.jsx("textarea",{value:h.content,onChange:w=>n(h.id,{content:w.target.value}),className:"w-full h-full bg-transparent text-brand-text placeholder-brand-text-muted/30 outline-none resize-none leading-relaxed custom-scrollbar",placeholder:"Start writing..."})})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-4",children:f.jsx(ll,{className:"w-8 h-8 opacity-50"})}),f.jsx("p",{className:"text-lg font-medium",children:"Select a note or create a new one"})]})})]})},GT=()=>{const{items:t,addItem:e,updateItem:n,deleteItem:i,storyPremise:s}=ho(),[o,l]=ue.useState(null),[c,d]=ue.useState(""),[h,m]=ue.useState(!1),[x,w]=ue.useState(""),[v,I]=ue.useState(""),A=t.find(z=>z.id===o),E=()=>{if(!x.trim())return;const z={id:`item_${Date.now()}`,name:x,appearance:v||"No description provided.",history:"",significance:"",notes:""};e(z),w(""),I(""),l(z.id)},C=(z,B)=>{z.stopPropagation(),window.confirm("Are you sure you want to delete this item?")&&(i(B),o===B&&l(null))},R=async()=>{if(A){m(!0);try{const z=await GA(A);n(A.id,{image:z})}catch(z){console.error(z),alert("Failed to generate image. Please try again.")}finally{m(!1)}}},D=t.filter(z=>z.name.toLowerCase().includes(c.toLowerCase())||z.appearance.toLowerCase().includes(c.toLowerCase()));return f.jsxs("div",{className:"flex h-full animate-in fade-in duration-500",children:[f.jsxs("div",{className:"w-1/3 border-r border-white/10 flex flex-col bg-brand-surface/30 backdrop-blur-sm",children:[f.jsxs("div",{className:"p-4 border-b border-white/10 space-y-4",children:[f.jsx("div",{className:"flex justify-between items-center",children:f.jsx("h2",{className:"text-xl font-bold font-serif text-brand-text",children:"Items & Artifacts"})}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("input",{type:"text",placeholder:"New Item Name",value:x,onChange:z=>w(z.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-brand-text placeholder-brand-text-muted focus:ring-1 focus:ring-brand-secondary outline-none"}),f.jsxs("button",{onClick:E,disabled:!x.trim(),className:"w-full py-2 bg-brand-primary hover:bg-brand-primary-hover disabled:opacity-50 text-white rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium","aria-label":"Create New Item",children:[f.jsx(ll,{className:"w-4 h-4"}),"Create Item"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(pm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-text-muted"}),f.jsx("input",{type:"text",placeholder:"Search items...",value:c,onChange:z=>d(z.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg pl-9 pr-3 py-2 text-sm text-brand-text focus:ring-1 focus:ring-brand-secondary outline-none transition-all"})]})]}),f.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2",children:D.length===0?f.jsx("div",{className:"text-center text-brand-text-muted py-8 text-sm",children:"No items found."}):D.map(z=>f.jsxs("div",{onClick:()=>l(z.id),className:`group p-3 rounded-lg cursor-pointer transition-all border ${o===z.id?"bg-brand-primary/10 border-brand-primary/30":"hover:bg-white/5 border-transparent hover:border-white/5"}`,children:[f.jsxs("div",{className:"flex justify-between items-start mb-1",children:[f.jsx("h3",{className:`font-medium truncate ${o===z.id?"text-brand-primary":"text-brand-text"}`,children:z.name}),f.jsx("button",{onClick:B=>C(B,z.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",title:"Delete Item",children:f.jsx(eu,{className:"w-3.5 h-3.5"})})]}),f.jsx("p",{className:"text-xs text-brand-text-muted line-clamp-2",children:z.appearance})]},z.id))})]}),f.jsx("div",{className:"w-2/3 flex flex-col bg-brand-bg/50",children:A?f.jsxs("div",{className:"flex flex-col h-full overflow-y-auto custom-scrollbar",children:[f.jsxs("div",{className:"h-48 bg-black/40 relative group shrink-0",children:[A.image?f.jsx("img",{src:A.image.startsWith("data:")?A.image:`data:image/png;base64,${A.image}`,alt:A.name,className:"w-full h-full object-cover"}):f.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-brand-text-muted",children:[f.jsx(ha,{className:"w-12 h-12 mb-2 opacity-50"}),f.jsx("span",{className:"text-sm",children:"No image available"})]}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent flex justify-end",children:f.jsxs("button",{onClick:R,disabled:h,className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors text-xs flex items-center gap-2 disabled:opacity-50",title:"Generate Item Image",children:[f.jsx(Xi,{className:`w-3 h-3 ${h?"animate-spin":""}`}),h?"Generating...":"Generate Image"]})})]}),f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"item-name-input",className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-1",children:"Item Name"}),f.jsx("input",{id:"item-name-input",type:"text",value:A.name,onChange:z=>n(A.id,{name:z.target.value}),className:"w-full bg-transparent text-3xl font-serif font-bold text-brand-text outline-none border-b border-transparent focus:border-white/10 py-1"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Visual Description"}),f.jsx("textarea",{value:A.appearance,onChange:z=>n(A.id,{appearance:z.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Describe how the object looks..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"History & Origin"}),f.jsx("textarea",{value:A.history,onChange:z=>n(A.id,{history:z.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Where did this item come from?"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Significance & Powers"}),f.jsx("textarea",{value:A.significance,onChange:z=>n(A.id,{significance:z.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Why is this item important?"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Additional Notes"}),f.jsx("textarea",{value:A.notes,onChange:z=>n(A.id,{notes:z.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Any other details..."})]})]})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-4",children:f.jsx(Xi,{className:"w-8 h-8 opacity-50"})}),f.jsx("p",{className:"text-lg font-medium",children:"Select an item or create a new one"})]})})]})},HT=({selectedCharacterIds:t,selectedSceneIds:e,selectedMaterialIds:n})=>{const{storyPremise:i,storyTextToAnalyze:s,characters:o,scenes:l,mapData:c,savedMaterials:d,setCharacters:h,setScenes:m,setMapData:x,setSavedMaterials:w,setGeneratedContent:v,setIsLoading:I,setLoadingMessage:A,setError:E,createCharacter:C,updateScene:R}=ho(),[D,z]=ue.useState(null),B=ue.useCallback(()=>{E(null),v(null)},[E,v]),se=ue.useCallback(async(ce,ee,ae,me,pe,ve)=>{I(!0),A("Creating character profile..."),B();try{const H=await yA(ce,ee,ae,me,pe),L={id:`char_${Date.now()}`,name:ce,type:ee,initialInfo:ae,traits:me,headerImage:ve,...H};C(L);const J={title:`Character Profile: ${ce}`,content:`**Traits:** ${me}

**History:**
${H.history}

**Character Arc:**
${H.arc}`,type:"CHARACTER_PROFILE",sourceId:L.id};v(J),w(K=>[{id:`material_${Date.now()}`,type:"CHARACTER_PROFILE",title:J.title,content:J.content},...K])}catch(H){console.error(H),E("Failed to generate character profile. Please check your connection and try again.")}finally{I(!1),A("")}},[C,v,w,I,A,E,B]),q=ue.useCallback(async()=>{if(!s.trim()){E("Please paste some story text to analyze.");return}I(!0),B(),h([]),m([]);try{A("Analyzing: Sending story to AI...");const ce=await vA(i,s);A("Analyzing: Processing results...");const ee=[],ae={};for(let ve=0;ve<ce.characters.length;ve++){const H=ce.characters[ve],L=`char_${Date.now()}_${ve}`;ae[H.name]=L,ee.push({id:L,name:H.name,type:H.type,initialInfo:H.description,traits:H.traits,history:H.history||H.description,arc:H.arc||"Not yet defined."})}h(ee);const me=ce.scenes.map((ve,H)=>{const L=[];return ve.characters_present&&Array.isArray(ve.characters_present)&&ve.characters_present.forEach(J=>{if(ae[J])L.push(ae[J]);else{const K=Object.keys(ae).find(ie=>ie.includes(J)||J.includes(ie));K&&L.push(ae[K])}}),{id:`scene_${Date.now()}_${H}`,title:ve.title,summary:ve.summary,fullText:ve.fullText,characterIds:[...new Set(L)],isTransition:!1}});m(me);const pe={title:"Analysis Complete",content:`Identified ${ce.characters.length} characters and ${ce.scenes.length} scenes. Characters have been automatically linked to scenes where they appear.`,type:"ANALYSIS_SUMMARY"};v(pe),w(ve=>[{id:`material_${Date.now()}`,type:"ANALYSIS_SUMMARY",title:pe.title,content:pe.content},...ve])}catch(ce){console.error(ce),E("Failed to analyze the story. The structure might be complex or an API error occurred."),v(null)}finally{I(!1),A("")}},[i,s,h,m,v,w,I,A,E,B]),G=ue.useCallback(async(ce,ee)=>{const ae=(ee==null?void 0:ee.characterIds)||t,me=(ee==null?void 0:ee.sceneIds)||e,pe=o.filter(L=>ae.has(L.id)),ve=l.filter(L=>me.has(L.id)),H=d.filter(L=>n.has(L.id));if(B(),ce===xt.RELATIONSHIP_WEB&&pe.length<2){E("Please select at least two characters.");return}if(ce===xt.TRANSITION&&ve.length!==2){E("Please select exactly two scenes.");return}if(ce===xt.DIALOGUE_GENERATOR&&pe.length!==2){E("Please select exactly two characters.");return}if((ce===xt.OBJECT_GENERATOR||ce===xt.OUTLINE_GENERATOR)&&!i.trim()){E("Please provide a story premise.");return}if(ce===xt.MIDJOURNEY_PROMPTS&&ve.length!==1){E("Please select exactly one scene for prompt generation.");return}if(ce===xt.SETTING_GENERATOR&&ve.length!==1&&ee){E("Please select exactly one scene for setting description.");return}I(!0);try{let L=null;const J=l.map(K=>K.fullText).join(`

`);switch(ce){case xt.CHAPTER:A("Weaving the next chapter..."),L={title:"Generated Chapter",content:await xA(i,J,pe,ve),type:xt.CHAPTER};break;case xt.RELATIONSHIP_WEB:A("Mapping character relationships..."),L={title:"Character Relationship Web",content:await bA(pe),type:"RELATIONSHIP_WEB_VISUAL"};break;case xt.PLOT_IDEAS:A("Brainstorming plot ideas..."),L={title:"Plot Ideas & Twists",content:await wA(i,J,pe),type:xt.PLOT_IDEAS};break;case xt.TRANSITION:{A("Crafting a transition...");const Re=await SA(ve);L={title:"Scene Transition",content:Re,type:xt.TRANSITION};const De=[];l.forEach((ye,$)=>{me.has(ye.id)&&De.push($)});const He=Math.min(...De),Xe={id:`transition_${Date.now()}`,title:"Transition",summary:Re,fullText:Re,characterIds:[],isTransition:!0},U=[...l];U.splice(He+1,0,Xe),m(U);break}case xt.MAP_GENERATOR:A("Generating world map...");const Ae=`Premise: ${i}

Scenes:
${l.map(Re=>`Title: ${Re.title}
Summary: ${Re.summary}`).join(`
---
`)}

Characters:
${o.map(Re=>`Name: ${Re.name}
History: ${Re.history}`).join(`
---
`)}`,Ce=await NA(Ae);x(Ce),L={title:"World Map Generated",content:`Successfully generated a map with ${Ce.locations.length} locations.`,type:"MAP_DATA"};break;case xt.REASSESS_FLOW:A("Reassessing narrative flow..."),L={title:"Narrative Flow Analysis",content:await _A(i,l),type:xt.REASSESS_FLOW};break;case xt.DIALOGUE_GENERATOR:{A("Generating dialogue...");const Re=await AA(pe[0],pe[1]);L={title:`Dialogue: ${pe[0].name} & ${pe[1].name}`,content:Re,type:xt.DIALOGUE_GENERATOR};break}case xt.OBJECT_GENERATOR:{A("Inventing an object...");const Re=await CA(i);L={title:`Invented Object: ${Re.name}`,content:Re,type:"OBJECT_DATA"};break}case xt.SETTING_GENERATOR:{A("Describing a setting...");const Re=ve.length===1?{title:ve[0].title,summary:ve[0].summary}:void 0,De=await TA(i,Re);L={title:Re?`Setting: ${Re.title}`:"Generated Setting",content:De,type:xt.SETTING_GENERATOR,sourceId:ve.length===1?ve[0].id:void 0};break}case xt.OUTLINE_GENERATOR:{A("Generating story outline...");const Re=H.find(Xe=>Xe.type===xt.PLOT_IDEAS),De=Re?String(Re.content):void 0;L={title:"Generated Story Outline",content:await EA(i,pe,De),type:xt.OUTLINE_GENERATOR};break}case xt.MIDJOURNEY_PROMPTS:{A("Crafting Midjourney shot list...");const Re=await IA(ve[0],pe);L={title:`Midjourney Prompts: ${ve[0].title}`,content:Re,type:xt.MIDJOURNEY_PROMPTS};break}}L&&(v(L),w(K=>[{id:`material_${Date.now()}`,type:L.type,title:L.title,content:L.content},...K]))}catch(L){console.error(L),E(`Failed to perform action: ${ce}. Please try again.`)}finally{I(!1),A("")}},[t,e,n,o,l,d,i,B,E,I,A,m,x,v,w]),Q=ue.useCallback(async(ce,ee)=>{if(!ce.trim()){E("Please enter a prompt.");return}I(!0),A(`Generating with ${ee} context...`),B();try{let ae=`STORY PREMISE:
${i||"Not set."}

`;if(ee==="all")o.forEach(ve=>{ae+=`Name: ${ve.name} (${ve.type})
Traits: ${ve.traits}
---
`}),l.forEach(ve=>{ae+=`Title: ${ve.title}
Summary: ${ve.summary}
---
`}),c&&c.locations.forEach(ve=>{ae+=`Name: ${ve.name}
Description: ${ve.description}
---
`});else{const ve=o.filter(L=>t.has(L.id)),H=l.filter(L=>e.has(L.id));ve.length>0&&ve.forEach(L=>{ae+=`Name: ${L.name}
Traits: ${L.traits}
---
`}),H.length>0&&H.forEach(L=>{ae+=`Title: ${L.title}
Summary: ${L.summary}
---
`})}const me=await kA(ce,ae),pe={title:`Generated from: "${ce}"`,content:me,type:xt.CHAPTER};v(pe),w(ve=>[{id:`material_${Date.now()}`,type:pe.type,title:pe.title,content:pe.content},...ve])}catch(ae){console.error(ae),E("Failed to generate text.")}finally{I(!1),A("")}},[i,o,l,c,t,e,I,A,E,B,v,w]),ne=ue.useCallback(async(ce,ee)=>{I(!0),A(`Generating image for "${ce.title}"...`),B();try{const ae=o.filter(pe=>{var ve;return(ve=ce.characterIds)==null?void 0:ve.includes(pe.id)}),me=await LA(ce,ae,ee);z({imageUrl:me,source:{type:"scene",id:ce.id},title:ce.title})}catch(ae){console.error(ae),E("Failed to generate image.")}finally{I(!1),A("")}},[o,I,A,E,B,z]),F=ue.useCallback(async(ce,ee)=>{I(!0),A(`Generating portrait for ${ce.name}...`),B();try{const ae=await RA(ce,ee);z({imageUrl:ae,source:{type:"character",id:ce.id},title:ce.name})}catch(ae){console.error(ae),E("Failed to generate image.")}finally{I(!1),A("")}},[I,A,E,B,z]),j=ue.useCallback(async(ce,ee,ae)=>{I(!0),A("Analyzing video for inspiration..."),B();try{const pe={title:"Video Analysis",content:await MA(ce,ee,ae),type:"VIDEO_ANALYSIS"};v(pe),w(ve=>[{id:`material_${Date.now()}`,type:"VIDEO_ANALYSIS",title:pe.title,content:pe.content},...ve])}catch(me){console.error(me),E("Failed to analyze video.")}finally{I(!1),A("")}},[I,A,E,B,v,w]),W=ue.useCallback(async ce=>{I(!0),A("Generating story timeline..."),E(null);try{const ee=await jA(ce),ae=ee.map((me,pe)=>({id:`scene_timeline_${Date.now()}_${pe}`,title:me.title,summary:me.summary,fullText:`Plot Point: ${me.title}

${me.summary}`,characterIds:[]}));m(me=>[...me,...ae]),v({title:"Timeline Generated",content:`Successfully generated ${ee.length} timeline points.`,type:"TIMELINE"})}catch(ee){console.error(ee),E("Failed to generate timeline.")}finally{I(!1),A("")}},[I,A,E,m,v]),M=ue.useCallback(async ce=>{const ee=l.find(ae=>ae.id===ce);if(!ee||!ee.characterIds||ee.characterIds.length===0){E("This scene needs characters assigned to it before it can be written.");return}I(!0),A(`Writing scene: "${ee.title}"...`),B();try{const ae=o.filter(J=>ee.characterIds.includes(J.id)),me=l.findIndex(J=>J.id===ce),ve=l.slice(0,me).map(J=>`Title: ${J.title}
Summary: ${J.summary}`).join(`

`),H=await DA(i,ve,ee,ae);R(ce,{fullText:H});const L={title:`Generated Scene: ${ee.title}`,content:H,type:xt.SCENE_WRITER};v(L),w(J=>[{id:`material_${Date.now()}`,type:L.type,title:L.title,content:L.content},...J])}catch(ae){console.error(ae),E("Failed to generate scene details.")}finally{I(!1),A("")}},[l,o,i,I,A,E,B,R,v,w]);return{handleCreateCharacter:se,handleAnalyzeStory:q,handleGenerate:G,handleGenerateWithContext:Q,handleGenerateSceneImage:ne,handleGenerateCharacterImage:F,handleAnalyzeVideo:j,handleGenerateTimeline:W,handleGenerateSceneDetails:M,generatedImage:D,setGeneratedImage:z}};function VT(){const{id:t}=w5(),{storyPremise:e,setStoryPremise:n,storyTextToAnalyze:i,setStoryTextToAnalyze:s,characters:o,setCharacters:l,scenes:c,setScenes:d,mapData:h,setMapData:m,savedMaterials:x,setSavedMaterials:w,compiledBook:v,setCompiledBook:I,isLoading:A,setIsLoading:E,loadingMessage:C,setLoadingMessage:R,error:D,setError:z,generatedContent:B,setGeneratedContent:se,updateCharacter:q,deleteCharacter:G,addScene:Q,updateScene:ne,deleteScene:F,reorderScenes:j,updateLocation:W,deleteSavedMaterial:M,loadProject:ce,resetStory:ee,notes:ae,items:me}=ho();ue.useEffect(()=>{ee(),t&&(async()=>{E(!0);try{const lt=await $l.get(`/stories/${t}`);lt.data&&(lt.data.storyPremise&&n(lt.data.storyPremise),lt.data.characters&&l(lt.data.characters),lt.data.scenes&&d(lt.data.scenes),lt.data.savedMaterials&&w(lt.data.savedMaterials),lt.data.mapData&&m(lt.data.mapData))}catch(lt){console.error("Failed to load story",lt),z("Failed to load story.")}finally{E(!1)}})()},[t]),ue.useEffect(()=>{if(!t)return;const rt={storyPremise:e,characters:o,scenes:c,savedMaterials:x,mapData:h,notes:ae,items:me},lt=setTimeout(async()=>{try{await $l.put(`/stories/${t}`,{title:e.split(".")[0]||"Untitled Story",data:rt})}catch(rn){console.error("Auto-save failed",rn)}},2e3);return()=>clearTimeout(lt)},[t,e,o,c,x,h,ae,me]);const[pe,ve]=ue.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"),[H,L]=ue.useState(!1),[J,K]=ue.useState(()=>{if(typeof window<"u"&&localStorage.getItem("themeColor"))try{return JSON.parse(localStorage.getItem("themeColor"))}catch{return Kp[0]}return Kp[0]}),[ie,xe]=ue.useState("story"),[Ae,Ce]=ue.useState(!1),[Ee,Re]=ue.useState(!0),[De,He]=ue.useState(!0),[Xe,U]=ue.useState(null),[ye,$]=ue.useState(null),[de,oe]=ue.useState(null),[he,Ie]=ue.useState(new Set),[Le,be]=ue.useState(new Set),[je,Oe]=ue.useState(new Set),[Je,at]=ue.useState(new Set),[dt,pt]=ue.useState(""),[mt,Rt]=ue.useState({characters:!0,scenes:!0,locations:!0,materials:!0});ue.useRef(null);const{handleCreateCharacter:st,handleAnalyzeStory:Rn,handleGenerate:gt,handleGenerateWithContext:on,handleGenerateSceneImage:Ot,handleGenerateCharacterImage:Ct,handleAnalyzeVideo:Gr,handleGenerateTimeline:Jt,handleGenerateSceneDetails:pi,generatedImage:jt,setGeneratedImage:Gn}=HT({selectedCharacterIds:he,selectedSceneIds:Le,selectedMaterialIds:je});ue.useEffect(()=>{pe==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.remove("light")):(document.documentElement.classList.remove("dark"),document.body.classList.add("light")),localStorage.setItem("theme",pe)},[pe]),ue.useEffect(()=>{J&&(document.documentElement.style.setProperty("--color-primary",J.primary),document.documentElement.style.setProperty("--color-secondary",J.secondary),document.documentElement.style.setProperty("--color-accent",J.accent))},[J]),ue.useEffect(()=>{localStorage.getItem("storyWeaver_onboarding_complete")||Ce(!0)},[]),ue.useEffect(()=>{A&&Re(!0)},[A]);const tr=()=>{if(c.length===0){z("You need scenes to compile a story!");return}const rt={title:e.split(".")[0]||"My Story",chapters:c.map(lt=>({title:lt.title,content:lt.fullText||lt.summary}))};I(rt),xe("book")},Yt=()=>{localStorage.setItem("storyWeaver_onboarding_complete","true"),Ce(!1)},Et=()=>{ve(rt=>rt==="dark"?"light":"dark")},Vt=rt=>{K(rt),localStorage.setItem("themeColor",JSON.stringify(rt))},ka=rt=>{pt(rt),Rt(lt=>({...lt,scenes:!0,characters:!1,materials:!1,locations:!1})),xe("story")},nr=async(rt,lt)=>{const rn=c.find(qt=>qt.id===rt);if(rn){E(!0);try{const qt=o.filter(Tn=>{var rr;return(rr=rn.characterIds)==null?void 0:rr.includes(Tn.id)});let sn={...rn};if(!sn.settingDescription){R("Generating scene setting...");const Tn=await PA(sn);sn.settingDescription=Tn}if(!sn.script){R("Generating screenplay...");const Tn=await UA(sn,qt);sn.script=Tn}R("Visualizing shots...");const Rr=await OA(sn,qt,lt);sn.storyboard=Rr,d(Tn=>Tn.map(rr=>rr.id===rt?sn:rr)),U(rt)}catch(qt){console.error(qt),z("Failed to generate storyboard.")}finally{E(!1),R("")}}},Zr=async(rt,lt,rn)=>{var sn;const qt=c.find(Rr=>Rr.id===rt);if(qt)try{const Rr=await BA(rn),Tn=(sn=qt.storyboard)==null?void 0:sn.map(rr=>rr.id===lt?{...rr,sketchImage:Rr}:rr);ne(rt,{storyboard:Tn})}catch(Rr){console.error("Sketch failed",Rr)}},Lr=(rt,lt,rn)=>{var Rr;const qt=c.find(Tn=>Tn.id===rt);if(!qt)return;const sn=(Rr=qt.storyboard)==null?void 0:Rr.map(Tn=>Tn.id===lt?{...Tn,...rn}:Tn);ne(rt,{storyboard:sn})},At=()=>{!jt||!jt.source||(jt.source.type==="scene"?ne(jt.source.id,{headerImage:jt.imageUrl}):q(jt.source.id,{headerImage:jt.imageUrl}),Gn(null))},Qr=rt=>{if(!jt&&!rt)return;const lt=rt||(jt==null?void 0:jt.imageUrl),rn=(jt==null?void 0:jt.title)||"Saved Image";lt&&(w(qt=>[{id:`material_${Date.now()}`,type:"IMAGE",title:`Image: ${rn}`,content:lt},...qt]),Gn(null))},mi=rt=>{rt.type==="IMAGE"&&Gn({imageUrl:rt.content,title:rt.title})},hr=rt=>{w(lt=>[{id:`material_${Date.now()}`,type:rt.type,title:rt.title,content:rt.content},...lt])},mn=(rt,lt)=>{(lt==="character"?Ie:lt==="scene"?be:lt==="location"?at:Oe)(qt=>{const sn=new Set(qt);return sn.has(rt)?sn.delete(rt):sn.add(rt),sn})},Mn=(rt,lt)=>{rt==="character"?Ie(lt):be(lt)},Nr=rt=>{G(rt),Ie(lt=>{const rn=new Set(lt);return rn.delete(rt),rn})},Qi=rt=>{F(rt),be(lt=>{const rn=new Set(lt);return rn.delete(rt),rn})},pr=rt=>{const lt={storyPremise:e,characters:o,scenes:c,mapData:h,savedMaterials:x},rn=new Blob([JSON.stringify(lt,null,2)],{type:"application/json"}),qt=URL.createObjectURL(rn),sn=document.createElement("a");sn.href=qt,sn.download="storyweaver_export.json",sn.click()},fn=ue.useMemo(()=>{if(!mt.characters||!dt)return o;const rt=dt.toLowerCase();return o.filter(lt=>lt.name.toLowerCase().includes(rt)||lt.traits.toLowerCase().includes(rt))},[o,dt,mt.characters]),wn=ue.useMemo(()=>{if(!mt.scenes||!dt)return c;const rt=dt.toLowerCase();return c.filter(lt=>lt.title.toLowerCase().includes(rt)||lt.summary.toLowerCase().includes(rt))},[c,dt,mt.scenes]),mr=ue.useMemo(()=>{if(!mt.materials||!dt)return x;const rt=dt.toLowerCase();return x.filter(lt=>lt.title.toLowerCase().includes(rt))},[x,dt,mt.materials]),[gn,ei]=ue.useState(!1),Ti=ue.useMemo(()=>c.reduce((rt,lt)=>{var rn;return rt+(((rn=lt.fullText)==null?void 0:rn.split(/\s+/).length)||0)},0),[c]),ea=gn?!1:De,gi=gn?!1:Ee,ti=Xe?c.find(rt=>rt.id===Xe):null,ni=ye?o.find(rt=>rt.id===ye):null;return f.jsxs("div",{className:"flex h-screen w-screen bg-brand-bg text-brand-text overflow-hidden font-sans transition-colors duration-300",children:[f.jsx("div",{className:`${ea?"w-64":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out border-r border-white/10 relative z-20 bg-brand-surface/95 backdrop-blur-md`,children:f.jsx("div",{className:"w-64 h-full overflow-hidden",children:f.jsx(oT,{activeView:ie,setActiveView:xe,isSidebarOpen:ea,setIsSidebarOpen:He,theme:pe,setShowThemeSettings:L,setShowOnboarding:Ce})})}),ni&&f.jsx(lT,{character:ni,onSave:q,onClose:()=>$(null)}),B&&f.jsx(fT,{generatedContent:B,onClose:()=>se(null),isLoading:A,loadingMessage:C,error:D,onGenerateTimeline:Jt,onUpdateScene:ne,onSave:hr}),f.jsxs("main",{className:"flex-grow flex flex-col relative transition-all duration-300",children:[f.jsxs("header",{className:`h-16 px-6 flex items-center justify-between border-b border-white/10 transition-all duration-300 ${gn?"bg-transparent border-transparent hover:bg-brand-surface/30 hover:backdrop-blur-md hover:border-white/10":"bg-brand-surface/50 backdrop-blur-md"}`,children:[f.jsxs("div",{className:"flex items-center gap-4",children:[!gn&&!De&&f.jsx("button",{onClick:()=>He(!0),className:"p-2 -ml-2 hover:bg-white/10 rounded-md text-brand-text-muted transition","aria-label":"Open Sidebar",children:f.jsx(Xl,{className:"w-5 h-5"})}),f.jsx("h1",{className:`text-lg font-serif font-bold tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-brand-secondary to-purple-400 ${gn?"opacity-50 hover:opacity-100 transition-opacity":""}`,children:e?e.split(".")[0].length>40?e.split(".")[0].substring(0,40)+"...":e.split(".")[0]:"StoryWeaver"}),f.jsx("div",{className:"h-6 w-px bg-white/10 mx-2"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(WA,{}),f.jsx($A,{currentCount:Ti})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>ei(!gn),className:`p-2 rounded-lg flex items-center gap-2 transition-all duration-300 ${gn?"bg-brand-secondary text-white shadow-lg shadow-brand-secondary/20 hover:scale-105":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,title:gn?"Exit Focus Mode":"Enter Focus Mode",children:gn?f.jsxs(f.Fragment,{children:[f.jsx(zb,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:"Exit Focus"})]}):f.jsx(Fb,{className:"w-5 h-5"})}),!gn&&f.jsx("button",{onClick:()=>Re(!Ee),className:`p-2 rounded-lg transition ${Ee?"text-brand-secondary bg-brand-secondary/10":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,"aria-label":"Toggle Right Panel",children:f.jsx(Zl,{className:"w-5 h-5"})})]})]}),f.jsx(hT,{isOpen:H,onClose:()=>L(!1),currentTheme:pe,onToggleTheme:Et,currentThemeColorName:J.name,onSelectThemeColor:Vt}),f.jsx(QA,{theme:pe}),Ae&&f.jsx(eC,{onComplete:Yt}),jt&&f.jsx(XA,{imageUrl:jt.imageUrl,title:jt.title,onClose:()=>Gn(null),onSetHeader:jt.source?At:void 0,onSave:Qr}),ti&&f.jsx(yT,{scene:ti,onGenerateStoryboard:()=>nr(ti.id),onGenerateSketch:(rt,lt)=>Zr(ti.id,rt,lt),onUpdateShot:(rt,lt)=>Lr(ti.id,rt,lt),onClose:()=>U(null),isGenerating:A}),f.jsx("div",{className:"flex flex-grow overflow-hidden relative",children:f.jsx("div",{className:`flex-grow overflow-y-auto custom-scrollbar transition-all duration-300 ${gn?"p-0":"p-6 lg:p-10"} ${de?"w-1/2 border-r border-white/10":"w-full"}`,children:f.jsxs("div",{className:`mx-auto h-full transition-all duration-500 ${gn?"max-w-4xl py-12 px-12 bg-brand-surface/30 backdrop-blur-sm rounded-xl border border-white/5 shadow-2xl my-6":"max-w-6xl space-y-8 pb-24"}`,children:[ie!=="book"&&ie!=="visual"&&ie!=="comic"&&!gn&&f.jsx("div",{className:"mb-6",children:f.jsx(ZA,{query:dt,onQueryChange:pt,filters:mt,onFilterChange:Rt})}),ie==="book"&&v&&f.jsx(QC,{book:v,onClose:()=>xe("story")}),ie==="story"&&f.jsx(TT,{storyPremise:e,setStoryPremise:n,storyTextToAnalyze:i,setStoryTextToAnalyze:s,onAnalyze:Rn,isLoading:A,characters:o,scenes:c,items:me,savedMaterials:x,onCompileBook:tr,onGenerate:gt,filteredScenes:wn,selectedSceneIds:Le,onToggleSelect:mn,onUpdateScene:ne,onDeleteScene:Qi,onGenerateSceneDetails:pi,onGenerateSceneImage:Ot,onOpenStoryboard:rt=>U(rt),reorderScenes:j,onOpenSplitView:(rt,lt)=>oe({type:rt,id:lt}),addScene:Q}),ie==="characters"&&f.jsx(jT,{onCreateCharacter:st,isLoading:A,filteredCharacters:fn,selectedCharacterIds:he,onToggleSelect:mn,onDeleteCharacter:Nr,onUpdateCharacter:q,onGenerateCharacterImage:Ct,onOpenVisuals:rt=>$(rt.id),onOpenSplitView:(rt,lt)=>oe({type:rt,id:lt})}),ie==="map"&&f.jsx("div",{className:"h-full",children:f.jsx(PT,{onGenerate:gt,isLoading:A,mapData:h,selectedLocationIds:Je,onToggleSelectLocation:mn,onUpdateLocation:W,onExportData:pr,onViewLocationScenes:ka})}),ie==="world"&&f.jsx("div",{className:"h-full",children:f.jsx(BT,{isLoading:A,onAnalyzeVideo:Gr})}),ie==="timeline"&&f.jsx(zT,{onGenerate:gt,scenes:c,allCharacters:o,selectedSceneIds:Le,onToggleSelect:mn,onUpdateScene:ne,onDeleteScene:Qi,onAddScene:Q,onReorderScenes:j,isLoading:A,onGenerateDetails:pi,onGenerateImage:Ot}),ie==="visual"&&f.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:f.jsx(eT,{scenes:c,allCharacters:o,onGenerateImage:Ot,onGenerateCharacterImage:Ct})}),ie==="comic"&&f.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:f.jsx(sT,{storyPremise:e,scenes:c,characters:o})}),ie==="notes"&&f.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:f.jsx(qT,{})}),ie==="items"&&f.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:f.jsx(GT,{})}),ie==="video"&&f.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:de&&!gn&&f.jsxs("div",{className:"w-1/2 flex flex-col border-l border-white/10 bg-brand-surface/50 backdrop-blur-xl animate-in slide-in-from-right duration-300 relative z-10",children:[f.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[f.jsxs("h3",{className:"font-serif font-bold text-lg flex items-center gap-2",children:[f.jsx(Zl,{className:"w-5 h-5 text-brand-secondary"}),de.type==="character"?"Character Details":"Scene Editor"]}),f.jsx("button",{onClick:()=>oe(null),"aria-label":"Close Split View",className:"p-1.5 hover:bg-white/10 rounded-lg text-brand-text-muted hover:text-white transition",children:f.jsx(Xl,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6",children:[de.type==="character"&&(()=>{const rt=o.find(lt=>lt.id===de.id);return rt?f.jsx(lv,{character:rt,isSelected:he.has(rt.id),onToggleSelect:()=>mn(rt.id,"character"),onDelete:()=>Nr(rt.id),onUpdate:q,onExport:()=>{},onGenerateImage:Ct,onOpenVisuals:lt=>$(lt.id)}):f.jsx("div",{className:"text-brand-text-muted",children:"Character not found."})})(),de.type==="scene"&&(()=>{const rt=c.find(lt=>lt.id===de.id);return rt?f.jsxs("div",{className:"space-y-6",children:[f.jsx(Am,{scene:rt,isSelected:Le.has(rt.id),onToggleSelect:()=>mn(rt.id,"scene"),onUpdate:ne,onDelete:()=>Qi(rt.id),onExport:()=>{},allCharacters:o,allItems:me,isLoading:A,onGenerateDetails:pi,onGenerateImage:Ot,onOpenStoryboard:lt=>U(lt.id),isFirst:!1,isLast:!1,layout:"vertical"}),f.jsxs("div",{className:"glass-card p-4 rounded-xl border border-white/5",children:[f.jsx("h4",{className:"font-bold text-brand-text mb-2",children:"Quick Notes"}),f.jsx("textarea",{className:"w-full h-40 bg-brand-bg/50 border border-white/10 rounded-lg p-3 text-sm focus:ring-1 focus:ring-brand-secondary outline-none resize-none",placeholder:"Jot down ideas for this scene..."})]})]}):f.jsx("div",{className:"text-brand-text-muted",children:"Scene not found."})})()]})]})})]})})})]}),f.jsx("div",{className:`${gi?"w-80":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out border-l border-white/10 relative z-20 bg-brand-surface/90 backdrop-blur-md`,children:f.jsx("div",{className:"w-80 h-full overflow-hidden",children:f.jsx(_T,{isRightPanelOpen:gi,setIsRightPanelOpen:Re,onGenerate:gt,onGenerateWithContext:on,onViewImage:mi,onGenerateTimeline:Jt,selectedCharacterIds:he,selectedSceneIds:Le,onBatchUpdateSelection:Mn,filteredMaterials:mr,onSaveMaterial:hr})})})]})}const ay=({children:t})=>{const{isAuthenticated:e}=Uf();return e?f.jsx(f.Fragment,{children:t}):f.jsx(D5,{to:"/login"})};function JT(){return console.log("App component rendering"),f.jsx(yb,{children:f.jsx(sb,{children:f.jsxs(U5,{children:[f.jsx(ld,{path:"/login",element:f.jsx(Sb,{})}),f.jsx(ld,{path:"/register",element:f.jsx(Nb,{})}),f.jsx(ld,{path:"/",element:f.jsx(ay,{children:f.jsx(l2,{children:f.jsx(qb,{})})})}),f.jsx(ld,{path:"/editor/:id",element:f.jsx(ay,{children:f.jsx(l2,{children:f.jsx(VT,{})})})})]})})})}const Tv=document.getElementById("root");if(!Tv)throw new Error("Could not find root element to mount to");const YT=Hx.createRoot(Tv);YT.render(f.jsx(ec.StrictMode,{children:f.jsx(JT,{})}));export{bn as _,uf as c,Xp as g};
