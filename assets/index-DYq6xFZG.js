(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(u){if(u.ep)return;u.ep=!0;const l=r(u);fetch(u.href,l)}})();var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ah={exports:{}},Mu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function Pg(){if($m)return Mu;$m=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(o,u,l){var d=null;if(l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),"key"in u){l={};for(var h in u)h!=="key"&&(l[h]=u[h])}else l=u;return u=l.ref,{$$typeof:a,type:o,key:d,ref:u!==void 0?u:null,props:l}}return Mu.Fragment=s,Mu.jsx=r,Mu.jsxs=r,Mu}var Xm;function Ug(){return Xm||(Xm=1,Ah.exports=Pg()),Ah.exports}var i=Ug(),kh={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Fg(){if(Zm)return It;Zm=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),j=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=j&&P[j]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,A={};function _(P,C,G){this.props=P,this.context=C,this.refs=A,this.updater=G||L}_.prototype.isReactComponent={},_.prototype.setState=function(P,C){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,C,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=_.prototype;function D(P,C,G){this.props=P,this.context=C,this.refs=A,this.updater=G||L}var F=D.prototype=new T;F.constructor=D,N(F,_.prototype),F.isPureReactComponent=!0;var B=Array.isArray;function ce(){}var U={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function ie(P,C,G){var $=G.ref;return{$$typeof:a,type:P,key:C,ref:$!==void 0?$:null,props:G}}function se(P,C){return ie(P.type,C,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===a}function O(P){var C={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(G){return C[G]})}var Y=/\/+/g;function E(P,C){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):C.toString(36)}function oe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ce,ce):(P.status="pending",P.then(function(C){P.status==="pending"&&(P.status="fulfilled",P.value=C)},function(C){P.status==="pending"&&(P.status="rejected",P.reason=C)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function J(P,C,G,$,ee){var be=typeof P;(be==="undefined"||be==="boolean")&&(P=null);var Se=!1;if(P===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(P.$$typeof){case a:case s:Se=!0;break;case y:return Se=P._init,J(Se(P._payload),C,G,$,ee)}}if(Se)return ee=ee(P),Se=$===""?"."+E(P,0):$,B(ee)?(G="",Se!=null&&(G=Se.replace(Y,"$&/")+"/"),J(ee,C,G,"",function(Ee){return Ee})):ee!=null&&(I(ee)&&(ee=se(ee,G+(ee.key==null||P&&P.key===ee.key?"":(""+ee.key).replace(Y,"$&/")+"/")+Se)),C.push(ee)),1;Se=0;var je=$===""?".":$+":";if(B(P))for(var Ae=0;Ae<P.length;Ae++)$=P[Ae],be=je+E($,Ae),Se+=J($,C,G,be,ee);else if(Ae=g(P),typeof Ae=="function")for(P=Ae.call(P),Ae=0;!($=P.next()).done;)$=$.value,be=je+E($,Ae++),Se+=J($,C,G,be,ee);else if(be==="object"){if(typeof P.then=="function")return J(oe(P),C,G,$,ee);throw C=String(P),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ae(P,C,G){if(P==null)return P;var $=[],ee=0;return J(P,$,"","",function(be){return C.call(G,be,ee++)}),$}function he(P){if(P._status===-1){var C=P._result;C=C(),C.then(function(G){(P._status===0||P._status===-1)&&(P._status=1,P._result=G)},function(G){(P._status===0||P._status===-1)&&(P._status=2,P._result=G)}),P._status===-1&&(P._status=0,P._result=C)}if(P._status===1)return P._result.default;throw P._result}var fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ge={map:ae,forEach:function(P,C,G){ae(P,function(){C.apply(this,arguments)},G)},count:function(P){var C=0;return ae(P,function(){C++}),C},toArray:function(P){return ae(P,function(C){return C})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return It.Activity=w,It.Children=ge,It.Component=_,It.Fragment=r,It.Profiler=u,It.PureComponent=D,It.StrictMode=o,It.Suspense=p,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,It.__COMPILER_RUNTIME={__proto__:null,c:function(P){return U.H.useMemoCache(P)}},It.cache=function(P){return function(){return P.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(P,C,G){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var $=N({},P.props),ee=P.key;if(C!=null)for(be in C.key!==void 0&&(ee=""+C.key),C)!q.call(C,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&C.ref===void 0||($[be]=C[be]);var be=arguments.length-2;if(be===1)$.children=G;else if(1<be){for(var Se=Array(be),je=0;je<be;je++)Se[je]=arguments[je+2];$.children=Se}return ie(P.type,ee,$)},It.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},It.createElement=function(P,C,G){var $,ee={},be=null;if(C!=null)for($ in C.key!==void 0&&(be=""+C.key),C)q.call(C,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ee[$]=C[$]);var Se=arguments.length-2;if(Se===1)ee.children=G;else if(1<Se){for(var je=Array(Se),Ae=0;Ae<Se;Ae++)je[Ae]=arguments[Ae+2];ee.children=je}if(P&&P.defaultProps)for($ in Se=P.defaultProps,Se)ee[$]===void 0&&(ee[$]=Se[$]);return ie(P,be,ee)},It.createRef=function(){return{current:null}},It.forwardRef=function(P){return{$$typeof:h,render:P}},It.isValidElement=I,It.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:he}},It.memo=function(P,C){return{$$typeof:m,type:P,compare:C===void 0?null:C}},It.startTransition=function(P){var C=U.T,G={};U.T=G;try{var $=P(),ee=U.S;ee!==null&&ee(G,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(ce,fe)}catch(be){fe(be)}finally{C!==null&&G.types!==null&&(C.types=G.types),U.T=C}},It.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},It.use=function(P){return U.H.use(P)},It.useActionState=function(P,C,G){return U.H.useActionState(P,C,G)},It.useCallback=function(P,C){return U.H.useCallback(P,C)},It.useContext=function(P){return U.H.useContext(P)},It.useDebugValue=function(){},It.useDeferredValue=function(P,C){return U.H.useDeferredValue(P,C)},It.useEffect=function(P,C){return U.H.useEffect(P,C)},It.useEffectEvent=function(P){return U.H.useEffectEvent(P)},It.useId=function(){return U.H.useId()},It.useImperativeHandle=function(P,C,G){return U.H.useImperativeHandle(P,C,G)},It.useInsertionEffect=function(P,C){return U.H.useInsertionEffect(P,C)},It.useLayoutEffect=function(P,C){return U.H.useLayoutEffect(P,C)},It.useMemo=function(P,C){return U.H.useMemo(P,C)},It.useOptimistic=function(P,C){return U.H.useOptimistic(P,C)},It.useReducer=function(P,C,G){return U.H.useReducer(P,C,G)},It.useRef=function(P){return U.H.useRef(P)},It.useState=function(P){return U.H.useState(P)},It.useSyncExternalStore=function(P,C,G){return U.H.useSyncExternalStore(P,C,G)},It.useTransition=function(){return U.H.useTransition()},It.version="19.2.0",It}var Jm;function up(){return Jm||(Jm=1,kh.exports=Fg()),kh.exports}var ne=up();const Pc=cp(ne);var Ch={exports:{}},zu={},Lh={exports:{}},Eh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function qg(){return Qm||(Qm=1,(function(a){function s(J,ae){var he=J.length;J.push(ae);e:for(;0<he;){var fe=he-1>>>1,ge=J[fe];if(0<u(ge,ae))J[fe]=ae,J[he]=ge,he=fe;else break e}}function r(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var ae=J[0],he=J.pop();if(he!==ae){J[0]=he;e:for(var fe=0,ge=J.length,P=ge>>>1;fe<P;){var C=2*(fe+1)-1,G=J[C],$=C+1,ee=J[$];if(0>u(G,he))$<ge&&0>u(ee,G)?(J[fe]=ee,J[$]=he,fe=$):(J[fe]=G,J[C]=he,fe=C);else if($<ge&&0>u(ee,he))J[fe]=ee,J[$]=he,fe=$;else break e}}return ae}function u(J,ae){var he=J.sortIndex-ae.sortIndex;return he!==0?he:J.id-ae.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();a.unstable_now=function(){return d.now()-h}}var p=[],m=[],y=1,w=null,j=3,g=!1,L=!1,N=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(J){for(var ae=r(m);ae!==null;){if(ae.callback===null)o(m);else if(ae.startTime<=J)o(m),ae.sortIndex=ae.expirationTime,s(p,ae);else break;ae=r(m)}}function B(J){if(N=!1,F(J),!L)if(r(p)!==null)L=!0,ce||(ce=!0,O());else{var ae=r(m);ae!==null&&oe(B,ae.startTime-J)}}var ce=!1,U=-1,q=5,ie=-1;function se(){return A?!0:!(a.unstable_now()-ie<q)}function I(){if(A=!1,ce){var J=a.unstable_now();ie=J;var ae=!0;try{e:{L=!1,N&&(N=!1,T(U),U=-1),g=!0;var he=j;try{t:{for(F(J),w=r(p);w!==null&&!(w.expirationTime>J&&se());){var fe=w.callback;if(typeof fe=="function"){w.callback=null,j=w.priorityLevel;var ge=fe(w.expirationTime<=J);if(J=a.unstable_now(),typeof ge=="function"){w.callback=ge,F(J),ae=!0;break t}w===r(p)&&o(p),F(J)}else o(p);w=r(p)}if(w!==null)ae=!0;else{var P=r(m);P!==null&&oe(B,P.startTime-J),ae=!1}}break e}finally{w=null,j=he,g=!1}ae=void 0}}finally{ae?O():ce=!1}}}var O;if(typeof D=="function")O=function(){D(I)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,E=Y.port2;Y.port1.onmessage=I,O=function(){E.postMessage(null)}}else O=function(){_(I,0)};function oe(J,ae){U=_(function(){J(a.unstable_now())},ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return j},a.unstable_next=function(J){switch(j){case 1:case 2:case 3:var ae=3;break;default:ae=j}var he=j;j=ae;try{return J()}finally{j=he}},a.unstable_requestPaint=function(){A=!0},a.unstable_runWithPriority=function(J,ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=j;j=J;try{return ae()}finally{j=he}},a.unstable_scheduleCallback=function(J,ae,he){var fe=a.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?fe+he:fe):he=fe,J){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=he+ge,J={id:y++,callback:ae,priorityLevel:J,startTime:he,expirationTime:ge,sortIndex:-1},he>fe?(J.sortIndex=he,s(m,J),r(p)===null&&J===r(m)&&(N?(T(U),U=-1):N=!0,oe(B,he-fe))):(J.sortIndex=ge,s(p,J),L||g||(L=!0,ce||(ce=!0,O()))),J},a.unstable_shouldYield=se,a.unstable_wrapCallback=function(J){var ae=j;return function(){var he=j;j=ae;try{return J.apply(this,arguments)}finally{j=he}}}})(Eh)),Eh}var Km;function Hg(){return Km||(Km=1,Lh.exports=qg()),Lh.exports}var Th={exports:{}},ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function Gg(){if(e2)return ar;e2=1;var a=up();function s(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},u=Symbol.for("react.portal");function l(p,m,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:p,containerInfo:m,implementation:y}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ar.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(s(299));return l(p,m,null,y)},ar.flushSync=function(p){var m=d.T,y=o.p;try{if(d.T=null,o.p=2,p)return p()}finally{d.T=m,o.p=y,o.d.f()}},ar.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(p,m))},ar.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},ar.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,w=h(y,m.crossOrigin),j=typeof m.integrity=="string"?m.integrity:void 0,g=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?o.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:g}):y==="script"&&o.d.X(p,{crossOrigin:w,integrity:j,fetchPriority:g,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ar.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(p)},ar.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,w=h(y,m.crossOrigin);o.d.L(p,y,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ar.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=h(m.as,m.crossOrigin);o.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(p)},ar.requestFormReset=function(p){o.d.r(p)},ar.unstable_batchedUpdates=function(p,m){return p(m)},ar.useFormState=function(p,m,y){return d.H.useFormState(p,m,y)},ar.useFormStatus=function(){return d.H.useHostTransitionStatus()},ar.version="19.2.0",ar}var t2;function B2(){if(t2)return Th.exports;t2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Th.exports=Gg(),Th.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function Vg(){if(n2)return zu;n2=1;var a=Hg(),s=up(),r=B2();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(l(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,c=t;;){var b=n.return;if(b===null)break;var v=b.alternate;if(v===null){if(c=b.return,c!==null){n=c;continue}break}if(b.child===v.child){for(v=b.child;v;){if(v===n)return p(b),e;if(v===c)return p(b),t;v=v.sibling}throw Error(o(188))}if(n.return!==c.return)n=b,c=v;else{for(var z=!1,K=b.child;K;){if(K===n){z=!0,n=b,c=v;break}if(K===c){z=!0,c=b,n=v;break}K=K.sibling}if(!z){for(K=v.child;K;){if(K===n){z=!0,n=v,c=b;break}if(K===c){z=!0,c=v,n=b;break}K=K.sibling}if(!z)throw Error(o(189))}}if(n.alternate!==c)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function O(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Symbol.for("react.client.reference");function E(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Y?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case _:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case ce:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case D:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:E(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return E(e(t))}catch{}}return null}var oe=Array.isArray,J=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},fe=[],ge=-1;function P(e){return{current:e}}function C(e){0>ge||(e.current=fe[ge],fe[ge]=null,ge--)}function G(e,t){ge++,fe[ge]=e.current,e.current=t}var $=P(null),ee=P(null),be=P(null),Se=P(null);function je(e,t){switch(G(be,t),G(ee,e),G($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bm(t),e=xm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C($),G($,e)}function Ae(){C($),C(ee),C(be)}function Ee(e){e.memoizedState!==null&&G(Se,e);var t=$.current,n=xm(t,e.type);t!==n&&(G(ee,e),G($,n))}function Re(e){ee.current===e&&(C($),C(ee)),Se.current===e&&(C(Se),Eu._currentValue=he)}var qe,Xe;function M(e){if(qe===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qe=t&&t[1]||"",Xe=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+e+Xe}var me=!1;function W(e,t){if(!e||me)return"";me=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(t){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(He){var Fe=He}Reflect.construct(e,[],Ke)}else{try{Ke.call()}catch(He){Fe=He}e.call(Ke.prototype)}}else{try{throw Error()}catch(He){Fe=He}(Ke=e())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(He){if(He&&Fe&&typeof He.stack=="string")return[He.stack,Fe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),z=v[0],K=v[1];if(z&&K){var ve=z.split(`
`),Ue=K.split(`
`);for(b=c=0;c<ve.length&&!ve[c].includes("DetermineComponentFrameRoot");)c++;for(;b<Ue.length&&!Ue[b].includes("DetermineComponentFrameRoot");)b++;if(c===ve.length||b===Ue.length)for(c=ve.length-1,b=Ue.length-1;1<=c&&0<=b&&ve[c]!==Ue[b];)b--;for(;1<=c&&0<=b;c--,b--)if(ve[c]!==Ue[b]){if(c!==1||b!==1)do if(c--,b--,0>b||ve[c]!==Ue[b]){var We=`
`+ve[c].replace(" at new "," at ");return e.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",e.displayName)),We}while(1<=c&&0<=b);break}}}finally{me=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?M(n):""}function le(e,t){switch(e.tag){case 26:case 27:case 5:return M(e.type);case 16:return M("Lazy");case 13:return e.child!==t&&t!==null?M("Suspense Fallback"):M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return W(e.type,!1);case 11:return W(e.type.render,!1);case 1:return W(e.type,!0);case 31:return M("Activity");default:return""}}function te(e){try{var t="",n=null;do t+=le(e,n),n=e,e=e.return;while(e);return t}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var de=Object.prototype.hasOwnProperty,ke=a.unstable_scheduleCallback,Le=a.unstable_cancelCallback,xe=a.unstable_shouldYield,Oe=a.unstable_requestPaint,De=a.unstable_now,Ge=a.unstable_getCurrentPriorityLevel,at=a.unstable_ImmediatePriority,ct=a.unstable_UserBlockingPriority,dt=a.unstable_NormalPriority,ft=a.unstable_LowPriority,Lt=a.unstable_IdlePriority,rt=a.log,Cn=a.unstable_setDisableYieldValue,ht=null,an=null;function zt(e){if(typeof rt=="function"&&Cn(e),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(ht,e)}catch{}}var St=Math.clz32?Math.clz32:lr,Ba=Math.log,Ht=Math.LN2;function lr(e){return e>>>=0,e===0?32:31-(Ba(e)/Ht|0)|0}var Tt=256,In=262144,Zn=4194304;function Gt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _t(e,t,n){var c=e.pendingLanes;if(c===0)return 0;var b=0,v=e.suspendedLanes,z=e.pingedLanes;e=e.warmLanes;var K=c&134217727;return K!==0?(c=K&~v,c!==0?b=Gt(c):(z&=K,z!==0?b=Gt(z):n||(n=K&~e,n!==0&&(b=Gt(n))))):(K=c&~v,K!==0?b=Gt(K):z!==0?b=Gt(z):n||(n=c&~e,n!==0&&(b=Gt(n)))),b===0?0:t!==0&&t!==b&&(t&v)===0&&(v=b&-b,n=t&-t,v>=n||v===32&&(n&4194048)!==0)?t:b}function qt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Si(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var e=Zn;return Zn<<=1,(Zn&62914560)===0&&(Zn=4194304),e}function Wa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Aa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Nt(e,t,n,c,b,v){var z=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var K=e.entanglements,ve=e.expirationTimes,Ue=e.hiddenUpdates;for(n=z&~n;0<n;){var We=31-St(n),Ke=1<<We;K[We]=0,ve[We]=-1;var Fe=Ue[We];if(Fe!==null)for(Ue[We]=null,We=0;We<Fe.length;We++){var He=Fe[We];He!==null&&(He.lane&=-536870913)}n&=~Ke}c!==0&&$a(e,c,0),v!==0&&b===0&&e.tag!==0&&(e.suspendedLanes|=v&~(z&~t))}function $a(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var c=31-St(t);e.entangledLanes|=t,e.entanglements[c]=e.entanglements[c]|1073741824|n&261930}function cr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var c=31-St(n),b=1<<c;b&t|e[c]&t&&(e[c]|=t),n&=~b}}function la(e,t){var n=t&-t;return n=(n&42)!==0?1:dn(n),(n&(e.suspendedLanes|t))!==0?0:n}function dn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ln(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xa(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:Fm(e.type))}function Yr(e,t){var n=ae.p;try{return ae.p=e,t()}finally{ae.p=n}}var ca=Math.random().toString(36).slice(2),ln="__reactFiber$"+ca,bn="__reactProps$"+ca,ua="__reactContainer$"+ca,fn="__reactEvents$"+ca,Xa="__reactListeners$"+ca,yr="__reactHandles$"+ca,Wr="__reactResources$"+ca,ur="__reactMarker$"+ca;function Za(e){delete e[ln],delete e[bn],delete e[fn],delete e[Xa],delete e[yr]}function Ja(e){var t=e[ln];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ua]||n[ln]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_m(e);e!==null;){if(n=e[ln])return n;e=_m(e)}return t}e=n,n=e.parentNode}return null}function tt(e){if(e=e[ln]||e[ua]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function st(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function en(e){var t=e[Wr];return t||(t=e[Wr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pt(e){e[ur]=!0}var nn=new Set,ka={};function Sn(e,t){Qn(e,t),Qn(e+"Capture",t)}function Qn(e,t){for(ka[e]=t,e=0;e<t.length;e++)nn.add(t[e])}var Jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),al={},Hl={};function io(e){return de.call(Hl,e)?!0:de.call(al,e)?!1:Jc.test(e)?Hl[e]=!0:(al[e]=!0,!1)}function so(e,t,n){if(io(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var c=t.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function En(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function wr(e,t,n,c){if(c===null)e.removeAttribute(n);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+c)}}function Pa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function il(e,t,n){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var b=c.get,v=c.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return b.call(this)},set:function(z){n=""+z,v.call(this,z)}}),Object.defineProperty(e,t,{enumerable:c.enumerable}),{getValue:function(){return n},setValue:function(z){n=""+z},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sl(e){if(!e._valueTracker){var t=rl(e)?"checked":"value";e._valueTracker=il(e,t,""+e[t])}}function Nr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),c="";return e&&(c=rl(e)?e.checked?"true":"false":e.value),e=c,e!==n?(t.setValue(e),!0):!1}function ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qa=/[\n"\\]/g;function Ca(e){return e.replace(Qa,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function oo(e,t,n,c,b,v,z,K){e.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?e.type=z:e.removeAttribute("type"),t!=null?z==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pa(t)):e.value!==""+Pa(t)&&(e.value=""+Pa(t)):z!=="submit"&&z!=="reset"||e.removeAttribute("value"),t!=null?lo(e,z,Pa(t)):n!=null?lo(e,z,Pa(n)):c!=null&&e.removeAttribute("value"),b==null&&v!=null&&(e.defaultChecked=!!v),b!=null&&(e.checked=b&&typeof b!="function"&&typeof b!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?e.name=""+Pa(K):e.removeAttribute("name")}function Gl(e,t,n,c,b,v,z,K){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.type=v),t!=null||n!=null){if(!(v!=="submit"&&v!=="reset"||t!=null)){sl(e);return}n=n!=null?""+Pa(n):"",t=t!=null?""+Pa(t):n,K||t===e.value||(e.value=t),e.defaultValue=t}c=c??b,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=K?e.checked:!!c,e.defaultChecked=!!c,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(e.name=z),sl(e)}function lo(e,t,n){t==="number"&&ji(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Wi(e,t,n,c){if(e=e.options,t){t={};for(var b=0;b<n.length;b++)t["$"+n[b]]=!0;for(n=0;n<e.length;n++)b=t.hasOwnProperty("$"+e[n].value),e[n].selected!==b&&(e[n].selected=b),b&&c&&(e[n].defaultSelected=!0)}else{for(n=""+Pa(n),t=null,b=0;b<e.length;b++){if(e[b].value===n){e[b].selected=!0,c&&(e[b].defaultSelected=!0);return}t!==null||e[b].disabled||(t=e[b])}t!==null&&(t.selected=!0)}}function ol(e,t,n){if(t!=null&&(t=""+Pa(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Pa(n):""}function Vl(e,t,n,c){if(t==null){if(c!=null){if(n!=null)throw Error(o(92));if(oe(c)){if(1<c.length)throw Error(o(93));c=c[0]}n=c}n==null&&(n=""),t=n}n=Pa(t),e.defaultValue=n,c=e.textContent,c===n&&c!==""&&c!==null&&(e.value=c),sl(e)}function li(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(e,t,n){var c=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?c?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":c?e.setProperty(t,n):typeof n!="number"||n===0||Qc.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Wl(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var c in n)!n.hasOwnProperty(c)||t!=null&&t.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var b in t)c=t[b],t.hasOwnProperty(b)&&n[b]!==c&&Yl(e,b,c)}else for(var v in t)t.hasOwnProperty(v)&&Yl(e,v,t[v])}function $r(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(e){return uo.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Tn(){}var ll=null;function fo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jt=null,$i=null;function $l(e){var t=tt(e);if(t&&(e=t.stateNode)){var n=e[bn]||null;e:switch(e=t.stateNode,t.type){case"input":if(oo(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ca(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var c=n[t];if(c!==e&&c.form===e.form){var b=c[bn]||null;if(!b)throw Error(o(90));oo(c,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(t=0;t<n.length;t++)c=n[t],c.form===e.form&&Nr(c)}break e;case"textarea":ol(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Wi(e,!!n.multiple,t,!1)}}}var Sr=!1;function cl(e,t,n){if(Sr)return e(t,n);Sr=!0;try{var c=e(t);return c}finally{if(Sr=!1,(jt!==null||$i!==null)&&(bd(),jt&&(t=jt,e=$i,$i=jt=null,$l(t),e)))for(t=0;t<e.length;t++)$l(e[t])}}function Xi(e,t){var n=e.stateNode;if(n===null)return null;var c=n[bn]||null;if(c===null)return null;n=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ks=!1;if(Ka)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){ks=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{ks=!1}var ci=null,ul=null,Zi=null;function Ji(){if(Zi)return Zi;var e,t=ul,n=t.length,c,b="value"in ci?ci.value:ci.textContent,v=b.length;for(e=0;e<n&&t[e]===b[e];e++);var z=n-e;for(c=1;c<=z&&t[n-c]===b[v-c];c++);return Zi=b.slice(e,1<c?1-c:void 0)}function Xr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ho(){return!0}function Qi(){return!1}function da(e){function t(n,c,b,v,z){this._reactName=n,this._targetInst=b,this.type=c,this.nativeEvent=v,this.target=z,this.currentTarget=null;for(var K in e)e.hasOwnProperty(K)&&(n=e[K],this[K]=n?n(v):v[K]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ho:Qi,this.isPropagationStopped=Qi,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),t}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=da(jr),Ki=w({},jr,{view:0,detail:0}),Xl=da(Ki),po,Zr,_r,mo=w({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:es,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?(po=e.screenX-_r.screenX,Zr=e.screenY-_r.screenY):Zr=po=0,_r=e),po)},movementY:function(e){return"movementY"in e?e.movementY:Zr}}),_i=da(mo),Jr=w({},mo,{dataTransfer:0}),dl=da(Jr),Es=w({},Ki,{relatedTarget:0}),fl=da(Es),go=w({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kc=da(go),hl=w({},jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pl=da(hl),Zl=w({},jr,{data:0}),Ts=da(Zl),ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Jl[e])?!!t[e]:!1}function es(){return eu}var Os=w({},Ki,{key:function(e){if(e.key){var t=ml[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:es,charCode:function(e){return e.type==="keypress"?Xr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bl=da(Os),ts=w({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bo=da(ts),S=w({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:es}),V=da(S),pe=w({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ye=da(pe),ze=w({},mo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=da(ze),nt=w({},jr,{newState:0,oldState:0}),ut=da(nt),vt=[9,13,27,32],Ot=Ka&&"CompositionEvent"in window,Mt=null;Ka&&"documentMode"in document&&(Mt=document.documentMode);var Xt=Ka&&"TextEvent"in window&&!Mt,On=Ka&&(!Ot||Mt&&8<Mt&&11>=Mt),Rn=" ",Vn=!1;function va(e,t){switch(e){case"keyup":return vt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function dr(e,t){switch(e){case"compositionend":return aa(t);case"keypress":return t.which!==32?null:(Vn=!0,Rn);case"textInput":return e=t.data,e===Rn&&Vn?null:e;default:return null}}function Ai(e,t){if(La)return e==="compositionend"||!Ot&&va(e,t)?(e=Ji(),Zi=ul=ci=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&t.locale!=="ko"?null:t.data;default:return null}}var Ql={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ql[e.type]:t==="textarea"}function vo(e,t,n,c){jt?$i?$i.push(c):$i=[c]:jt=c,t=jd(t,"onChange"),0<t.length&&(n=new Ls("onChange","change",null,n,c),e.push({event:n,listeners:t}))}var ui=null,ki=null;function xl(e){dm(e,0)}function Ci(e){var t=st(e);if(Nr(t))return e}function Ua(e,t){if(e==="change")return t}var Rs=!1;if(Ka){var ns;if(Ka){var as="oninput"in document;if(!as){var yo=document.createElement("div");yo.setAttribute("oninput","return;"),as=typeof yo.oninput=="function"}ns=as}else ns=!1;Rs=ns&&(!document.documentMode||9<document.documentMode)}function Fa(){ui&&(ui.detachEvent("onpropertychange",Kl),ki=ui=null)}function Kl(e){if(e.propertyName==="value"&&Ci(ki)){var t=[];vo(t,ki,e,fo(e)),cl(xl,t)}}function vl(e,t,n){e==="focusin"?(Fa(),ui=t,ki=n,ui.attachEvent("onpropertychange",Kl)):e==="focusout"&&Fa()}function ec(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ci(ki)}function Qr(e,t){if(e==="click")return Ci(t)}function yl(e,t){if(e==="input"||e==="change")return Ci(t)}function tu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qa=typeof Object.is=="function"?Object.is:tu;function Ar(e,t){if(qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),c=Object.keys(t);if(n.length!==c.length)return!1;for(c=0;c<n.length;c++){var b=n[c];if(!de.call(t,b)||!qa(e[b],t[b]))return!1}return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kr(e,t){var n=fr(e);e=0;for(var c;n;){if(n.nodeType===3){if(c=e+n.textContent.length,e<=t&&c>=t)return{node:n,offset:t-e};e=c}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fr(n)}}function Li(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Li(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ji(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ji(e.document)}return t}function ei(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wo=Ka&&"documentMode"in document&&11>=document.documentMode,Ea=null,rs=null,Ei=null,di=!1;function Cr(e,t,n){var c=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;di||Ea==null||Ea!==ji(c)||(c=Ea,"selectionStart"in c&&ei(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ei&&Ar(Ei,c)||(Ei=c,c=jd(rs,"onSelect"),0<c.length&&(t=new Ls("onSelect","select",null,t,n),e.push({event:t,listeners:c}),t.target=Ea)))}function Ha(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lr={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},is={},ss={};Ka&&(ss=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function er(e){if(is[e])return is[e];if(!Lr[e])return e;var t=Lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ss)return is[e]=t[n];return e}var No=er("animationend"),hr=er("animationiteration"),fi=er("animationstart"),xn=er("transitionrun"),vn=er("transitionstart"),Yn=er("transitioncancel"),Kn=er("transitionend"),hi=new Map,pi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pi.push("scrollEnd");function Ta(e,t){hi.set(e,t),Sn(t,[e])}var Ms=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pr=[],zs=0,tc=0;function wl(){for(var e=zs,t=tc=zs=0;t<e;){var n=pr[t];pr[t++]=null;var c=pr[t];pr[t++]=null;var b=pr[t];pr[t++]=null;var v=pr[t];if(pr[t++]=null,c!==null&&b!==null){var z=c.pending;z===null?b.next=b:(b.next=z.next,z.next=b),c.pending=b}v!==0&&Sl(n,b,v)}}function Nl(e,t,n,c){pr[zs++]=e,pr[zs++]=t,pr[zs++]=n,pr[zs++]=c,tc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function nc(e,t,n,c){return Nl(e,t,n,c),Oa(e)}function Ti(e,t){return Nl(e,null,null,t),Oa(e)}function Sl(e,t,n){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n);for(var b=!1,v=e.return;v!==null;)v.childLanes|=n,c=v.alternate,c!==null&&(c.childLanes|=n),v.tag===22&&(e=v.stateNode,e===null||e._visibility&1||(b=!0)),e=v,v=v.return;return e.tag===3?(v=e.stateNode,b&&t!==null&&(b=31-St(n),e=v.hiddenUpdates,c=e[b],c===null?e[b]=[t]:c.push(t),t.lane=n|536870912),v):null}function Oa(e){if(50<Su)throw Su=0,Zf=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ya={};function ac(e,t,n,c){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(e,t,n,c){return new ac(e,t,n,c)}function rc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Er(e,t){var n=e.alternate;return n===null?(n=Ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jl(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function So(e,t,n,c,b,v){var z=0;if(c=e,typeof e=="function")rc(e)&&(z=1);else if(typeof e=="string")z=kg(e,n,$.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=Ra(31,n,t,b),e.elementType=ie,e.lanes=v,e;case N:return os(n.children,b,v,t);case A:z=8,b|=24;break;case _:return e=Ra(12,n,t,b|2),e.elementType=_,e.lanes=v,e;case B:return e=Ra(13,n,t,b),e.elementType=B,e.lanes=v,e;case ce:return e=Ra(19,n,t,b),e.elementType=ce,e.lanes=v,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:z=10;break e;case T:z=9;break e;case F:z=11;break e;case U:z=14;break e;case q:z=16,c=null;break e}z=29,n=Error(o(130,e===null?"null":typeof e,"")),c=null}return t=Ra(z,n,t,b),t.elementType=e,t.type=c,t.lanes=v,t}function os(e,t,n,c){return e=Ra(7,e,c,t),e.lanes=n,e}function _l(e,t,n){return e=Ra(6,e,null,t),e.lanes=n,e}function ic(e){var t=Ra(18,null,null,0);return t.stateNode=e,t}function jo(e,t,n){return t=Ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sc=new WeakMap;function Tr(e,t){if(typeof e=="object"&&e!==null){var n=sc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:te(t)},sc.set(e,t),t)}return{value:e,source:t,stack:te(t)}}var _o=[],Ds=0,oc=null,Al=0,Or=[],Rr=0,ls=null,Mr=1,zr="";function mr(e,t){_o[Ds++]=Al,_o[Ds++]=oc,oc=e,Al=t}function Zu(e,t,n){Or[Rr++]=Mr,Or[Rr++]=zr,Or[Rr++]=ls,ls=e;var c=Mr;e=zr;var b=32-St(c)-1;c&=~(1<<b),n+=1;var v=32-St(t)+b;if(30<v){var z=b-b%5;v=(c&(1<<z)-1).toString(32),c>>=z,b-=z,Mr=1<<32-St(t)+b|n<<b|c,zr=v+e}else Mr=1<<v|n<<b|c,zr=e}function nu(e){e.return!==null&&(mr(e,1),Zu(e,1,0))}function lc(e){for(;e===oc;)oc=_o[--Ds],_o[Ds]=null,Al=_o[--Ds],_o[Ds]=null;for(;e===ls;)ls=Or[--Rr],Or[Rr]=null,zr=Or[--Rr],Or[Rr]=null,Mr=Or[--Rr],Or[Rr]=null}function Ju(e,t){Or[Rr++]=Mr,Or[Rr++]=zr,Or[Rr++]=ls,Mr=t.id,zr=t.overflow,ls=e}var wa=null,jn=null,Vt=!1,Ga=null,Bn=!1,ti=Error(o(519));function cs(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ao(Tr(t,e)),ti}function au(e){var t=e.stateNode,n=e.type,c=e.memoizedProps;switch(t[ln]=e,t[bn]=c,n){case"dialog":$t("cancel",t),$t("close",t);break;case"iframe":case"object":case"embed":$t("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)$t(_u[n],t);break;case"source":$t("error",t);break;case"img":case"image":case"link":$t("error",t),$t("load",t);break;case"details":$t("toggle",t);break;case"input":$t("invalid",t),Gl(t,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$t("invalid",t);break;case"textarea":$t("invalid",t),Vl(t,c.value,c.defaultValue,c.children)}n=c.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||c.suppressHydrationWarning===!0||mm(t.textContent,n)?(c.popover!=null&&($t("beforetoggle",t),$t("toggle",t)),c.onScroll!=null&&$t("scroll",t),c.onScrollEnd!=null&&$t("scrollend",t),c.onClick!=null&&(t.onclick=Tn),t=!0):t=!1,t||cs(e,!0)}function Oi(e){for(wa=e.return;wa;)switch(wa.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:wa=wa.return}}function Na(e){if(e!==wa)return!1;if(!Vt)return Oi(e),Vt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||dh(e.type,e.memoizedProps)),n=!n),n&&jn&&cs(e),Oi(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));jn=jm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));jn=jm(e)}else t===27?(t=jn,Uo(e.type)?(e=gh,gh=null,jn=e):jn=t):jn=wa?wi(e.stateNode.nextSibling):null;return!0}function Is(){jn=wa=null,Vt=!1}function ru(){var e=Ga;return e!==null&&(Fr===null?Fr=e:Fr.push.apply(Fr,e),Ga=null),e}function Ao(e){Ga===null?Ga=[e]:Ga.push(e)}var cc=P(null),us=null,mi=null;function ds(e,t,n){G(cc,t._currentValue),t._currentValue=n}function Dr(e){e._currentValue=cc.current,C(cc)}function ko(e,t,n){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===n)break;e=e.return}}function Bs(e,t,n,c){var b=e.child;for(b!==null&&(b.return=e);b!==null;){var v=b.dependencies;if(v!==null){var z=b.child;v=v.firstContext;e:for(;v!==null;){var K=v;v=b;for(var ve=0;ve<t.length;ve++)if(K.context===t[ve]){v.lanes|=n,K=v.alternate,K!==null&&(K.lanes|=n),ko(v.return,n,e),c||(z=null);break e}v=K.next}}else if(b.tag===18){if(z=b.return,z===null)throw Error(o(341));z.lanes|=n,v=z.alternate,v!==null&&(v.lanes|=n),ko(z,n,e),z=null}else z=b.child;if(z!==null)z.return=b;else for(z=b;z!==null;){if(z===e){z=null;break}if(b=z.sibling,b!==null){b.return=z.return,z=b;break}z=z.return}b=z}}function fs(e,t,n,c){e=null;for(var b=t,v=!1;b!==null;){if(!v){if((b.flags&524288)!==0)v=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var z=b.alternate;if(z===null)throw Error(o(387));if(z=z.memoizedProps,z!==null){var K=b.type;qa(b.pendingProps.value,z.value)||(e!==null?e.push(K):e=[K])}}else if(b===Se.current){if(z=b.alternate,z===null)throw Error(o(387));z.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(e!==null?e.push(Eu):e=[Eu])}b=b.return}e!==null&&Bs(t,e,n,c),t.flags|=262144}function uc(e){for(e=e.firstContext;e!==null;){if(!qa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hs(e){us=e,mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Sa(e){return Qu(us,e)}function dc(e,t){return us===null&&hs(e),Qu(e,t)}function Qu(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},mi===null){if(e===null)throw Error(o(308));mi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else mi=mi.next=t;return n}var mf=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,c){e.push(c)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},gf=a.unstable_scheduleCallback,bf=a.unstable_NormalPriority,Wn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Co(){return{controller:new mf,data:new Map,refCount:0}}function kl(e){e.refCount--,e.refCount===0&&gf(bf,function(){e.controller.abort()})}var Cl=null,fc=0,f=0,x=null;function k(e,t){if(Cl===null){var n=Cl=[];fc=0,f=nh(),x={status:"pending",value:void 0,then:function(c){n.push(c)}}}return fc++,t.then(R,R),t}function R(){if(--fc===0&&Cl!==null){x!==null&&(x.status="fulfilled");var e=Cl;Cl=null,f=0,x=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function H(e,t){var n=[],c={status:"pending",value:null,reason:null,then:function(b){n.push(b)}};return e.then(function(){c.status="fulfilled",c.value=t;for(var b=0;b<n.length;b++)(0,n[b])(t)},function(b){for(c.status="rejected",c.reason=b,b=0;b<n.length;b++)(0,n[b])(void 0)}),c}var X=J.S;J.S=function(e,t){P0=De(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&k(e,t),X!==null&&X(e,t)};var Z=P(null);function Q(){var e=Z.current;return e!==null?e:An.pooledCache}function re(e,t){t===null?G(Z,Z.current):G(Z,t.pool)}function ue(){var e=Q();return e===null?null:{parent:Wn._currentValue,pool:e}}var we=Error(o(460)),Be=Error(o(474)),Ie=Error(o(542)),Te={then:function(){}};function Qe(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ve(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Tn,Tn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,et(e),e;default:if(typeof t.status=="string")t.then(Tn,Tn);else{if(e=An,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(c){if(t.status==="pending"){var b=t;b.status="fulfilled",b.value=c}},function(c){if(t.status==="pending"){var b=t;b.status="rejected",b.reason=c}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,et(e),e}throw Ce=t,we}}function Ne(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ce=n,we):n}}var Ce=null;function Ze(){if(Ce===null)throw Error(o(459));var e=Ce;return Ce=null,e}function et(e){if(e===we||e===Ie)throw Error(o(483))}var $e=null,lt=0;function it(e){var t=lt;return lt+=1,$e===null&&($e=[]),Ve($e,e,t)}function xt(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ot(e,t){throw t.$$typeof===j?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function tn(e){function t(Me,_e){if(e){var Pe=Me.deletions;Pe===null?(Me.deletions=[_e],Me.flags|=16):Pe.push(_e)}}function n(Me,_e){if(!e)return null;for(;_e!==null;)t(Me,_e),_e=_e.sibling;return null}function c(Me){for(var _e=new Map;Me!==null;)Me.key!==null?_e.set(Me.key,Me):_e.set(Me.index,Me),Me=Me.sibling;return _e}function b(Me,_e){return Me=Er(Me,_e),Me.index=0,Me.sibling=null,Me}function v(Me,_e,Pe){return Me.index=Pe,e?(Pe=Me.alternate,Pe!==null?(Pe=Pe.index,Pe<_e?(Me.flags|=67108866,_e):Pe):(Me.flags|=67108866,_e)):(Me.flags|=1048576,_e)}function z(Me){return e&&Me.alternate===null&&(Me.flags|=67108866),Me}function K(Me,_e,Pe,Je){return _e===null||_e.tag!==6?(_e=_l(Pe,Me.mode,Je),_e.return=Me,_e):(_e=b(_e,Pe),_e.return=Me,_e)}function ve(Me,_e,Pe,Je){var yt=Pe.type;return yt===N?We(Me,_e,Pe.props.children,Je,Pe.key):_e!==null&&(_e.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===q&&Ne(yt)===_e.type)?(_e=b(_e,Pe.props),xt(_e,Pe),_e.return=Me,_e):(_e=So(Pe.type,Pe.key,Pe.props,null,Me.mode,Je),xt(_e,Pe),_e.return=Me,_e)}function Ue(Me,_e,Pe,Je){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Pe.containerInfo||_e.stateNode.implementation!==Pe.implementation?(_e=jo(Pe,Me.mode,Je),_e.return=Me,_e):(_e=b(_e,Pe.children||[]),_e.return=Me,_e)}function We(Me,_e,Pe,Je,yt){return _e===null||_e.tag!==7?(_e=os(Pe,Me.mode,Je,yt),_e.return=Me,_e):(_e=b(_e,Pe),_e.return=Me,_e)}function Ke(Me,_e,Pe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=_l(""+_e,Me.mode,Pe),_e.return=Me,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case g:return Pe=So(_e.type,_e.key,_e.props,null,Me.mode,Pe),xt(Pe,_e),Pe.return=Me,Pe;case L:return _e=jo(_e,Me.mode,Pe),_e.return=Me,_e;case q:return _e=Ne(_e),Ke(Me,_e,Pe)}if(oe(_e)||O(_e))return _e=os(_e,Me.mode,Pe,null),_e.return=Me,_e;if(typeof _e.then=="function")return Ke(Me,it(_e),Pe);if(_e.$$typeof===D)return Ke(Me,dc(Me,_e),Pe);ot(Me,_e)}return null}function Fe(Me,_e,Pe,Je){var yt=_e!==null?_e.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return yt!==null?null:K(Me,_e,""+Pe,Je);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return Pe.key===yt?ve(Me,_e,Pe,Je):null;case L:return Pe.key===yt?Ue(Me,_e,Pe,Je):null;case q:return Pe=Ne(Pe),Fe(Me,_e,Pe,Je)}if(oe(Pe)||O(Pe))return yt!==null?null:We(Me,_e,Pe,Je,null);if(typeof Pe.then=="function")return Fe(Me,_e,it(Pe),Je);if(Pe.$$typeof===D)return Fe(Me,_e,dc(Me,Pe),Je);ot(Me,Pe)}return null}function He(Me,_e,Pe,Je,yt){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Me=Me.get(Pe)||null,K(_e,Me,""+Je,yt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case g:return Me=Me.get(Je.key===null?Pe:Je.key)||null,ve(_e,Me,Je,yt);case L:return Me=Me.get(Je.key===null?Pe:Je.key)||null,Ue(_e,Me,Je,yt);case q:return Je=Ne(Je),He(Me,_e,Pe,Je,yt)}if(oe(Je)||O(Je))return Me=Me.get(Pe)||null,We(_e,Me,Je,yt,null);if(typeof Je.then=="function")return He(Me,_e,Pe,it(Je),yt);if(Je.$$typeof===D)return He(Me,_e,Pe,dc(_e,Je),yt);ot(_e,Je)}return null}function pt(Me,_e,Pe,Je){for(var yt=null,sn=null,bt=_e,Ut=_e=0,Qt=null;bt!==null&&Ut<Pe.length;Ut++){bt.index>Ut?(Qt=bt,bt=null):Qt=bt.sibling;var on=Fe(Me,bt,Pe[Ut],Je);if(on===null){bt===null&&(bt=Qt);break}e&&bt&&on.alternate===null&&t(Me,bt),_e=v(on,_e,Ut),sn===null?yt=on:sn.sibling=on,sn=on,bt=Qt}if(Ut===Pe.length)return n(Me,bt),Vt&&mr(Me,Ut),yt;if(bt===null){for(;Ut<Pe.length;Ut++)bt=Ke(Me,Pe[Ut],Je),bt!==null&&(_e=v(bt,_e,Ut),sn===null?yt=bt:sn.sibling=bt,sn=bt);return Vt&&mr(Me,Ut),yt}for(bt=c(bt);Ut<Pe.length;Ut++)Qt=He(bt,Me,Ut,Pe[Ut],Je),Qt!==null&&(e&&Qt.alternate!==null&&bt.delete(Qt.key===null?Ut:Qt.key),_e=v(Qt,_e,Ut),sn===null?yt=Qt:sn.sibling=Qt,sn=Qt);return e&&bt.forEach(function(Vo){return t(Me,Vo)}),Vt&&mr(Me,Ut),yt}function kt(Me,_e,Pe,Je){if(Pe==null)throw Error(o(151));for(var yt=null,sn=null,bt=_e,Ut=_e=0,Qt=null,on=Pe.next();bt!==null&&!on.done;Ut++,on=Pe.next()){bt.index>Ut?(Qt=bt,bt=null):Qt=bt.sibling;var Vo=Fe(Me,bt,on.value,Je);if(Vo===null){bt===null&&(bt=Qt);break}e&&bt&&Vo.alternate===null&&t(Me,bt),_e=v(Vo,_e,Ut),sn===null?yt=Vo:sn.sibling=Vo,sn=Vo,bt=Qt}if(on.done)return n(Me,bt),Vt&&mr(Me,Ut),yt;if(bt===null){for(;!on.done;Ut++,on=Pe.next())on=Ke(Me,on.value,Je),on!==null&&(_e=v(on,_e,Ut),sn===null?yt=on:sn.sibling=on,sn=on);return Vt&&mr(Me,Ut),yt}for(bt=c(bt);!on.done;Ut++,on=Pe.next())on=He(bt,Me,Ut,on.value,Je),on!==null&&(e&&on.alternate!==null&&bt.delete(on.key===null?Ut:on.key),_e=v(on,_e,Ut),sn===null?yt=on:sn.sibling=on,sn=on);return e&&bt.forEach(function(Bg){return t(Me,Bg)}),Vt&&mr(Me,Ut),yt}function Nn(Me,_e,Pe,Je){if(typeof Pe=="object"&&Pe!==null&&Pe.type===N&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:e:{for(var yt=Pe.key;_e!==null;){if(_e.key===yt){if(yt=Pe.type,yt===N){if(_e.tag===7){n(Me,_e.sibling),Je=b(_e,Pe.props.children),Je.return=Me,Me=Je;break e}}else if(_e.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===q&&Ne(yt)===_e.type){n(Me,_e.sibling),Je=b(_e,Pe.props),xt(Je,Pe),Je.return=Me,Me=Je;break e}n(Me,_e);break}else t(Me,_e);_e=_e.sibling}Pe.type===N?(Je=os(Pe.props.children,Me.mode,Je,Pe.key),Je.return=Me,Me=Je):(Je=So(Pe.type,Pe.key,Pe.props,null,Me.mode,Je),xt(Je,Pe),Je.return=Me,Me=Je)}return z(Me);case L:e:{for(yt=Pe.key;_e!==null;){if(_e.key===yt)if(_e.tag===4&&_e.stateNode.containerInfo===Pe.containerInfo&&_e.stateNode.implementation===Pe.implementation){n(Me,_e.sibling),Je=b(_e,Pe.children||[]),Je.return=Me,Me=Je;break e}else{n(Me,_e);break}else t(Me,_e);_e=_e.sibling}Je=jo(Pe,Me.mode,Je),Je.return=Me,Me=Je}return z(Me);case q:return Pe=Ne(Pe),Nn(Me,_e,Pe,Je)}if(oe(Pe))return pt(Me,_e,Pe,Je);if(O(Pe)){if(yt=O(Pe),typeof yt!="function")throw Error(o(150));return Pe=yt.call(Pe),kt(Me,_e,Pe,Je)}if(typeof Pe.then=="function")return Nn(Me,_e,it(Pe),Je);if(Pe.$$typeof===D)return Nn(Me,_e,dc(Me,Pe),Je);ot(Me,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,_e!==null&&_e.tag===6?(n(Me,_e.sibling),Je=b(_e,Pe),Je.return=Me,Me=Je):(n(Me,_e),Je=_l(Pe,Me.mode,Je),Je.return=Me,Me=Je),z(Me)):n(Me,_e)}return function(Me,_e,Pe,Je){try{lt=0;var yt=Nn(Me,_e,Pe,Je);return $e=null,yt}catch(bt){if(bt===we||bt===Ie)throw bt;var sn=Ra(29,bt,null,Me.mode);return sn.lanes=Je,sn.return=Me,sn}finally{}}}var Yt=tn(!0),Zt=tn(!1),Dt=!1;function cn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function At(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(un&2)!==0){var b=c.pending;return b===null?t.next=t:(t.next=b.next,b.next=t),c.pending=t,t=Oa(e),Sl(e,null,n),t}return Nl(e,c,t,n),Oa(e)}function fa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var c=t.lanes;c&=e.pendingLanes,n|=c,t.lanes=n,cr(e,n)}}function Pn(e,t){var n=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,n===c)){var b=null,v=null;if(n=n.firstBaseUpdate,n!==null){do{var z={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};v===null?b=v=z:v=v.next=z,n=n.next}while(n!==null);v===null?b=v=t:v=v.next=t}else b=v=t;n={baseState:c.baseState,firstBaseUpdate:b,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ma=!1;function Kt(){if(Ma){var e=x;if(e!==null)throw e}}function ja(e,t,n,c){Ma=!1;var b=e.updateQueue;Dt=!1;var v=b.firstBaseUpdate,z=b.lastBaseUpdate,K=b.shared.pending;if(K!==null){b.shared.pending=null;var ve=K,Ue=ve.next;ve.next=null,z===null?v=Ue:z.next=Ue,z=ve;var We=e.alternate;We!==null&&(We=We.updateQueue,K=We.lastBaseUpdate,K!==z&&(K===null?We.firstBaseUpdate=Ue:K.next=Ue,We.lastBaseUpdate=ve))}if(v!==null){var Ke=b.baseState;z=0,We=Ue=ve=null,K=v;do{var Fe=K.lane&-536870913,He=Fe!==K.lane;if(He?(Jt&Fe)===Fe:(c&Fe)===Fe){Fe!==0&&Fe===f&&(Ma=!0),We!==null&&(We=We.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var pt=e,kt=K;Fe=t;var Nn=n;switch(kt.tag){case 1:if(pt=kt.payload,typeof pt=="function"){Ke=pt.call(Nn,Ke,Fe);break e}Ke=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=kt.payload,Fe=typeof pt=="function"?pt.call(Nn,Ke,Fe):pt,Fe==null)break e;Ke=w({},Ke,Fe);break e;case 2:Dt=!0}}Fe=K.callback,Fe!==null&&(e.flags|=64,He&&(e.flags|=8192),He=b.callbacks,He===null?b.callbacks=[Fe]:He.push(Fe))}else He={lane:Fe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},We===null?(Ue=We=He,ve=Ke):We=We.next=He,z|=Fe;if(K=K.next,K===null){if(K=b.shared.pending,K===null)break;He=K,K=He.next,He.next=null,b.lastBaseUpdate=He,b.shared.pending=null}}while(!0);We===null&&(ve=Ke),b.baseState=ve,b.firstBaseUpdate=Ue,b.lastBaseUpdate=We,v===null&&(b.shared.lanes=0),zo|=z,e.lanes=z,e.memoizedState=Ke}}function tr(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ra(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)tr(n[e],t)}var Un=P(null),ha=P(0);function gr(e,t){e=Zs,G(ha,e),G(Un,t),Zs=e|t.baseLanes}function Ir(){G(ha,Zs),G(Un,Un.current)}function ea(){Zs=ha.current,C(Un),C(ha)}var $n=P(null),pa=null;function br(e){var t=e.alternate;G(Fn,Fn.current&1),G($n,e),pa===null&&(t===null||Un.current!==null||t.memoizedState!==null)&&(pa=e)}function gi(e){G(Fn,Fn.current),G($n,e),pa===null&&(pa=e)}function Mn(e){e.tag===22?(G(Fn,Fn.current),G($n,e),pa===null&&(pa=e)):bi()}function bi(){G(Fn,Fn.current),G($n,$n.current)}function nr(e){C($n),pa===e&&(pa=null),C(Fn)}var Fn=P(0);function Ps(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ph(n)||mh(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xr=0,Rt=null,Ft=null,_n=null,Ri=!1,Us=!1,xi=!1,Ll=0,ps=0,ms=null,hc=0;function yn(){throw Error(o(321))}function iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qa(e[n],t[n]))return!1;return!0}function su(e,t,n,c,b,v){return xr=v,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,J.H=e===null||e.memoizedState===null?Zp:_f,xi=!1,v=n(c,b),xi=!1,Us&&(v=Mi(t,n,c,b)),pc(e),v}function pc(e){J.H=pu;var t=Ft!==null&&Ft.next!==null;if(xr=0,_n=Ft=Rt=null,Ri=!1,ps=0,ms=null,t)throw Error(o(300));e===null||ga||(e=e.dependencies,e!==null&&uc(e)&&(ga=!0))}function Mi(e,t,n,c){Rt=e;var b=0;do{if(Us&&(ms=null),ps=0,Us=!1,25<=b)throw Error(o(301));if(b+=1,_n=Ft=null,e.updateQueue!=null){var v=e.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=Jp,v=t(n,c)}while(Us);return v}function xf(){var e=J.H,t=e.useState()[0];return t=typeof t.then=="function"?gs(t):t,e=e.useState()[0],(Ft!==null?Ft.memoizedState:null)!==e&&(Rt.flags|=1024),t}function ou(){var e=Ll!==0;return Ll=0,e}function lu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function mc(e){if(Ri){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ri=!1}xr=0,_n=Ft=Rt=null,Us=!1,ps=Ll=0,ms=null}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Rt.memoizedState=_n=e:_n=_n.next=e,_n}function qn(){if(Ft===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=_n===null?Rt.memoizedState:_n.next;if(t!==null)_n=t,Ft=e;else{if(e===null)throw Rt.alternate===null?Error(o(467)):Error(o(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},_n===null?Rt.memoizedState=_n=e:_n=_n.next=e}return _n}function El(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gs(e){var t=ps;return ps+=1,ms===null&&(ms=[]),e=Ve(ms,e,t),t=Rt,(_n===null?t.memoizedState:_n.next)===null&&(t=t.alternate,J.H=t===null||t.memoizedState===null?Zp:_f),e}function Lo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return gs(e);if(e.$$typeof===D)return Sa(e)}throw Error(o(438,String(e)))}function Fs(e){var t=null,n=Rt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var c=Rt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(t={data:c.data.map(function(b){return b.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=El(),Rt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),c=0;c<e;c++)n[c]=se;return t.index++,n}function vi(e,t){return typeof t=="function"?t(e):t}function gc(e){var t=qn();return Eo(t,Ft,e)}function Eo(e,t,n){var c=e.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=n;var b=e.baseQueue,v=c.pending;if(v!==null){if(b!==null){var z=b.next;b.next=v.next,v.next=z}t.baseQueue=b=v,c.pending=null}if(v=e.baseState,b===null)e.memoizedState=v;else{t=b.next;var K=z=null,ve=null,Ue=t,We=!1;do{var Ke=Ue.lane&-536870913;if(Ke!==Ue.lane?(Jt&Ke)===Ke:(xr&Ke)===Ke){var Fe=Ue.revertLane;if(Fe===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),Ke===f&&(We=!0);else if((xr&Fe)===Fe){Ue=Ue.next,Fe===f&&(We=!0);continue}else Ke={lane:0,revertLane:Ue.revertLane,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},ve===null?(K=ve=Ke,z=v):ve=ve.next=Ke,Rt.lanes|=Fe,zo|=Fe;Ke=Ue.action,xi&&n(v,Ke),v=Ue.hasEagerState?Ue.eagerState:n(v,Ke)}else Fe={lane:Ke,revertLane:Ue.revertLane,gesture:Ue.gesture,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},ve===null?(K=ve=Fe,z=v):ve=ve.next=Fe,Rt.lanes|=Ke,zo|=Ke;Ue=Ue.next}while(Ue!==null&&Ue!==t);if(ve===null?z=v:ve.next=K,!qa(v,e.memoizedState)&&(ga=!0,We&&(n=x,n!==null)))throw n;e.memoizedState=v,e.baseState=z,e.baseQueue=ve,c.lastRenderedState=v}return b===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function bc(e){var t=qn(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var c=n.dispatch,b=n.pending,v=t.memoizedState;if(b!==null){n.pending=null;var z=b=b.next;do v=e(v,z.action),z=z.next;while(z!==b);qa(v,t.memoizedState)||(ga=!0),t.memoizedState=v,t.baseQueue===null&&(t.baseState=v),n.lastRenderedState=v}return[v,c]}function xc(e,t,n){var c=Rt,b=qn(),v=Vt;if(v){if(n===void 0)throw Error(o(407));n=n()}else n=t();var z=!qa((Ft||b).memoizedState,n);if(z&&(b.memoizedState=n,ga=!0),b=b.queue,vf(uu.bind(null,c,b,e),[e]),b.getSnapshot!==t||z||_n!==null&&_n.memoizedState.tag&1){if(c.flags|=2048,Hs(9,{destroy:void 0},cu.bind(null,c,b,n,t),null),An===null)throw Error(o(349));v||(xr&127)!==0||zi(c,t,n)}return n}function zi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rt.updateQueue,t===null?(t=El(),Rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cu(e,t,n,c){t.value=n,t.getSnapshot=c,Ku(t)&&du(e)}function uu(e,t,n){return n(function(){Ku(t)&&du(e)})}function Ku(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qa(e,n)}catch{return!0}}function du(e){var t=Ti(e,2);t!==null&&qr(t,e,2)}function bs(e){var t=ma();if(typeof e=="function"){var n=e;if(e=n(),xi){zt(!0);try{n()}finally{zt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t}function ed(e,t,n,c){return e.baseState=n,Eo(e,Ft,typeof c=="function"?c:vi)}function td(e,t,n,c,b){if(id(e))throw Error(o(485));if(e=t.action,e!==null){var v={payload:b,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){v.listeners.push(z)}};J.T!==null?n(!0):v.isTransition=!1,c(v),n=t.pending,n===null?(v.next=t.pending=v,nd(t,v)):(v.next=n.next,t.pending=n.next=v)}}function nd(e,t){var n=t.action,c=t.payload,b=e.state;if(t.isTransition){var v=J.T,z={};J.T=z;try{var K=n(b,c),ve=J.S;ve!==null&&ve(z,K),fu(e,t,K)}catch(Ue){qs(e,t,Ue)}finally{v!==null&&z.types!==null&&(v.types=z.types),J.T=v}}else try{v=n(b,c),fu(e,t,v)}catch(Ue){qs(e,t,Ue)}}function fu(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(c){ad(e,t,c)},function(c){return qs(e,t,c)}):ad(e,t,n)}function ad(e,t,n){t.status="fulfilled",t.value=n,vc(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,nd(e,n)))}function qs(e,t,n){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do t.status="rejected",t.reason=n,vc(t),t=t.next;while(t!==c)}e.action=null}function vc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tl(e,t){return t}function yi(e,t){if(Vt){var n=An.formState;if(n!==null){e:{var c=Rt;if(Vt){if(jn){t:{for(var b=jn,v=Bn;b.nodeType!==8;){if(!v){b=null;break t}if(b=wi(b.nextSibling),b===null){b=null;break t}}v=b.data,b=v==="F!"||v==="F"?b:null}if(b){jn=wi(b.nextSibling),c=b.data==="F!";break e}}cs(c)}c=!1}c&&(t=n[0])}}return n=ma(),n.memoizedState=n.baseState=t,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:t},n.queue=c,n=Wp.bind(null,Rt,c),c.dispatch=n,c=bs(!1),v=jf.bind(null,Rt,!1,c.queue),c=ma(),b={state:t,dispatch:null,action:e,pending:null},c.queue=b,n=td.bind(null,Rt,b,v,n),b.dispatch=n,c.memoizedState=e,[t,n,!1]}function Di(e){var t=qn();return Ii(t,Ft,e)}function Ii(e,t,n){if(t=Eo(e,t,Tl)[0],e=gc(vi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var c=gs(t)}catch(z){throw z===we?Ie:z}else c=t;t=qn();var b=t.queue,v=b.dispatch;return n!==t.memoizedState&&(Rt.flags|=2048,Hs(9,{destroy:void 0},yc.bind(null,b,n),null)),[c,v,e]}function yc(e,t){e.action=t}function wc(e){var t=qn(),n=Ft;if(n!==null)return Ii(t,n,e);qn(),t=t.memoizedState,n=qn();var c=n.queue.dispatch;return n.memoizedState=e,[t,c,!1]}function Hs(e,t,n,c){return e={tag:e,create:n,deps:c,inst:t,next:null},t=Rt.updateQueue,t===null&&(t=El(),Rt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(c=n.next,n.next=e,e.next=c,t.lastEffect=e),e}function rd(){return qn().memoizedState}function To(e,t,n,c){var b=ma();Rt.flags|=e,b.memoizedState=Hs(1|t,{destroy:void 0},n,c===void 0?null:c)}function Oo(e,t,n,c){var b=qn();c=c===void 0?null:c;var v=b.memoizedState.inst;Ft!==null&&c!==null&&iu(c,Ft.memoizedState.deps)?b.memoizedState=Hs(t,v,n,c):(Rt.flags|=e,b.memoizedState=Hs(1|t,v,n,c))}function Rp(e,t){To(8390656,8,e,t)}function vf(e,t){Oo(2048,8,e,t)}function O1(e){Rt.flags|=4;var t=Rt.updateQueue;if(t===null)t=El(),Rt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Mp(e){var t=qn().memoizedState;return O1({ref:t,nextImpl:e}),function(){if((un&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function zp(e,t){return Oo(4,2,e,t)}function Dp(e,t){return Oo(4,4,e,t)}function Ip(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bp(e,t,n){n=n!=null?n.concat([e]):null,Oo(4,4,Ip.bind(null,t,e),n)}function yf(){}function Pp(e,t){var n=qn();t=t===void 0?null:t;var c=n.memoizedState;return t!==null&&iu(t,c[1])?c[0]:(n.memoizedState=[e,t],e)}function Up(e,t){var n=qn();t=t===void 0?null:t;var c=n.memoizedState;if(t!==null&&iu(t,c[1]))return c[0];if(c=e(),xi){zt(!0);try{e()}finally{zt(!1)}}return n.memoizedState=[c,t],c}function wf(e,t,n){return n===void 0||(xr&1073741824)!==0&&(Jt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=F0(),Rt.lanes|=e,zo|=e,n)}function Fp(e,t,n,c){return qa(n,t)?n:Un.current!==null?(e=wf(e,n,c),qa(e,t)||(ga=!0),e):(xr&42)===0||(xr&1073741824)!==0&&(Jt&261930)===0?(ga=!0,e.memoizedState=n):(e=F0(),Rt.lanes|=e,zo|=e,t)}function qp(e,t,n,c,b){var v=ae.p;ae.p=v!==0&&8>v?v:8;var z=J.T,K={};J.T=K,jf(e,!1,t,n);try{var ve=b(),Ue=J.S;if(Ue!==null&&Ue(K,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var We=H(ve,c);hu(e,t,We,ri(e))}else hu(e,t,c,ri(e))}catch(Ke){hu(e,t,{then:function(){},status:"rejected",reason:Ke},ri())}finally{ae.p=v,z!==null&&K.types!==null&&(z.types=K.types),J.T=z}}function R1(){}function Nf(e,t,n,c){if(e.tag!==5)throw Error(o(476));var b=Hp(e).queue;qp(e,b,t,he,n===null?R1:function(){return Gp(e),n(c)})}function Hp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:he},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Gp(e){var t=Hp(e);t.next===null&&(t=e.alternate.memoizedState),hu(e,t.next.queue,{},ri())}function Sf(){return Sa(Eu)}function Vp(){return qn().memoizedState}function Yp(){return qn().memoizedState}function M1(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ri();e=At(n);var c=hn(t,e,n);c!==null&&(qr(c,t,n),fa(c,t,n)),t={cache:Co()},e.payload=t;return}t=t.return}}function z1(e,t,n){var c=ri();n={lane:c,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},id(e)?$p(t,n):(n=nc(e,t,n,c),n!==null&&(qr(n,e,c),Xp(n,t,c)))}function Wp(e,t,n){var c=ri();hu(e,t,n,c)}function hu(e,t,n,c){var b={lane:c,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(id(e))$p(t,b);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var z=t.lastRenderedState,K=v(z,n);if(b.hasEagerState=!0,b.eagerState=K,qa(K,z))return Nl(e,t,b,0),An===null&&wl(),!1}catch{}finally{}if(n=nc(e,t,b,c),n!==null)return qr(n,e,c),Xp(n,t,c),!0}return!1}function jf(e,t,n,c){if(c={lane:2,revertLane:nh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},id(e)){if(t)throw Error(o(479))}else t=nc(e,n,c,2),t!==null&&qr(t,e,2)}function id(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function $p(e,t){Us=Ri=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xp(e,t,n){if((n&4194048)!==0){var c=t.lanes;c&=e.pendingLanes,n|=c,t.lanes=n,cr(e,n)}}var pu={readContext:Sa,use:Lo,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};pu.useEffectEvent=yn;var Zp={readContext:Sa,use:Lo,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:Sa,useEffect:Rp,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,To(4194308,4,Ip.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){To(4,2,e,t)},useMemo:function(e,t){var n=ma();t=t===void 0?null:t;var c=e();if(xi){zt(!0);try{e()}finally{zt(!1)}}return n.memoizedState=[c,t],c},useReducer:function(e,t,n){var c=ma();if(n!==void 0){var b=n(t);if(xi){zt(!0);try{n(t)}finally{zt(!1)}}}else b=t;return c.memoizedState=c.baseState=b,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:b},c.queue=e,e=e.dispatch=z1.bind(null,Rt,e),[c.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:function(e){e=bs(e);var t=e.queue,n=Wp.bind(null,Rt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:yf,useDeferredValue:function(e,t){var n=ma();return wf(n,e,t)},useTransition:function(){var e=bs(!1);return e=qp.bind(null,Rt,e.queue,!0,!1),ma().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var c=Rt,b=ma();if(Vt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),An===null)throw Error(o(349));(Jt&127)!==0||zi(c,t,n)}b.memoizedState=n;var v={value:n,getSnapshot:t};return b.queue=v,Rp(uu.bind(null,c,v,e),[e]),c.flags|=2048,Hs(9,{destroy:void 0},cu.bind(null,c,v,n,t),null),n},useId:function(){var e=ma(),t=An.identifierPrefix;if(Vt){var n=zr,c=Mr;n=(c&~(1<<32-St(c)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ll++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=hc++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Sf,useFormState:yi,useActionState:yi,useOptimistic:function(e){var t=ma();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=jf.bind(null,Rt,!0,n),n.dispatch=t,[e,t]},useMemoCache:Fs,useCacheRefresh:function(){return ma().memoizedState=M1.bind(null,Rt)},useEffectEvent:function(e){var t=ma(),n={impl:e};return t.memoizedState=n,function(){if((un&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},_f={readContext:Sa,use:Lo,useCallback:Pp,useContext:Sa,useEffect:vf,useImperativeHandle:Bp,useInsertionEffect:zp,useLayoutEffect:Dp,useMemo:Up,useReducer:gc,useRef:rd,useState:function(){return gc(vi)},useDebugValue:yf,useDeferredValue:function(e,t){var n=qn();return Fp(n,Ft.memoizedState,e,t)},useTransition:function(){var e=gc(vi)[0],t=qn().memoizedState;return[typeof e=="boolean"?e:gs(e),t]},useSyncExternalStore:xc,useId:Vp,useHostTransitionStatus:Sf,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){var n=qn();return ed(n,Ft,e,t)},useMemoCache:Fs,useCacheRefresh:Yp};_f.useEffectEvent=Mp;var Jp={readContext:Sa,use:Lo,useCallback:Pp,useContext:Sa,useEffect:vf,useImperativeHandle:Bp,useInsertionEffect:zp,useLayoutEffect:Dp,useMemo:Up,useReducer:bc,useRef:rd,useState:function(){return bc(vi)},useDebugValue:yf,useDeferredValue:function(e,t){var n=qn();return Ft===null?wf(n,e,t):Fp(n,Ft.memoizedState,e,t)},useTransition:function(){var e=bc(vi)[0],t=qn().memoizedState;return[typeof e=="boolean"?e:gs(e),t]},useSyncExternalStore:xc,useId:Vp,useHostTransitionStatus:Sf,useFormState:wc,useActionState:wc,useOptimistic:function(e,t){var n=qn();return Ft!==null?ed(n,Ft,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Fs,useCacheRefresh:Yp};Jp.useEffectEvent=Mp;function Af(e,t,n,c){t=e.memoizedState,n=n(c,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kf={enqueueSetState:function(e,t,n){e=e._reactInternals;var c=ri(),b=At(c);b.payload=t,n!=null&&(b.callback=n),t=hn(e,b,c),t!==null&&(qr(t,e,c),fa(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var c=ri(),b=At(c);b.tag=1,b.payload=t,n!=null&&(b.callback=n),t=hn(e,b,c),t!==null&&(qr(t,e,c),fa(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ri(),c=At(n);c.tag=2,t!=null&&(c.callback=t),t=hn(e,c,n),t!==null&&(qr(t,e,n),fa(t,e,n))}};function Qp(e,t,n,c,b,v,z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,v,z):t.prototype&&t.prototype.isPureReactComponent?!Ar(n,c)||!Ar(b,v):!0}function Kp(e,t,n,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,c),t.state!==e&&kf.enqueueReplaceState(t,t.state,null)}function Ol(e,t){var n=t;if("ref"in t){n={};for(var c in t)c!=="ref"&&(n[c]=t[c])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var b in e)n[b]===void 0&&(n[b]=e[b])}return n}function e0(e){Ms(e)}function t0(e){console.error(e)}function n0(e){Ms(e)}function sd(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(c){setTimeout(function(){throw c})}}function a0(e,t,n){try{var c=e.onCaughtError;c(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Cf(e,t,n){return n=At(n),n.tag=3,n.payload={element:null},n.callback=function(){sd(e,t)},n}function r0(e){return e=At(e),e.tag=3,e}function i0(e,t,n,c){var b=n.type.getDerivedStateFromError;if(typeof b=="function"){var v=c.value;e.payload=function(){return b(v)},e.callback=function(){a0(t,n,c)}}var z=n.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(e.callback=function(){a0(t,n,c),typeof b!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})})}function D1(e,t,n,c,b){if(n.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(t=n.alternate,t!==null&&fs(t,n,b,!0),n=$n.current,n!==null){switch(n.tag){case 31:case 13:return pa===null?xd():n.alternate===null&&ta===0&&(ta=3),n.flags&=-257,n.flags|=65536,n.lanes=b,c===Te?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([c]):t.add(c),Kf(e,c,b)),!1;case 22:return n.flags|=65536,c===Te?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([c])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([c]):n.add(c)),Kf(e,c,b)),!1}throw Error(o(435,n.tag))}return Kf(e,c,b),xd(),!1}if(Vt)return t=$n.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=b,c!==ti&&(e=Error(o(422),{cause:c}),Ao(Tr(e,n)))):(c!==ti&&(t=Error(o(423),{cause:c}),Ao(Tr(t,n))),e=e.current.alternate,e.flags|=65536,b&=-b,e.lanes|=b,c=Tr(c,n),b=Cf(e.stateNode,c,b),Pn(e,b),ta!==4&&(ta=2)),!1;var v=Error(o(520),{cause:c});if(v=Tr(v,n),Nu===null?Nu=[v]:Nu.push(v),ta!==4&&(ta=2),t===null)return!0;c=Tr(c,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=b&-b,n.lanes|=e,e=Cf(n.stateNode,c,e),Pn(n,e),!1;case 1:if(t=n.type,v=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Do===null||!Do.has(v))))return n.flags|=65536,b&=-b,n.lanes|=b,b=r0(b),i0(b,e,n,c),Pn(n,b),!1}n=n.return}while(n!==null);return!1}var Lf=Error(o(461)),ga=!1;function Va(e,t,n,c){t.child=e===null?Zt(t,null,n,c):Yt(t,e.child,n,c)}function s0(e,t,n,c,b){n=n.render;var v=t.ref;if("ref"in c){var z={};for(var K in c)K!=="ref"&&(z[K]=c[K])}else z=c;return hs(t),c=su(e,t,n,z,v,b),K=ou(),e!==null&&!ga?(lu(e,t,b),Gs(e,t,b)):(Vt&&K&&nu(t),t.flags|=1,Va(e,t,c,b),t.child)}function o0(e,t,n,c,b){if(e===null){var v=n.type;return typeof v=="function"&&!rc(v)&&v.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=v,l0(e,t,v,c,b)):(e=So(n.type,null,c,t,t.mode,b),e.ref=t.ref,e.return=t,t.child=e)}if(v=e.child,!If(e,b)){var z=v.memoizedProps;if(n=n.compare,n=n!==null?n:Ar,n(z,c)&&e.ref===t.ref)return Gs(e,t,b)}return t.flags|=1,e=Er(v,c),e.ref=t.ref,e.return=t,t.child=e}function l0(e,t,n,c,b){if(e!==null){var v=e.memoizedProps;if(Ar(v,c)&&e.ref===t.ref)if(ga=!1,t.pendingProps=c=v,If(e,b))(e.flags&131072)!==0&&(ga=!0);else return t.lanes=e.lanes,Gs(e,t,b)}return Ef(e,t,n,c,b)}function c0(e,t,n,c){var b=c.children,v=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((t.flags&128)!==0){if(v=v!==null?v.baseLanes|n:n,e!==null){for(c=t.child=e.child,b=0;c!==null;)b=b|c.lanes|c.childLanes,c=c.sibling;c=b&~v}else c=0,t.child=null;return u0(e,t,v,n,c)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&re(t,v!==null?v.cachePool:null),v!==null?gr(t,v):Ir(),Mn(t);else return c=t.lanes=536870912,u0(e,t,v!==null?v.baseLanes|n:n,n,c)}else v!==null?(re(t,v.cachePool),gr(t,v),bi(),t.memoizedState=null):(e!==null&&re(t,null),Ir(),bi());return Va(e,t,b,n),t.child}function mu(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function u0(e,t,n,c,b){var v=Q();return v=v===null?null:{parent:Wn._currentValue,pool:v},t.memoizedState={baseLanes:n,cachePool:v},e!==null&&re(t,null),Ir(),Mn(t),e!==null&&fs(e,t,c,!0),t.childLanes=b,null}function od(e,t){return t=cd({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function d0(e,t,n){return Yt(t,e.child,null,n),e=od(t,t.pendingProps),e.flags|=2,nr(t),t.memoizedState=null,e}function I1(e,t,n){var c=t.pendingProps,b=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Vt){if(c.mode==="hidden")return e=od(t,c),t.lanes=536870912,mu(null,e);if(gi(t),(e=jn)?(e=Sm(e,Bn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ls!==null?{id:Mr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},n=ic(e),n.return=t,t.child=n,wa=t,jn=null)):e=null,e===null)throw cs(t);return t.lanes=536870912,null}return od(t,c)}var v=e.memoizedState;if(v!==null){var z=v.dehydrated;if(gi(t),b)if(t.flags&256)t.flags&=-257,t=d0(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(ga||fs(e,t,n,!1),b=(n&e.childLanes)!==0,ga||b){if(c=An,c!==null&&(z=la(c,n),z!==0&&z!==v.retryLane))throw v.retryLane=z,Ti(e,z),qr(c,e,z),Lf;xd(),t=d0(e,t,n)}else e=v.treeContext,jn=wi(z.nextSibling),wa=t,Vt=!0,Ga=null,Bn=!1,e!==null&&Ju(t,e),t=od(t,c),t.flags|=4096;return t}return e=Er(e.child,{mode:c.mode,children:c.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ld(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ef(e,t,n,c,b){return hs(t),n=su(e,t,n,c,void 0,b),c=ou(),e!==null&&!ga?(lu(e,t,b),Gs(e,t,b)):(Vt&&c&&nu(t),t.flags|=1,Va(e,t,n,b),t.child)}function f0(e,t,n,c,b,v){return hs(t),t.updateQueue=null,n=Mi(t,c,n,b),pc(e),c=ou(),e!==null&&!ga?(lu(e,t,v),Gs(e,t,v)):(Vt&&c&&nu(t),t.flags|=1,Va(e,t,n,v),t.child)}function h0(e,t,n,c,b){if(hs(t),t.stateNode===null){var v=ya,z=n.contextType;typeof z=="object"&&z!==null&&(v=Sa(z)),v=new n(c,v),t.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=kf,t.stateNode=v,v._reactInternals=t,v=t.stateNode,v.props=c,v.state=t.memoizedState,v.refs={},cn(t),z=n.contextType,v.context=typeof z=="object"&&z!==null?Sa(z):ya,v.state=t.memoizedState,z=n.getDerivedStateFromProps,typeof z=="function"&&(Af(t,n,z,c),v.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(z=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),z!==v.state&&kf.enqueueReplaceState(v,v.state,null),ja(t,c,v,b),Kt(),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308),c=!0}else if(e===null){v=t.stateNode;var K=t.memoizedProps,ve=Ol(n,K);v.props=ve;var Ue=v.context,We=n.contextType;z=ya,typeof We=="object"&&We!==null&&(z=Sa(We));var Ke=n.getDerivedStateFromProps;We=typeof Ke=="function"||typeof v.getSnapshotBeforeUpdate=="function",K=t.pendingProps!==K,We||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(K||Ue!==z)&&Kp(t,v,c,z),Dt=!1;var Fe=t.memoizedState;v.state=Fe,ja(t,c,v,b),Kt(),Ue=t.memoizedState,K||Fe!==Ue||Dt?(typeof Ke=="function"&&(Af(t,n,Ke,c),Ue=t.memoizedState),(ve=Dt||Qp(t,n,ve,c,Fe,Ue,z))?(We||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=Ue),v.props=c,v.state=Ue,v.context=z,c=ve):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{v=t.stateNode,rn(e,t),z=t.memoizedProps,We=Ol(n,z),v.props=We,Ke=t.pendingProps,Fe=v.context,Ue=n.contextType,ve=ya,typeof Ue=="object"&&Ue!==null&&(ve=Sa(Ue)),K=n.getDerivedStateFromProps,(Ue=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(z!==Ke||Fe!==ve)&&Kp(t,v,c,ve),Dt=!1,Fe=t.memoizedState,v.state=Fe,ja(t,c,v,b),Kt();var He=t.memoizedState;z!==Ke||Fe!==He||Dt||e!==null&&e.dependencies!==null&&uc(e.dependencies)?(typeof K=="function"&&(Af(t,n,K,c),He=t.memoizedState),(We=Dt||Qp(t,n,We,c,Fe,He,ve)||e!==null&&e.dependencies!==null&&uc(e.dependencies))?(Ue||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,He,ve),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,He,ve)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||z===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=He),v.props=c,v.state=He,v.context=ve,c=We):(typeof v.componentDidUpdate!="function"||z===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=1024),c=!1)}return v=c,ld(e,t),c=(t.flags&128)!==0,v||c?(v=t.stateNode,n=c&&typeof n.getDerivedStateFromError!="function"?null:v.render(),t.flags|=1,e!==null&&c?(t.child=Yt(t,e.child,null,b),t.child=Yt(t,null,n,b)):Va(e,t,n,b),t.memoizedState=v.state,e=t.child):e=Gs(e,t,b),e}function p0(e,t,n,c){return Is(),t.flags|=256,Va(e,t,n,c),t.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Of(e){return{baseLanes:e,cachePool:ue()}}function Rf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ai),e}function m0(e,t,n){var c=t.pendingProps,b=!1,v=(t.flags&128)!==0,z;if((z=v)||(z=e!==null&&e.memoizedState===null?!1:(Fn.current&2)!==0),z&&(b=!0,t.flags&=-129),z=(t.flags&32)!==0,t.flags&=-33,e===null){if(Vt){if(b?br(t):bi(),(e=jn)?(e=Sm(e,Bn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ls!==null?{id:Mr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},n=ic(e),n.return=t,t.child=n,wa=t,jn=null)):e=null,e===null)throw cs(t);return mh(e)?t.lanes=32:t.lanes=536870912,null}var K=c.children;return c=c.fallback,b?(bi(),b=t.mode,K=cd({mode:"hidden",children:K},b),c=os(c,b,n,null),K.return=t,c.return=t,K.sibling=c,t.child=K,c=t.child,c.memoizedState=Of(n),c.childLanes=Rf(e,z,n),t.memoizedState=Tf,mu(null,c)):(br(t),Mf(t,K))}var ve=e.memoizedState;if(ve!==null&&(K=ve.dehydrated,K!==null)){if(v)t.flags&256?(br(t),t.flags&=-257,t=zf(e,t,n)):t.memoizedState!==null?(bi(),t.child=e.child,t.flags|=128,t=null):(bi(),K=c.fallback,b=t.mode,c=cd({mode:"visible",children:c.children},b),K=os(K,b,n,null),K.flags|=2,c.return=t,K.return=t,c.sibling=K,t.child=c,Yt(t,e.child,null,n),c=t.child,c.memoizedState=Of(n),c.childLanes=Rf(e,z,n),t.memoizedState=Tf,t=mu(null,c));else if(br(t),mh(K)){if(z=K.nextSibling&&K.nextSibling.dataset,z)var Ue=z.dgst;z=Ue,c=Error(o(419)),c.stack="",c.digest=z,Ao({value:c,source:null,stack:null}),t=zf(e,t,n)}else if(ga||fs(e,t,n,!1),z=(n&e.childLanes)!==0,ga||z){if(z=An,z!==null&&(c=la(z,n),c!==0&&c!==ve.retryLane))throw ve.retryLane=c,Ti(e,c),qr(z,e,c),Lf;ph(K)||xd(),t=zf(e,t,n)}else ph(K)?(t.flags|=192,t.child=e.child,t=null):(e=ve.treeContext,jn=wi(K.nextSibling),wa=t,Vt=!0,Ga=null,Bn=!1,e!==null&&Ju(t,e),t=Mf(t,c.children),t.flags|=4096);return t}return b?(bi(),K=c.fallback,b=t.mode,ve=e.child,Ue=ve.sibling,c=Er(ve,{mode:"hidden",children:c.children}),c.subtreeFlags=ve.subtreeFlags&65011712,Ue!==null?K=Er(Ue,K):(K=os(K,b,n,null),K.flags|=2),K.return=t,c.return=t,c.sibling=K,t.child=c,mu(null,c),c=t.child,K=e.child.memoizedState,K===null?K=Of(n):(b=K.cachePool,b!==null?(ve=Wn._currentValue,b=b.parent!==ve?{parent:ve,pool:ve}:b):b=ue(),K={baseLanes:K.baseLanes|n,cachePool:b}),c.memoizedState=K,c.childLanes=Rf(e,z,n),t.memoizedState=Tf,mu(e.child,c)):(br(t),n=e.child,e=n.sibling,n=Er(n,{mode:"visible",children:c.children}),n.return=t,n.sibling=null,e!==null&&(z=t.deletions,z===null?(t.deletions=[e],t.flags|=16):z.push(e)),t.child=n,t.memoizedState=null,n)}function Mf(e,t){return t=cd({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cd(e,t){return e=Ra(22,e,null,t),e.lanes=0,e}function zf(e,t,n){return Yt(t,e.child,null,n),e=Mf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g0(e,t,n){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),ko(e.return,t,n)}function Df(e,t,n,c,b,v){var z=e.memoizedState;z===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:n,tailMode:b,treeForkCount:v}:(z.isBackwards=t,z.rendering=null,z.renderingStartTime=0,z.last=c,z.tail=n,z.tailMode=b,z.treeForkCount=v)}function b0(e,t,n){var c=t.pendingProps,b=c.revealOrder,v=c.tail;c=c.children;var z=Fn.current,K=(z&2)!==0;if(K?(z=z&1|2,t.flags|=128):z&=1,G(Fn,z),Va(e,t,c,n),c=Vt?Al:0,!K&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&g0(e,n,t);else if(e.tag===19)g0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(b){case"forwards":for(n=t.child,b=null;n!==null;)e=n.alternate,e!==null&&Ps(e)===null&&(b=n),n=n.sibling;n=b,n===null?(b=t.child,t.child=null):(b=n.sibling,n.sibling=null),Df(t,!1,b,n,v,c);break;case"backwards":case"unstable_legacy-backwards":for(n=null,b=t.child,t.child=null;b!==null;){if(e=b.alternate,e!==null&&Ps(e)===null){t.child=b;break}e=b.sibling,b.sibling=n,n=b,b=e}Df(t,!0,n,null,v,c);break;case"together":Df(t,!1,null,null,void 0,c);break;default:t.memoizedState=null}return t.child}function Gs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(fs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function If(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&uc(e)))}function B1(e,t,n){switch(t.tag){case 3:je(t,t.stateNode.containerInfo),ds(t,Wn,e.memoizedState.cache),Is();break;case 27:case 5:Ee(t);break;case 4:je(t,t.stateNode.containerInfo);break;case 10:ds(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gi(t),null;break;case 13:var c=t.memoizedState;if(c!==null)return c.dehydrated!==null?(br(t),t.flags|=128,null):(n&t.child.childLanes)!==0?m0(e,t,n):(br(t),e=Gs(e,t,n),e!==null?e.sibling:null);br(t);break;case 19:var b=(e.flags&128)!==0;if(c=(n&t.childLanes)!==0,c||(fs(e,t,n,!1),c=(n&t.childLanes)!==0),b){if(c)return b0(e,t,n);t.flags|=128}if(b=t.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),G(Fn,Fn.current),c)break;return null;case 22:return t.lanes=0,c0(e,t,n,t.pendingProps);case 24:ds(t,Wn,e.memoizedState.cache)}return Gs(e,t,n)}function x0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ga=!0;else{if(!If(e,n)&&(t.flags&128)===0)return ga=!1,B1(e,t,n);ga=(e.flags&131072)!==0}else ga=!1,Vt&&(t.flags&1048576)!==0&&Zu(t,Al,t.index);switch(t.lanes=0,t.tag){case 16:e:{var c=t.pendingProps;if(e=Ne(t.elementType),t.type=e,typeof e=="function")rc(e)?(c=Ol(e,c),t.tag=1,t=h0(null,t,e,c,n)):(t.tag=0,t=Ef(null,t,e,c,n));else{if(e!=null){var b=e.$$typeof;if(b===F){t.tag=11,t=s0(null,t,e,c,n);break e}else if(b===U){t.tag=14,t=o0(null,t,e,c,n);break e}}throw t=E(e)||e,Error(o(306,t,""))}}return t;case 0:return Ef(e,t,t.type,t.pendingProps,n);case 1:return c=t.type,b=Ol(c,t.pendingProps),h0(e,t,c,b,n);case 3:e:{if(je(t,t.stateNode.containerInfo),e===null)throw Error(o(387));c=t.pendingProps;var v=t.memoizedState;b=v.element,rn(e,t),ja(t,c,null,n);var z=t.memoizedState;if(c=z.cache,ds(t,Wn,c),c!==v.cache&&Bs(t,[Wn],n,!0),Kt(),c=z.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:z.cache},t.updateQueue.baseState=v,t.memoizedState=v,t.flags&256){t=p0(e,t,c,n);break e}else if(c!==b){b=Tr(Error(o(424)),t),Ao(b),t=p0(e,t,c,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jn=wi(e.firstChild),wa=t,Vt=!0,Ga=null,Bn=!0,n=Zt(t,null,c,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Is(),c===b){t=Gs(e,t,n);break e}Va(e,t,c,n)}t=t.child}return t;case 26:return ld(e,t),e===null?(n=Lm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Vt||(n=t.type,e=t.pendingProps,c=_d(be.current).createElement(n),c[ln]=t,c[bn]=e,Ya(c,n,e),Pt(c),t.stateNode=c):t.memoizedState=Lm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ee(t),e===null&&Vt&&(c=t.stateNode=Am(t.type,t.pendingProps,be.current),wa=t,Bn=!0,b=jn,Uo(t.type)?(gh=b,jn=wi(c.firstChild)):jn=b),Va(e,t,t.pendingProps.children,n),ld(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Vt&&((b=c=jn)&&(c=pg(c,t.type,t.pendingProps,Bn),c!==null?(t.stateNode=c,wa=t,jn=wi(c.firstChild),Bn=!1,b=!0):b=!1),b||cs(t)),Ee(t),b=t.type,v=t.pendingProps,z=e!==null?e.memoizedProps:null,c=v.children,dh(b,v)?c=null:z!==null&&dh(b,z)&&(t.flags|=32),t.memoizedState!==null&&(b=su(e,t,xf,null,null,n),Eu._currentValue=b),ld(e,t),Va(e,t,c,n),t.child;case 6:return e===null&&Vt&&((e=n=jn)&&(n=mg(n,t.pendingProps,Bn),n!==null?(t.stateNode=n,wa=t,jn=null,e=!0):e=!1),e||cs(t)),null;case 13:return m0(e,t,n);case 4:return je(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=Yt(t,null,c,n):Va(e,t,c,n),t.child;case 11:return s0(e,t,t.type,t.pendingProps,n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:return Va(e,t,t.pendingProps.children,n),t.child;case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:return c=t.pendingProps,ds(t,t.type,c.value),Va(e,t,c.children,n),t.child;case 9:return b=t.type._context,c=t.pendingProps.children,hs(t),b=Sa(b),c=c(b),t.flags|=1,Va(e,t,c,n),t.child;case 14:return o0(e,t,t.type,t.pendingProps,n);case 15:return l0(e,t,t.type,t.pendingProps,n);case 19:return b0(e,t,n);case 31:return I1(e,t,n);case 22:return c0(e,t,n,t.pendingProps);case 24:return hs(t),c=Sa(Wn),e===null?(b=Q(),b===null&&(b=An,v=Co(),b.pooledCache=v,v.refCount++,v!==null&&(b.pooledCacheLanes|=n),b=v),t.memoizedState={parent:c,cache:b},cn(t),ds(t,Wn,b)):((e.lanes&n)!==0&&(rn(e,t),ja(t,null,null,n),Kt()),b=e.memoizedState,v=t.memoizedState,b.parent!==c?(b={parent:c,cache:c},t.memoizedState=b,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=b),ds(t,Wn,c)):(c=v.cache,ds(t,Wn,c),c!==b.cache&&Bs(t,[Wn],n,!0))),Va(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Vs(e){e.flags|=4}function Bf(e,t,n,c,b){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(b&335544128)===b)if(e.stateNode.complete)e.flags|=8192;else if(V0())e.flags|=8192;else throw Ce=Te,Be}else e.flags&=-16777217}function v0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mm(t))if(V0())e.flags|=8192;else throw Ce=Te,Be}function ud(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jn():536870912,e.lanes|=t,_c|=t)}function gu(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var c=null;n!==null;)n.alternate!==null&&(c=n),n=n.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,c=0;if(t)for(var b=e.child;b!==null;)n|=b.lanes|b.childLanes,c|=b.subtreeFlags&65011712,c|=b.flags&65011712,b.return=e,b=b.sibling;else for(b=e.child;b!==null;)n|=b.lanes|b.childLanes,c|=b.subtreeFlags,c|=b.flags,b.return=e,b=b.sibling;return e.subtreeFlags|=c,e.childLanes=n,t}function P1(e,t,n){var c=t.pendingProps;switch(lc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(t),null;case 1:return zn(t),null;case 3:return n=t.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),t.memoizedState.cache!==c&&(t.flags|=2048),Dr(Wn),Ae(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Na(t)?Vs(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ru())),zn(t),null;case 26:var b=t.type,v=t.memoizedState;return e===null?(Vs(t),v!==null?(zn(t),v0(t,v)):(zn(t),Bf(t,b,null,c,n))):v?v!==e.memoizedState?(Vs(t),zn(t),v0(t,v)):(zn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==c&&Vs(t),zn(t),Bf(t,b,e,c,n)),null;case 27:if(Re(t),n=be.current,b=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Vs(t);else{if(!c){if(t.stateNode===null)throw Error(o(166));return zn(t),null}e=$.current,Na(t)?au(t):(e=Am(b,c,n),t.stateNode=e,Vs(t))}return zn(t),null;case 5:if(Re(t),b=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==c&&Vs(t);else{if(!c){if(t.stateNode===null)throw Error(o(166));return zn(t),null}if(v=$.current,Na(t))au(t);else{var z=_d(be.current);switch(v){case 1:v=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:v=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":v=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":v=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":v=z.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?z.createElement("select",{is:c.is}):z.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?z.createElement(b,{is:c.is}):z.createElement(b)}}v[ln]=t,v[bn]=c;e:for(z=t.child;z!==null;){if(z.tag===5||z.tag===6)v.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}t.stateNode=v;e:switch(Ya(v,b,c),b){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Vs(t)}}return zn(t),Bf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==c&&Vs(t);else{if(typeof c!="string"&&t.stateNode===null)throw Error(o(166));if(e=be.current,Na(t)){if(e=t.stateNode,n=t.memoizedProps,c=null,b=wa,b!==null)switch(b.tag){case 27:case 5:c=b.memoizedProps}e[ln]=t,e=!!(e.nodeValue===n||c!==null&&c.suppressHydrationWarning===!0||mm(e.nodeValue,n)),e||cs(t,!0)}else e=_d(e).createTextNode(c),e[ln]=t,t.stateNode=e}return zn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(c=Na(t),n!==null){if(e===null){if(!c)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ln]=t}else Is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;zn(t),e=!1}else n=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(nr(t),t):(nr(t),null);if((t.flags&128)!==0)throw Error(o(558))}return zn(t),null;case 13:if(c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(b=Na(t),c!==null&&c.dehydrated!==null){if(e===null){if(!b)throw Error(o(318));if(b=t.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));b[ln]=t}else Is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;zn(t),b=!1}else b=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=b),b=!0;if(!b)return t.flags&256?(nr(t),t):(nr(t),null)}return nr(t),(t.flags&128)!==0?(t.lanes=n,t):(n=c!==null,e=e!==null&&e.memoizedState!==null,n&&(c=t.child,b=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(b=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==b&&(c.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ud(t,t.updateQueue),zn(t),null);case 4:return Ae(),e===null&&sh(t.stateNode.containerInfo),zn(t),null;case 10:return Dr(t.type),zn(t),null;case 19:if(C(Fn),c=t.memoizedState,c===null)return zn(t),null;if(b=(t.flags&128)!==0,v=c.rendering,v===null)if(b)gu(c,!1);else{if(ta!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=Ps(e),v!==null){for(t.flags|=128,gu(c,!1),e=v.updateQueue,t.updateQueue=e,ud(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)jl(n,e),n=n.sibling;return G(Fn,Fn.current&1|2),Vt&&mr(t,c.treeForkCount),t.child}e=e.sibling}c.tail!==null&&De()>md&&(t.flags|=128,b=!0,gu(c,!1),t.lanes=4194304)}else{if(!b)if(e=Ps(v),e!==null){if(t.flags|=128,b=!0,e=e.updateQueue,t.updateQueue=e,ud(t,e),gu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Vt)return zn(t),null}else 2*De()-c.renderingStartTime>md&&n!==536870912&&(t.flags|=128,b=!0,gu(c,!1),t.lanes=4194304);c.isBackwards?(v.sibling=t.child,t.child=v):(e=c.last,e!==null?e.sibling=v:t.child=v,c.last=v)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=De(),e.sibling=null,n=Fn.current,G(Fn,b?n&1|2:n&1),Vt&&mr(t,c.treeForkCount),e):(zn(t),null);case 22:case 23:return nr(t),ea(),c=t.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(t.flags|=8192):c&&(t.flags|=8192),c?(n&536870912)!==0&&(t.flags&128)===0&&(zn(t),t.subtreeFlags&6&&(t.flags|=8192)):zn(t),n=t.updateQueue,n!==null&&ud(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),c=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),c!==n&&(t.flags|=2048),e!==null&&C(Z),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Dr(Wn),zn(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function U1(e,t){switch(lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dr(Wn),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Re(t),null;case 31:if(t.memoizedState!==null){if(nr(t),t.alternate===null)throw Error(o(340));Is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(nr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return C(Fn),null;case 4:return Ae(),null;case 10:return Dr(t.type),null;case 22:case 23:return nr(t),ea(),e!==null&&C(Z),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Dr(Wn),null;case 25:return null;default:return null}}function y0(e,t){switch(lc(t),t.tag){case 3:Dr(Wn),Ae();break;case 26:case 27:case 5:Re(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&nr(t);break;case 13:nr(t);break;case 19:C(Fn);break;case 10:Dr(t.type);break;case 22:case 23:nr(t),ea(),e!==null&&C(Z);break;case 24:Dr(Wn)}}function bu(e,t){try{var n=t.updateQueue,c=n!==null?n.lastEffect:null;if(c!==null){var b=c.next;n=b;do{if((n.tag&e)===e){c=void 0;var v=n.create,z=n.inst;c=v(),z.destroy=c}n=n.next}while(n!==b)}}catch(K){mn(t,t.return,K)}}function Ro(e,t,n){try{var c=t.updateQueue,b=c!==null?c.lastEffect:null;if(b!==null){var v=b.next;c=v;do{if((c.tag&e)===e){var z=c.inst,K=z.destroy;if(K!==void 0){z.destroy=void 0,b=t;var ve=n,Ue=K;try{Ue()}catch(We){mn(b,ve,We)}}}c=c.next}while(c!==v)}}catch(We){mn(t,t.return,We)}}function w0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ra(t,n)}catch(c){mn(e,e.return,c)}}}function N0(e,t,n){n.props=Ol(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(c){mn(e,t,c)}}function xu(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof n=="function"?e.refCleanup=n(c):n.current=c}}catch(b){mn(e,t,b)}}function xs(e,t){var n=e.ref,c=e.refCleanup;if(n!==null)if(typeof c=="function")try{c()}catch(b){mn(e,t,b)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(b){mn(e,t,b)}else n.current=null}function S0(e){var t=e.type,n=e.memoizedProps,c=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&c.focus();break e;case"img":n.src?c.src=n.src:n.srcSet&&(c.srcset=n.srcSet)}}catch(b){mn(e,e.return,b)}}function Pf(e,t,n){try{var c=e.stateNode;lg(c,e.type,n,t),c[bn]=t}catch(b){mn(e,e.return,b)}}function j0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Uo(e.type)||e.tag===4}function Uf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||j0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Uo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ff(e,t,n){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tn));else if(c!==4&&(c===27&&Uo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ff(e,t,n),e=e.sibling;e!==null;)Ff(e,t,n),e=e.sibling}function dd(e,t,n){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(c!==4&&(c===27&&Uo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(dd(e,t,n),e=e.sibling;e!==null;)dd(e,t,n),e=e.sibling}function _0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var c=e.type,b=t.attributes;b.length;)t.removeAttributeNode(b[0]);Ya(t,c,n),t[ln]=e,t[bn]=n}catch(v){mn(e,e.return,v)}}var Ys=!1,ba=!1,qf=!1,A0=typeof WeakSet=="function"?WeakSet:Set,za=null;function F1(e,t){if(e=e.containerInfo,ch=Od,e=Kr(e),ei(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var c=n.getSelection&&n.getSelection();if(c&&c.rangeCount!==0){n=c.anchorNode;var b=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{n.nodeType,v.nodeType}catch{n=null;break e}var z=0,K=-1,ve=-1,Ue=0,We=0,Ke=e,Fe=null;t:for(;;){for(var He;Ke!==n||b!==0&&Ke.nodeType!==3||(K=z+b),Ke!==v||c!==0&&Ke.nodeType!==3||(ve=z+c),Ke.nodeType===3&&(z+=Ke.nodeValue.length),(He=Ke.firstChild)!==null;)Fe=Ke,Ke=He;for(;;){if(Ke===e)break t;if(Fe===n&&++Ue===b&&(K=z),Fe===v&&++We===c&&(ve=z),(He=Ke.nextSibling)!==null)break;Ke=Fe,Fe=Ke.parentNode}Ke=He}n=K===-1||ve===-1?null:{start:K,end:ve}}else n=null}n=n||{start:0,end:0}}else n=null;for(uh={focusedElem:e,selectionRange:n},Od=!1,za=t;za!==null;)if(t=za,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,za=e;else for(;za!==null;){switch(t=za,v=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)b=e[n],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&v!==null){e=void 0,n=t,b=v.memoizedProps,v=v.memoizedState,c=n.stateNode;try{var pt=Ol(n.type,b);e=c.getSnapshotBeforeUpdate(pt,v),c.__reactInternalSnapshotBeforeUpdate=e}catch(kt){mn(n,n.return,kt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)hh(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,za=e;break}za=t.return}}function k0(e,t,n){var c=n.flags;switch(n.tag){case 0:case 11:case 15:$s(e,n),c&4&&bu(5,n);break;case 1:if($s(e,n),c&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(z){mn(n,n.return,z)}else{var b=Ol(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(b,t,e.__reactInternalSnapshotBeforeUpdate)}catch(z){mn(n,n.return,z)}}c&64&&w0(n),c&512&&xu(n,n.return);break;case 3:if($s(e,n),c&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ra(e,t)}catch(z){mn(n,n.return,z)}}break;case 27:t===null&&c&4&&_0(n);case 26:case 5:$s(e,n),t===null&&c&4&&S0(n),c&512&&xu(n,n.return);break;case 12:$s(e,n);break;case 31:$s(e,n),c&4&&E0(e,n);break;case 13:$s(e,n),c&4&&T0(e,n),c&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Z1.bind(null,n),gg(e,n))));break;case 22:if(c=n.memoizedState!==null||Ys,!c){t=t!==null&&t.memoizedState!==null||ba,b=Ys;var v=ba;Ys=c,(ba=t)&&!v?Xs(e,n,(n.subtreeFlags&8772)!==0):$s(e,n),Ys=b,ba=v}break;case 30:break;default:$s(e,n)}}function C0(e){var t=e.alternate;t!==null&&(e.alternate=null,C0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Za(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Hn=null,Br=!1;function Ws(e,t,n){for(n=n.child;n!==null;)L0(e,t,n),n=n.sibling}function L0(e,t,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ht,n)}catch{}switch(n.tag){case 26:ba||xs(n,t),Ws(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ba||xs(n,t);var c=Hn,b=Br;Uo(n.type)&&(Hn=n.stateNode,Br=!1),Ws(e,t,n),ku(n.stateNode),Hn=c,Br=b;break;case 5:ba||xs(n,t);case 6:if(c=Hn,b=Br,Hn=null,Ws(e,t,n),Hn=c,Br=b,Hn!==null)if(Br)try{(Hn.nodeType===9?Hn.body:Hn.nodeName==="HTML"?Hn.ownerDocument.body:Hn).removeChild(n.stateNode)}catch(v){mn(n,t,v)}else try{Hn.removeChild(n.stateNode)}catch(v){mn(n,t,v)}break;case 18:Hn!==null&&(Br?(e=Hn,wm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Rc(e)):wm(Hn,n.stateNode));break;case 4:c=Hn,b=Br,Hn=n.stateNode.containerInfo,Br=!0,Ws(e,t,n),Hn=c,Br=b;break;case 0:case 11:case 14:case 15:Ro(2,n,t),ba||Ro(4,n,t),Ws(e,t,n);break;case 1:ba||(xs(n,t),c=n.stateNode,typeof c.componentWillUnmount=="function"&&N0(n,t,c)),Ws(e,t,n);break;case 21:Ws(e,t,n);break;case 22:ba=(c=ba)||n.memoizedState!==null,Ws(e,t,n),ba=c;break;default:Ws(e,t,n)}}function E0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Rc(e)}catch(n){mn(t,t.return,n)}}}function T0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Rc(e)}catch(n){mn(t,t.return,n)}}function q1(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new A0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new A0),t;default:throw Error(o(435,e.tag))}}function fd(e,t){var n=q1(e);t.forEach(function(c){if(!n.has(c)){n.add(c);var b=J1.bind(null,e,c);c.then(b,b)}})}function Pr(e,t){var n=t.deletions;if(n!==null)for(var c=0;c<n.length;c++){var b=n[c],v=e,z=t,K=z;e:for(;K!==null;){switch(K.tag){case 27:if(Uo(K.type)){Hn=K.stateNode,Br=!1;break e}break;case 5:Hn=K.stateNode,Br=!1;break e;case 3:case 4:Hn=K.stateNode.containerInfo,Br=!0;break e}K=K.return}if(Hn===null)throw Error(o(160));L0(v,z,b),Hn=null,Br=!1,v=b.alternate,v!==null&&(v.return=null),b.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)O0(t,e),t=t.sibling}var Bi=null;function O0(e,t){var n=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pr(t,e),Ur(e),c&4&&(Ro(3,e,e.return),bu(3,e),Ro(5,e,e.return));break;case 1:Pr(t,e),Ur(e),c&512&&(ba||n===null||xs(n,n.return)),c&64&&Ys&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?c:n.concat(c))));break;case 26:var b=Bi;if(Pr(t,e),Ur(e),c&512&&(ba||n===null||xs(n,n.return)),c&4){var v=n!==null?n.memoizedState:null;if(c=e.memoizedState,n===null)if(c===null)if(e.stateNode===null){e:{c=e.type,n=e.memoizedProps,b=b.ownerDocument||b;t:switch(c){case"title":v=b.getElementsByTagName("title")[0],(!v||v[ur]||v[ln]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=b.createElement(c),b.head.insertBefore(v,b.querySelector("head > title"))),Ya(v,c,n),v[ln]=e,Pt(v),c=v;break e;case"link":var z=Om("link","href",b).get(c+(n.href||""));if(z){for(var K=0;K<z.length;K++)if(v=z[K],v.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&v.getAttribute("rel")===(n.rel==null?null:n.rel)&&v.getAttribute("title")===(n.title==null?null:n.title)&&v.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){z.splice(K,1);break t}}v=b.createElement(c),Ya(v,c,n),b.head.appendChild(v);break;case"meta":if(z=Om("meta","content",b).get(c+(n.content||""))){for(K=0;K<z.length;K++)if(v=z[K],v.getAttribute("content")===(n.content==null?null:""+n.content)&&v.getAttribute("name")===(n.name==null?null:n.name)&&v.getAttribute("property")===(n.property==null?null:n.property)&&v.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&v.getAttribute("charset")===(n.charSet==null?null:n.charSet)){z.splice(K,1);break t}}v=b.createElement(c),Ya(v,c,n),b.head.appendChild(v);break;default:throw Error(o(468,c))}v[ln]=e,Pt(v),c=v}e.stateNode=c}else Rm(b,e.type,e.stateNode);else e.stateNode=Tm(b,c,e.memoizedProps);else v!==c?(v===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):v.count--,c===null?Rm(b,e.type,e.stateNode):Tm(b,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Pf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pr(t,e),Ur(e),c&512&&(ba||n===null||xs(n,n.return)),n!==null&&c&4&&Pf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pr(t,e),Ur(e),c&512&&(ba||n===null||xs(n,n.return)),e.flags&32){b=e.stateNode;try{li(b,"")}catch(pt){mn(e,e.return,pt)}}c&4&&e.stateNode!=null&&(b=e.memoizedProps,Pf(e,b,n!==null?n.memoizedProps:b)),c&1024&&(qf=!0);break;case 6:if(Pr(t,e),Ur(e),c&4){if(e.stateNode===null)throw Error(o(162));c=e.memoizedProps,n=e.stateNode;try{n.nodeValue=c}catch(pt){mn(e,e.return,pt)}}break;case 3:if(Cd=null,b=Bi,Bi=Ad(t.containerInfo),Pr(t,e),Bi=b,Ur(e),c&4&&n!==null&&n.memoizedState.isDehydrated)try{Rc(t.containerInfo)}catch(pt){mn(e,e.return,pt)}qf&&(qf=!1,R0(e));break;case 4:c=Bi,Bi=Ad(e.stateNode.containerInfo),Pr(t,e),Ur(e),Bi=c;break;case 12:Pr(t,e),Ur(e);break;case 31:Pr(t,e),Ur(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,fd(e,c)));break;case 13:Pr(t,e),Ur(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(pd=De()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,fd(e,c)));break;case 22:b=e.memoizedState!==null;var ve=n!==null&&n.memoizedState!==null,Ue=Ys,We=ba;if(Ys=Ue||b,ba=We||ve,Pr(t,e),ba=We,Ys=Ue,Ur(e),c&8192)e:for(t=e.stateNode,t._visibility=b?t._visibility&-2:t._visibility|1,b&&(n===null||ve||Ys||ba||Rl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){ve=n=t;try{if(v=ve.stateNode,b)z=v.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{K=ve.stateNode;var Ke=ve.memoizedProps.style,Fe=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;K.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(pt){mn(ve,ve.return,pt)}}}else if(t.tag===6){if(n===null){ve=t;try{ve.stateNode.nodeValue=b?"":ve.memoizedProps}catch(pt){mn(ve,ve.return,pt)}}}else if(t.tag===18){if(n===null){ve=t;try{var He=ve.stateNode;b?Nm(He,!0):Nm(ve.stateNode,!1)}catch(pt){mn(ve,ve.return,pt)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}c&4&&(c=e.updateQueue,c!==null&&(n=c.retryQueue,n!==null&&(c.retryQueue=null,fd(e,n))));break;case 19:Pr(t,e),Ur(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,fd(e,c)));break;case 30:break;case 21:break;default:Pr(t,e),Ur(e)}}function Ur(e){var t=e.flags;if(t&2){try{for(var n,c=e.return;c!==null;){if(j0(c)){n=c;break}c=c.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var b=n.stateNode,v=Uf(e);dd(e,v,b);break;case 5:var z=n.stateNode;n.flags&32&&(li(z,""),n.flags&=-33);var K=Uf(e);dd(e,K,z);break;case 3:case 4:var ve=n.stateNode.containerInfo,Ue=Uf(e);Ff(e,Ue,ve);break;default:throw Error(o(161))}}catch(We){mn(e,e.return,We)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function R0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;R0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function $s(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)k0(e,t.alternate,t),t=t.sibling}function Rl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ro(4,t,t.return),Rl(t);break;case 1:xs(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&N0(t,t.return,n),Rl(t);break;case 27:ku(t.stateNode);case 26:case 5:xs(t,t.return),Rl(t);break;case 22:t.memoizedState===null&&Rl(t);break;case 30:Rl(t);break;default:Rl(t)}e=e.sibling}}function Xs(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var c=t.alternate,b=e,v=t,z=v.flags;switch(v.tag){case 0:case 11:case 15:Xs(b,v,n),bu(4,v);break;case 1:if(Xs(b,v,n),c=v,b=c.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Ue){mn(c,c.return,Ue)}if(c=v,b=c.updateQueue,b!==null){var K=c.stateNode;try{var ve=b.shared.hiddenCallbacks;if(ve!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ve.length;b++)tr(ve[b],K)}catch(Ue){mn(c,c.return,Ue)}}n&&z&64&&w0(v),xu(v,v.return);break;case 27:_0(v);case 26:case 5:Xs(b,v,n),n&&c===null&&z&4&&S0(v),xu(v,v.return);break;case 12:Xs(b,v,n);break;case 31:Xs(b,v,n),n&&z&4&&E0(b,v);break;case 13:Xs(b,v,n),n&&z&4&&T0(b,v);break;case 22:v.memoizedState===null&&Xs(b,v,n),xu(v,v.return);break;case 30:break;default:Xs(b,v,n)}t=t.sibling}}function Hf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&kl(n))}function Gf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kl(e))}function Pi(e,t,n,c){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)M0(e,t,n,c),t=t.sibling}function M0(e,t,n,c){var b=t.flags;switch(t.tag){case 0:case 11:case 15:Pi(e,t,n,c),b&2048&&bu(9,t);break;case 1:Pi(e,t,n,c);break;case 3:Pi(e,t,n,c),b&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kl(e)));break;case 12:if(b&2048){Pi(e,t,n,c),e=t.stateNode;try{var v=t.memoizedProps,z=v.id,K=v.onPostCommit;typeof K=="function"&&K(z,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ve){mn(t,t.return,ve)}}else Pi(e,t,n,c);break;case 31:Pi(e,t,n,c);break;case 13:Pi(e,t,n,c);break;case 23:break;case 22:v=t.stateNode,z=t.alternate,t.memoizedState!==null?v._visibility&2?Pi(e,t,n,c):vu(e,t):v._visibility&2?Pi(e,t,n,c):(v._visibility|=2,Nc(e,t,n,c,(t.subtreeFlags&10256)!==0||!1)),b&2048&&Hf(z,t);break;case 24:Pi(e,t,n,c),b&2048&&Gf(t.alternate,t);break;default:Pi(e,t,n,c)}}function Nc(e,t,n,c,b){for(b=b&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var v=e,z=t,K=n,ve=c,Ue=z.flags;switch(z.tag){case 0:case 11:case 15:Nc(v,z,K,ve,b),bu(8,z);break;case 23:break;case 22:var We=z.stateNode;z.memoizedState!==null?We._visibility&2?Nc(v,z,K,ve,b):vu(v,z):(We._visibility|=2,Nc(v,z,K,ve,b)),b&&Ue&2048&&Hf(z.alternate,z);break;case 24:Nc(v,z,K,ve,b),b&&Ue&2048&&Gf(z.alternate,z);break;default:Nc(v,z,K,ve,b)}t=t.sibling}}function vu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,c=t,b=c.flags;switch(c.tag){case 22:vu(n,c),b&2048&&Hf(c.alternate,c);break;case 24:vu(n,c),b&2048&&Gf(c.alternate,c);break;default:vu(n,c)}t=t.sibling}}var yu=8192;function Sc(e,t,n){if(e.subtreeFlags&yu)for(e=e.child;e!==null;)z0(e,t,n),e=e.sibling}function z0(e,t,n){switch(e.tag){case 26:Sc(e,t,n),e.flags&yu&&e.memoizedState!==null&&Cg(n,Bi,e.memoizedState,e.memoizedProps);break;case 5:Sc(e,t,n);break;case 3:case 4:var c=Bi;Bi=Ad(e.stateNode.containerInfo),Sc(e,t,n),Bi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=yu,yu=16777216,Sc(e,t,n),yu=c):Sc(e,t,n));break;default:Sc(e,t,n)}}function D0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function wu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var c=t[n];za=c,B0(c,e)}D0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)I0(e),e=e.sibling}function I0(e){switch(e.tag){case 0:case 11:case 15:wu(e),e.flags&2048&&Ro(9,e,e.return);break;case 3:wu(e);break;case 12:wu(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,hd(e)):wu(e);break;default:wu(e)}}function hd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var c=t[n];za=c,B0(c,e)}D0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ro(8,t,t.return),hd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,hd(t));break;default:hd(t)}e=e.sibling}}function B0(e,t){for(;za!==null;){var n=za;switch(n.tag){case 0:case 11:case 15:Ro(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var c=n.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:kl(n.memoizedState.cache)}if(c=n.child,c!==null)c.return=n,za=c;else e:for(n=e;za!==null;){c=za;var b=c.sibling,v=c.return;if(C0(c),c===n){za=null;break e}if(b!==null){b.return=v,za=b;break e}za=v}}}var H1={getCacheForType:function(e){var t=Sa(Wn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Sa(Wn).controller.signal}},G1=typeof WeakMap=="function"?WeakMap:Map,un=0,An=null,Wt=null,Jt=0,pn=0,ni=null,Mo=!1,jc=!1,Vf=!1,Zs=0,ta=0,zo=0,Ml=0,Yf=0,ai=0,_c=0,Nu=null,Fr=null,Wf=!1,pd=0,P0=0,md=1/0,gd=null,Do=null,_a=0,Io=null,Ac=null,Js=0,$f=0,Xf=null,U0=null,Su=0,Zf=null;function ri(){return(un&2)!==0&&Jt!==0?Jt&-Jt:J.T!==null?nh():xa()}function F0(){if(ai===0)if((Jt&536870912)===0||Vt){var e=In;In<<=1,(In&3932160)===0&&(In=262144),ai=e}else ai=536870912;return e=$n.current,e!==null&&(e.flags|=32),ai}function qr(e,t,n){(e===An&&(pn===2||pn===9)||e.cancelPendingCommit!==null)&&(kc(e,0),Bo(e,Jt,ai,!1)),Aa(e,n),((un&2)===0||e!==An)&&(e===An&&((un&2)===0&&(Ml|=n),ta===4&&Bo(e,Jt,ai,!1)),vs(e))}function q0(e,t,n){if((un&6)!==0)throw Error(o(327));var c=!n&&(t&127)===0&&(t&e.expiredLanes)===0||qt(e,t),b=c?W1(e,t):Qf(e,t,!0),v=c;do{if(b===0){jc&&!c&&Bo(e,t,0,!1);break}else{if(n=e.current.alternate,v&&!V1(n)){b=Qf(e,t,!1),v=!1;continue}if(b===2){if(v=t,e.errorRecoveryDisabledLanes&v)var z=0;else z=e.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){t=z;e:{var K=e;b=Nu;var ve=K.current.memoizedState.isDehydrated;if(ve&&(kc(K,z).flags|=256),z=Qf(K,z,!1),z!==2){if(Vf&&!ve){K.errorRecoveryDisabledLanes|=v,Ml|=v,b=4;break e}v=Fr,Fr=b,v!==null&&(Fr===null?Fr=v:Fr.push.apply(Fr,v))}b=z}if(v=!1,b!==2)continue}}if(b===1){kc(e,0),Bo(e,t,0,!0);break}e:{switch(c=e,v=b,v){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Bo(c,t,ai,!Mo);break e;case 2:Fr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(b=pd+300-De(),10<b)){if(Bo(c,t,ai,!Mo),_t(c,0,!0)!==0)break e;Js=t,c.timeoutHandle=vm(H0.bind(null,c,n,Fr,gd,Wf,t,ai,Ml,_c,Mo,v,"Throttled",-0,0),b);break e}H0(c,n,Fr,gd,Wf,t,ai,Ml,_c,Mo,v,null,-0,0)}}break}while(!0);vs(e)}function H0(e,t,n,c,b,v,z,K,ve,Ue,We,Ke,Fe,He){if(e.timeoutHandle=-1,Ke=t.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},z0(t,v,Ke);var pt=(v&62914560)===v?pd-De():(v&4194048)===v?P0-De():0;if(pt=Lg(Ke,pt),pt!==null){Js=v,e.cancelPendingCommit=pt(J0.bind(null,e,t,v,n,c,b,z,K,ve,We,Ke,null,Fe,He)),Bo(e,v,z,!Ue);return}}J0(e,t,v,n,c,b,z,K,ve)}function V1(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var c=0;c<n.length;c++){var b=n[c],v=b.getSnapshot;b=b.value;try{if(!qa(v(),b))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bo(e,t,n,c){t&=~Yf,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,c&&(e.warmLanes|=t),c=e.expirationTimes;for(var b=t;0<b;){var v=31-St(b),z=1<<v;c[v]=-1,b&=~z}n!==0&&$a(e,n,t)}function bd(){return(un&6)===0?(ju(0),!1):!0}function Jf(){if(Wt!==null){if(pn===0)var e=Wt.return;else e=Wt,mi=us=null,mc(e),$e=null,lt=0,e=Wt;for(;e!==null;)y0(e.alternate,e),e=e.return;Wt=null}}function kc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,dg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Js=0,Jf(),An=e,Wt=n=Er(e.current,null),Jt=t,pn=0,ni=null,Mo=!1,jc=qt(e,t),Vf=!1,_c=ai=Yf=Ml=zo=ta=0,Fr=Nu=null,Wf=!1,(t&8)!==0&&(t|=t&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=t;0<c;){var b=31-St(c),v=1<<b;t|=e[b],c&=~v}return Zs=t,wl(),n}function G0(e,t){Rt=null,J.H=pu,t===we||t===Ie?(t=Ze(),pn=3):t===Be?(t=Ze(),pn=4):pn=t===Lf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ni=t,Wt===null&&(ta=1,sd(e,Tr(t,e.current)))}function V0(){var e=$n.current;return e===null?!0:(Jt&4194048)===Jt?pa===null:(Jt&62914560)===Jt||(Jt&536870912)!==0?e===pa:!1}function Y0(){var e=J.H;return J.H=pu,e===null?pu:e}function W0(){var e=J.A;return J.A=H1,e}function xd(){ta=4,Mo||(Jt&4194048)!==Jt&&$n.current!==null||(jc=!0),(zo&134217727)===0&&(Ml&134217727)===0||An===null||Bo(An,Jt,ai,!1)}function Qf(e,t,n){var c=un;un|=2;var b=Y0(),v=W0();(An!==e||Jt!==t)&&(gd=null,kc(e,t)),t=!1;var z=ta;e:do try{if(pn!==0&&Wt!==null){var K=Wt,ve=ni;switch(pn){case 8:Jf(),z=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(t=!0);var Ue=pn;if(pn=0,ni=null,Cc(e,K,ve,Ue),n&&jc){z=0;break e}break;default:Ue=pn,pn=0,ni=null,Cc(e,K,ve,Ue)}}Y1(),z=ta;break}catch(We){G0(e,We)}while(!0);return t&&e.shellSuspendCounter++,mi=us=null,un=c,J.H=b,J.A=v,Wt===null&&(An=null,Jt=0,wl()),z}function Y1(){for(;Wt!==null;)$0(Wt)}function W1(e,t){var n=un;un|=2;var c=Y0(),b=W0();An!==e||Jt!==t?(gd=null,md=De()+500,kc(e,t)):jc=qt(e,t);e:do try{if(pn!==0&&Wt!==null){t=Wt;var v=ni;t:switch(pn){case 1:pn=0,ni=null,Cc(e,t,v,1);break;case 2:case 9:if(Qe(v)){pn=0,ni=null,X0(t);break}t=function(){pn!==2&&pn!==9||An!==e||(pn=7),vs(e)},v.then(t,t);break e;case 3:pn=7;break e;case 4:pn=5;break e;case 7:Qe(v)?(pn=0,ni=null,X0(t)):(pn=0,ni=null,Cc(e,t,v,7));break;case 5:var z=null;switch(Wt.tag){case 26:z=Wt.memoizedState;case 5:case 27:var K=Wt;if(z?Mm(z):K.stateNode.complete){pn=0,ni=null;var ve=K.sibling;if(ve!==null)Wt=ve;else{var Ue=K.return;Ue!==null?(Wt=Ue,vd(Ue)):Wt=null}break t}}pn=0,ni=null,Cc(e,t,v,5);break;case 6:pn=0,ni=null,Cc(e,t,v,6);break;case 8:Jf(),ta=6;break e;default:throw Error(o(462))}}$1();break}catch(We){G0(e,We)}while(!0);return mi=us=null,J.H=c,J.A=b,un=n,Wt!==null?0:(An=null,Jt=0,wl(),ta)}function $1(){for(;Wt!==null&&!xe();)$0(Wt)}function $0(e){var t=x0(e.alternate,e,Zs);e.memoizedProps=e.pendingProps,t===null?vd(e):Wt=t}function X0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=f0(n,t,t.pendingProps,t.type,void 0,Jt);break;case 11:t=f0(n,t,t.pendingProps,t.type.render,t.ref,Jt);break;case 5:mc(t);default:y0(n,t),t=Wt=jl(t,Zs),t=x0(n,t,Zs)}e.memoizedProps=e.pendingProps,t===null?vd(e):Wt=t}function Cc(e,t,n,c){mi=us=null,mc(t),$e=null,lt=0;var b=t.return;try{if(D1(e,b,t,n,Jt)){ta=1,sd(e,Tr(n,e.current)),Wt=null;return}}catch(v){if(b!==null)throw Wt=b,v;ta=1,sd(e,Tr(n,e.current)),Wt=null;return}t.flags&32768?(Vt||c===1?e=!0:jc||(Jt&536870912)!==0?e=!1:(Mo=e=!0,(c===2||c===9||c===3||c===6)&&(c=$n.current,c!==null&&c.tag===13&&(c.flags|=16384))),Z0(t,e)):vd(t)}function vd(e){var t=e;do{if((t.flags&32768)!==0){Z0(t,Mo);return}e=t.return;var n=P1(t.alternate,t,Zs);if(n!==null){Wt=n;return}if(t=t.sibling,t!==null){Wt=t;return}Wt=t=e}while(t!==null);ta===0&&(ta=5)}function Z0(e,t){do{var n=U1(e.alternate,e);if(n!==null){n.flags&=32767,Wt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Wt=e;return}Wt=e=n}while(e!==null);ta=6,Wt=null}function J0(e,t,n,c,b,v,z,K,ve){e.cancelPendingCommit=null;do yd();while(_a!==0);if((un&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(v=t.lanes|t.childLanes,v|=tc,Nt(e,n,v,z,K,ve),e===An&&(Wt=An=null,Jt=0),Ac=t,Io=e,Js=n,$f=v,Xf=b,U0=c,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Q1(dt,function(){return nm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,b=ae.p,ae.p=2,z=un,un|=4;try{F1(e,t,n)}finally{un=z,ae.p=b,J.T=c}}_a=1,Q0(),K0(),em()}}function Q0(){if(_a===1){_a=0;var e=Io,t=Ac,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=J.T,J.T=null;var c=ae.p;ae.p=2;var b=un;un|=4;try{O0(t,e);var v=uh,z=Kr(e.containerInfo),K=v.focusedElem,ve=v.selectionRange;if(z!==K&&K&&K.ownerDocument&&Li(K.ownerDocument.documentElement,K)){if(ve!==null&&ei(K)){var Ue=ve.start,We=ve.end;if(We===void 0&&(We=Ue),"selectionStart"in K)K.selectionStart=Ue,K.selectionEnd=Math.min(We,K.value.length);else{var Ke=K.ownerDocument||document,Fe=Ke&&Ke.defaultView||window;if(Fe.getSelection){var He=Fe.getSelection(),pt=K.textContent.length,kt=Math.min(ve.start,pt),Nn=ve.end===void 0?kt:Math.min(ve.end,pt);!He.extend&&kt>Nn&&(z=Nn,Nn=kt,kt=z);var Me=kr(K,kt),_e=kr(K,Nn);if(Me&&_e&&(He.rangeCount!==1||He.anchorNode!==Me.node||He.anchorOffset!==Me.offset||He.focusNode!==_e.node||He.focusOffset!==_e.offset)){var Pe=Ke.createRange();Pe.setStart(Me.node,Me.offset),He.removeAllRanges(),kt>Nn?(He.addRange(Pe),He.extend(_e.node,_e.offset)):(Pe.setEnd(_e.node,_e.offset),He.addRange(Pe))}}}}for(Ke=[],He=K;He=He.parentNode;)He.nodeType===1&&Ke.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ke.length;K++){var Je=Ke[K];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}Od=!!ch,uh=ch=null}finally{un=b,ae.p=c,J.T=n}}e.current=t,_a=2}}function K0(){if(_a===2){_a=0;var e=Io,t=Ac,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=J.T,J.T=null;var c=ae.p;ae.p=2;var b=un;un|=4;try{k0(e,t.alternate,t)}finally{un=b,ae.p=c,J.T=n}}_a=3}}function em(){if(_a===4||_a===3){_a=0,Oe();var e=Io,t=Ac,n=Js,c=U0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?_a=5:(_a=0,Ac=Io=null,tm(e,e.pendingLanes));var b=e.pendingLanes;if(b===0&&(Do=null),Ln(n),t=t.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ht,t,void 0,(t.current.flags&128)===128)}catch{}if(c!==null){t=J.T,b=ae.p,ae.p=2,J.T=null;try{for(var v=e.onRecoverableError,z=0;z<c.length;z++){var K=c[z];v(K.value,{componentStack:K.stack})}}finally{J.T=t,ae.p=b}}(Js&3)!==0&&yd(),vs(e),b=e.pendingLanes,(n&261930)!==0&&(b&42)!==0?e===Zf?Su++:(Su=0,Zf=e):Su=0,ju(0)}}function tm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,kl(t)))}function yd(){return Q0(),K0(),em(),nm()}function nm(){if(_a!==5)return!1;var e=Io,t=$f;$f=0;var n=Ln(Js),c=J.T,b=ae.p;try{ae.p=32>n?32:n,J.T=null,n=Xf,Xf=null;var v=Io,z=Js;if(_a=0,Ac=Io=null,Js=0,(un&6)!==0)throw Error(o(331));var K=un;if(un|=4,I0(v.current),M0(v,v.current,z,n),un=K,ju(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ht,v)}catch{}return!0}finally{ae.p=b,J.T=c,tm(e,t)}}function am(e,t,n){t=Tr(n,t),t=Cf(e.stateNode,t,2),e=hn(e,t,2),e!==null&&(Aa(e,2),vs(e))}function mn(e,t,n){if(e.tag===3)am(e,e,n);else for(;t!==null;){if(t.tag===3){am(t,e,n);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Do===null||!Do.has(c))){e=Tr(n,e),n=r0(2),c=hn(t,n,2),c!==null&&(i0(n,c,t,e),Aa(c,2),vs(c));break}}t=t.return}}function Kf(e,t,n){var c=e.pingCache;if(c===null){c=e.pingCache=new G1;var b=new Set;c.set(t,b)}else b=c.get(t),b===void 0&&(b=new Set,c.set(t,b));b.has(n)||(Vf=!0,b.add(n),e=X1.bind(null,e,t,n),t.then(e,e))}function X1(e,t,n){var c=e.pingCache;c!==null&&c.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,An===e&&(Jt&n)===n&&(ta===4||ta===3&&(Jt&62914560)===Jt&&300>De()-pd?(un&2)===0&&kc(e,0):Yf|=n,_c===Jt&&(_c=0)),vs(e)}function rm(e,t){t===0&&(t=Jn()),e=Ti(e,t),e!==null&&(Aa(e,t),vs(e))}function Z1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rm(e,n)}function J1(e,t){var n=0;switch(e.tag){case 31:case 13:var c=e.stateNode,b=e.memoizedState;b!==null&&(n=b.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(t),rm(e,n)}function Q1(e,t){return ke(e,t)}var wd=null,Lc=null,eh=!1,Nd=!1,th=!1,Po=0;function vs(e){e!==Lc&&e.next===null&&(Lc===null?wd=Lc=e:Lc=Lc.next=e),Nd=!0,eh||(eh=!0,eg())}function ju(e,t){if(!th&&Nd){th=!0;do for(var n=!1,c=wd;c!==null;){if(e!==0){var b=c.pendingLanes;if(b===0)var v=0;else{var z=c.suspendedLanes,K=c.pingedLanes;v=(1<<31-St(42|e)+1)-1,v&=b&~(z&~K),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(n=!0,lm(c,v))}else v=Jt,v=_t(c,c===An?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||qt(c,v)||(n=!0,lm(c,v));c=c.next}while(n);th=!1}}function K1(){im()}function im(){Nd=eh=!1;var e=0;Po!==0&&ug()&&(e=Po);for(var t=De(),n=null,c=wd;c!==null;){var b=c.next,v=sm(c,t);v===0?(c.next=null,n===null?wd=b:n.next=b,b===null&&(Lc=n)):(n=c,(e!==0||(v&3)!==0)&&(Nd=!0)),c=b}_a!==0&&_a!==5||ju(e),Po!==0&&(Po=0)}function sm(e,t){for(var n=e.suspendedLanes,c=e.pingedLanes,b=e.expirationTimes,v=e.pendingLanes&-62914561;0<v;){var z=31-St(v),K=1<<z,ve=b[z];ve===-1?((K&n)===0||(K&c)!==0)&&(b[z]=Si(K,t)):ve<=t&&(e.expiredLanes|=K),v&=~K}if(t=An,n=Jt,n=_t(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,n===0||e===t&&(pn===2||pn===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Le(c),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||qt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(c!==null&&Le(c),Ln(n)){case 2:case 8:n=ct;break;case 32:n=dt;break;case 268435456:n=Lt;break;default:n=dt}return c=om.bind(null,e),n=ke(n,c),e.callbackPriority=t,e.callbackNode=n,t}return c!==null&&c!==null&&Le(c),e.callbackPriority=2,e.callbackNode=null,2}function om(e,t){if(_a!==0&&_a!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(yd()&&e.callbackNode!==n)return null;var c=Jt;return c=_t(e,e===An?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(q0(e,c,t),sm(e,De()),e.callbackNode!=null&&e.callbackNode===n?om.bind(null,e):null)}function lm(e,t){if(yd())return null;q0(e,t,!0)}function eg(){fg(function(){(un&6)!==0?ke(at,K1):im()})}function nh(){if(Po===0){var e=f;e===0&&(e=Tt,Tt<<=1,(Tt&261888)===0&&(Tt=256)),Po=e}return Po}function cm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:As(""+e)}function um(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function tg(e,t,n,c,b){if(t==="submit"&&n&&n.stateNode===b){var v=cm((b[bn]||null).action),z=c.submitter;z&&(t=(t=z[bn]||null)?cm(t.formAction):z.getAttribute("formAction"),t!==null&&(v=t,z=null));var K=new Ls("action","action",null,c,b);e.push({event:K,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Po!==0){var ve=z?um(b,z):new FormData(b);Nf(n,{pending:!0,data:ve,method:b.method,action:v},null,ve)}}else typeof v=="function"&&(K.preventDefault(),ve=z?um(b,z):new FormData(b),Nf(n,{pending:!0,data:ve,method:b.method,action:v},v,ve))},currentTarget:b}]})}}for(var ah=0;ah<pi.length;ah++){var rh=pi[ah],ng=rh.toLowerCase(),ag=rh[0].toUpperCase()+rh.slice(1);Ta(ng,"on"+ag)}Ta(No,"onAnimationEnd"),Ta(hr,"onAnimationIteration"),Ta(fi,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(xn,"onTransitionRun"),Ta(vn,"onTransitionStart"),Ta(Yn,"onTransitionCancel"),Ta(Kn,"onTransitionEnd"),Qn("onMouseEnter",["mouseout","mouseover"]),Qn("onMouseLeave",["mouseout","mouseover"]),Qn("onPointerEnter",["pointerout","pointerover"]),Qn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function dm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var c=e[n],b=c.event;c=c.listeners;e:{var v=void 0;if(t)for(var z=c.length-1;0<=z;z--){var K=c[z],ve=K.instance,Ue=K.currentTarget;if(K=K.listener,ve!==v&&b.isPropagationStopped())break e;v=K,b.currentTarget=Ue;try{v(b)}catch(We){Ms(We)}b.currentTarget=null,v=ve}else for(z=0;z<c.length;z++){if(K=c[z],ve=K.instance,Ue=K.currentTarget,K=K.listener,ve!==v&&b.isPropagationStopped())break e;v=K,b.currentTarget=Ue;try{v(b)}catch(We){Ms(We)}b.currentTarget=null,v=ve}}}}function $t(e,t){var n=t[fn];n===void 0&&(n=t[fn]=new Set);var c=e+"__bubble";n.has(c)||(fm(t,e,2,!1),n.add(c))}function ih(e,t,n){var c=0;t&&(c|=4),fm(n,e,c,t)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function sh(e){if(!e[Sd]){e[Sd]=!0,nn.forEach(function(n){n!=="selectionchange"&&(rg.has(n)||ih(n,!1,e),ih(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sd]||(t[Sd]=!0,ih("selectionchange",!1,t))}}function fm(e,t,n,c){switch(Fm(t)){case 2:var b=Og;break;case 8:b=Rg;break;default:b=wh}n=b.bind(null,t,n,e),b=void 0,!ks||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(b=!0),c?b!==void 0?e.addEventListener(t,n,{capture:!0,passive:b}):e.addEventListener(t,n,!0):b!==void 0?e.addEventListener(t,n,{passive:b}):e.addEventListener(t,n,!1)}function oh(e,t,n,c,b){var v=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var z=c.tag;if(z===3||z===4){var K=c.stateNode.containerInfo;if(K===b)break;if(z===4)for(z=c.return;z!==null;){var ve=z.tag;if((ve===3||ve===4)&&z.stateNode.containerInfo===b)return;z=z.return}for(;K!==null;){if(z=Ja(K),z===null)return;if(ve=z.tag,ve===5||ve===6||ve===26||ve===27){c=v=z;continue e}K=K.parentNode}}c=c.return}cl(function(){var Ue=v,We=fo(n),Ke=[];e:{var Fe=hi.get(e);if(Fe!==void 0){var He=Ls,pt=e;switch(e){case"keypress":if(Xr(n)===0)break e;case"keydown":case"keyup":He=bl;break;case"focusin":pt="focus",He=fl;break;case"focusout":pt="blur",He=fl;break;case"beforeblur":case"afterblur":He=fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=_i;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=dl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=V;break;case No:case hr:case fi:He=Kc;break;case Kn:He=ye;break;case"scroll":case"scrollend":He=Xl;break;case"wheel":He=Ye;break;case"copy":case"cut":case"paste":He=pl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=bo;break;case"toggle":case"beforetoggle":He=ut}var kt=(t&4)!==0,Nn=!kt&&(e==="scroll"||e==="scrollend"),Me=kt?Fe!==null?Fe+"Capture":null:Fe;kt=[];for(var _e=Ue,Pe;_e!==null;){var Je=_e;if(Pe=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||Pe===null||Me===null||(Je=Xi(_e,Me),Je!=null&&kt.push(Au(_e,Je,Pe))),Nn)break;_e=_e.return}0<kt.length&&(Fe=new He(Fe,pt,null,n,We),Ke.push({event:Fe,listeners:kt}))}}if((t&7)===0){e:{if(Fe=e==="mouseover"||e==="pointerover",He=e==="mouseout"||e==="pointerout",Fe&&n!==ll&&(pt=n.relatedTarget||n.fromElement)&&(Ja(pt)||pt[ua]))break e;if((He||Fe)&&(Fe=We.window===We?We:(Fe=We.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,He?(pt=n.relatedTarget||n.toElement,He=Ue,pt=pt?Ja(pt):null,pt!==null&&(Nn=l(pt),kt=pt.tag,pt!==Nn||kt!==5&&kt!==27&&kt!==6)&&(pt=null)):(He=null,pt=Ue),He!==pt)){if(kt=_i,Je="onMouseLeave",Me="onMouseEnter",_e="mouse",(e==="pointerout"||e==="pointerover")&&(kt=bo,Je="onPointerLeave",Me="onPointerEnter",_e="pointer"),Nn=He==null?Fe:st(He),Pe=pt==null?Fe:st(pt),Fe=new kt(Je,_e+"leave",He,n,We),Fe.target=Nn,Fe.relatedTarget=Pe,Je=null,Ja(We)===Ue&&(kt=new kt(Me,_e+"enter",pt,n,We),kt.target=Pe,kt.relatedTarget=Nn,Je=kt),Nn=Je,He&&pt)t:{for(kt=ig,Me=He,_e=pt,Pe=0,Je=Me;Je;Je=kt(Je))Pe++;Je=0;for(var yt=_e;yt;yt=kt(yt))Je++;for(;0<Pe-Je;)Me=kt(Me),Pe--;for(;0<Je-Pe;)_e=kt(_e),Je--;for(;Pe--;){if(Me===_e||_e!==null&&Me===_e.alternate){kt=Me;break t}Me=kt(Me),_e=kt(_e)}kt=null}else kt=null;He!==null&&hm(Ke,Fe,He,kt,!1),pt!==null&&Nn!==null&&hm(Ke,Nn,pt,kt,!0)}}e:{if(Fe=Ue?st(Ue):window,He=Fe.nodeName&&Fe.nodeName.toLowerCase(),He==="select"||He==="input"&&Fe.type==="file")var sn=Ua;else if(xo(Fe))if(Rs)sn=yl;else{sn=ec;var bt=vl}else He=Fe.nodeName,!He||He.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Ue&&$r(Ue.elementType)&&(sn=Ua):sn=Qr;if(sn&&(sn=sn(e,Ue))){vo(Ke,sn,n,We);break e}bt&&bt(e,Fe,Ue),e==="focusout"&&Ue&&Fe.type==="number"&&Ue.memoizedProps.value!=null&&lo(Fe,"number",Fe.value)}switch(bt=Ue?st(Ue):window,e){case"focusin":(xo(bt)||bt.contentEditable==="true")&&(Ea=bt,rs=Ue,Ei=null);break;case"focusout":Ei=rs=Ea=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,Cr(Ke,n,We);break;case"selectionchange":if(wo)break;case"keydown":case"keyup":Cr(Ke,n,We)}var Ut;if(Ot)e:{switch(e){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else La?va(e,n)&&(Qt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Qt="onCompositionStart");Qt&&(On&&n.locale!=="ko"&&(La||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&La&&(Ut=Ji()):(ci=We,ul="value"in ci?ci.value:ci.textContent,La=!0)),bt=jd(Ue,Qt),0<bt.length&&(Qt=new Ts(Qt,e,null,n,We),Ke.push({event:Qt,listeners:bt}),Ut?Qt.data=Ut:(Ut=aa(n),Ut!==null&&(Qt.data=Ut)))),(Ut=Xt?dr(e,n):Ai(e,n))&&(Qt=jd(Ue,"onBeforeInput"),0<Qt.length&&(bt=new Ts("onBeforeInput","beforeinput",null,n,We),Ke.push({event:bt,listeners:Qt}),bt.data=Ut)),tg(Ke,e,Ue,n,We)}dm(Ke,t)})}function Au(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jd(e,t){for(var n=t+"Capture",c=[];e!==null;){var b=e,v=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||v===null||(b=Xi(e,n),b!=null&&c.unshift(Au(e,b,v)),b=Xi(e,t),b!=null&&c.push(Au(e,b,v))),e.tag===3)return c;e=e.return}return[]}function ig(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hm(e,t,n,c,b){for(var v=t._reactName,z=[];n!==null&&n!==c;){var K=n,ve=K.alternate,Ue=K.stateNode;if(K=K.tag,ve!==null&&ve===c)break;K!==5&&K!==26&&K!==27||Ue===null||(ve=Ue,b?(Ue=Xi(n,v),Ue!=null&&z.unshift(Au(n,Ue,ve))):b||(Ue=Xi(n,v),Ue!=null&&z.push(Au(n,Ue,ve)))),n=n.return}z.length!==0&&e.push({event:t,listeners:z})}var sg=/\r\n?/g,og=/\u0000|\uFFFD/g;function pm(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(og,"")}function mm(e,t){return t=pm(t),pm(e)===t}function wn(e,t,n,c,b,v){switch(n){case"children":typeof c=="string"?t==="body"||t==="textarea"&&c===""||li(e,c):(typeof c=="number"||typeof c=="bigint")&&t!=="body"&&li(e,""+c);break;case"className":En(e,"class",c);break;case"tabIndex":En(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":En(e,n,c);break;case"style":Wl(e,c,v);break;case"data":if(t!=="object"){En(e,"data",c);break}case"src":case"href":if(c===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(n);break}c=As(""+c),e.setAttribute(n,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(n==="formAction"?(t!=="input"&&wn(e,t,"name",b.name,b,null),wn(e,t,"formEncType",b.formEncType,b,null),wn(e,t,"formMethod",b.formMethod,b,null),wn(e,t,"formTarget",b.formTarget,b,null)):(wn(e,t,"encType",b.encType,b,null),wn(e,t,"method",b.method,b,null),wn(e,t,"target",b.target,b,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(n);break}c=As(""+c),e.setAttribute(n,c);break;case"onClick":c!=null&&(e.onclick=Tn);break;case"onScroll":c!=null&&$t("scroll",e);break;case"onScrollEnd":c!=null&&$t("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(n=c.__html,n!=null){if(b.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}n=As(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(n,""+c):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":c===!0?e.setAttribute(n,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(n,c):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(n,c):e.removeAttribute(n);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(n):e.setAttribute(n,c);break;case"popover":$t("beforetoggle",e),$t("toggle",e),so(e,"popover",c);break;case"xlinkActuate":wr(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wr(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wr(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wr(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wr(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wr(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wr(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":so(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=co.get(n)||n,so(e,n,c))}}function lh(e,t,n,c,b,v){switch(n){case"style":Wl(e,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(n=c.__html,n!=null){if(b.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof c=="string"?li(e,c):(typeof c=="number"||typeof c=="bigint")&&li(e,""+c);break;case"onScroll":c!=null&&$t("scroll",e);break;case"onScrollEnd":c!=null&&$t("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ka.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(b=n.endsWith("Capture"),t=n.slice(2,b?n.length-7:void 0),v=e[bn]||null,v=v!=null?v[n]:null,typeof v=="function"&&e.removeEventListener(t,v,b),typeof c=="function")){typeof v!="function"&&v!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,c,b);break e}n in e?e[n]=c:c===!0?e.setAttribute(n,""):so(e,n,c)}}}function Ya(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",e),$t("load",e);var c=!1,b=!1,v;for(v in n)if(n.hasOwnProperty(v)){var z=n[v];if(z!=null)switch(v){case"src":c=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:wn(e,t,v,z,n,null)}}b&&wn(e,t,"srcSet",n.srcSet,n,null),c&&wn(e,t,"src",n.src,n,null);return;case"input":$t("invalid",e);var K=v=z=b=null,ve=null,Ue=null;for(c in n)if(n.hasOwnProperty(c)){var We=n[c];if(We!=null)switch(c){case"name":b=We;break;case"type":z=We;break;case"checked":ve=We;break;case"defaultChecked":Ue=We;break;case"value":v=We;break;case"defaultValue":K=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(o(137,t));break;default:wn(e,t,c,We,n,null)}}Gl(e,v,K,ve,Ue,z,b,!1);return;case"select":$t("invalid",e),c=z=v=null;for(b in n)if(n.hasOwnProperty(b)&&(K=n[b],K!=null))switch(b){case"value":v=K;break;case"defaultValue":z=K;break;case"multiple":c=K;default:wn(e,t,b,K,n,null)}t=v,n=z,e.multiple=!!c,t!=null?Wi(e,!!c,t,!1):n!=null&&Wi(e,!!c,n,!0);return;case"textarea":$t("invalid",e),v=b=c=null;for(z in n)if(n.hasOwnProperty(z)&&(K=n[z],K!=null))switch(z){case"value":c=K;break;case"defaultValue":b=K;break;case"children":v=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(91));break;default:wn(e,t,z,K,n,null)}Vl(e,c,b,v);return;case"option":for(ve in n)if(n.hasOwnProperty(ve)&&(c=n[ve],c!=null))switch(ve){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:wn(e,t,ve,c,n,null)}return;case"dialog":$t("beforetoggle",e),$t("toggle",e),$t("cancel",e),$t("close",e);break;case"iframe":case"object":$t("load",e);break;case"video":case"audio":for(c=0;c<_u.length;c++)$t(_u[c],e);break;case"image":$t("error",e),$t("load",e);break;case"details":$t("toggle",e);break;case"embed":case"source":case"link":$t("error",e),$t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in n)if(n.hasOwnProperty(Ue)&&(c=n[Ue],c!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:wn(e,t,Ue,c,n,null)}return;default:if($r(t)){for(We in n)n.hasOwnProperty(We)&&(c=n[We],c!==void 0&&lh(e,t,We,c,n,void 0));return}}for(K in n)n.hasOwnProperty(K)&&(c=n[K],c!=null&&wn(e,t,K,c,n,null))}function lg(e,t,n,c){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,v=null,z=null,K=null,ve=null,Ue=null,We=null;for(He in n){var Ke=n[He];if(n.hasOwnProperty(He)&&Ke!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":ve=Ke;default:c.hasOwnProperty(He)||wn(e,t,He,null,c,Ke)}}for(var Fe in c){var He=c[Fe];if(Ke=n[Fe],c.hasOwnProperty(Fe)&&(He!=null||Ke!=null))switch(Fe){case"type":v=He;break;case"name":b=He;break;case"checked":Ue=He;break;case"defaultChecked":We=He;break;case"value":z=He;break;case"defaultValue":K=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(o(137,t));break;default:He!==Ke&&wn(e,t,Fe,He,c,Ke)}}oo(e,z,K,ve,Ue,We,v,b);return;case"select":He=z=K=Fe=null;for(v in n)if(ve=n[v],n.hasOwnProperty(v)&&ve!=null)switch(v){case"value":break;case"multiple":He=ve;default:c.hasOwnProperty(v)||wn(e,t,v,null,c,ve)}for(b in c)if(v=c[b],ve=n[b],c.hasOwnProperty(b)&&(v!=null||ve!=null))switch(b){case"value":Fe=v;break;case"defaultValue":K=v;break;case"multiple":z=v;default:v!==ve&&wn(e,t,b,v,c,ve)}t=K,n=z,c=He,Fe!=null?Wi(e,!!n,Fe,!1):!!c!=!!n&&(t!=null?Wi(e,!!n,t,!0):Wi(e,!!n,n?[]:"",!1));return;case"textarea":He=Fe=null;for(K in n)if(b=n[K],n.hasOwnProperty(K)&&b!=null&&!c.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:wn(e,t,K,null,c,b)}for(z in c)if(b=c[z],v=n[z],c.hasOwnProperty(z)&&(b!=null||v!=null))switch(z){case"value":Fe=b;break;case"defaultValue":He=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:b!==v&&wn(e,t,z,b,c,v)}ol(e,Fe,He);return;case"option":for(var pt in n)if(Fe=n[pt],n.hasOwnProperty(pt)&&Fe!=null&&!c.hasOwnProperty(pt))switch(pt){case"selected":e.selected=!1;break;default:wn(e,t,pt,null,c,Fe)}for(ve in c)if(Fe=c[ve],He=n[ve],c.hasOwnProperty(ve)&&Fe!==He&&(Fe!=null||He!=null))switch(ve){case"selected":e.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:wn(e,t,ve,Fe,c,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in n)Fe=n[kt],n.hasOwnProperty(kt)&&Fe!=null&&!c.hasOwnProperty(kt)&&wn(e,t,kt,null,c,Fe);for(Ue in c)if(Fe=c[Ue],He=n[Ue],c.hasOwnProperty(Ue)&&Fe!==He&&(Fe!=null||He!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(o(137,t));break;default:wn(e,t,Ue,Fe,c,He)}return;default:if($r(t)){for(var Nn in n)Fe=n[Nn],n.hasOwnProperty(Nn)&&Fe!==void 0&&!c.hasOwnProperty(Nn)&&lh(e,t,Nn,void 0,c,Fe);for(We in c)Fe=c[We],He=n[We],!c.hasOwnProperty(We)||Fe===He||Fe===void 0&&He===void 0||lh(e,t,We,Fe,c,He);return}}for(var Me in n)Fe=n[Me],n.hasOwnProperty(Me)&&Fe!=null&&!c.hasOwnProperty(Me)&&wn(e,t,Me,null,c,Fe);for(Ke in c)Fe=c[Ke],He=n[Ke],!c.hasOwnProperty(Ke)||Fe===He||Fe==null&&He==null||wn(e,t,Ke,Fe,c,He)}function gm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),c=0;c<n.length;c++){var b=n[c],v=b.transferSize,z=b.initiatorType,K=b.duration;if(v&&K&&gm(z)){for(z=0,K=b.responseEnd,c+=1;c<n.length;c++){var ve=n[c],Ue=ve.startTime;if(Ue>K)break;var We=ve.transferSize,Ke=ve.initiatorType;We&&gm(Ke)&&(ve=ve.responseEnd,z+=We*(ve<K?1:(K-Ue)/(ve-Ue)))}if(--c,t+=8*(v+z)/(b.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ch=null,uh=null;function _d(e){return e.nodeType===9?e:e.ownerDocument}function bm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function dh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fh=null;function ug(){var e=window.event;return e&&e.type==="popstate"?e===fh?!1:(fh=e,!0):(fh=null,!1)}var vm=typeof setTimeout=="function"?setTimeout:void 0,dg=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,fg=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(e){return ym.resolve(null).then(e).catch(hg)}:vm;function hg(e){setTimeout(function(){throw e})}function Uo(e){return e==="head"}function wm(e,t){var n=t,c=0;do{var b=n.nextSibling;if(e.removeChild(n),b&&b.nodeType===8)if(n=b.data,n==="/$"||n==="/&"){if(c===0){e.removeChild(b),Rc(t);return}c--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")c++;else if(n==="html")ku(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ku(n);for(var v=n.firstChild;v;){var z=v.nextSibling,K=v.nodeName;v[ur]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&v.rel.toLowerCase()==="stylesheet"||n.removeChild(v),v=z}}else n==="body"&&ku(e.ownerDocument.body);n=b}while(n);Rc(t)}function Nm(e,t){var n=e;e=0;do{var c=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=c}while(n)}function hh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hh(n),Za(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function pg(e,t,n,c){for(;e.nodeType===1;){var b=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ur])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(v=e.getAttribute("rel"),v==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(v!==b.rel||e.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||e.getAttribute("title")!==(b.title==null?null:b.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(v=e.getAttribute("src"),(v!==(b.src==null?null:b.src)||e.getAttribute("type")!==(b.type==null?null:b.type)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&v&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var v=b.name==null?null:""+b.name;if(b.type==="hidden"&&e.getAttribute("name")===v)return e}else return e;if(e=wi(e.nextSibling),e===null)break}return null}function mg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=wi(e.nextSibling),e===null))return null;return e}function Sm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wi(e.nextSibling),e===null))return null;return e}function ph(e){return e.data==="$?"||e.data==="$~"}function mh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var c=function(){t(),n.removeEventListener("DOMContentLoaded",c)};n.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function wi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var gh=null;function jm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return wi(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function _m(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Am(e,t,n){switch(t=_d(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ku(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Za(e)}var Ni=new Map,km=new Set;function Ad(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qs=ae.d;ae.d={f:bg,r:xg,D:vg,C:yg,L:wg,m:Ng,X:jg,S:Sg,M:_g};function bg(){var e=Qs.f(),t=bd();return e||t}function xg(e){var t=tt(e);t!==null&&t.tag===5&&t.type==="form"?Gp(t):Qs.r(e)}var Ec=typeof document>"u"?null:document;function Cm(e,t,n){var c=Ec;if(c&&typeof t=="string"&&t){var b=Ca(t);b='link[rel="'+e+'"][href="'+b+'"]',typeof n=="string"&&(b+='[crossorigin="'+n+'"]'),km.has(b)||(km.add(b),e={rel:e,crossOrigin:n,href:t},c.querySelector(b)===null&&(t=c.createElement("link"),Ya(t,"link",e),Pt(t),c.head.appendChild(t)))}}function vg(e){Qs.D(e),Cm("dns-prefetch",e,null)}function yg(e,t){Qs.C(e,t),Cm("preconnect",e,t)}function wg(e,t,n){Qs.L(e,t,n);var c=Ec;if(c&&e&&t){var b='link[rel="preload"][as="'+Ca(t)+'"]';t==="image"&&n&&n.imageSrcSet?(b+='[imagesrcset="'+Ca(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(b+='[imagesizes="'+Ca(n.imageSizes)+'"]')):b+='[href="'+Ca(e)+'"]';var v=b;switch(t){case"style":v=Tc(e);break;case"script":v=Oc(e)}Ni.has(v)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ni.set(v,e),c.querySelector(b)!==null||t==="style"&&c.querySelector(Cu(v))||t==="script"&&c.querySelector(Lu(v))||(t=c.createElement("link"),Ya(t,"link",e),Pt(t),c.head.appendChild(t)))}}function Ng(e,t){Qs.m(e,t);var n=Ec;if(n&&e){var c=t&&typeof t.as=="string"?t.as:"script",b='link[rel="modulepreload"][as="'+Ca(c)+'"][href="'+Ca(e)+'"]',v=b;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Oc(e)}if(!Ni.has(v)&&(e=w({rel:"modulepreload",href:e},t),Ni.set(v,e),n.querySelector(b)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lu(v)))return}c=n.createElement("link"),Ya(c,"link",e),Pt(c),n.head.appendChild(c)}}}function Sg(e,t,n){Qs.S(e,t,n);var c=Ec;if(c&&e){var b=en(c).hoistableStyles,v=Tc(e);t=t||"default";var z=b.get(v);if(!z){var K={loading:0,preload:null};if(z=c.querySelector(Cu(v)))K.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ni.get(v))&&bh(e,n);var ve=z=c.createElement("link");Pt(ve),Ya(ve,"link",e),ve._p=new Promise(function(Ue,We){ve.onload=Ue,ve.onerror=We}),ve.addEventListener("load",function(){K.loading|=1}),ve.addEventListener("error",function(){K.loading|=2}),K.loading|=4,kd(z,t,c)}z={type:"stylesheet",instance:z,count:1,state:K},b.set(v,z)}}}function jg(e,t){Qs.X(e,t);var n=Ec;if(n&&e){var c=en(n).hoistableScripts,b=Oc(e),v=c.get(b);v||(v=n.querySelector(Lu(b)),v||(e=w({src:e,async:!0},t),(t=Ni.get(b))&&xh(e,t),v=n.createElement("script"),Pt(v),Ya(v,"link",e),n.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(b,v))}}function _g(e,t){Qs.M(e,t);var n=Ec;if(n&&e){var c=en(n).hoistableScripts,b=Oc(e),v=c.get(b);v||(v=n.querySelector(Lu(b)),v||(e=w({src:e,async:!0,type:"module"},t),(t=Ni.get(b))&&xh(e,t),v=n.createElement("script"),Pt(v),Ya(v,"link",e),n.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(b,v))}}function Lm(e,t,n,c){var b=(b=be.current)?Ad(b):null;if(!b)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Tc(n.href),n=en(b).hoistableStyles,c=n.get(t),c||(c={type:"style",instance:null,count:0,state:null},n.set(t,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Tc(n.href);var v=en(b).hoistableStyles,z=v.get(e);if(z||(b=b.ownerDocument||b,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(e,z),(v=b.querySelector(Cu(e)))&&!v._p&&(z.instance=v,z.state.loading=5),Ni.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ni.set(e,n),v||Ag(b,e,n,z.state))),t&&c===null)throw Error(o(528,""));return z}if(t&&c!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Oc(n),n=en(b).hoistableScripts,c=n.get(t),c||(c={type:"script",instance:null,count:0,state:null},n.set(t,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Tc(e){return'href="'+Ca(e)+'"'}function Cu(e){return'link[rel="stylesheet"]['+e+"]"}function Em(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Ag(e,t,n,c){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?c.loading=1:(t=e.createElement("link"),c.preload=t,t.addEventListener("load",function(){return c.loading|=1}),t.addEventListener("error",function(){return c.loading|=2}),Ya(t,"link",n),Pt(t),e.head.appendChild(t))}function Oc(e){return'[src="'+Ca(e)+'"]'}function Lu(e){return"script[async]"+e}function Tm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var c=e.querySelector('style[data-href~="'+Ca(n.href)+'"]');if(c)return t.instance=c,Pt(c),c;var b=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Pt(c),Ya(c,"style",b),kd(c,n.precedence,e),t.instance=c;case"stylesheet":b=Tc(n.href);var v=e.querySelector(Cu(b));if(v)return t.state.loading|=4,t.instance=v,Pt(v),v;c=Em(n),(b=Ni.get(b))&&bh(c,b),v=(e.ownerDocument||e).createElement("link"),Pt(v);var z=v;return z._p=new Promise(function(K,ve){z.onload=K,z.onerror=ve}),Ya(v,"link",c),t.state.loading|=4,kd(v,n.precedence,e),t.instance=v;case"script":return v=Oc(n.src),(b=e.querySelector(Lu(v)))?(t.instance=b,Pt(b),b):(c=n,(b=Ni.get(v))&&(c=w({},n),xh(c,b)),e=e.ownerDocument||e,b=e.createElement("script"),Pt(b),Ya(b,"link",c),e.head.appendChild(b),t.instance=b);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(c=t.instance,t.state.loading|=4,kd(c,n.precedence,e));return t.instance}function kd(e,t,n){for(var c=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=c.length?c[c.length-1]:null,v=b,z=0;z<c.length;z++){var K=c[z];if(K.dataset.precedence===t)v=K;else if(v!==b)break}v?v.parentNode.insertBefore(e,v.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function bh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function xh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Cd=null;function Om(e,t,n){if(Cd===null){var c=new Map,b=Cd=new Map;b.set(n,c)}else b=Cd,c=b.get(n),c||(c=new Map,b.set(n,c));if(c.has(e))return c;for(c.set(e,null),n=n.getElementsByTagName(e),b=0;b<n.length;b++){var v=n[b];if(!(v[ur]||v[ln]||e==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var z=v.getAttribute(t)||"";z=e+z;var K=c.get(z);K?K.push(v):c.set(z,[v])}}return c}function Rm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function kg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Cg(e,t,n,c){if(n.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var b=Tc(c.href),v=t.querySelector(Cu(b));if(v){t=v._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ld.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=v,Pt(v);return}v=t.ownerDocument||t,c=Em(c),(b=Ni.get(b))&&bh(c,b),v=v.createElement("link"),Pt(v);var z=v;z._p=new Promise(function(K,ve){z.onload=K,z.onerror=ve}),Ya(v,"link",c),n.instance=v}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ld.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var vh=0;function Lg(e,t){return e.stylesheets&&e.count===0&&Td(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var c=setTimeout(function(){if(e.stylesheets&&Td(e,e.stylesheets),e.unsuspend){var v=e.unsuspend;e.unsuspend=null,v()}},6e4+t);0<e.imgBytes&&vh===0&&(vh=62500*cg());var b=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Td(e,e.stylesheets),e.unsuspend)){var v=e.unsuspend;e.unsuspend=null,v()}},(e.imgBytes>vh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(b)}}:null}function Ld(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ed=null;function Td(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ed=new Map,t.forEach(Eg,e),Ed=null,Ld.call(e))}function Eg(e,t){if(!(t.state.loading&4)){var n=Ed.get(e);if(n)var c=n.get(null);else{n=new Map,Ed.set(e,n);for(var b=e.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<b.length;v++){var z=b[v];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(n.set(z.dataset.precedence,z),c=z)}c&&n.set(null,c)}b=t.instance,z=b.getAttribute("data-precedence"),v=n.get(z)||c,v===c&&n.set(null,b),n.set(z,b),this.count++,c=Ld.bind(this),b.addEventListener("load",c),b.addEventListener("error",c),v?v.parentNode.insertBefore(b,v.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(b,e.firstChild)),t.state.loading|=4}}var Eu={$$typeof:D,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Tg(e,t,n,c,b,v,z,K,ve){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.hiddenUpdates=Wa(null),this.identifierPrefix=c,this.onUncaughtError=b,this.onCaughtError=v,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ve,this.incompleteTransitions=new Map}function zm(e,t,n,c,b,v,z,K,ve,Ue,We,Ke){return e=new Tg(e,t,n,z,ve,Ue,We,Ke,K),t=1,v===!0&&(t|=24),v=Ra(3,null,null,t),e.current=v,v.stateNode=e,t=Co(),t.refCount++,e.pooledCache=t,t.refCount++,v.memoizedState={element:c,isDehydrated:n,cache:t},cn(v),e}function Dm(e){return e?(e=ya,e):ya}function Im(e,t,n,c,b,v){b=Dm(b),c.context===null?c.context=b:c.pendingContext=b,c=At(t),c.payload={element:n},v=v===void 0?null:v,v!==null&&(c.callback=v),n=hn(e,c,t),n!==null&&(qr(n,e,t),fa(n,e,t))}function Bm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yh(e,t){Bm(e,t),(e=e.alternate)&&Bm(e,t)}function Pm(e){if(e.tag===13||e.tag===31){var t=Ti(e,67108864);t!==null&&qr(t,e,67108864),yh(e,67108864)}}function Um(e){if(e.tag===13||e.tag===31){var t=ri();t=dn(t);var n=Ti(e,t);n!==null&&qr(n,e,t),yh(e,t)}}var Od=!0;function Og(e,t,n,c){var b=J.T;J.T=null;var v=ae.p;try{ae.p=2,wh(e,t,n,c)}finally{ae.p=v,J.T=b}}function Rg(e,t,n,c){var b=J.T;J.T=null;var v=ae.p;try{ae.p=8,wh(e,t,n,c)}finally{ae.p=v,J.T=b}}function wh(e,t,n,c){if(Od){var b=Nh(c);if(b===null)oh(e,t,c,Rd,n),qm(e,c);else if(zg(b,e,t,n,c))c.stopPropagation();else if(qm(e,c),t&4&&-1<Mg.indexOf(e)){for(;b!==null;){var v=tt(b);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var z=Gt(v.pendingLanes);if(z!==0){var K=v;for(K.pendingLanes|=2,K.entangledLanes|=2;z;){var ve=1<<31-St(z);K.entanglements[1]|=ve,z&=~ve}vs(v),(un&6)===0&&(md=De()+500,ju(0))}}break;case 31:case 13:K=Ti(v,2),K!==null&&qr(K,v,2),bd(),yh(v,2)}if(v=Nh(c),v===null&&oh(e,t,c,Rd,n),v===b)break;b=v}b!==null&&c.stopPropagation()}else oh(e,t,c,null,n)}}function Nh(e){return e=fo(e),Sh(e)}var Rd=null;function Sh(e){if(Rd=null,e=Ja(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===31){if(e=h(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rd=e,null}function Fm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case at:return 2;case ct:return 8;case dt:case ft:return 32;case Lt:return 268435456;default:return 32}default:return 32}}var jh=!1,Fo=null,qo=null,Ho=null,Tu=new Map,Ou=new Map,Go=[],Mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qm(e,t){switch(e){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":qo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":Tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function Ru(e,t,n,c,b,v){return e===null||e.nativeEvent!==v?(e={blockedOn:t,domEventName:n,eventSystemFlags:c,nativeEvent:v,targetContainers:[b]},t!==null&&(t=tt(t),t!==null&&Pm(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,b!==null&&t.indexOf(b)===-1&&t.push(b),e)}function zg(e,t,n,c,b){switch(t){case"focusin":return Fo=Ru(Fo,e,t,n,c,b),!0;case"dragenter":return qo=Ru(qo,e,t,n,c,b),!0;case"mouseover":return Ho=Ru(Ho,e,t,n,c,b),!0;case"pointerover":var v=b.pointerId;return Tu.set(v,Ru(Tu.get(v)||null,e,t,n,c,b)),!0;case"gotpointercapture":return v=b.pointerId,Ou.set(v,Ru(Ou.get(v)||null,e,t,n,c,b)),!0}return!1}function Hm(e){var t=Ja(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,Yr(e.priority,function(){Um(n)});return}}else if(t===31){if(t=h(n),t!==null){e.blockedOn=t,Yr(e.priority,function(){Um(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nh(e.nativeEvent);if(n===null){n=e.nativeEvent;var c=new n.constructor(n.type,n);ll=c,n.target.dispatchEvent(c),ll=null}else return t=tt(n),t!==null&&Pm(t),e.blockedOn=n,!1;t.shift()}return!0}function Gm(e,t,n){Md(e)&&n.delete(t)}function Dg(){jh=!1,Fo!==null&&Md(Fo)&&(Fo=null),qo!==null&&Md(qo)&&(qo=null),Ho!==null&&Md(Ho)&&(Ho=null),Tu.forEach(Gm),Ou.forEach(Gm)}function zd(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Dg)))}var Dd=null;function Vm(e){Dd!==e&&(Dd=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Dd===e&&(Dd=null);for(var t=0;t<e.length;t+=3){var n=e[t],c=e[t+1],b=e[t+2];if(typeof c!="function"){if(Sh(c||n)===null)continue;break}var v=tt(n);v!==null&&(e.splice(t,3),t-=3,Nf(v,{pending:!0,data:b,method:n.method,action:c},c,b))}}))}function Rc(e){function t(ve){return zd(ve,e)}Fo!==null&&zd(Fo,e),qo!==null&&zd(qo,e),Ho!==null&&zd(Ho,e),Tu.forEach(t),Ou.forEach(t);for(var n=0;n<Go.length;n++){var c=Go[n];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Go.length&&(n=Go[0],n.blockedOn===null);)Hm(n),n.blockedOn===null&&Go.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(c=0;c<n.length;c+=3){var b=n[c],v=n[c+1],z=b[bn]||null;if(typeof v=="function")z||Vm(n);else if(z){var K=null;if(v&&v.hasAttribute("formAction")){if(b=v,z=v[bn]||null)K=z.formAction;else if(Sh(b)!==null)continue}else K=z.action;typeof K=="function"?n[c+1]=K:(n.splice(c,3),c-=3),Vm(n)}}}function Ym(){function e(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(z){return b=z})},focusReset:"manual",scroll:"manual"})}function t(){b!==null&&(b(),b=null),c||setTimeout(n,20)}function n(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,b=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),b!==null&&(b(),b=null)}}}function _h(e){this._internalRoot=e}Id.prototype.render=_h.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,c=ri();Im(n,c,e,t,null,null)},Id.prototype.unmount=_h.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Im(e.current,2,null,e,null,null),bd(),t[ua]=null}};function Id(e){this._internalRoot=e}Id.prototype.unstable_scheduleHydration=function(e){if(e){var t=xa();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Go.length&&t!==0&&t<Go[n].priority;n++);Go.splice(n,0,e),n===0&&Hm(e)}};var Wm=s.version;if(Wm!=="19.2.0")throw Error(o(527,Wm,"19.2.0"));ae.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Ig={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{ht=Bd.inject(Ig),an=Bd}catch{}}return zu.createRoot=function(e,t){if(!u(e))throw Error(o(299));var n=!1,c="",b=e0,v=t0,z=n0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onUncaughtError!==void 0&&(b=t.onUncaughtError),t.onCaughtError!==void 0&&(v=t.onCaughtError),t.onRecoverableError!==void 0&&(z=t.onRecoverableError)),t=zm(e,1,!1,null,null,n,c,null,b,v,z,Ym),e[ua]=t.current,sh(e),new _h(t)},zu.hydrateRoot=function(e,t,n){if(!u(e))throw Error(o(299));var c=!1,b="",v=e0,z=t0,K=n0,ve=null;return n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(b=n.identifierPrefix),n.onUncaughtError!==void 0&&(v=n.onUncaughtError),n.onCaughtError!==void 0&&(z=n.onCaughtError),n.onRecoverableError!==void 0&&(K=n.onRecoverableError),n.formState!==void 0&&(ve=n.formState)),t=zm(e,1,!0,t,n??null,c,b,ve,v,z,K,Ym),t.context=Dm(null),n=t.current,c=ri(),c=dn(c),b=At(c),b.callback=null,hn(n,b,c),n=c,t.current.lanes=n,Aa(t,n),vs(t),e[ua]=t.current,sh(e),new Id(t)},zu.version="19.2.0",zu}var a2;function Yg(){if(a2)return Ch.exports;a2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Ch.exports=Vg(),Ch.exports}var Wg=Yg();const $g=cp(Wg);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r2="popstate";function Xg(a={}){function s(u,l){let{pathname:d="/",search:h="",hash:p=""}=Ul(u.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Vh("",{pathname:d,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(u,l){let d=u.document.querySelector("base"),h="";if(d&&d.getAttribute("href")){let p=u.location.href,m=p.indexOf("#");h=m===-1?p:p.slice(0,m)}return h+"#"+(typeof l=="string"?l:Fu(l))}function o(u,l){ii(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Jg(s,r,o,a)}function Gn(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function ii(a,s){if(!a){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Zg(){return Math.random().toString(36).substring(2,10)}function i2(a,s){return{usr:a.state,key:a.key,idx:s}}function Vh(a,s,r=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof s=="string"?Ul(s):s,state:r,key:s&&s.key||o||Zg()}}function Fu({pathname:a="/",search:s="",hash:r=""}){return s&&s!=="?"&&(a+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Ul(a){let s={};if(a){let r=a.indexOf("#");r>=0&&(s.hash=a.substring(r),a=a.substring(0,r));let o=a.indexOf("?");o>=0&&(s.search=a.substring(o),a=a.substring(0,o)),a&&(s.pathname=a)}return s}function Jg(a,s,r,o={}){let{window:u=document.defaultView,v5Compat:l=!1}=o,d=u.history,h="POP",p=null,m=y();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function y(){return(d.state||{idx:null}).idx}function w(){h="POP";let A=y(),_=A==null?null:A-m;m=A,p&&p({action:h,location:N.location,delta:_})}function j(A,_){h="PUSH";let T=Vh(N.location,A,_);r&&r(T,A),m=y()+1;let D=i2(T,m),F=N.createHref(T);try{d.pushState(D,"",F)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;u.location.assign(F)}l&&p&&p({action:h,location:N.location,delta:1})}function g(A,_){h="REPLACE";let T=Vh(N.location,A,_);r&&r(T,A),m=y();let D=i2(T,m),F=N.createHref(T);d.replaceState(D,"",F),l&&p&&p({action:h,location:N.location,delta:0})}function L(A){return Qg(A)}let N={get action(){return h},get location(){return a(u,d)},listen(A){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(r2,w),p=A,()=>{u.removeEventListener(r2,w),p=null}},createHref(A){return s(u,A)},createURL:L,encodeLocation(A){let _=L(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:j,replace:g,go(A){return d.go(A)}};return N}function Qg(a,s=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Gn(r,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:Fu(a);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=r+o),new URL(o,r)}function P2(a,s,r="/"){return Kg(a,s,r,!1)}function Kg(a,s,r,o){let u=typeof s=="string"?Ul(s):s,l=no(u.pathname||"/",r);if(l==null)return null;let d=U2(a);e5(d);let h=null;for(let p=0;h==null&&p<d.length;++p){let m=d5(l);h=c5(d[p],m,o)}return h}function U2(a,s=[],r=[],o="",u=!1){let l=(d,h,p=u,m)=>{let y={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Gn(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let w=eo([o,y.relativePath]),j=r.concat(y);d.children&&d.children.length>0&&(Gn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),U2(d.children,s,j,w,p)),!(d.path==null&&!d.index)&&s.push({path:w,score:o5(w,d.index),routesMeta:j})};return a.forEach((d,h)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))l(d,h);else for(let m of F2(d.path))l(d,h,!0,m)}),s}function F2(a){let s=a.split("/");if(s.length===0)return[];let[r,...o]=s,u=r.endsWith("?"),l=r.replace(/\?$/,"");if(o.length===0)return u?[l,""]:[l];let d=F2(o.join("/")),h=[];return h.push(...d.map(p=>p===""?l:[l,p].join("/"))),u&&h.push(...d),h.map(p=>a.startsWith("/")&&p===""?"/":p)}function e5(a){a.sort((s,r)=>s.score!==r.score?r.score-s.score:l5(s.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var t5=/^:[\w-]+$/,n5=3,a5=2,r5=1,i5=10,s5=-2,s2=a=>a==="*";function o5(a,s){let r=a.split("/"),o=r.length;return r.some(s2)&&(o+=s5),s&&(o+=a5),r.filter(u=>!s2(u)).reduce((u,l)=>u+(t5.test(l)?n5:l===""?r5:i5),o)}function l5(a,s){return a.length===s.length&&a.slice(0,-1).every((o,u)=>o===s[u])?a[a.length-1]-s[s.length-1]:0}function c5(a,s,r=!1){let{routesMeta:o}=a,u={},l="/",d=[];for(let h=0;h<o.length;++h){let p=o[h],m=h===o.length-1,y=l==="/"?s:s.slice(l.length)||"/",w=Kd({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),j=p.route;if(!w&&m&&r&&!o[o.length-1].route.index&&(w=Kd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!w)return null;Object.assign(u,w.params),d.push({params:u,pathname:eo([l,w.pathname]),pathnameBase:g5(eo([l,w.pathnameBase])),route:j}),w.pathnameBase!=="/"&&(l=eo([l,w.pathnameBase]))}return d}function Kd(a,s){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,o]=u5(a.path,a.caseSensitive,a.end),u=s.match(r);if(!u)return null;let l=u[0],d=l.replace(/(.)\/+$/,"$1"),h=u.slice(1);return{params:o.reduce((m,{paramName:y,isOptional:w},j)=>{if(y==="*"){let L=h[j]||"";d=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const g=h[j];return w&&!g?m[y]=void 0:m[y]=(g||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:a}}function u5(a,s=!1,r=!0){ii(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],u="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,p)=>(o.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),u+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":a!==""&&a!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,s?void 0:"i"),o]}function d5(a){try{return a.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return ii(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),a}}function no(a,s){if(s==="/")return a;if(!a.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,o=a.charAt(r);return o&&o!=="/"?null:a.slice(r)||"/"}var f5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h5=a=>f5.test(a);function p5(a,s="/"){let{pathname:r,search:o="",hash:u=""}=typeof a=="string"?Ul(a):a,l;if(r)if(h5(r))l=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),ii(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${r}`)}r.startsWith("/")?l=o2(r.substring(1),"/"):l=o2(r,s)}else l=s;return{pathname:l,search:b5(o),hash:x5(u)}}function o2(a,s){let r=s.replace(/\/+$/,"").split("/");return a.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function Oh(a,s,r,o){return`Cannot include a '${a}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m5(a){return a.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function dp(a){let s=m5(a);return s.map((r,o)=>o===s.length-1?r.pathname:r.pathnameBase)}function fp(a,s,r,o=!1){let u;typeof a=="string"?u=Ul(a):(u={...a},Gn(!u.pathname||!u.pathname.includes("?"),Oh("?","pathname","search",u)),Gn(!u.pathname||!u.pathname.includes("#"),Oh("#","pathname","hash",u)),Gn(!u.search||!u.search.includes("#"),Oh("#","search","hash",u)));let l=a===""||u.pathname==="",d=l?"/":u.pathname,h;if(d==null)h=r;else{let w=s.length-1;if(!o&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),w-=1;u.pathname=j.join("/")}h=w>=0?s[w]:"/"}let p=p5(u,h),m=d&&d!=="/"&&d.endsWith("/"),y=(l||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var eo=a=>a.join("/").replace(/\/\/+/g,"/"),g5=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),b5=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,x5=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function v5(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q2=["POST","PUT","PATCH","DELETE"];new Set(q2);var y5=["GET",...q2];new Set(y5);var Wc=ne.createContext(null);Wc.displayName="DataRouter";var rf=ne.createContext(null);rf.displayName="DataRouterState";ne.createContext(!1);var H2=ne.createContext({isTransitioning:!1});H2.displayName="ViewTransition";var w5=ne.createContext(new Map);w5.displayName="Fetchers";var N5=ne.createContext(null);N5.displayName="Await";var Hi=ne.createContext(null);Hi.displayName="Navigation";var Vu=ne.createContext(null);Vu.displayName="Location";var Gi=ne.createContext({outlet:null,matches:[],isDataRoute:!1});Gi.displayName="Route";var hp=ne.createContext(null);hp.displayName="RouteError";function S5(a,{relative:s}={}){Gn($c(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=ne.useContext(Hi),{hash:u,pathname:l,search:d}=Wu(a,{relative:s}),h=l;return r!=="/"&&(h=l==="/"?r:eo([r,l])),o.createHref({pathname:h,search:d,hash:u})}function $c(){return ne.useContext(Vu)!=null}function el(){return Gn($c(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(Vu).location}var G2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function V2(a){ne.useContext(Hi).static||ne.useLayoutEffect(a)}function Yu(){let{isDataRoute:a}=ne.useContext(Gi);return a?I5():j5()}function j5(){Gn($c(),"useNavigate() may be used only in the context of a <Router> component.");let a=ne.useContext(Wc),{basename:s,navigator:r}=ne.useContext(Hi),{matches:o}=ne.useContext(Gi),{pathname:u}=el(),l=JSON.stringify(dp(o)),d=ne.useRef(!1);return V2(()=>{d.current=!0}),ne.useCallback((p,m={})=>{if(ii(d.current,G2),!d.current)return;if(typeof p=="number"){r.go(p);return}let y=fp(p,JSON.parse(l),u,m.relative==="path");a==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:eo([s,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[s,r,l,u,a])}ne.createContext(null);function _5(){let{matches:a}=ne.useContext(Gi),s=a[a.length-1];return s?s.params:{}}function Wu(a,{relative:s}={}){let{matches:r}=ne.useContext(Gi),{pathname:o}=el(),u=JSON.stringify(dp(r));return ne.useMemo(()=>fp(a,JSON.parse(u),o,s==="path"),[a,u,o,s])}function A5(a,s){return Y2(a,s)}function Y2(a,s,r,o,u){var T;Gn($c(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=ne.useContext(Hi),{matches:d}=ne.useContext(Gi),h=d[d.length-1],p=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",w=h&&h.route;{let D=w&&w.path||"";W2(m,!w||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let j=el(),g;if(s){let D=typeof s=="string"?Ul(s):s;Gn(y==="/"||((T=D.pathname)==null?void 0:T.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),g=D}else g=j;let L=g.pathname||"/",N=L;if(y!=="/"){let D=y.replace(/^\//,"").split("/");N="/"+L.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=P2(a,{pathname:N});ii(w||A!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ii(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=T5(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:eo([y,l.encodeLocation?l.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:eo([y,l.encodeLocation?l.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),d,r,o,u);return s&&_?ne.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},_):_}function k5(){let a=D5(),s=v5(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},d=null;return console.error("Error handled by React Router default ErrorBoundary:",a),d=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:l},"ErrorBoundary")," or"," ",ne.createElement("code",{style:l},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},s),r?ne.createElement("pre",{style:u},r):null,d)}var C5=ne.createElement(k5,null),L5=class extends ne.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,s){return s.location!==a.location||s.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:s.error,location:s.location,revalidation:a.revalidation||s.revalidation}}componentDidCatch(a,s){this.props.onError?this.props.onError(a,s):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?ne.createElement(Gi.Provider,{value:this.props.routeContext},ne.createElement(hp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function E5({routeContext:a,match:s,children:r}){let o=ne.useContext(Wc);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),ne.createElement(Gi.Provider,{value:a},r)}function T5(a,s=[],r=null,o=null,u=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(s.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let l=a,d=r==null?void 0:r.errors;if(d!=null){let y=l.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);Gn(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let h=!1,p=-1;if(r)for(let y=0;y<l.length;y++){let w=l[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=y),w.route.id){let{loaderData:j,errors:g}=r,L=w.route.loader&&!j.hasOwnProperty(w.route.id)&&(!g||g[w.route.id]===void 0);if(w.route.lazy||L){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let m=r&&o?(y,w)=>{var j,g;o(y,{location:r.location,params:((g=(j=r.matches)==null?void 0:j[0])==null?void 0:g.params)??{},errorInfo:w})}:void 0;return l.reduceRight((y,w,j)=>{let g,L=!1,N=null,A=null;r&&(g=d&&w.route.id?d[w.route.id]:void 0,N=w.route.errorElement||C5,h&&(p<0&&j===0?(W2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,A=null):p===j&&(L=!0,A=w.route.hydrateFallbackElement||null)));let _=s.concat(l.slice(0,j+1)),T=()=>{let D;return g?D=N:L?D=A:w.route.Component?D=ne.createElement(w.route.Component,null):w.route.element?D=w.route.element:D=y,ne.createElement(E5,{match:w,routeContext:{outlet:y,matches:_,isDataRoute:r!=null},children:D})};return r&&(w.route.ErrorBoundary||w.route.errorElement||j===0)?ne.createElement(L5,{location:r.location,revalidation:r.revalidation,component:N,error:g,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:m}):T()},null)}function pp(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O5(a){let s=ne.useContext(Wc);return Gn(s,pp(a)),s}function R5(a){let s=ne.useContext(rf);return Gn(s,pp(a)),s}function M5(a){let s=ne.useContext(Gi);return Gn(s,pp(a)),s}function mp(a){let s=M5(a),r=s.matches[s.matches.length-1];return Gn(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function z5(){return mp("useRouteId")}function D5(){var o;let a=ne.useContext(hp),s=R5("useRouteError"),r=mp("useRouteError");return a!==void 0?a:(o=s.errors)==null?void 0:o[r]}function I5(){let{router:a}=O5("useNavigate"),s=mp("useNavigate"),r=ne.useRef(!1);return V2(()=>{r.current=!0}),ne.useCallback(async(u,l={})=>{ii(r.current,G2),r.current&&(typeof u=="number"?a.navigate(u):await a.navigate(u,{fromRouteId:s,...l}))},[a,s])}var l2={};function W2(a,s,r){!s&&!l2[a]&&(l2[a]=!0,ii(!1,r))}ne.memo(B5);function B5({routes:a,future:s,state:r,unstable_onError:o}){return Y2(a,void 0,r,o,s)}function P5({to:a,replace:s,state:r,relative:o}){Gn($c(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=ne.useContext(Hi);ii(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=ne.useContext(Gi),{pathname:d}=el(),h=Yu(),p=fp(a,dp(l),d,o==="path"),m=JSON.stringify(p);return ne.useEffect(()=>{h(JSON.parse(m),{replace:s,state:r,relative:o})},[h,m,o,s,r]),null}function Pu(a){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function U5({basename:a="/",children:s=null,location:r,navigationType:o="POP",navigator:u,static:l=!1}){Gn(!$c(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=a.replace(/^\/*/,"/"),h=ne.useMemo(()=>({basename:d,navigator:u,static:l,future:{}}),[d,u,l]);typeof r=="string"&&(r=Ul(r));let{pathname:p="/",search:m="",hash:y="",state:w=null,key:j="default"}=r,g=ne.useMemo(()=>{let L=no(p,d);return L==null?null:{location:{pathname:L,search:m,hash:y,state:w,key:j},navigationType:o}},[d,p,m,y,w,j,o]);return ii(g!=null,`<Router basename="${d}"> is not able to match the URL "${p}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:ne.createElement(Hi.Provider,{value:h},ne.createElement(Vu.Provider,{children:s,value:g}))}function F5({children:a,location:s}){return A5(Yh(a),s)}function Yh(a,s=[]){let r=[];return ne.Children.forEach(a,(o,u)=>{if(!ne.isValidElement(o))return;let l=[...s,u];if(o.type===ne.Fragment){r.push.apply(r,Yh(o.props.children,l));return}Gn(o.type===Pu,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let d={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=Yh(o.props.children,l)),r.push(d)}),r}var Yd="get",Wd="application/x-www-form-urlencoded";function sf(a){return a!=null&&typeof a.tagName=="string"}function q5(a){return sf(a)&&a.tagName.toLowerCase()==="button"}function H5(a){return sf(a)&&a.tagName.toLowerCase()==="form"}function G5(a){return sf(a)&&a.tagName.toLowerCase()==="input"}function V5(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Y5(a,s){return a.button===0&&(!s||s==="_self")&&!V5(a)}var Ud=null;function W5(){if(Ud===null)try{new FormData(document.createElement("form"),0),Ud=!1}catch{Ud=!0}return Ud}var $5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rh(a){return a!=null&&!$5.has(a)?(ii(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):a}function X5(a,s){let r,o,u,l,d;if(H5(a)){let h=a.getAttribute("action");o=h?no(h,s):null,r=a.getAttribute("method")||Yd,u=Rh(a.getAttribute("enctype"))||Wd,l=new FormData(a)}else if(q5(a)||G5(a)&&(a.type==="submit"||a.type==="image")){let h=a.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||h.getAttribute("action");if(o=p?no(p,s):null,r=a.getAttribute("formmethod")||h.getAttribute("method")||Yd,u=Rh(a.getAttribute("formenctype"))||Rh(h.getAttribute("enctype"))||Wd,l=new FormData(h,a),!W5()){let{name:m,type:y,value:w}=a;if(y==="image"){let j=m?`${m}.`:"";l.append(`${j}x`,"0"),l.append(`${j}y`,"0")}else m&&l.append(m,w)}}else{if(sf(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Yd,o=null,u=Wd,d=a}return l&&u==="text/plain"&&(d=l,l=void 0),{action:o,method:r.toLowerCase(),encType:u,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gp(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function Z5(a,s,r){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return o.pathname==="/"?o.pathname=`_root.${r}`:s&&no(o.pathname,s)==="/"?o.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function J5(a,s){if(a.id in s)return s[a.id];try{let r=await import(a.module);return s[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Q5(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function K5(a,s,r){let o=await Promise.all(a.map(async u=>{let l=s.routes[u.route.id];if(l){let d=await J5(l,r);return d.links?d.links():[]}return[]}));return ab(o.flat(1).filter(Q5).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function c2(a,s,r,o,u,l){let d=(p,m)=>r[m]?p.route.id!==r[m].route.id:!0,h=(p,m)=>{var y;return r[m].pathname!==p.pathname||((y=r[m].route.path)==null?void 0:y.endsWith("*"))&&r[m].params["*"]!==p.params["*"]};return l==="assets"?s.filter((p,m)=>d(p,m)||h(p,m)):l==="data"?s.filter((p,m)=>{var w;let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let j=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((w=r[0])==null?void 0:w.params)||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function eb(a,s,{includeHydrateFallback:r}={}){return tb(a.map(o=>{let u=s.routes[o.route.id];if(!u)return[];let l=[u.module];return u.clientActionModule&&(l=l.concat(u.clientActionModule)),u.clientLoaderModule&&(l=l.concat(u.clientLoaderModule)),r&&u.hydrateFallbackModule&&(l=l.concat(u.hydrateFallbackModule)),u.imports&&(l=l.concat(u.imports)),l}).flat(1))}function tb(a){return[...new Set(a)]}function nb(a){let s={},r=Object.keys(a).sort();for(let o of r)s[o]=a[o];return s}function ab(a,s){let r=new Set;return new Set(s),a.reduce((o,u)=>{let l=JSON.stringify(nb(u));return r.has(l)||(r.add(l),o.push({key:l,link:u})),o},[])}function $2(){let a=ne.useContext(Wc);return gp(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function rb(){let a=ne.useContext(rf);return gp(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var bp=ne.createContext(void 0);bp.displayName="FrameworkContext";function X2(){let a=ne.useContext(bp);return gp(a,"You must render this element inside a <HydratedRouter> element"),a}function ib(a,s){let r=ne.useContext(bp),[o,u]=ne.useState(!1),[l,d]=ne.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:w}=s,j=ne.useRef(null);ne.useEffect(()=>{if(a==="render"&&d(!0),a==="viewport"){let N=_=>{_.forEach(T=>{d(T.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return j.current&&A.observe(j.current),()=>{A.disconnect()}}},[a]),ne.useEffect(()=>{if(o){let N=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(N)}}},[o]);let g=()=>{u(!0)},L=()=>{u(!1),d(!1)};return r?a!=="intent"?[l,j,{}]:[l,j,{onFocus:Du(h,g),onBlur:Du(p,L),onMouseEnter:Du(m,g),onMouseLeave:Du(y,L),onTouchStart:Du(w,g)}]:[!1,j,{}]}function Du(a,s){return r=>{a&&a(r),r.defaultPrevented||s(r)}}function sb({page:a,...s}){let{router:r}=$2(),o=ne.useMemo(()=>P2(r.routes,a,r.basename),[r.routes,a,r.basename]);return o?ne.createElement(lb,{page:a,matches:o,...s}):null}function ob(a){let{manifest:s,routeModules:r}=X2(),[o,u]=ne.useState([]);return ne.useEffect(()=>{let l=!1;return K5(a,s,r).then(d=>{l||u(d)}),()=>{l=!0}},[a,s,r]),o}function lb({page:a,matches:s,...r}){let o=el(),{manifest:u,routeModules:l}=X2(),{basename:d}=$2(),{loaderData:h,matches:p}=rb(),m=ne.useMemo(()=>c2(a,s,p,u,o,"data"),[a,s,p,u,o]),y=ne.useMemo(()=>c2(a,s,p,u,o,"assets"),[a,s,p,u,o]),w=ne.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let L=new Set,N=!1;if(s.forEach(_=>{var D;let T=u.routes[_.route.id];!T||!T.hasLoader||(!m.some(F=>F.route.id===_.route.id)&&_.route.id in h&&((D=l[_.route.id])!=null&&D.shouldRevalidate)||T.hasClientLoader?N=!0:L.add(_.route.id))}),L.size===0)return[];let A=Z5(a,d,"data");return N&&L.size>0&&A.searchParams.set("_routes",s.filter(_=>L.has(_.route.id)).map(_=>_.route.id).join(",")),[A.pathname+A.search]},[d,h,o,u,m,s,a,l]),j=ne.useMemo(()=>eb(y,u),[y,u]),g=ob(y);return ne.createElement(ne.Fragment,null,w.map(L=>ne.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...r})),j.map(L=>ne.createElement("link",{key:L,rel:"modulepreload",href:L,...r})),g.map(({key:L,link:N})=>ne.createElement("link",{key:L,nonce:r.nonce,...N})))}function cb(...a){return s=>{a.forEach(r=>{typeof r=="function"?r(s):r!=null&&(r.current=s)})}}var Z2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Z2&&(window.__reactRouterVersion="7.9.6")}catch{}function ub({basename:a,children:s,window:r}){let o=ne.useRef();o.current==null&&(o.current=Xg({window:r,v5Compat:!0}));let u=o.current,[l,d]=ne.useState({action:u.action,location:u.location}),h=ne.useCallback(p=>{ne.startTransition(()=>d(p))},[d]);return ne.useLayoutEffect(()=>u.listen(h),[u,h]),ne.createElement(U5,{basename:a,children:s,location:l.location,navigationType:l.action,navigator:u})}var J2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,of=ne.forwardRef(function({onClick:s,discover:r="render",prefetch:o="none",relative:u,reloadDocument:l,replace:d,state:h,target:p,to:m,preventScrollReset:y,viewTransition:w,...j},g){let{basename:L}=ne.useContext(Hi),N=typeof m=="string"&&J2.test(m),A,_=!1;if(typeof m=="string"&&N&&(A=m,Z2))try{let ie=new URL(window.location.href),se=m.startsWith("//")?new URL(ie.protocol+m):new URL(m),I=no(se.pathname,L);se.origin===ie.origin&&I!=null?m=I+se.search+se.hash:_=!0}catch{ii(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=S5(m,{relative:u}),[D,F,B]=ib(o,j),ce=pb(m,{replace:d,state:h,target:p,preventScrollReset:y,relative:u,viewTransition:w});function U(ie){s&&s(ie),ie.defaultPrevented||ce(ie)}let q=ne.createElement("a",{...j,...B,href:A||T,onClick:_||l?s:U,ref:cb(g,F),target:p,"data-discover":!N&&r==="render"?"true":void 0});return D&&!N?ne.createElement(ne.Fragment,null,q,ne.createElement(sb,{page:T})):q});of.displayName="Link";var db=ne.forwardRef(function({"aria-current":s="page",caseSensitive:r=!1,className:o="",end:u=!1,style:l,to:d,viewTransition:h,children:p,...m},y){let w=Wu(d,{relative:m.relative}),j=el(),g=ne.useContext(rf),{navigator:L,basename:N}=ne.useContext(Hi),A=g!=null&&vb(w)&&h===!0,_=L.encodeLocation?L.encodeLocation(w).pathname:w.pathname,T=j.pathname,D=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(T=T.toLowerCase(),D=D?D.toLowerCase():null,_=_.toLowerCase()),D&&N&&(D=no(D,N)||D);const F=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let B=T===_||!u&&T.startsWith(_)&&T.charAt(F)==="/",ce=D!=null&&(D===_||!u&&D.startsWith(_)&&D.charAt(_.length)==="/"),U={isActive:B,isPending:ce,isTransitioning:A},q=B?s:void 0,ie;typeof o=="function"?ie=o(U):ie=[o,B?"active":null,ce?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let se=typeof l=="function"?l(U):l;return ne.createElement(of,{...m,"aria-current":q,className:ie,ref:y,style:se,to:d,viewTransition:h},typeof p=="function"?p(U):p)});db.displayName="NavLink";var fb=ne.forwardRef(({discover:a="render",fetcherKey:s,navigate:r,reloadDocument:o,replace:u,state:l,method:d=Yd,action:h,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:w,...j},g)=>{let L=bb(),N=xb(h,{relative:m}),A=d.toLowerCase()==="get"?"get":"post",_=typeof h=="string"&&J2.test(h),T=D=>{if(p&&p(D),D.defaultPrevented)return;D.preventDefault();let F=D.nativeEvent.submitter,B=(F==null?void 0:F.getAttribute("formmethod"))||d;L(F||D.currentTarget,{fetcherKey:s,method:B,navigate:r,replace:u,state:l,relative:m,preventScrollReset:y,viewTransition:w})};return ne.createElement("form",{ref:g,method:A,action:N,onSubmit:o?p:T,...j,"data-discover":!_&&a==="render"?"true":void 0})});fb.displayName="Form";function hb(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q2(a){let s=ne.useContext(Wc);return Gn(s,hb(a)),s}function pb(a,{target:s,replace:r,state:o,preventScrollReset:u,relative:l,viewTransition:d}={}){let h=Yu(),p=el(),m=Wu(a,{relative:l});return ne.useCallback(y=>{if(Y5(y,s)){y.preventDefault();let w=r!==void 0?r:Fu(p)===Fu(m);h(a,{replace:w,state:o,preventScrollReset:u,relative:l,viewTransition:d})}},[p,h,m,r,o,s,a,u,l,d])}var mb=0,gb=()=>`__${String(++mb)}__`;function bb(){let{router:a}=Q2("useSubmit"),{basename:s}=ne.useContext(Hi),r=z5();return ne.useCallback(async(o,u={})=>{let{action:l,method:d,encType:h,formData:p,body:m}=X5(o,s);if(u.navigate===!1){let y=u.fetcherKey||gb();await a.fetch(y,r,u.action||l,{preventScrollReset:u.preventScrollReset,formData:p,body:m,formMethod:u.method||d,formEncType:u.encType||h,flushSync:u.flushSync})}else await a.navigate(u.action||l,{preventScrollReset:u.preventScrollReset,formData:p,body:m,formMethod:u.method||d,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:r,flushSync:u.flushSync,viewTransition:u.viewTransition})},[a,s,r])}function xb(a,{relative:s}={}){let{basename:r}=ne.useContext(Hi),o=ne.useContext(Gi);Gn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),l={...Wu(a||".",{relative:s})},d=el();if(a==null){l.search=d.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(y=>y==="")){h.delete("index"),p.filter(w=>w).forEach(w=>h.append("index",w));let y=h.toString();l.search=y?`?${y}`:""}}return(!a||a===".")&&u.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:eo([r,l.pathname])),Fu(l)}function vb(a,{relative:s}={}){let r=ne.useContext(H2);Gn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Q2("useViewTransitionState"),u=Wu(a,{relative:s});if(!r.isTransitioning)return!1;let l=no(r.currentLocation.pathname,o)||r.currentLocation.pathname,d=no(r.nextLocation.pathname,o)||r.nextLocation.pathname;return Kd(u.pathname,d)!=null||Kd(u.pathname,l)!=null}var yb=B2();const K2=ne.createContext(void 0),wb=({children:a})=>{const[s,r]=ne.useState(null),[o,u]=ne.useState(null),[l,d]=ne.useState(!0);ne.useEffect(()=>{const m=localStorage.getItem("token"),y=localStorage.getItem("user");m&&y&&(u(m),r(JSON.parse(y))),d(!1)},[]);const h=(m,y)=>{u(m),r(y),localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(y))},p=()=>{u(null),r(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return i.jsx(K2.Provider,{value:{user:s,token:o,login:h,logout:p,isAuthenticated:!!s,isLoading:l},children:a})},lf=()=>{const a=ne.useContext(K2);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a};function Fd(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mh={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var u2;function Nb(){return u2||(u2=1,(function(a,s){(function(r){a.exports=r()})(function(){return(function r(o,u,l){function d(m,y){if(!u[m]){if(!o[m]){var w=typeof Fd=="function"&&Fd;if(!y&&w)return w(m,!0);if(h)return h(m,!0);var j=new Error("Cannot find module '"+m+"'");throw j.code="MODULE_NOT_FOUND",j}var g=u[m]={exports:{}};o[m][0].call(g.exports,function(L){var N=o[m][1][L];return d(N||L)},g,g.exports,r,o,u,l)}return u[m].exports}for(var h=typeof Fd=="function"&&Fd,p=0;p<l.length;p++)d(l[p]);return d})({1:[function(r,o,u){var l=r("./utils"),d=r("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(p){for(var m,y,w,j,g,L,N,A=[],_=0,T=p.length,D=T,F=l.getTypeOf(p)!=="string";_<p.length;)D=T-_,w=F?(m=p[_++],y=_<T?p[_++]:0,_<T?p[_++]:0):(m=p.charCodeAt(_++),y=_<T?p.charCodeAt(_++):0,_<T?p.charCodeAt(_++):0),j=m>>2,g=(3&m)<<4|y>>4,L=1<D?(15&y)<<2|w>>6:64,N=2<D?63&w:64,A.push(h.charAt(j)+h.charAt(g)+h.charAt(L)+h.charAt(N));return A.join("")},u.decode=function(p){var m,y,w,j,g,L,N=0,A=0,_="data:";if(p.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var T,D=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===h.charAt(64)&&D--,p.charAt(p.length-2)===h.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=d.uint8array?new Uint8Array(0|D):new Array(0|D);N<p.length;)m=h.indexOf(p.charAt(N++))<<2|(j=h.indexOf(p.charAt(N++)))>>4,y=(15&j)<<4|(g=h.indexOf(p.charAt(N++)))>>2,w=(3&g)<<6|(L=h.indexOf(p.charAt(N++))),T[A++]=m,g!==64&&(T[A++]=y),L!==64&&(T[A++]=w);return T}},{"./support":30,"./utils":32}],2:[function(r,o,u){var l=r("./external"),d=r("./stream/DataWorker"),h=r("./stream/Crc32Probe"),p=r("./stream/DataLengthProbe");function m(y,w,j,g,L){this.compressedSize=y,this.uncompressedSize=w,this.crc32=j,this.compression=g,this.compressedContent=L}m.prototype={getContentWorker:function(){var y=new d(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),w=this;return y.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new d(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(y,w,j){return y.pipe(new h).pipe(new p("uncompressedSize")).pipe(w.compressWorker(j)).pipe(new p("compressedSize")).withStreamInfo("compression",w)},o.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,o,u){var l=r("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},u.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,o,u){var l=r("./utils"),d=(function(){for(var h,p=[],m=0;m<256;m++){h=m;for(var y=0;y<8;y++)h=1&h?3988292384^h>>>1:h>>>1;p[m]=h}return p})();o.exports=function(h,p){return h!==void 0&&h.length?l.getTypeOf(h)!=="string"?(function(m,y,w,j){var g=d,L=j+w;m^=-1;for(var N=j;N<L;N++)m=m>>>8^g[255&(m^y[N])];return-1^m})(0|p,h,h.length,0):(function(m,y,w,j){var g=d,L=j+w;m^=-1;for(var N=j;N<L;N++)m=m>>>8^g[255&(m^y.charCodeAt(N))];return-1^m})(0|p,h,h.length,0):0}},{"./utils":32}],5:[function(r,o,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(r,o,u){var l=null;l=typeof Promise<"u"?Promise:r("lie"),o.exports={Promise:l}},{lie:37}],7:[function(r,o,u){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=r("pako"),h=r("./utils"),p=r("./stream/GenericWorker"),m=l?"uint8array":"array";function y(w,j){p.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=j,this.meta={}}u.magic="\b\0",h.inherits(y,p),y.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(m,w.data),!1)},y.prototype.flush=function(){p.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(j){w.push({data:j,meta:w.meta})}},u.compressWorker=function(w){return new y("Deflate",w)},u.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,o,u){function l(g,L){var N,A="";for(N=0;N<L;N++)A+=String.fromCharCode(255&g),g>>>=8;return A}function d(g,L,N,A,_,T){var D,F,B=g.file,ce=g.compression,U=T!==m.utf8encode,q=h.transformTo("string",T(B.name)),ie=h.transformTo("string",m.utf8encode(B.name)),se=B.comment,I=h.transformTo("string",T(se)),O=h.transformTo("string",m.utf8encode(se)),Y=ie.length!==B.name.length,E=O.length!==se.length,oe="",J="",ae="",he=B.dir,fe=B.date,ge={crc32:0,compressedSize:0,uncompressedSize:0};L&&!N||(ge.crc32=g.crc32,ge.compressedSize=g.compressedSize,ge.uncompressedSize=g.uncompressedSize);var P=0;L&&(P|=8),U||!Y&&!E||(P|=2048);var C=0,G=0;he&&(C|=16),_==="UNIX"?(G=798,C|=(function(ee,be){var Se=ee;return ee||(Se=be?16893:33204),(65535&Se)<<16})(B.unixPermissions,he)):(G=20,C|=(function(ee){return 63&(ee||0)})(B.dosPermissions)),D=fe.getUTCHours(),D<<=6,D|=fe.getUTCMinutes(),D<<=5,D|=fe.getUTCSeconds()/2,F=fe.getUTCFullYear()-1980,F<<=4,F|=fe.getUTCMonth()+1,F<<=5,F|=fe.getUTCDate(),Y&&(J=l(1,1)+l(y(q),4)+ie,oe+="up"+l(J.length,2)+J),E&&(ae=l(1,1)+l(y(I),4)+O,oe+="uc"+l(ae.length,2)+ae);var $="";return $+=`
\0`,$+=l(P,2),$+=ce.magic,$+=l(D,2),$+=l(F,2),$+=l(ge.crc32,4),$+=l(ge.compressedSize,4),$+=l(ge.uncompressedSize,4),$+=l(q.length,2),$+=l(oe.length,2),{fileRecord:w.LOCAL_FILE_HEADER+$+q+oe,dirRecord:w.CENTRAL_FILE_HEADER+l(G,2)+$+l(I.length,2)+"\0\0\0\0"+l(C,4)+l(A,4)+q+oe+I}}var h=r("../utils"),p=r("../stream/GenericWorker"),m=r("../utf8"),y=r("../crc32"),w=r("../signature");function j(g,L,N,A){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=L,this.zipPlatform=N,this.encodeFileName=A,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(j,p),j.prototype.push=function(g){var L=g.meta.percent||0,N=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,p.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:N?(L+100*(N-A-1))/N:100}}))},j.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var L=this.streamFiles&&!g.file.dir;if(L){var N=d(g,L,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:N.fileRecord,meta:{percent:0}})}else this.accumulate=!0},j.prototype.closedSource=function(g){this.accumulate=!1;var L=this.streamFiles&&!g.file.dir,N=d(g,L,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(N.dirRecord),L)this.push({data:(function(A){return w.DATA_DESCRIPTOR+l(A.crc32,4)+l(A.compressedSize,4)+l(A.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:N.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},j.prototype.flush=function(){for(var g=this.bytesWritten,L=0;L<this.dirRecords.length;L++)this.push({data:this.dirRecords[L],meta:{percent:100}});var N=this.bytesWritten-g,A=(function(_,T,D,F,B){var ce=h.transformTo("string",B(F));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(_,2)+l(_,2)+l(T,4)+l(D,4)+l(ce.length,2)+ce})(this.dirRecords.length,N,g,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},j.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},j.prototype.registerPrevious=function(g){this._sources.push(g);var L=this;return g.on("data",function(N){L.processChunk(N)}),g.on("end",function(){L.closedSource(L.previous.streamInfo),L._sources.length?L.prepareNextSource():L.end()}),g.on("error",function(N){L.error(N)}),this},j.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},j.prototype.error=function(g){var L=this._sources;if(!p.prototype.error.call(this,g))return!1;for(var N=0;N<L.length;N++)try{L[N].error(g)}catch{}return!0},j.prototype.lock=function(){p.prototype.lock.call(this);for(var g=this._sources,L=0;L<g.length;L++)g[L].lock()},o.exports=j},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,o,u){var l=r("../compressions"),d=r("./ZipFileWorker");u.generateWorker=function(h,p,m){var y=new d(p.streamFiles,m,p.platform,p.encodeFileName),w=0;try{h.forEach(function(j,g){w++;var L=(function(T,D){var F=T||D,B=l[F];if(!B)throw new Error(F+" is not a valid compression method !");return B})(g.options.compression,p.compression),N=g.options.compressionOptions||p.compressionOptions||{},A=g.dir,_=g.date;g._compressWorker(L,N).withStreamInfo("file",{name:j,dir:A,date:_,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(y)}),y.entriesCount=w}catch(j){y.error(j)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,o,u){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new l;for(var h in this)typeof this[h]!="function"&&(d[h]=this[h]);return d}}(l.prototype=r("./object")).loadAsync=r("./load"),l.support=r("./support"),l.defaults=r("./defaults"),l.version="3.10.1",l.loadAsync=function(d,h){return new l().loadAsync(d,h)},l.external=r("./external"),o.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,o,u){var l=r("./utils"),d=r("./external"),h=r("./utf8"),p=r("./zipEntries"),m=r("./stream/Crc32Probe"),y=r("./nodejsUtils");function w(j){return new d.Promise(function(g,L){var N=j.decompressed.getContentWorker().pipe(new m);N.on("error",function(A){L(A)}).on("end",function(){N.streamInfo.crc32!==j.decompressed.crc32?L(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}o.exports=function(j,g){var L=this;return g=l.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),y.isNode&&y.isStream(j)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",j,!0,g.optimizedBinaryString,g.base64).then(function(N){var A=new p(g);return A.load(N),A}).then(function(N){var A=[d.Promise.resolve(N)],_=N.files;if(g.checkCRC32)for(var T=0;T<_.length;T++)A.push(w(_[T]));return d.Promise.all(A)}).then(function(N){for(var A=N.shift(),_=A.files,T=0;T<_.length;T++){var D=_[T],F=D.fileNameStr,B=l.resolve(D.fileNameStr);L.file(B,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:g.createFolders}),D.dir||(L.file(B).unsafeOriginalName=F)}return A.zipComment.length&&(L.comment=A.zipComment),L})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,o,u){var l=r("../utils"),d=r("../stream/GenericWorker");function h(p,m){d.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(m)}l.inherits(h,d),h.prototype._bindStream=function(p){var m=this;(this._stream=p).pause(),p.on("data",function(y){m.push({data:y,meta:{percent:0}})}).on("error",function(y){m.isPaused?this.generatedError=y:m.error(y)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},h.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,o,u){var l=r("readable-stream").Readable;function d(h,p,m){l.call(this,p),this._helper=h;var y=this;h.on("data",function(w,j){y.push(w)||y._helper.pause(),m&&m(j)}).on("error",function(w){y.emit("error",w)}).on("end",function(){y.push(null)})}r("../utils").inherits(d,l),d.prototype._read=function(){this._helper.resume()},o.exports=d},{"../utils":32,"readable-stream":16}],14:[function(r,o,u){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,d);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,d)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var d=new Buffer(l);return d.fill(0),d},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(r,o,u){function l(B,ce,U){var q,ie=h.getTypeOf(ce),se=h.extend(U||{},y);se.date=se.date||new Date,se.compression!==null&&(se.compression=se.compression.toUpperCase()),typeof se.unixPermissions=="string"&&(se.unixPermissions=parseInt(se.unixPermissions,8)),se.unixPermissions&&16384&se.unixPermissions&&(se.dir=!0),se.dosPermissions&&16&se.dosPermissions&&(se.dir=!0),se.dir&&(B=_(B)),se.createFolders&&(q=A(B))&&T.call(this,q,!0);var I=ie==="string"&&se.binary===!1&&se.base64===!1;U&&U.binary!==void 0||(se.binary=!I),(ce instanceof w&&ce.uncompressedSize===0||se.dir||!ce||ce.length===0)&&(se.base64=!1,se.binary=!0,ce="",se.compression="STORE",ie="string");var O=null;O=ce instanceof w||ce instanceof p?ce:L.isNode&&L.isStream(ce)?new N(B,ce):h.prepareContent(B,ce,se.binary,se.optimizedBinaryString,se.base64);var Y=new j(B,O,se);this.files[B]=Y}var d=r("./utf8"),h=r("./utils"),p=r("./stream/GenericWorker"),m=r("./stream/StreamHelper"),y=r("./defaults"),w=r("./compressedObject"),j=r("./zipObject"),g=r("./generate"),L=r("./nodejsUtils"),N=r("./nodejs/NodejsStreamInputAdapter"),A=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var ce=B.lastIndexOf("/");return 0<ce?B.substring(0,ce):""},_=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},T=function(B,ce){return ce=ce!==void 0?ce:y.createFolders,B=_(B),this.files[B]||l.call(this,B,null,{dir:!0,createFolders:ce}),this.files[B]};function D(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var ce,U,q;for(ce in this.files)q=this.files[ce],(U=ce.slice(this.root.length,ce.length))&&ce.slice(0,this.root.length)===this.root&&B(U,q)},filter:function(B){var ce=[];return this.forEach(function(U,q){B(U,q)&&ce.push(q)}),ce},file:function(B,ce,U){if(arguments.length!==1)return B=this.root+B,l.call(this,B,ce,U),this;if(D(B)){var q=B;return this.filter(function(se,I){return!I.dir&&q.test(se)})}var ie=this.files[this.root+B];return ie&&!ie.dir?ie:null},folder:function(B){if(!B)return this;if(D(B))return this.filter(function(ie,se){return se.dir&&B.test(ie)});var ce=this.root+B,U=T.call(this,ce),q=this.clone();return q.root=U.name,q},remove:function(B){B=this.root+B;var ce=this.files[B];if(ce||(B.slice(-1)!=="/"&&(B+="/"),ce=this.files[B]),ce&&!ce.dir)delete this.files[B];else for(var U=this.filter(function(ie,se){return se.name.slice(0,B.length)===B}),q=0;q<U.length;q++)delete this.files[U[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var ce,U={};try{if((U=h.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");h.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var q=U.comment||this.comment||"";ce=g.generateWorker(this,U,q)}catch(ie){(ce=new p("error")).error(ie)}return new m(ce,U.type||"string",U.mimeType)},generateAsync:function(B,ce){return this.generateInternalStream(B).accumulate(ce)},generateNodeStream:function(B,ce){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(ce)}};o.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,o,u){o.exports=r("stream")},{stream:void 0}],17:[function(r,o,u){var l=r("./DataReader");function d(h){l.call(this,h);for(var p=0;p<this.data.length;p++)h[p]=255&h[p]}r("../utils").inherits(d,l),d.prototype.byteAt=function(h){return this.data[this.zero+h]},d.prototype.lastIndexOfSignature=function(h){for(var p=h.charCodeAt(0),m=h.charCodeAt(1),y=h.charCodeAt(2),w=h.charCodeAt(3),j=this.length-4;0<=j;--j)if(this.data[j]===p&&this.data[j+1]===m&&this.data[j+2]===y&&this.data[j+3]===w)return j-this.zero;return-1},d.prototype.readAndCheckSignature=function(h){var p=h.charCodeAt(0),m=h.charCodeAt(1),y=h.charCodeAt(2),w=h.charCodeAt(3),j=this.readData(4);return p===j[0]&&m===j[1]&&y===j[2]&&w===j[3]},d.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},o.exports=d},{"../utils":32,"./DataReader":18}],18:[function(r,o,u){var l=r("../utils");function d(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var p,m=0;for(this.checkOffset(h),p=this.index+h-1;p>=this.index;p--)m=(m<<8)+this.byteAt(p);return this.index+=h,m},readString:function(h){return l.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},o.exports=d},{"../utils":32}],19:[function(r,o,u){var l=r("./Uint8ArrayReader");function d(h){l.call(this,h)}r("../utils").inherits(d,l),d.prototype.readData=function(h){this.checkOffset(h);var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},o.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,o,u){var l=r("./DataReader");function d(h){l.call(this,h)}r("../utils").inherits(d,l),d.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},d.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},d.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},d.prototype.readData=function(h){this.checkOffset(h);var p=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},o.exports=d},{"../utils":32,"./DataReader":18}],21:[function(r,o,u){var l=r("./ArrayReader");function d(h){l.call(this,h)}r("../utils").inherits(d,l),d.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,p},o.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(r,o,u){var l=r("../utils"),d=r("../support"),h=r("./ArrayReader"),p=r("./StringReader"),m=r("./NodeBufferReader"),y=r("./Uint8ArrayReader");o.exports=function(w){var j=l.getTypeOf(w);return l.checkSupport(j),j!=="string"||d.uint8array?j==="nodebuffer"?new m(w):d.uint8array?new y(l.transformTo("uint8array",w)):new h(l.transformTo("array",w)):new p(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,o,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,o,u){var l=r("./GenericWorker"),d=r("../utils");function h(p){l.call(this,"ConvertWorker to "+p),this.destType=p}d.inherits(h,l),h.prototype.processChunk=function(p){this.push({data:d.transformTo(this.destType,p.data),meta:p.meta})},o.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(r,o,u){var l=r("./GenericWorker"),d=r("../crc32");function h(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(h,l),h.prototype.processChunk=function(p){this.streamInfo.crc32=d(p.data,this.streamInfo.crc32||0),this.push(p)},o.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,o,u){var l=r("../utils"),d=r("./GenericWorker");function h(p){d.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}l.inherits(h,d),h.prototype.processChunk=function(p){if(p){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+p.data.length}d.prototype.processChunk.call(this,p)},o.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(r,o,u){var l=r("../utils"),d=r("./GenericWorker");function h(p){d.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(y){m.dataIsReady=!0,m.data=y,m.max=y&&y.length||0,m.type=l.getTypeOf(y),m.isPaused||m._tickAndRepeat()},function(y){m.error(y)})}l.inherits(h,d),h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,m);break;case"uint8array":p=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":p=this.data.slice(this.index,m)}return this.index=m,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(r,o,u){function l(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,h){return this._listeners[d].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,h){if(this._listeners[d])for(var p=0;p<this._listeners[d].length;p++)this._listeners[d][p].call(this,h)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var h=this;return d.on("data",function(p){h.processChunk(p)}),d.on("end",function(){h.end()}),d.on("error",function(p){h.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,h){return this.extraStreamInfo[d]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},o.exports=l},{}],29:[function(r,o,u){var l=r("../utils"),d=r("./ConvertWorker"),h=r("./GenericWorker"),p=r("../base64"),m=r("../support"),y=r("../external"),w=null;if(m.nodestream)try{w=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function j(L,N){return new y.Promise(function(A,_){var T=[],D=L._internalType,F=L._outputType,B=L._mimeType;L.on("data",function(ce,U){T.push(ce),N&&N(U)}).on("error",function(ce){T=[],_(ce)}).on("end",function(){try{var ce=(function(U,q,ie){switch(U){case"blob":return l.newBlob(l.transformTo("arraybuffer",q),ie);case"base64":return p.encode(q);default:return l.transformTo(U,q)}})(F,(function(U,q){var ie,se=0,I=null,O=0;for(ie=0;ie<q.length;ie++)O+=q[ie].length;switch(U){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(I=new Uint8Array(O),ie=0;ie<q.length;ie++)I.set(q[ie],se),se+=q[ie].length;return I;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+U+"'")}})(D,T),B);A(ce)}catch(U){_(U)}T=[]}).resume()})}function g(L,N,A){var _=N;switch(N){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=N,this._mimeType=A,l.checkSupport(_),this._worker=L.pipe(new d(_)),L.lock()}catch(T){this._worker=new h("error"),this._worker.error(T)}}g.prototype={accumulate:function(L){return j(this,L)},on:function(L,N){var A=this;return L==="data"?this._worker.on(L,function(_){N.call(A,_.data,_.meta)}):this._worker.on(L,function(){l.delay(N,arguments,A)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(L){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},L)}},o.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,o,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var l=new ArrayBuffer(0);try{u.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(l),u.blob=d.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!r("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(r,o,u){for(var l=r("./utils"),d=r("./support"),h=r("./nodejsUtils"),p=r("./stream/GenericWorker"),m=new Array(256),y=0;y<256;y++)m[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;m[254]=m[254]=1;function w(){p.call(this,"utf-8 decode"),this.leftOver=null}function j(){p.call(this,"utf-8 encode")}u.utf8encode=function(g){return d.nodebuffer?h.newBufferFrom(g,"utf-8"):(function(L){var N,A,_,T,D,F=L.length,B=0;for(T=0;T<F;T++)(64512&(A=L.charCodeAt(T)))==55296&&T+1<F&&(64512&(_=L.charCodeAt(T+1)))==56320&&(A=65536+(A-55296<<10)+(_-56320),T++),B+=A<128?1:A<2048?2:A<65536?3:4;for(N=d.uint8array?new Uint8Array(B):new Array(B),T=D=0;D<B;T++)(64512&(A=L.charCodeAt(T)))==55296&&T+1<F&&(64512&(_=L.charCodeAt(T+1)))==56320&&(A=65536+(A-55296<<10)+(_-56320),T++),A<128?N[D++]=A:(A<2048?N[D++]=192|A>>>6:(A<65536?N[D++]=224|A>>>12:(N[D++]=240|A>>>18,N[D++]=128|A>>>12&63),N[D++]=128|A>>>6&63),N[D++]=128|63&A);return N})(g)},u.utf8decode=function(g){return d.nodebuffer?l.transformTo("nodebuffer",g).toString("utf-8"):(function(L){var N,A,_,T,D=L.length,F=new Array(2*D);for(N=A=0;N<D;)if((_=L[N++])<128)F[A++]=_;else if(4<(T=m[_]))F[A++]=65533,N+=T-1;else{for(_&=T===2?31:T===3?15:7;1<T&&N<D;)_=_<<6|63&L[N++],T--;1<T?F[A++]=65533:_<65536?F[A++]=_:(_-=65536,F[A++]=55296|_>>10&1023,F[A++]=56320|1023&_)}return F.length!==A&&(F.subarray?F=F.subarray(0,A):F.length=A),l.applyFromCharCode(F)})(g=l.transformTo(d.uint8array?"uint8array":"array",g))},l.inherits(w,p),w.prototype.processChunk=function(g){var L=l.transformTo(d.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var N=L;(L=new Uint8Array(N.length+this.leftOver.length)).set(this.leftOver,0),L.set(N,this.leftOver.length)}else L=this.leftOver.concat(L);this.leftOver=null}var A=(function(T,D){var F;for((D=D||T.length)>T.length&&(D=T.length),F=D-1;0<=F&&(192&T[F])==128;)F--;return F<0||F===0?D:F+m[T[F]]>D?F:D})(L),_=L;A!==L.length&&(d.uint8array?(_=L.subarray(0,A),this.leftOver=L.subarray(A,L.length)):(_=L.slice(0,A),this.leftOver=L.slice(A,L.length))),this.push({data:u.utf8decode(_),meta:g.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=w,l.inherits(j,p),j.prototype.processChunk=function(g){this.push({data:u.utf8encode(g.data),meta:g.meta})},u.Utf8EncodeWorker=j},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,o,u){var l=r("./support"),d=r("./base64"),h=r("./nodejsUtils"),p=r("./external");function m(N){return N}function y(N,A){for(var _=0;_<N.length;++_)A[_]=255&N.charCodeAt(_);return A}r("setimmediate"),u.newBlob=function(N,A){u.checkSupport("blob");try{return new Blob([N],{type:A})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(N),_.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(N,A,_){var T=[],D=0,F=N.length;if(F<=_)return String.fromCharCode.apply(null,N);for(;D<F;)A==="array"||A==="nodebuffer"?T.push(String.fromCharCode.apply(null,N.slice(D,Math.min(D+_,F)))):T.push(String.fromCharCode.apply(null,N.subarray(D,Math.min(D+_,F)))),D+=_;return T.join("")},stringifyByChar:function(N){for(var A="",_=0;_<N.length;_++)A+=String.fromCharCode(N[_]);return A},applyCanBeUsed:{uint8array:(function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}})()}};function j(N){var A=65536,_=u.getTypeOf(N),T=!0;if(_==="uint8array"?T=w.applyCanBeUsed.uint8array:_==="nodebuffer"&&(T=w.applyCanBeUsed.nodebuffer),T)for(;1<A;)try{return w.stringifyByChunk(N,_,A)}catch{A=Math.floor(A/2)}return w.stringifyByChar(N)}function g(N,A){for(var _=0;_<N.length;_++)A[_]=N[_];return A}u.applyFromCharCode=j;var L={};L.string={string:m,array:function(N){return y(N,new Array(N.length))},arraybuffer:function(N){return L.string.uint8array(N).buffer},uint8array:function(N){return y(N,new Uint8Array(N.length))},nodebuffer:function(N){return y(N,h.allocBuffer(N.length))}},L.array={string:j,array:m,arraybuffer:function(N){return new Uint8Array(N).buffer},uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return h.newBufferFrom(N)}},L.arraybuffer={string:function(N){return j(new Uint8Array(N))},array:function(N){return g(new Uint8Array(N),new Array(N.byteLength))},arraybuffer:m,uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return h.newBufferFrom(new Uint8Array(N))}},L.uint8array={string:j,array:function(N){return g(N,new Array(N.length))},arraybuffer:function(N){return N.buffer},uint8array:m,nodebuffer:function(N){return h.newBufferFrom(N)}},L.nodebuffer={string:j,array:function(N){return g(N,new Array(N.length))},arraybuffer:function(N){return L.nodebuffer.uint8array(N).buffer},uint8array:function(N){return g(N,new Uint8Array(N.length))},nodebuffer:m},u.transformTo=function(N,A){if(A=A||"",!N)return A;u.checkSupport(N);var _=u.getTypeOf(A);return L[_][N](A)},u.resolve=function(N){for(var A=N.split("/"),_=[],T=0;T<A.length;T++){var D=A[T];D==="."||D===""&&T!==0&&T!==A.length-1||(D===".."?_.pop():_.push(D))}return _.join("/")},u.getTypeOf=function(N){return typeof N=="string"?"string":Object.prototype.toString.call(N)==="[object Array]"?"array":l.nodebuffer&&h.isBuffer(N)?"nodebuffer":l.uint8array&&N instanceof Uint8Array?"uint8array":l.arraybuffer&&N instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(N){if(!l[N.toLowerCase()])throw new Error(N+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(N){var A,_,T="";for(_=0;_<(N||"").length;_++)T+="\\x"+((A=N.charCodeAt(_))<16?"0":"")+A.toString(16).toUpperCase();return T},u.delay=function(N,A,_){setImmediate(function(){N.apply(_||null,A||[])})},u.inherits=function(N,A){function _(){}_.prototype=A.prototype,N.prototype=new _},u.extend=function(){var N,A,_={};for(N=0;N<arguments.length;N++)for(A in arguments[N])Object.prototype.hasOwnProperty.call(arguments[N],A)&&_[A]===void 0&&(_[A]=arguments[N][A]);return _},u.prepareContent=function(N,A,_,T,D){return p.Promise.resolve(A).then(function(F){return l.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new p.Promise(function(B,ce){var U=new FileReader;U.onload=function(q){B(q.target.result)},U.onerror=function(q){ce(q.target.error)},U.readAsArrayBuffer(F)}):F}).then(function(F){var B=u.getTypeOf(F);return B?(B==="arraybuffer"?F=u.transformTo("uint8array",F):B==="string"&&(D?F=d.decode(F):_&&T!==!0&&(F=(function(ce){return y(ce,l.uint8array?new Uint8Array(ce.length):new Array(ce.length))})(F))),F):p.Promise.reject(new Error("Can't read the data of '"+N+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,o,u){var l=r("./reader/readerFor"),d=r("./utils"),h=r("./signature"),p=r("./zipEntry"),m=r("./support");function y(w){this.files=[],this.loadOptions=w}y.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var j=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(j)+", expected "+d.pretty(w)+")")}},isSignature:function(w,j){var g=this.reader.index;this.reader.setIndex(w);var L=this.reader.readString(4)===j;return this.reader.setIndex(g),L},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),j=m.uint8array?"uint8array":"array",g=d.transformTo(j,w);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,j,g,L=this.zip64EndOfCentralSize-44;0<L;)w=this.reader.readInt(2),j=this.reader.readInt(4),g=this.reader.readData(j),this.zip64ExtensibleData[w]={id:w,length:j,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,j;for(w=0;w<this.files.length;w++)j=this.files[w],this.reader.setIndex(j.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),j.readLocalPart(this.reader),j.handleUTF8(),j.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(w=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var j=w;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var L=j-g;if(0<L)this.isSignature(j,h.CENTRAL_FILE_HEADER)||(this.reader.zero=L);else if(L<0)throw new Error("Corrupted zip: missing "+Math.abs(L)+" bytes.")},prepareReader:function(w){this.reader=l(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,o,u){var l=r("./reader/readerFor"),d=r("./utils"),h=r("./compressedObject"),p=r("./crc32"),m=r("./utf8"),y=r("./compressions"),w=r("./support");function j(g,L){this.options=g,this.loadOptions=L}j.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var L,N;if(g.skip(22),this.fileNameLength=g.readInt(2),N=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(N),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((L=(function(A){for(var _ in y)if(Object.prototype.hasOwnProperty.call(y,_)&&y[_].magic===A)return y[_];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,L,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var L=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(L),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=l(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var L,N,A,_=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<_;)L=g.readInt(2),N=g.readInt(2),A=g.readData(N),this.extraFields[L]={id:L,length:N,value:A};g.setIndex(_)},handleUTF8:function(){var g=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var L=this.findExtraFieldUnicodePath();if(L!==null)this.fileNameStr=L;else{var N=d.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(N)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var _=d.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var L=l(g.value);return L.readInt(1)!==1||p(this.fileName)!==L.readInt(4)?null:m.utf8decode(L.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var L=l(g.value);return L.readInt(1)!==1||p(this.fileComment)!==L.readInt(4)?null:m.utf8decode(L.readData(g.length-5))}return null}},o.exports=j},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,o,u){function l(L,N,A){this.name=L,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=N,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var d=r("./stream/StreamHelper"),h=r("./stream/DataWorker"),p=r("./utf8"),m=r("./compressedObject"),y=r("./stream/GenericWorker");l.prototype={internalStream:function(L){var N=null,A="string";try{if(!L)throw new Error("No output type specified.");var _=(A=L.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),N=this._decompressWorker();var T=!this._dataBinary;T&&!_&&(N=N.pipe(new p.Utf8EncodeWorker)),!T&&_&&(N=N.pipe(new p.Utf8DecodeWorker))}catch(D){(N=new y("error")).error(D)}return new d(N,A,"")},async:function(L,N){return this.internalStream(L).accumulate(N)},nodeStream:function(L,N){return this.internalStream(L||"nodebuffer").toNodejsStream(N)},_compressWorker:function(L,N){if(this._data instanceof m&&this._data.compression.magic===L.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new p.Utf8EncodeWorker)),m.createWorkerFrom(A,L,N)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof y?this._data:new h(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],j=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<w.length;g++)l.prototype[w[g]]=j;o.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,o,u){(function(l){var d,h,p=l.MutationObserver||l.WebKitMutationObserver;if(p){var m=0,y=new p(L),w=l.document.createTextNode("");y.observe(w,{characterData:!0}),d=function(){w.data=m=++m%2}}else if(l.setImmediate||l.MessageChannel===void 0)d="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var N=l.document.createElement("script");N.onreadystatechange=function(){L(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},l.document.documentElement.appendChild(N)}:function(){setTimeout(L,0)};else{var j=new l.MessageChannel;j.port1.onmessage=L,d=function(){j.port2.postMessage(0)}}var g=[];function L(){var N,A;h=!0;for(var _=g.length;_;){for(A=g,g=[],N=-1;++N<_;)A[N]();_=g.length}h=!1}o.exports=function(N){g.push(N)!==1||h||d()}}).call(this,typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,o,u){var l=r("immediate");function d(){}var h={},p=["REJECTED"],m=["FULFILLED"],y=["PENDING"];function w(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,_!==d&&N(this,_)}function j(_,T,D){this.promise=_,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function g(_,T,D){l(function(){var F;try{F=T(D)}catch(B){return h.reject(_,B)}F===_?h.reject(_,new TypeError("Cannot resolve promise with itself")):h.resolve(_,F)})}function L(_){var T=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof T=="function")return function(){T.apply(_,arguments)}}function N(_,T){var D=!1;function F(U){D||(D=!0,h.reject(_,U))}function B(U){D||(D=!0,h.resolve(_,U))}var ce=A(function(){T(B,F)});ce.status==="error"&&F(ce.value)}function A(_,T){var D={};try{D.value=_(T),D.status="success"}catch(F){D.status="error",D.value=F}return D}(o.exports=w).prototype.finally=function(_){if(typeof _!="function")return this;var T=this.constructor;return this.then(function(D){return T.resolve(_()).then(function(){return D})},function(D){return T.resolve(_()).then(function(){throw D})})},w.prototype.catch=function(_){return this.then(null,_)},w.prototype.then=function(_,T){if(typeof _!="function"&&this.state===m||typeof T!="function"&&this.state===p)return this;var D=new this.constructor(d);return this.state!==y?g(D,this.state===m?_:T,this.outcome):this.queue.push(new j(D,_,T)),D},j.prototype.callFulfilled=function(_){h.resolve(this.promise,_)},j.prototype.otherCallFulfilled=function(_){g(this.promise,this.onFulfilled,_)},j.prototype.callRejected=function(_){h.reject(this.promise,_)},j.prototype.otherCallRejected=function(_){g(this.promise,this.onRejected,_)},h.resolve=function(_,T){var D=A(L,T);if(D.status==="error")return h.reject(_,D.value);var F=D.value;if(F)N(_,F);else{_.state=m,_.outcome=T;for(var B=-1,ce=_.queue.length;++B<ce;)_.queue[B].callFulfilled(T)}return _},h.reject=function(_,T){_.state=p,_.outcome=T;for(var D=-1,F=_.queue.length;++D<F;)_.queue[D].callRejected(T);return _},w.resolve=function(_){return _ instanceof this?_:h.resolve(new this(d),_)},w.reject=function(_){var T=new this(d);return h.reject(T,_)},w.all=function(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=_.length,F=!1;if(!D)return this.resolve([]);for(var B=new Array(D),ce=0,U=-1,q=new this(d);++U<D;)ie(_[U],U);return q;function ie(se,I){T.resolve(se).then(function(O){B[I]=O,++ce!==D||F||(F=!0,h.resolve(q,B))},function(O){F||(F=!0,h.reject(q,O))})}},w.race=function(_){var T=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=_.length,F=!1;if(!D)return this.resolve([]);for(var B=-1,ce=new this(d);++B<D;)U=_[B],T.resolve(U).then(function(q){F||(F=!0,h.resolve(ce,q))},function(q){F||(F=!0,h.reject(ce,q))});var U;return ce}},{immediate:36}],38:[function(r,o,u){var l={};(0,r("./lib/utils/common").assign)(l,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),o.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,o,u){var l=r("./zlib/deflate"),d=r("./utils/common"),h=r("./utils/strings"),p=r("./zlib/messages"),m=r("./zlib/zstream"),y=Object.prototype.toString,w=0,j=-1,g=0,L=8;function N(_){if(!(this instanceof N))return new N(_);this.options=d.assign({level:j,method:L,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},_||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var D=l.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(D!==w)throw new Error(p[D]);if(T.header&&l.deflateSetHeader(this.strm,T.header),T.dictionary){var F;if(F=typeof T.dictionary=="string"?h.string2buf(T.dictionary):y.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(D=l.deflateSetDictionary(this.strm,F))!==w)throw new Error(p[D]);this._dict_set=!0}}function A(_,T){var D=new N(T);if(D.push(_,!0),D.err)throw D.msg||p[D.err];return D.result}N.prototype.push=function(_,T){var D,F,B=this.strm,ce=this.options.chunkSize;if(this.ended)return!1;F=T===~~T?T:T===!0?4:0,typeof _=="string"?B.input=h.string2buf(_):y.call(_)==="[object ArrayBuffer]"?B.input=new Uint8Array(_):B.input=_,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new d.Buf8(ce),B.next_out=0,B.avail_out=ce),(D=l.deflate(B,F))!==1&&D!==w)return this.onEnd(D),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(d.shrinkBuf(B.output,B.next_out))):this.onData(d.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&D!==1);return F===4?(D=l.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===w):F!==2||(this.onEnd(w),!(B.avail_out=0))},N.prototype.onData=function(_){this.chunks.push(_)},N.prototype.onEnd=function(_){_===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},u.Deflate=N,u.deflate=A,u.deflateRaw=function(_,T){return(T=T||{}).raw=!0,A(_,T)},u.gzip=function(_,T){return(T=T||{}).gzip=!0,A(_,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,o,u){var l=r("./zlib/inflate"),d=r("./utils/common"),h=r("./utils/strings"),p=r("./zlib/constants"),m=r("./zlib/messages"),y=r("./zlib/zstream"),w=r("./zlib/gzheader"),j=Object.prototype.toString;function g(N){if(!(this instanceof g))return new g(N);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},N||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||N&&N.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var _=l.inflateInit2(this.strm,A.windowBits);if(_!==p.Z_OK)throw new Error(m[_]);this.header=new w,l.inflateGetHeader(this.strm,this.header)}function L(N,A){var _=new g(A);if(_.push(N,!0),_.err)throw _.msg||m[_.err];return _.result}g.prototype.push=function(N,A){var _,T,D,F,B,ce,U=this.strm,q=this.options.chunkSize,ie=this.options.dictionary,se=!1;if(this.ended)return!1;T=A===~~A?A:A===!0?p.Z_FINISH:p.Z_NO_FLUSH,typeof N=="string"?U.input=h.binstring2buf(N):j.call(N)==="[object ArrayBuffer]"?U.input=new Uint8Array(N):U.input=N,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new d.Buf8(q),U.next_out=0,U.avail_out=q),(_=l.inflate(U,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&ie&&(ce=typeof ie=="string"?h.string2buf(ie):j.call(ie)==="[object ArrayBuffer]"?new Uint8Array(ie):ie,_=l.inflateSetDictionary(this.strm,ce)),_===p.Z_BUF_ERROR&&se===!0&&(_=p.Z_OK,se=!1),_!==p.Z_STREAM_END&&_!==p.Z_OK)return this.onEnd(_),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&_!==p.Z_STREAM_END&&(U.avail_in!==0||T!==p.Z_FINISH&&T!==p.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=h.utf8border(U.output,U.next_out),F=U.next_out-D,B=h.buf2string(U.output,D),U.next_out=F,U.avail_out=q-F,F&&d.arraySet(U.output,U.output,D,F,0),this.onData(B)):this.onData(d.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(se=!0)}while((0<U.avail_in||U.avail_out===0)&&_!==p.Z_STREAM_END);return _===p.Z_STREAM_END&&(T=p.Z_FINISH),T===p.Z_FINISH?(_=l.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===p.Z_OK):T!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(U.avail_out=0))},g.prototype.onData=function(N){this.chunks.push(N)},g.prototype.onEnd=function(N){N===p.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},u.Inflate=g,u.inflate=L,u.inflateRaw=function(N,A){return(A=A||{}).raw=!0,L(N,A)},u.ungzip=L},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,o,u){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(p){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var y=m.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var w in y)y.hasOwnProperty(w)&&(p[w]=y[w])}}return p},u.shrinkBuf=function(p,m){return p.length===m?p:p.subarray?p.subarray(0,m):(p.length=m,p)};var d={arraySet:function(p,m,y,w,j){if(m.subarray&&p.subarray)p.set(m.subarray(y,y+w),j);else for(var g=0;g<w;g++)p[j+g]=m[y+g]},flattenChunks:function(p){var m,y,w,j,g,L;for(m=w=0,y=p.length;m<y;m++)w+=p[m].length;for(L=new Uint8Array(w),m=j=0,y=p.length;m<y;m++)g=p[m],L.set(g,j),j+=g.length;return L}},h={arraySet:function(p,m,y,w,j){for(var g=0;g<w;g++)p[j+g]=m[y+g]},flattenChunks:function(p){return[].concat.apply([],p)}};u.setTyped=function(p){p?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,d)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,h))},u.setTyped(l)},{}],42:[function(r,o,u){var l=r("./common"),d=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var p=new l.Buf8(256),m=0;m<256;m++)p[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function y(w,j){if(j<65537&&(w.subarray&&h||!w.subarray&&d))return String.fromCharCode.apply(null,l.shrinkBuf(w,j));for(var g="",L=0;L<j;L++)g+=String.fromCharCode(w[L]);return g}p[254]=p[254]=1,u.string2buf=function(w){var j,g,L,N,A,_=w.length,T=0;for(N=0;N<_;N++)(64512&(g=w.charCodeAt(N)))==55296&&N+1<_&&(64512&(L=w.charCodeAt(N+1)))==56320&&(g=65536+(g-55296<<10)+(L-56320),N++),T+=g<128?1:g<2048?2:g<65536?3:4;for(j=new l.Buf8(T),N=A=0;A<T;N++)(64512&(g=w.charCodeAt(N)))==55296&&N+1<_&&(64512&(L=w.charCodeAt(N+1)))==56320&&(g=65536+(g-55296<<10)+(L-56320),N++),g<128?j[A++]=g:(g<2048?j[A++]=192|g>>>6:(g<65536?j[A++]=224|g>>>12:(j[A++]=240|g>>>18,j[A++]=128|g>>>12&63),j[A++]=128|g>>>6&63),j[A++]=128|63&g);return j},u.buf2binstring=function(w){return y(w,w.length)},u.binstring2buf=function(w){for(var j=new l.Buf8(w.length),g=0,L=j.length;g<L;g++)j[g]=w.charCodeAt(g);return j},u.buf2string=function(w,j){var g,L,N,A,_=j||w.length,T=new Array(2*_);for(g=L=0;g<_;)if((N=w[g++])<128)T[L++]=N;else if(4<(A=p[N]))T[L++]=65533,g+=A-1;else{for(N&=A===2?31:A===3?15:7;1<A&&g<_;)N=N<<6|63&w[g++],A--;1<A?T[L++]=65533:N<65536?T[L++]=N:(N-=65536,T[L++]=55296|N>>10&1023,T[L++]=56320|1023&N)}return y(T,L)},u.utf8border=function(w,j){var g;for((j=j||w.length)>w.length&&(j=w.length),g=j-1;0<=g&&(192&w[g])==128;)g--;return g<0||g===0?j:g+p[w[g]]>j?g:j}},{"./common":41}],43:[function(r,o,u){o.exports=function(l,d,h,p){for(var m=65535&l|0,y=l>>>16&65535|0,w=0;h!==0;){for(h-=w=2e3<h?2e3:h;y=y+(m=m+d[p++]|0)|0,--w;);m%=65521,y%=65521}return m|y<<16|0}},{}],44:[function(r,o,u){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,o,u){var l=(function(){for(var d,h=[],p=0;p<256;p++){d=p;for(var m=0;m<8;m++)d=1&d?3988292384^d>>>1:d>>>1;h[p]=d}return h})();o.exports=function(d,h,p,m){var y=l,w=m+p;d^=-1;for(var j=m;j<w;j++)d=d>>>8^y[255&(d^h[j])];return-1^d}},{}],46:[function(r,o,u){var l,d=r("../utils/common"),h=r("./trees"),p=r("./adler32"),m=r("./crc32"),y=r("./messages"),w=0,j=4,g=0,L=-2,N=-1,A=4,_=2,T=8,D=9,F=286,B=30,ce=19,U=2*F+1,q=15,ie=3,se=258,I=se+ie+1,O=42,Y=113,E=1,oe=2,J=3,ae=4;function he(M,me){return M.msg=y[me],me}function fe(M){return(M<<1)-(4<M?9:0)}function ge(M){for(var me=M.length;0<=--me;)M[me]=0}function P(M){var me=M.state,W=me.pending;W>M.avail_out&&(W=M.avail_out),W!==0&&(d.arraySet(M.output,me.pending_buf,me.pending_out,W,M.next_out),M.next_out+=W,me.pending_out+=W,M.total_out+=W,M.avail_out-=W,me.pending-=W,me.pending===0&&(me.pending_out=0))}function C(M,me){h._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,me),M.block_start=M.strstart,P(M.strm)}function G(M,me){M.pending_buf[M.pending++]=me}function $(M,me){M.pending_buf[M.pending++]=me>>>8&255,M.pending_buf[M.pending++]=255&me}function ee(M,me){var W,le,te=M.max_chain_length,de=M.strstart,ke=M.prev_length,Le=M.nice_match,xe=M.strstart>M.w_size-I?M.strstart-(M.w_size-I):0,Oe=M.window,De=M.w_mask,Ge=M.prev,at=M.strstart+se,ct=Oe[de+ke-1],dt=Oe[de+ke];M.prev_length>=M.good_match&&(te>>=2),Le>M.lookahead&&(Le=M.lookahead);do if(Oe[(W=me)+ke]===dt&&Oe[W+ke-1]===ct&&Oe[W]===Oe[de]&&Oe[++W]===Oe[de+1]){de+=2,W++;do;while(Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&Oe[++de]===Oe[++W]&&de<at);if(le=se-(at-de),de=at-se,ke<le){if(M.match_start=me,Le<=(ke=le))break;ct=Oe[de+ke-1],dt=Oe[de+ke]}}while((me=Ge[me&De])>xe&&--te!=0);return ke<=M.lookahead?ke:M.lookahead}function be(M){var me,W,le,te,de,ke,Le,xe,Oe,De,Ge=M.w_size;do{if(te=M.window_size-M.lookahead-M.strstart,M.strstart>=Ge+(Ge-I)){for(d.arraySet(M.window,M.window,Ge,Ge,0),M.match_start-=Ge,M.strstart-=Ge,M.block_start-=Ge,me=W=M.hash_size;le=M.head[--me],M.head[me]=Ge<=le?le-Ge:0,--W;);for(me=W=Ge;le=M.prev[--me],M.prev[me]=Ge<=le?le-Ge:0,--W;);te+=Ge}if(M.strm.avail_in===0)break;if(ke=M.strm,Le=M.window,xe=M.strstart+M.lookahead,Oe=te,De=void 0,De=ke.avail_in,Oe<De&&(De=Oe),W=De===0?0:(ke.avail_in-=De,d.arraySet(Le,ke.input,ke.next_in,De,xe),ke.state.wrap===1?ke.adler=p(ke.adler,Le,De,xe):ke.state.wrap===2&&(ke.adler=m(ke.adler,Le,De,xe)),ke.next_in+=De,ke.total_in+=De,De),M.lookahead+=W,M.lookahead+M.insert>=ie)for(de=M.strstart-M.insert,M.ins_h=M.window[de],M.ins_h=(M.ins_h<<M.hash_shift^M.window[de+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[de+ie-1])&M.hash_mask,M.prev[de&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=de,de++,M.insert--,!(M.lookahead+M.insert<ie)););}while(M.lookahead<I&&M.strm.avail_in!==0)}function Se(M,me){for(var W,le;;){if(M.lookahead<I){if(be(M),M.lookahead<I&&me===w)return E;if(M.lookahead===0)break}if(W=0,M.lookahead>=ie&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ie-1])&M.hash_mask,W=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),W!==0&&M.strstart-W<=M.w_size-I&&(M.match_length=ee(M,W)),M.match_length>=ie)if(le=h._tr_tally(M,M.strstart-M.match_start,M.match_length-ie),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=ie){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ie-1])&M.hash_mask,W=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else le=h._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(le&&(C(M,!1),M.strm.avail_out===0))return E}return M.insert=M.strstart<ie-1?M.strstart:ie-1,me===j?(C(M,!0),M.strm.avail_out===0?J:ae):M.last_lit&&(C(M,!1),M.strm.avail_out===0)?E:oe}function je(M,me){for(var W,le,te;;){if(M.lookahead<I){if(be(M),M.lookahead<I&&me===w)return E;if(M.lookahead===0)break}if(W=0,M.lookahead>=ie&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ie-1])&M.hash_mask,W=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=ie-1,W!==0&&M.prev_length<M.max_lazy_match&&M.strstart-W<=M.w_size-I&&(M.match_length=ee(M,W),M.match_length<=5&&(M.strategy===1||M.match_length===ie&&4096<M.strstart-M.match_start)&&(M.match_length=ie-1)),M.prev_length>=ie&&M.match_length<=M.prev_length){for(te=M.strstart+M.lookahead-ie,le=h._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-ie),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=te&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+ie-1])&M.hash_mask,W=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=ie-1,M.strstart++,le&&(C(M,!1),M.strm.avail_out===0))return E}else if(M.match_available){if((le=h._tr_tally(M,0,M.window[M.strstart-1]))&&C(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return E}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(le=h._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<ie-1?M.strstart:ie-1,me===j?(C(M,!0),M.strm.avail_out===0?J:ae):M.last_lit&&(C(M,!1),M.strm.avail_out===0)?E:oe}function Ae(M,me,W,le,te){this.good_length=M,this.max_lazy=me,this.nice_length=W,this.max_chain=le,this.func=te}function Ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*U),this.dyn_dtree=new d.Buf16(2*(2*B+1)),this.bl_tree=new d.Buf16(2*(2*ce+1)),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(q+1),this.heap=new d.Buf16(2*F+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*F+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Re(M){var me;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=_,(me=M.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?O:Y,M.adler=me.wrap===2?0:1,me.last_flush=w,h._tr_init(me),g):he(M,L)}function qe(M){var me=Re(M);return me===g&&(function(W){W.window_size=2*W.w_size,ge(W.head),W.max_lazy_match=l[W.level].max_lazy,W.good_match=l[W.level].good_length,W.nice_match=l[W.level].nice_length,W.max_chain_length=l[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=ie-1,W.match_available=0,W.ins_h=0})(M.state),me}function Xe(M,me,W,le,te,de){if(!M)return L;var ke=1;if(me===N&&(me=6),le<0?(ke=0,le=-le):15<le&&(ke=2,le-=16),te<1||D<te||W!==T||le<8||15<le||me<0||9<me||de<0||A<de)return he(M,L);le===8&&(le=9);var Le=new Ee;return(M.state=Le).strm=M,Le.wrap=ke,Le.gzhead=null,Le.w_bits=le,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=te+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+ie-1)/ie),Le.window=new d.Buf8(2*Le.w_size),Le.head=new d.Buf16(Le.hash_size),Le.prev=new d.Buf16(Le.w_size),Le.lit_bufsize=1<<te+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new d.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=me,Le.strategy=de,Le.method=W,qe(M)}l=[new Ae(0,0,0,0,function(M,me){var W=65535;for(W>M.pending_buf_size-5&&(W=M.pending_buf_size-5);;){if(M.lookahead<=1){if(be(M),M.lookahead===0&&me===w)return E;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var le=M.block_start+W;if((M.strstart===0||M.strstart>=le)&&(M.lookahead=M.strstart-le,M.strstart=le,C(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-I&&(C(M,!1),M.strm.avail_out===0))return E}return M.insert=0,me===j?(C(M,!0),M.strm.avail_out===0?J:ae):(M.strstart>M.block_start&&(C(M,!1),M.strm.avail_out),E)}),new Ae(4,4,8,4,Se),new Ae(4,5,16,8,Se),new Ae(4,6,32,32,Se),new Ae(4,4,16,16,je),new Ae(8,16,32,32,je),new Ae(8,16,128,128,je),new Ae(8,32,128,256,je),new Ae(32,128,258,1024,je),new Ae(32,258,258,4096,je)],u.deflateInit=function(M,me){return Xe(M,me,T,15,8,0)},u.deflateInit2=Xe,u.deflateReset=qe,u.deflateResetKeep=Re,u.deflateSetHeader=function(M,me){return M&&M.state?M.state.wrap!==2?L:(M.state.gzhead=me,g):L},u.deflate=function(M,me){var W,le,te,de;if(!M||!M.state||5<me||me<0)return M?he(M,L):L;if(le=M.state,!M.output||!M.input&&M.avail_in!==0||le.status===666&&me!==j)return he(M,M.avail_out===0?-5:L);if(le.strm=M,W=le.last_flush,le.last_flush=me,le.status===O)if(le.wrap===2)M.adler=0,G(le,31),G(le,139),G(le,8),le.gzhead?(G(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),G(le,255&le.gzhead.time),G(le,le.gzhead.time>>8&255),G(le,le.gzhead.time>>16&255),G(le,le.gzhead.time>>24&255),G(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),G(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(G(le,255&le.gzhead.extra.length),G(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(M.adler=m(M.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(G(le,0),G(le,0),G(le,0),G(le,0),G(le,0),G(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),G(le,3),le.status=Y);else{var ke=T+(le.w_bits-8<<4)<<8;ke|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(ke|=32),ke+=31-ke%31,le.status=Y,$(le,ke),le.strstart!==0&&($(le,M.adler>>>16),$(le,65535&M.adler)),M.adler=1}if(le.status===69)if(le.gzhead.extra){for(te=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),P(M),te=le.pending,le.pending!==le.pending_buf_size));)G(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){te=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),P(M),te=le.pending,le.pending===le.pending_buf_size)){de=1;break}de=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,G(le,de)}while(de!==0);le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),de===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){te=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),P(M),te=le.pending,le.pending===le.pending_buf_size)){de=1;break}de=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,G(le,de)}while(de!==0);le.gzhead.hcrc&&le.pending>te&&(M.adler=m(M.adler,le.pending_buf,le.pending-te,te)),de===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&P(M),le.pending+2<=le.pending_buf_size&&(G(le,255&M.adler),G(le,M.adler>>8&255),M.adler=0,le.status=Y)):le.status=Y),le.pending!==0){if(P(M),M.avail_out===0)return le.last_flush=-1,g}else if(M.avail_in===0&&fe(me)<=fe(W)&&me!==j)return he(M,-5);if(le.status===666&&M.avail_in!==0)return he(M,-5);if(M.avail_in!==0||le.lookahead!==0||me!==w&&le.status!==666){var Le=le.strategy===2?(function(xe,Oe){for(var De;;){if(xe.lookahead===0&&(be(xe),xe.lookahead===0)){if(Oe===w)return E;break}if(xe.match_length=0,De=h._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,De&&(C(xe,!1),xe.strm.avail_out===0))return E}return xe.insert=0,Oe===j?(C(xe,!0),xe.strm.avail_out===0?J:ae):xe.last_lit&&(C(xe,!1),xe.strm.avail_out===0)?E:oe})(le,me):le.strategy===3?(function(xe,Oe){for(var De,Ge,at,ct,dt=xe.window;;){if(xe.lookahead<=se){if(be(xe),xe.lookahead<=se&&Oe===w)return E;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=ie&&0<xe.strstart&&(Ge=dt[at=xe.strstart-1])===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]){ct=xe.strstart+se;do;while(Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&Ge===dt[++at]&&at<ct);xe.match_length=se-(ct-at),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=ie?(De=h._tr_tally(xe,1,xe.match_length-ie),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(De=h._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),De&&(C(xe,!1),xe.strm.avail_out===0))return E}return xe.insert=0,Oe===j?(C(xe,!0),xe.strm.avail_out===0?J:ae):xe.last_lit&&(C(xe,!1),xe.strm.avail_out===0)?E:oe})(le,me):l[le.level].func(le,me);if(Le!==J&&Le!==ae||(le.status=666),Le===E||Le===J)return M.avail_out===0&&(le.last_flush=-1),g;if(Le===oe&&(me===1?h._tr_align(le):me!==5&&(h._tr_stored_block(le,0,0,!1),me===3&&(ge(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),P(M),M.avail_out===0))return le.last_flush=-1,g}return me!==j?g:le.wrap<=0?1:(le.wrap===2?(G(le,255&M.adler),G(le,M.adler>>8&255),G(le,M.adler>>16&255),G(le,M.adler>>24&255),G(le,255&M.total_in),G(le,M.total_in>>8&255),G(le,M.total_in>>16&255),G(le,M.total_in>>24&255)):($(le,M.adler>>>16),$(le,65535&M.adler)),P(M),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?g:1)},u.deflateEnd=function(M){var me;return M&&M.state?(me=M.state.status)!==O&&me!==69&&me!==73&&me!==91&&me!==103&&me!==Y&&me!==666?he(M,L):(M.state=null,me===Y?he(M,-3):g):L},u.deflateSetDictionary=function(M,me){var W,le,te,de,ke,Le,xe,Oe,De=me.length;if(!M||!M.state||(de=(W=M.state).wrap)===2||de===1&&W.status!==O||W.lookahead)return L;for(de===1&&(M.adler=p(M.adler,me,De,0)),W.wrap=0,De>=W.w_size&&(de===0&&(ge(W.head),W.strstart=0,W.block_start=0,W.insert=0),Oe=new d.Buf8(W.w_size),d.arraySet(Oe,me,De-W.w_size,W.w_size,0),me=Oe,De=W.w_size),ke=M.avail_in,Le=M.next_in,xe=M.input,M.avail_in=De,M.next_in=0,M.input=me,be(W);W.lookahead>=ie;){for(le=W.strstart,te=W.lookahead-(ie-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[le+ie-1])&W.hash_mask,W.prev[le&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=le,le++,--te;);W.strstart=le,W.lookahead=ie-1,be(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=ie-1,W.match_available=0,M.next_in=Le,M.input=xe,M.avail_in=ke,W.wrap=de,g},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,o,u){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,o,u){o.exports=function(l,d){var h,p,m,y,w,j,g,L,N,A,_,T,D,F,B,ce,U,q,ie,se,I,O,Y,E,oe;h=l.state,p=l.next_in,E=l.input,m=p+(l.avail_in-5),y=l.next_out,oe=l.output,w=y-(d-l.avail_out),j=y+(l.avail_out-257),g=h.dmax,L=h.wsize,N=h.whave,A=h.wnext,_=h.window,T=h.hold,D=h.bits,F=h.lencode,B=h.distcode,ce=(1<<h.lenbits)-1,U=(1<<h.distbits)-1;e:do{D<15&&(T+=E[p++]<<D,D+=8,T+=E[p++]<<D,D+=8),q=F[T&ce];t:for(;;){if(T>>>=ie=q>>>24,D-=ie,(ie=q>>>16&255)===0)oe[y++]=65535&q;else{if(!(16&ie)){if((64&ie)==0){q=F[(65535&q)+(T&(1<<ie)-1)];continue t}if(32&ie){h.mode=12;break e}l.msg="invalid literal/length code",h.mode=30;break e}se=65535&q,(ie&=15)&&(D<ie&&(T+=E[p++]<<D,D+=8),se+=T&(1<<ie)-1,T>>>=ie,D-=ie),D<15&&(T+=E[p++]<<D,D+=8,T+=E[p++]<<D,D+=8),q=B[T&U];n:for(;;){if(T>>>=ie=q>>>24,D-=ie,!(16&(ie=q>>>16&255))){if((64&ie)==0){q=B[(65535&q)+(T&(1<<ie)-1)];continue n}l.msg="invalid distance code",h.mode=30;break e}if(I=65535&q,D<(ie&=15)&&(T+=E[p++]<<D,(D+=8)<ie&&(T+=E[p++]<<D,D+=8)),g<(I+=T&(1<<ie)-1)){l.msg="invalid distance too far back",h.mode=30;break e}if(T>>>=ie,D-=ie,(ie=y-w)<I){if(N<(ie=I-ie)&&h.sane){l.msg="invalid distance too far back",h.mode=30;break e}if(Y=_,(O=0)===A){if(O+=L-ie,ie<se){for(se-=ie;oe[y++]=_[O++],--ie;);O=y-I,Y=oe}}else if(A<ie){if(O+=L+A-ie,(ie-=A)<se){for(se-=ie;oe[y++]=_[O++],--ie;);if(O=0,A<se){for(se-=ie=A;oe[y++]=_[O++],--ie;);O=y-I,Y=oe}}}else if(O+=A-ie,ie<se){for(se-=ie;oe[y++]=_[O++],--ie;);O=y-I,Y=oe}for(;2<se;)oe[y++]=Y[O++],oe[y++]=Y[O++],oe[y++]=Y[O++],se-=3;se&&(oe[y++]=Y[O++],1<se&&(oe[y++]=Y[O++]))}else{for(O=y-I;oe[y++]=oe[O++],oe[y++]=oe[O++],oe[y++]=oe[O++],2<(se-=3););se&&(oe[y++]=oe[O++],1<se&&(oe[y++]=oe[O++]))}break}}break}}while(p<m&&y<j);p-=se=D>>3,T&=(1<<(D-=se<<3))-1,l.next_in=p,l.next_out=y,l.avail_in=p<m?m-p+5:5-(p-m),l.avail_out=y<j?j-y+257:257-(y-j),h.hold=T,h.bits=D}},{}],49:[function(r,o,u){var l=r("../utils/common"),d=r("./adler32"),h=r("./crc32"),p=r("./inffast"),m=r("./inftrees"),y=1,w=2,j=0,g=-2,L=1,N=852,A=592;function _(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(O){var Y;return O&&O.state?(Y=O.state,O.total_in=O.total_out=Y.total=0,O.msg="",Y.wrap&&(O.adler=1&Y.wrap),Y.mode=L,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new l.Buf32(N),Y.distcode=Y.distdyn=new l.Buf32(A),Y.sane=1,Y.back=-1,j):g}function F(O){var Y;return O&&O.state?((Y=O.state).wsize=0,Y.whave=0,Y.wnext=0,D(O)):g}function B(O,Y){var E,oe;return O&&O.state?(oe=O.state,Y<0?(E=0,Y=-Y):(E=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?g:(oe.window!==null&&oe.wbits!==Y&&(oe.window=null),oe.wrap=E,oe.wbits=Y,F(O))):g}function ce(O,Y){var E,oe;return O?(oe=new T,(O.state=oe).window=null,(E=B(O,Y))!==j&&(O.state=null),E):g}var U,q,ie=!0;function se(O){if(ie){var Y;for(U=new l.Buf32(512),q=new l.Buf32(32),Y=0;Y<144;)O.lens[Y++]=8;for(;Y<256;)O.lens[Y++]=9;for(;Y<280;)O.lens[Y++]=7;for(;Y<288;)O.lens[Y++]=8;for(m(y,O.lens,0,288,U,0,O.work,{bits:9}),Y=0;Y<32;)O.lens[Y++]=5;m(w,O.lens,0,32,q,0,O.work,{bits:5}),ie=!1}O.lencode=U,O.lenbits=9,O.distcode=q,O.distbits=5}function I(O,Y,E,oe){var J,ae=O.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new l.Buf8(ae.wsize)),oe>=ae.wsize?(l.arraySet(ae.window,Y,E-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(oe<(J=ae.wsize-ae.wnext)&&(J=oe),l.arraySet(ae.window,Y,E-oe,J,ae.wnext),(oe-=J)?(l.arraySet(ae.window,Y,E-oe,oe,0),ae.wnext=oe,ae.whave=ae.wsize):(ae.wnext+=J,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=J))),0}u.inflateReset=F,u.inflateReset2=B,u.inflateResetKeep=D,u.inflateInit=function(O){return ce(O,15)},u.inflateInit2=ce,u.inflate=function(O,Y){var E,oe,J,ae,he,fe,ge,P,C,G,$,ee,be,Se,je,Ae,Ee,Re,qe,Xe,M,me,W,le,te=0,de=new l.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return g;(E=O.state).mode===12&&(E.mode=13),he=O.next_out,J=O.output,ge=O.avail_out,ae=O.next_in,oe=O.input,fe=O.avail_in,P=E.hold,C=E.bits,G=fe,$=ge,me=j;e:for(;;)switch(E.mode){case L:if(E.wrap===0){E.mode=13;break}for(;C<16;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(2&E.wrap&&P===35615){de[E.check=0]=255&P,de[1]=P>>>8&255,E.check=h(E.check,de,2,0),C=P=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&P)<<8)+(P>>8))%31){O.msg="incorrect header check",E.mode=30;break}if((15&P)!=8){O.msg="unknown compression method",E.mode=30;break}if(C-=4,M=8+(15&(P>>>=4)),E.wbits===0)E.wbits=M;else if(M>E.wbits){O.msg="invalid window size",E.mode=30;break}E.dmax=1<<M,O.adler=E.check=1,E.mode=512&P?10:12,C=P=0;break;case 2:for(;C<16;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(E.flags=P,(255&E.flags)!=8){O.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){O.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=P>>8&1),512&E.flags&&(de[0]=255&P,de[1]=P>>>8&255,E.check=h(E.check,de,2,0)),C=P=0,E.mode=3;case 3:for(;C<32;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.head&&(E.head.time=P),512&E.flags&&(de[0]=255&P,de[1]=P>>>8&255,de[2]=P>>>16&255,de[3]=P>>>24&255,E.check=h(E.check,de,4,0)),C=P=0,E.mode=4;case 4:for(;C<16;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.head&&(E.head.xflags=255&P,E.head.os=P>>8),512&E.flags&&(de[0]=255&P,de[1]=P>>>8&255,E.check=h(E.check,de,2,0)),C=P=0,E.mode=5;case 5:if(1024&E.flags){for(;C<16;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.length=P,E.head&&(E.head.extra_len=P),512&E.flags&&(de[0]=255&P,de[1]=P>>>8&255,E.check=h(E.check,de,2,0)),C=P=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(fe<(ee=E.length)&&(ee=fe),ee&&(E.head&&(M=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),l.arraySet(E.head.extra,oe,ae,ee,M)),512&E.flags&&(E.check=h(E.check,oe,ee,ae)),fe-=ee,ae+=ee,E.length-=ee),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(fe===0)break e;for(ee=0;M=oe[ae+ee++],E.head&&M&&E.length<65536&&(E.head.name+=String.fromCharCode(M)),M&&ee<fe;);if(512&E.flags&&(E.check=h(E.check,oe,ee,ae)),fe-=ee,ae+=ee,M)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(fe===0)break e;for(ee=0;M=oe[ae+ee++],E.head&&M&&E.length<65536&&(E.head.comment+=String.fromCharCode(M)),M&&ee<fe;);if(512&E.flags&&(E.check=h(E.check,oe,ee,ae)),fe-=ee,ae+=ee,M)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;C<16;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(P!==(65535&E.check)){O.msg="header crc mismatch",E.mode=30;break}C=P=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),O.adler=E.check=0,E.mode=12;break;case 10:for(;C<32;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}O.adler=E.check=_(P),C=P=0,E.mode=11;case 11:if(E.havedict===0)return O.next_out=he,O.avail_out=ge,O.next_in=ae,O.avail_in=fe,E.hold=P,E.bits=C,2;O.adler=E.check=1,E.mode=12;case 12:if(Y===5||Y===6)break e;case 13:if(E.last){P>>>=7&C,C-=7&C,E.mode=27;break}for(;C<3;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}switch(E.last=1&P,C-=1,3&(P>>>=1)){case 0:E.mode=14;break;case 1:if(se(E),E.mode=20,Y!==6)break;P>>>=2,C-=2;break e;case 2:E.mode=17;break;case 3:O.msg="invalid block type",E.mode=30}P>>>=2,C-=2;break;case 14:for(P>>>=7&C,C-=7&C;C<32;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if((65535&P)!=(P>>>16^65535)){O.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&P,C=P=0,E.mode=15,Y===6)break e;case 15:E.mode=16;case 16:if(ee=E.length){if(fe<ee&&(ee=fe),ge<ee&&(ee=ge),ee===0)break e;l.arraySet(J,oe,ae,ee,he),fe-=ee,ae+=ee,ge-=ee,he+=ee,E.length-=ee;break}E.mode=12;break;case 17:for(;C<14;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(E.nlen=257+(31&P),P>>>=5,C-=5,E.ndist=1+(31&P),P>>>=5,C-=5,E.ncode=4+(15&P),P>>>=4,C-=4,286<E.nlen||30<E.ndist){O.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;C<3;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.lens[ke[E.have++]]=7&P,P>>>=3,C-=3}for(;E.have<19;)E.lens[ke[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,W={bits:E.lenbits},me=m(0,E.lens,0,19,E.lencode,0,E.work,W),E.lenbits=W.bits,me){O.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;Ae=(te=E.lencode[P&(1<<E.lenbits)-1])>>>16&255,Ee=65535&te,!((je=te>>>24)<=C);){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(Ee<16)P>>>=je,C-=je,E.lens[E.have++]=Ee;else{if(Ee===16){for(le=je+2;C<le;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(P>>>=je,C-=je,E.have===0){O.msg="invalid bit length repeat",E.mode=30;break}M=E.lens[E.have-1],ee=3+(3&P),P>>>=2,C-=2}else if(Ee===17){for(le=je+3;C<le;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}C-=je,M=0,ee=3+(7&(P>>>=je)),P>>>=3,C-=3}else{for(le=je+7;C<le;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}C-=je,M=0,ee=11+(127&(P>>>=je)),P>>>=7,C-=7}if(E.have+ee>E.nlen+E.ndist){O.msg="invalid bit length repeat",E.mode=30;break}for(;ee--;)E.lens[E.have++]=M}}if(E.mode===30)break;if(E.lens[256]===0){O.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,W={bits:E.lenbits},me=m(y,E.lens,0,E.nlen,E.lencode,0,E.work,W),E.lenbits=W.bits,me){O.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,W={bits:E.distbits},me=m(w,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,W),E.distbits=W.bits,me){O.msg="invalid distances set",E.mode=30;break}if(E.mode=20,Y===6)break e;case 20:E.mode=21;case 21:if(6<=fe&&258<=ge){O.next_out=he,O.avail_out=ge,O.next_in=ae,O.avail_in=fe,E.hold=P,E.bits=C,p(O,$),he=O.next_out,J=O.output,ge=O.avail_out,ae=O.next_in,oe=O.input,fe=O.avail_in,P=E.hold,C=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;Ae=(te=E.lencode[P&(1<<E.lenbits)-1])>>>16&255,Ee=65535&te,!((je=te>>>24)<=C);){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(Ae&&(240&Ae)==0){for(Re=je,qe=Ae,Xe=Ee;Ae=(te=E.lencode[Xe+((P&(1<<Re+qe)-1)>>Re)])>>>16&255,Ee=65535&te,!(Re+(je=te>>>24)<=C);){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}P>>>=Re,C-=Re,E.back+=Re}if(P>>>=je,C-=je,E.back+=je,E.length=Ee,Ae===0){E.mode=26;break}if(32&Ae){E.back=-1,E.mode=12;break}if(64&Ae){O.msg="invalid literal/length code",E.mode=30;break}E.extra=15&Ae,E.mode=22;case 22:if(E.extra){for(le=E.extra;C<le;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.length+=P&(1<<E.extra)-1,P>>>=E.extra,C-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;Ae=(te=E.distcode[P&(1<<E.distbits)-1])>>>16&255,Ee=65535&te,!((je=te>>>24)<=C);){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if((240&Ae)==0){for(Re=je,qe=Ae,Xe=Ee;Ae=(te=E.distcode[Xe+((P&(1<<Re+qe)-1)>>Re)])>>>16&255,Ee=65535&te,!(Re+(je=te>>>24)<=C);){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}P>>>=Re,C-=Re,E.back+=Re}if(P>>>=je,C-=je,E.back+=je,64&Ae){O.msg="invalid distance code",E.mode=30;break}E.offset=Ee,E.extra=15&Ae,E.mode=24;case 24:if(E.extra){for(le=E.extra;C<le;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}E.offset+=P&(1<<E.extra)-1,P>>>=E.extra,C-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){O.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(ge===0)break e;if(ee=$-ge,E.offset>ee){if((ee=E.offset-ee)>E.whave&&E.sane){O.msg="invalid distance too far back",E.mode=30;break}be=ee>E.wnext?(ee-=E.wnext,E.wsize-ee):E.wnext-ee,ee>E.length&&(ee=E.length),Se=E.window}else Se=J,be=he-E.offset,ee=E.length;for(ge<ee&&(ee=ge),ge-=ee,E.length-=ee;J[he++]=Se[be++],--ee;);E.length===0&&(E.mode=21);break;case 26:if(ge===0)break e;J[he++]=E.length,ge--,E.mode=21;break;case 27:if(E.wrap){for(;C<32;){if(fe===0)break e;fe--,P|=oe[ae++]<<C,C+=8}if($-=ge,O.total_out+=$,E.total+=$,$&&(O.adler=E.check=E.flags?h(E.check,J,$,he-$):d(E.check,J,$,he-$)),$=ge,(E.flags?P:_(P))!==E.check){O.msg="incorrect data check",E.mode=30;break}C=P=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;C<32;){if(fe===0)break e;fe--,P+=oe[ae++]<<C,C+=8}if(P!==(4294967295&E.total)){O.msg="incorrect length check",E.mode=30;break}C=P=0}E.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return g}return O.next_out=he,O.avail_out=ge,O.next_in=ae,O.avail_in=fe,E.hold=P,E.bits=C,(E.wsize||$!==O.avail_out&&E.mode<30&&(E.mode<27||Y!==4))&&I(O,O.output,O.next_out,$-O.avail_out)?(E.mode=31,-4):(G-=O.avail_in,$-=O.avail_out,O.total_in+=G,O.total_out+=$,E.total+=$,E.wrap&&$&&(O.adler=E.check=E.flags?h(E.check,J,$,O.next_out-$):d(E.check,J,$,O.next_out-$)),O.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(G==0&&$===0||Y===4)&&me===j&&(me=-5),me)},u.inflateEnd=function(O){if(!O||!O.state)return g;var Y=O.state;return Y.window&&(Y.window=null),O.state=null,j},u.inflateGetHeader=function(O,Y){var E;return O&&O.state?(2&(E=O.state).wrap)==0?g:((E.head=Y).done=!1,j):g},u.inflateSetDictionary=function(O,Y){var E,oe=Y.length;return O&&O.state?(E=O.state).wrap!==0&&E.mode!==11?g:E.mode===11&&d(1,Y,oe,0)!==E.check?-3:I(O,Y,oe,oe)?(E.mode=31,-4):(E.havedict=1,j):g},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,o,u){var l=r("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(y,w,j,g,L,N,A,_){var T,D,F,B,ce,U,q,ie,se,I=_.bits,O=0,Y=0,E=0,oe=0,J=0,ae=0,he=0,fe=0,ge=0,P=0,C=null,G=0,$=new l.Buf16(16),ee=new l.Buf16(16),be=null,Se=0;for(O=0;O<=15;O++)$[O]=0;for(Y=0;Y<g;Y++)$[w[j+Y]]++;for(J=I,oe=15;1<=oe&&$[oe]===0;oe--);if(oe<J&&(J=oe),oe===0)return L[N++]=20971520,L[N++]=20971520,_.bits=1,0;for(E=1;E<oe&&$[E]===0;E++);for(J<E&&(J=E),O=fe=1;O<=15;O++)if(fe<<=1,(fe-=$[O])<0)return-1;if(0<fe&&(y===0||oe!==1))return-1;for(ee[1]=0,O=1;O<15;O++)ee[O+1]=ee[O]+$[O];for(Y=0;Y<g;Y++)w[j+Y]!==0&&(A[ee[w[j+Y]]++]=Y);if(U=y===0?(C=be=A,19):y===1?(C=d,G-=257,be=h,Se-=257,256):(C=p,be=m,-1),O=E,ce=N,he=Y=P=0,F=-1,B=(ge=1<<(ae=J))-1,y===1&&852<ge||y===2&&592<ge)return 1;for(;;){for(q=O-he,se=A[Y]<U?(ie=0,A[Y]):A[Y]>U?(ie=be[Se+A[Y]],C[G+A[Y]]):(ie=96,0),T=1<<O-he,E=D=1<<ae;L[ce+(P>>he)+(D-=T)]=q<<24|ie<<16|se|0,D!==0;);for(T=1<<O-1;P&T;)T>>=1;if(T!==0?(P&=T-1,P+=T):P=0,Y++,--$[O]==0){if(O===oe)break;O=w[j+A[Y]]}if(J<O&&(P&B)!==F){for(he===0&&(he=J),ce+=E,fe=1<<(ae=O-he);ae+he<oe&&!((fe-=$[ae+he])<=0);)ae++,fe<<=1;if(ge+=1<<ae,y===1&&852<ge||y===2&&592<ge)return 1;L[F=P&B]=J<<24|ae<<16|ce-N|0}}return P!==0&&(L[ce+P]=O-he<<24|64<<16|0),_.bits=J,0}},{"../utils/common":41}],51:[function(r,o,u){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,o,u){var l=r("../utils/common"),d=0,h=1;function p(te){for(var de=te.length;0<=--de;)te[de]=0}var m=0,y=29,w=256,j=w+1+y,g=30,L=19,N=2*j+1,A=15,_=16,T=7,D=256,F=16,B=17,ce=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(j+2));p(I);var O=new Array(2*g);p(O);var Y=new Array(512);p(Y);var E=new Array(256);p(E);var oe=new Array(y);p(oe);var J,ae,he,fe=new Array(g);function ge(te,de,ke,Le,xe){this.static_tree=te,this.extra_bits=de,this.extra_base=ke,this.elems=Le,this.max_length=xe,this.has_stree=te&&te.length}function P(te,de){this.dyn_tree=te,this.max_code=0,this.stat_desc=de}function C(te){return te<256?Y[te]:Y[256+(te>>>7)]}function G(te,de){te.pending_buf[te.pending++]=255&de,te.pending_buf[te.pending++]=de>>>8&255}function $(te,de,ke){te.bi_valid>_-ke?(te.bi_buf|=de<<te.bi_valid&65535,G(te,te.bi_buf),te.bi_buf=de>>_-te.bi_valid,te.bi_valid+=ke-_):(te.bi_buf|=de<<te.bi_valid&65535,te.bi_valid+=ke)}function ee(te,de,ke){$(te,ke[2*de],ke[2*de+1])}function be(te,de){for(var ke=0;ke|=1&te,te>>>=1,ke<<=1,0<--de;);return ke>>>1}function Se(te,de,ke){var Le,xe,Oe=new Array(A+1),De=0;for(Le=1;Le<=A;Le++)Oe[Le]=De=De+ke[Le-1]<<1;for(xe=0;xe<=de;xe++){var Ge=te[2*xe+1];Ge!==0&&(te[2*xe]=be(Oe[Ge]++,Ge))}}function je(te){var de;for(de=0;de<j;de++)te.dyn_ltree[2*de]=0;for(de=0;de<g;de++)te.dyn_dtree[2*de]=0;for(de=0;de<L;de++)te.bl_tree[2*de]=0;te.dyn_ltree[2*D]=1,te.opt_len=te.static_len=0,te.last_lit=te.matches=0}function Ae(te){8<te.bi_valid?G(te,te.bi_buf):0<te.bi_valid&&(te.pending_buf[te.pending++]=te.bi_buf),te.bi_buf=0,te.bi_valid=0}function Ee(te,de,ke,Le){var xe=2*de,Oe=2*ke;return te[xe]<te[Oe]||te[xe]===te[Oe]&&Le[de]<=Le[ke]}function Re(te,de,ke){for(var Le=te.heap[ke],xe=ke<<1;xe<=te.heap_len&&(xe<te.heap_len&&Ee(de,te.heap[xe+1],te.heap[xe],te.depth)&&xe++,!Ee(de,Le,te.heap[xe],te.depth));)te.heap[ke]=te.heap[xe],ke=xe,xe<<=1;te.heap[ke]=Le}function qe(te,de,ke){var Le,xe,Oe,De,Ge=0;if(te.last_lit!==0)for(;Le=te.pending_buf[te.d_buf+2*Ge]<<8|te.pending_buf[te.d_buf+2*Ge+1],xe=te.pending_buf[te.l_buf+Ge],Ge++,Le===0?ee(te,xe,de):(ee(te,(Oe=E[xe])+w+1,de),(De=U[Oe])!==0&&$(te,xe-=oe[Oe],De),ee(te,Oe=C(--Le),ke),(De=q[Oe])!==0&&$(te,Le-=fe[Oe],De)),Ge<te.last_lit;);ee(te,D,de)}function Xe(te,de){var ke,Le,xe,Oe=de.dyn_tree,De=de.stat_desc.static_tree,Ge=de.stat_desc.has_stree,at=de.stat_desc.elems,ct=-1;for(te.heap_len=0,te.heap_max=N,ke=0;ke<at;ke++)Oe[2*ke]!==0?(te.heap[++te.heap_len]=ct=ke,te.depth[ke]=0):Oe[2*ke+1]=0;for(;te.heap_len<2;)Oe[2*(xe=te.heap[++te.heap_len]=ct<2?++ct:0)]=1,te.depth[xe]=0,te.opt_len--,Ge&&(te.static_len-=De[2*xe+1]);for(de.max_code=ct,ke=te.heap_len>>1;1<=ke;ke--)Re(te,Oe,ke);for(xe=at;ke=te.heap[1],te.heap[1]=te.heap[te.heap_len--],Re(te,Oe,1),Le=te.heap[1],te.heap[--te.heap_max]=ke,te.heap[--te.heap_max]=Le,Oe[2*xe]=Oe[2*ke]+Oe[2*Le],te.depth[xe]=(te.depth[ke]>=te.depth[Le]?te.depth[ke]:te.depth[Le])+1,Oe[2*ke+1]=Oe[2*Le+1]=xe,te.heap[1]=xe++,Re(te,Oe,1),2<=te.heap_len;);te.heap[--te.heap_max]=te.heap[1],(function(dt,ft){var Lt,rt,Cn,ht,an,zt,St=ft.dyn_tree,Ba=ft.max_code,Ht=ft.stat_desc.static_tree,lr=ft.stat_desc.has_stree,Tt=ft.stat_desc.extra_bits,In=ft.stat_desc.extra_base,Zn=ft.stat_desc.max_length,Gt=0;for(ht=0;ht<=A;ht++)dt.bl_count[ht]=0;for(St[2*dt.heap[dt.heap_max]+1]=0,Lt=dt.heap_max+1;Lt<N;Lt++)Zn<(ht=St[2*St[2*(rt=dt.heap[Lt])+1]+1]+1)&&(ht=Zn,Gt++),St[2*rt+1]=ht,Ba<rt||(dt.bl_count[ht]++,an=0,In<=rt&&(an=Tt[rt-In]),zt=St[2*rt],dt.opt_len+=zt*(ht+an),lr&&(dt.static_len+=zt*(Ht[2*rt+1]+an)));if(Gt!==0){do{for(ht=Zn-1;dt.bl_count[ht]===0;)ht--;dt.bl_count[ht]--,dt.bl_count[ht+1]+=2,dt.bl_count[Zn]--,Gt-=2}while(0<Gt);for(ht=Zn;ht!==0;ht--)for(rt=dt.bl_count[ht];rt!==0;)Ba<(Cn=dt.heap[--Lt])||(St[2*Cn+1]!==ht&&(dt.opt_len+=(ht-St[2*Cn+1])*St[2*Cn],St[2*Cn+1]=ht),rt--)}})(te,de),Se(Oe,ct,te.bl_count)}function M(te,de,ke){var Le,xe,Oe=-1,De=de[1],Ge=0,at=7,ct=4;for(De===0&&(at=138,ct=3),de[2*(ke+1)+1]=65535,Le=0;Le<=ke;Le++)xe=De,De=de[2*(Le+1)+1],++Ge<at&&xe===De||(Ge<ct?te.bl_tree[2*xe]+=Ge:xe!==0?(xe!==Oe&&te.bl_tree[2*xe]++,te.bl_tree[2*F]++):Ge<=10?te.bl_tree[2*B]++:te.bl_tree[2*ce]++,Oe=xe,ct=(Ge=0)===De?(at=138,3):xe===De?(at=6,3):(at=7,4))}function me(te,de,ke){var Le,xe,Oe=-1,De=de[1],Ge=0,at=7,ct=4;for(De===0&&(at=138,ct=3),Le=0;Le<=ke;Le++)if(xe=De,De=de[2*(Le+1)+1],!(++Ge<at&&xe===De)){if(Ge<ct)for(;ee(te,xe,te.bl_tree),--Ge!=0;);else xe!==0?(xe!==Oe&&(ee(te,xe,te.bl_tree),Ge--),ee(te,F,te.bl_tree),$(te,Ge-3,2)):Ge<=10?(ee(te,B,te.bl_tree),$(te,Ge-3,3)):(ee(te,ce,te.bl_tree),$(te,Ge-11,7));Oe=xe,ct=(Ge=0)===De?(at=138,3):xe===De?(at=6,3):(at=7,4)}}p(fe);var W=!1;function le(te,de,ke,Le){$(te,(m<<1)+(Le?1:0),3),(function(xe,Oe,De,Ge){Ae(xe),G(xe,De),G(xe,~De),l.arraySet(xe.pending_buf,xe.window,Oe,De,xe.pending),xe.pending+=De})(te,de,ke)}u._tr_init=function(te){W||((function(){var de,ke,Le,xe,Oe,De=new Array(A+1);for(xe=Le=0;xe<y-1;xe++)for(oe[xe]=Le,de=0;de<1<<U[xe];de++)E[Le++]=xe;for(E[Le-1]=xe,xe=Oe=0;xe<16;xe++)for(fe[xe]=Oe,de=0;de<1<<q[xe];de++)Y[Oe++]=xe;for(Oe>>=7;xe<g;xe++)for(fe[xe]=Oe<<7,de=0;de<1<<q[xe]-7;de++)Y[256+Oe++]=xe;for(ke=0;ke<=A;ke++)De[ke]=0;for(de=0;de<=143;)I[2*de+1]=8,de++,De[8]++;for(;de<=255;)I[2*de+1]=9,de++,De[9]++;for(;de<=279;)I[2*de+1]=7,de++,De[7]++;for(;de<=287;)I[2*de+1]=8,de++,De[8]++;for(Se(I,j+1,De),de=0;de<g;de++)O[2*de+1]=5,O[2*de]=be(de,5);J=new ge(I,U,w+1,j,A),ae=new ge(O,q,0,g,A),he=new ge(new Array(0),ie,0,L,T)})(),W=!0),te.l_desc=new P(te.dyn_ltree,J),te.d_desc=new P(te.dyn_dtree,ae),te.bl_desc=new P(te.bl_tree,he),te.bi_buf=0,te.bi_valid=0,je(te)},u._tr_stored_block=le,u._tr_flush_block=function(te,de,ke,Le){var xe,Oe,De=0;0<te.level?(te.strm.data_type===2&&(te.strm.data_type=(function(Ge){var at,ct=4093624447;for(at=0;at<=31;at++,ct>>>=1)if(1&ct&&Ge.dyn_ltree[2*at]!==0)return d;if(Ge.dyn_ltree[18]!==0||Ge.dyn_ltree[20]!==0||Ge.dyn_ltree[26]!==0)return h;for(at=32;at<w;at++)if(Ge.dyn_ltree[2*at]!==0)return h;return d})(te)),Xe(te,te.l_desc),Xe(te,te.d_desc),De=(function(Ge){var at;for(M(Ge,Ge.dyn_ltree,Ge.l_desc.max_code),M(Ge,Ge.dyn_dtree,Ge.d_desc.max_code),Xe(Ge,Ge.bl_desc),at=L-1;3<=at&&Ge.bl_tree[2*se[at]+1]===0;at--);return Ge.opt_len+=3*(at+1)+5+5+4,at})(te),xe=te.opt_len+3+7>>>3,(Oe=te.static_len+3+7>>>3)<=xe&&(xe=Oe)):xe=Oe=ke+5,ke+4<=xe&&de!==-1?le(te,de,ke,Le):te.strategy===4||Oe===xe?($(te,2+(Le?1:0),3),qe(te,I,O)):($(te,4+(Le?1:0),3),(function(Ge,at,ct,dt){var ft;for($(Ge,at-257,5),$(Ge,ct-1,5),$(Ge,dt-4,4),ft=0;ft<dt;ft++)$(Ge,Ge.bl_tree[2*se[ft]+1],3);me(Ge,Ge.dyn_ltree,at-1),me(Ge,Ge.dyn_dtree,ct-1)})(te,te.l_desc.max_code+1,te.d_desc.max_code+1,De+1),qe(te,te.dyn_ltree,te.dyn_dtree)),je(te),Le&&Ae(te)},u._tr_tally=function(te,de,ke){return te.pending_buf[te.d_buf+2*te.last_lit]=de>>>8&255,te.pending_buf[te.d_buf+2*te.last_lit+1]=255&de,te.pending_buf[te.l_buf+te.last_lit]=255&ke,te.last_lit++,de===0?te.dyn_ltree[2*ke]++:(te.matches++,de--,te.dyn_ltree[2*(E[ke]+w+1)]++,te.dyn_dtree[2*C(de)]++),te.last_lit===te.lit_bufsize-1},u._tr_align=function(te){$(te,2,3),ee(te,D,I),(function(de){de.bi_valid===16?(G(de,de.bi_buf),de.bi_buf=0,de.bi_valid=0):8<=de.bi_valid&&(de.pending_buf[de.pending++]=255&de.bi_buf,de.bi_buf>>=8,de.bi_valid-=8)})(te)}},{"../utils/common":41}],53:[function(r,o,u){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,o,u){(function(l){(function(d,h){if(!d.setImmediate){var p,m,y,w,j=1,g={},L=!1,N=d.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(d);A=A&&A.setTimeout?A:d,p={}.toString.call(d.process)==="[object process]"?function(F){process.nextTick(function(){T(F)})}:(function(){if(d.postMessage&&!d.importScripts){var F=!0,B=d.onmessage;return d.onmessage=function(){F=!1},d.postMessage("","*"),d.onmessage=B,F}})()?(w="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",D,!1):d.attachEvent("onmessage",D),function(F){d.postMessage(w+F,"*")}):d.MessageChannel?((y=new MessageChannel).port1.onmessage=function(F){T(F.data)},function(F){y.port2.postMessage(F)}):N&&"onreadystatechange"in N.createElement("script")?(m=N.documentElement,function(F){var B=N.createElement("script");B.onreadystatechange=function(){T(F),B.onreadystatechange=null,m.removeChild(B),B=null},m.appendChild(B)}):function(F){setTimeout(T,0,F)},A.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var B=new Array(arguments.length-1),ce=0;ce<B.length;ce++)B[ce]=arguments[ce+1];var U={callback:F,args:B};return g[j]=U,p(j),j++},A.clearImmediate=_}function _(F){delete g[F]}function T(F){if(L)setTimeout(T,0,F);else{var B=g[F];if(B){L=!0;try{(function(ce){var U=ce.callback,q=ce.args;switch(q.length){case 0:U();break;case 1:U(q[0]);break;case 2:U(q[0],q[1]);break;case 3:U(q[0],q[1],q[2]);break;default:U.apply(h,q)}})(B)}finally{_(F),L=!1}}}}function D(F){F.source===d&&typeof F.data=="string"&&F.data.indexOf(w)===0&&T(+F.data.slice(w.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Mh)),Mh.exports}var Sb=Nb();const d2=cp(Sb),e1=ne.createContext(void 0),ao=()=>{const a=ne.useContext(e1);if(!a)throw new Error("useStory must be used within a StoryProvider");return a},f2=({children:a})=>{const[s,r]=ne.useState(()=>localStorage.getItem("storyPremise")||""),[o,u]=ne.useState(()=>localStorage.getItem("storyTextToAnalyze")||""),[l,d]=ne.useState([]),[h,p]=ne.useState([]),[m,y]=ne.useState(null),[w,j]=ne.useState([]),[g,L]=ne.useState(null),[N,A]=ne.useState([]),[_,T]=ne.useState([]),[D,F]=ne.useState(!1),[B,ce]=ne.useState(""),[U,q]=ne.useState(null),[ie,se]=ne.useState(null),[I,O]=ne.useState("idle");ne.useEffect(()=>{const Ee=localStorage.getItem("storyWeaver_project");if(Ee)try{const Re=JSON.parse(Ee);Re.storyPremise&&r(Re.storyPremise),Re.storyTextToAnalyze&&u(Re.storyTextToAnalyze),Re.characters&&d(Re.characters),Re.scenes&&p(Re.scenes),Re.mapData&&y(Re.mapData),Re.mapData&&y(Re.mapData),Re.savedMaterials&&j(Re.savedMaterials),Re.notes&&A(Re.notes),Re.items&&T(Re.items)}catch(Re){console.error("Failed to load saved project data from local storage",Re)}},[]),ne.useEffect(()=>{localStorage.setItem("storyPremise",s)},[s]),ne.useEffect(()=>{localStorage.setItem("storyTextToAnalyze",o)},[o]);const Y=async()=>{O("saving");try{const Ee=new d2,Re={storyPremise:s,storyTextToAnalyze:o,timestamp:Date.now(),version:"1.0"};Ee.file("project.json",JSON.stringify(Re,null,2));const qe=Ee.folder("characters");l.forEach(Oe=>{const De=Oe.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();qe==null||qe.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2))});const Xe=Ee.folder("scenes");h.forEach(Oe=>{const De=Oe.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();Xe==null||Xe.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2))});const M=Ee.folder("materials");w.forEach(Oe=>{const De=Oe.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();M==null||M.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2))});const me=Ee.folder("notes");N.forEach(Oe=>{const De=Oe.title.replace(/[^a-z0-9]/gi,"_").toLowerCase();me==null||me.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2)),me==null||me.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2))});const W=Ee.folder("items");_.forEach(Oe=>{const De=Oe.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();W==null||W.file(`${De}_${Oe.id}.json`,JSON.stringify(Oe,null,2))}),m&&Ee.file("world_map.json",JSON.stringify(m,null,2)),g&&Ee.file("compiled_book.json",JSON.stringify(g,null,2));const le=await Ee.generateAsync({type:"blob"}),te={storyPremise:s,storyTextToAnalyze:o,characters:l,scenes:h,mapData:m,savedMaterials:w,notes:N,items:_};localStorage.setItem("storyWeaver_project",JSON.stringify(te));const de=URL.createObjectURL(le),ke=document.createElement("a");ke.href=de;const Le=new Date().toISOString().slice(0,10),xe=s.split(" ")[0]||"Story";ke.download=`${xe}_Project_${Le}.zip`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(de),O("saved")}catch(Ee){console.error("Error saving zip:",Ee),q("Failed to create save file."),O("idle")}setTimeout(()=>O("idle"),3e3)},E=async Ee=>{F(!0),ce("Loading project...");try{if(Ee.name.endsWith(".json")){const Re=await Ee.text(),qe=JSON.parse(Re);qe.storyPremise&&r(qe.storyPremise),qe.storyTextToAnalyze&&u(qe.storyTextToAnalyze),qe.characters&&d(qe.characters),qe.scenes&&p(qe.scenes),qe.mapData&&y(qe.mapData),qe.savedMaterials&&j(qe.savedMaterials)}else if(Ee.name.endsWith(".zip")){const qe=await new d2().loadAsync(Ee);if(qe.file("project.json")){const Oe=await qe.file("project.json").async("string"),De=JSON.parse(Oe);De.storyPremise&&r(De.storyPremise),De.storyTextToAnalyze&&u(De.storyTextToAnalyze)}const Xe=qe.folder("characters"),M=[];if(Xe){const Oe=Object.keys(Xe.files).filter(De=>!Xe.files[De].dir);for(const De of Oe){const Ge=await Xe.file(De).async("string");M.push(JSON.parse(Ge))}}d(M);const me=qe.folder("scenes"),W=[];if(me){const Oe=Object.keys(me.files).filter(De=>!me.files[De].dir);for(const De of Oe){const Ge=await me.file(De).async("string");W.push(JSON.parse(Ge))}}W.sort((Oe,De)=>Oe.id>De.id?1:-1),p(W);const le=qe.folder("materials"),te=[];if(le){const Oe=Object.keys(le.files).filter(De=>!le.files[De].dir);for(const De of Oe){const Ge=await le.file(De).async("string");te.push(JSON.parse(Ge))}}j(te);const de=qe.folder("notes"),ke=[];if(de){const Oe=Object.keys(de.files).filter(De=>!de.files[De].dir);for(const De of Oe){const Ge=await de.file(De).async("string");ke.push(JSON.parse(Ge))}}A(ke);const Le=qe.folder("items"),xe=[];if(Le){const Oe=Object.keys(Le.files).filter(De=>!Le.files[De].dir);for(const De of Oe){const Ge=await Le.file(De).async("string");xe.push(JSON.parse(Ge))}}if(T(xe),qe.file("world_map.json")){const Oe=await qe.file("world_map.json").async("string");y(JSON.parse(Oe))}if(qe.file("compiled_book.json")){const Oe=await qe.file("compiled_book.json").async("string");L(JSON.parse(Oe))}}else throw new Error("Unsupported file type");O("saved"),setTimeout(()=>O("idle"),2e3)}catch(Re){console.error("Failed to load project file",Re),q("Failed to load project file. Invalid format.")}finally{F(!1),ce("")}},oe=ne.useCallback((Ee,Re)=>{d(qe=>qe.map(Xe=>Xe.id===Ee?{...Xe,...Re}:Xe))},[]),J=ne.useCallback(Ee=>{d(Re=>[...Re,Ee])},[]),ae=ne.useCallback(Ee=>{d(Re=>Re.filter(qe=>qe.id!==Ee))},[]),he=ne.useCallback(()=>{p(Ee=>[...Ee,{id:`scene_manual_${Date.now()}`,title:"New Scene",summary:"A brief summary...",fullText:"The full text...",characterIds:[]}])},[]),fe=ne.useCallback((Ee,Re)=>{p(qe=>qe.map(Xe=>Xe.id===Ee?{...Xe,...Re}:Xe))},[]),ge=ne.useCallback(Ee=>{p(Re=>Re.filter(qe=>qe.id!==Ee))},[]),P=ne.useCallback(Ee=>{p(Ee)},[]),C=ne.useCallback((Ee,Re)=>{y(qe=>qe?{...qe,locations:qe.locations.map(Xe=>Xe.id===Ee?{...Xe,...Re}:Xe)}:null)},[]),G=ne.useCallback(Ee=>{j(Re=>Re.filter(qe=>qe.id!==Ee))},[]),$=ne.useCallback(Ee=>{A(Re=>[Ee,...Re])},[]),ee=ne.useCallback((Ee,Re)=>{A(qe=>qe.map(Xe=>Xe.id===Ee?{...Xe,...Re,updatedAt:new Date().toISOString()}:Xe))},[]),be=ne.useCallback(Ee=>{A(Re=>Re.filter(qe=>qe.id!==Ee))},[]),Se=ne.useCallback(Ee=>{T(Re=>[Ee,...Re])},[]),je=ne.useCallback((Ee,Re)=>{T(qe=>qe.map(Xe=>Xe.id===Ee?{...Xe,...Re}:Xe))},[]),Ae=ne.useCallback(Ee=>{T(Re=>Re.filter(qe=>qe.id!==Ee))},[]);return i.jsx(e1.Provider,{value:{storyPremise:s,setStoryPremise:r,storyTextToAnalyze:o,setStoryTextToAnalyze:u,characters:l,setCharacters:d,scenes:h,setScenes:p,mapData:m,setMapData:y,savedMaterials:w,setSavedMaterials:j,compiledBook:g,setCompiledBook:L,notes:N,setNotes:A,items:_,setItems:T,isLoading:D,setIsLoading:F,loadingMessage:B,setLoadingMessage:ce,error:U,setError:q,generatedContent:ie,setGeneratedContent:se,saveProject:Y,loadProject:E,saveStatus:I,updateCharacter:oe,createCharacter:J,deleteCharacter:ae,addScene:he,updateScene:fe,deleteScene:ge,reorderScenes:P,updateLocation:C,deleteSavedMaterial:G,addNote:$,updateNote:ee,deleteNote:be,addItem:Se,updateItem:je,deleteItem:Ae,resetStory:()=>{r(""),u(""),d([]),p([]),y(null),j([]),A([]),T([]),L(null),se(null),q(null)}},children:a})},jb="https://storyweaver-api.onrender.com/api",Ui={getUsers(){return JSON.parse(localStorage.getItem("sw_users")||"[]")},saveUsers(a){localStorage.setItem("sw_users",JSON.stringify(a))},getStories(){return JSON.parse(localStorage.getItem("sw_stories")||"[]")},saveStories(a){localStorage.setItem("sw_stories",JSON.stringify(a))}};window.location.hostname.includes("github.io")||window.location.hostname.includes("vercel.app");const to={async request(a,s={}){const r=localStorage.getItem("token"),o={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...s.headers},u=await fetch(`${jb}${a}`,{...s,headers:o});if(!u.ok){const l=await u.json().catch(()=>({error:"An error occurred"}));throw new Error(l.error||`Request failed with status ${u.status}`)}return u.json()},async handleMockRequest(a,s){const r=s.method||"GET";if(console.log(`[Mock API] ${r} ${a}`),await new Promise(o=>setTimeout(o,500)),a==="/auth/login"&&r==="POST"){const{username:o,password:u}=JSON.parse(s.body),d=Ui.getUsers().find(h=>h.username===o);if(d&&d.password===u)return{token:"mock-jwt-token-"+Math.random(),user:{id:d.id,username:d.username}};throw new Error("Invalid credentials")}if(a==="/auth/register"&&r==="POST"){const{username:o,password:u}=JSON.parse(s.body),l=Ui.getUsers();if(l.find(p=>p.username===o))throw new Error("Username already taken");const d={id:Math.random().toString(36).substr(2,9),username:o,password:u};return l.push(d),Ui.saveUsers(l),{token:"mock-jwt-token-"+Math.random(),user:{id:d.id,username:d.username}}}if(a==="/stories"&&r==="GET")return Ui.getStories();if(a==="/stories"&&r==="POST"){const o=JSON.parse(s.body),u=Ui.getStories(),l={...o,id:Math.random().toString(36).substr(2,9),lastUpdated:new Date().toISOString()};return u.push(l),Ui.saveStories(u),l}if(a.startsWith("/stories/")&&r==="GET"){const o=a.split("/").pop(),l=Ui.getStories().find(d=>d.id===o);if(l)return l;throw new Error("Story not found")}if(a.startsWith("/stories/")&&r==="PUT"){const o=a.split("/").pop(),u=JSON.parse(s.body);let l=Ui.getStories(),d=l.findIndex(h=>h.id===o);if(d!==-1)return l[d]={...l[d],...u,lastUpdated:new Date().toISOString()},Ui.saveStories(l),l[d];throw new Error("Story not found")}if(a.startsWith("/stories/")&&r==="DELETE"){const o=a.split("/").pop();let u=Ui.getStories();return u=u.filter(l=>l.id!==o),Ui.saveStories(u),{success:!0}}return[]},get(a){return this.request(a)},post(a,s){return this.request(a,{method:"POST",body:JSON.stringify(s)})},put(a,s){return this.request(a,{method:"PUT",body:JSON.stringify(s)})},delete(a){return this.request(a,{method:"DELETE"})}},_b="1.1.1",t1={version:_b},Ab=()=>{const[a,s]=ne.useState(""),[r,o]=ne.useState(""),[u,l]=ne.useState(""),{login:d}=lf(),h=Yu(),[p,m]=ne.useState(!1),[y,w]=ne.useState(!1),j=async g=>{if(g.preventDefault(),!p){m(!0);try{const{token:L,user:N}=await to.post("/auth/login",{username:a,password:r});d(L,N),h("/")}catch(L){l(L.message),m(!1)}}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-bg text-brand-text",children:i.jsxs("div",{className:"glass-panel p-8 rounded-2xl w-full max-w-md border border-white/10",children:[i.jsx("h2",{className:"text-3xl font-serif font-bold mb-6 text-center",children:"Story Weaver"}),i.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-brand-secondary",children:"Login"}),u&&i.jsx("div",{className:"bg-red-500/20 text-red-200 p-3 rounded mb-4 text-sm",children:u}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),i.jsx("input",{type:"text",value:a,onChange:g=>s(g.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none",required:!0,placeholder:"Enter your username",title:"Username"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:y?"text":"password",value:r,onChange:g=>o(g.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none pr-10",required:!0,placeholder:"Enter your password",title:"Password"}),i.jsx("button",{type:"button",onClick:()=>w(!y),className:"absolute right-2 top-1/2 -translate-y-1/2 text-brand-text-muted hover:text-white transition-colors",title:y?"Hide Password":"Show Password",children:y?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L5.136 5.136m13.727 13.727L13.875 13.875M21 12a9.982 9.982 0 01-1.563 3.029m-5.858-10.364A10.05 10.05 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m-5.858-10.364L18.864 18.864"})}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full bg-brand-primary hover:bg-brand-primary/80 text-white font-bold py-2 px-4 rounded transition disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Logging in...":"Login"})]}),i.jsxs("p",{className:"mt-4 text-center text-sm text-brand-text-muted",children:["Don't have an account? ",i.jsx(of,{to:"/register",className:"text-brand-secondary hover:underline",children:"Register"})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:i.jsxs("span",{className:"text-xs font-bold text-amber-500/80 uppercase tracking-widest bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:["Version ",t1.version]})})]})})},kb=()=>{const[a,s]=ne.useState(""),[r,o]=ne.useState(""),[u,l]=ne.useState(""),{login:d}=lf(),h=Yu(),[p,m]=ne.useState(!1),[y,w]=ne.useState(!1),j=async g=>{if(g.preventDefault(),!p){m(!0);try{const{token:L,user:N}=await to.post("/auth/register",{username:a,password:r});d(L,N),h("/")}catch(L){l(L.message),m(!1)}}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-bg text-brand-text",children:i.jsxs("div",{className:"glass-panel p-8 rounded-2xl w-full max-w-md border border-white/10",children:[i.jsx("h2",{className:"text-3xl font-serif font-bold mb-6 text-center",children:"Story Weaver"}),i.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-brand-secondary",children:"Register"}),u&&i.jsx("div",{className:"bg-red-500/20 text-red-200 p-3 rounded mb-4 text-sm",children:u}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),i.jsx("input",{type:"text",value:a,onChange:g=>s(g.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none",required:!0,placeholder:"Choose a username",title:"Username"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:y?"text":"password",value:r,onChange:g=>o(g.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-2 text-white focus:border-brand-primary outline-none pr-10",required:!0,placeholder:"Create a password",title:"Password"}),i.jsx("button",{type:"button",onClick:()=>w(!y),className:"absolute right-2 top-1/2 -translate-y-1/2 text-brand-text-muted hover:text-white transition-colors",title:y?"Hide Password":"Show Password",children:y?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L5.136 5.136m13.727 13.727L13.875 13.875M21 12a9.982 9.982 0 01-1.563 3.029m-5.858-10.364A10.05 10.05 0 0112 5c4.478 0 8.268 2.943 9.543 7a9.97 9.97 0 01-1.563 3.029m-5.858-10.364L18.864 18.864"})}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full bg-brand-secondary hover:bg-brand-secondary/80 text-white font-bold py-2 px-4 rounded transition disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Registering...":"Register"})]}),i.jsxs("p",{className:"mt-4 text-center text-sm text-brand-text-muted",children:["Already have an account? ",i.jsx(of,{to:"/login",className:"text-brand-primary hover:underline",children:"Login"})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:i.jsxs("span",{className:"text-xs font-bold text-amber-500/80 uppercase tracking-widest bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:["Version ",t1.version]})})]})})},Gr=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m5 3 2.5 5L12 3l2.5 5L19 3l-2.5 5L21 12l-5 2.5L19 19l-5-2.5L12 21l-2.5-5L5 19l2.5-5L3 12l5-2.5Z"})}),xp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("line",{x1:"19",x2:"19",y1:"8",y2:"14"}),i.jsx("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}),cf=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m6 9 6 6 6-6"})}),vp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m18 15-6-6-6 6"})}),Bl=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m9 18 6-6-6-6"})}),Vc=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m15 18-6-6 6-6"})}),Fl=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M3 6h18"}),i.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),i.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),i.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),Ss=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),i.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Cb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),i.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),i.jsx("path",{d:"M12 12V8"})]}),yp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7.5a6 6 0 0 0-12 0c0 1.5.3 2.7 1.5 3.9.8.8 1.3 1.5 1.5 2.5"}),i.jsx("path",{d:"M9 18h6"}),i.jsx("path",{d:"M10 22h4"})]}),wp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7z"})}),Np=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"9",cy:"12",r:"1"}),i.jsx("circle",{cx:"15",cy:"12",r:"1"}),i.jsx("path",{d:"M8 20v2h8v-2"}),i.jsx("path",{d:"M12.5 16.5A2.5 2.5 0 0 0 10 14h-1a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h5.5a2.5 2.5 0 0 0 2.5-2.5V18a2 2 0 0 0-2-2h-1.5"}),i.jsx("path",{d:"M20 12c0-4.42-3.58-8-8-8S4 7.58 4 12c0 4.42 3.58 8 8 8s8-3.58 8-8z"})]}),Yc=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),n1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 22a10 10 0 0 0 10-10H2a10 10 0 0 0 10 10z"}),i.jsx("path",{d:"M8 14h0"}),i.jsx("path",{d:"M16 14h0"}),i.jsx("path",{d:"M15.5 8C14.1 10 12.5 11 12 11s-2.1-1-3.5-3"})]}),$u=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),i.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M12 11h4"}),i.jsx("path",{d:"M12 16h4"}),i.jsx("path",{d:"M8 11h.01"}),i.jsx("path",{d:"M8 16h.01"})]}),Lb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.934a.5.5 0 0 0-.777-.416L16 11"}),i.jsx("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"})]}),uf=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M4 6h16"}),i.jsx("path",{d:"M4 12h16"}),i.jsx("path",{d:"M4 18h16"})]}),ro=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),i.jsx("polyline",{points:"7 10 12 15 17 10"}),i.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Xc=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),i.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),i.jsx("polyline",{points:"7 3 7 8 15 8"})]}),r1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),i.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),Sp=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),jp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),i.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Zc=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Zo=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M5 12h14"}),i.jsx("path",{d:"M12 5v14"})]}),_p=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M12 3v12"}),i.jsx("path",{d:"m19 12-7 7-7-7"}),i.jsx("path",{d:"M20 21H4"})]}),qu=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Jo=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),si=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),i.jsx("circle",{cx:"9",cy:"9",r:"2"}),i.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Xo=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"}),i.jsx("line",{x1:"9",x2:"9",y1:"3",y2:"18"}),i.jsx("line",{x1:"15",x2:"15",y1:"6",y2:"21"})]}),h2=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),i.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),i1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),i.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})]}),Eb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),i.jsx("path",{d:"M21 3v5h-5"}),i.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),i.jsx("path",{d:"M3 21v-5h5"})]}),Pl=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),i.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),i.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),i.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),Tb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"9",cy:"12",r:"1"}),i.jsx("circle",{cx:"9",cy:"5",r:"1"}),i.jsx("circle",{cx:"9",cy:"19",r:"1"}),i.jsx("circle",{cx:"15",cy:"12",r:"1"}),i.jsx("circle",{cx:"15",cy:"5",r:"1"}),i.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),Ap=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("path",{d:"m21 21-4.3-4.3"})]}),Ob=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M12 19V5"}),i.jsx("path",{d:"m5 12 7-7 7 7"})]}),Rb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M12 5v14"}),i.jsx("path",{d:"m19 12-7 7-7 7"})]}),s1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"m12 19-7-7 7-7"}),i.jsx("path",{d:"M19 12H5"})]}),kp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M5 12h14"}),i.jsx("path",{d:"m12 5 7 7-7 7"})]}),Mb=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),o1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M6 3h12l4 6-10 13L2 9z"}),i.jsx("path",{d:"m12 22 4-13-3-6-1 6-4-6-3 6 4 13z"}),i.jsx("path",{d:"M2 9h20"})]}),l1=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"m8 3 4 8 5-5 5 15H2L8 3z"})}),zb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("line",{x1:"10",x2:"21",y1:"6",y2:"6"}),i.jsx("line",{x1:"10",x2:"21",y1:"12",y2:"12"}),i.jsx("line",{x1:"10",x2:"21",y1:"18",y2:"18"}),i.jsx("path",{d:"M4 6h1v4"}),i.jsx("path",{d:"M4 10h2"}),i.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]}),tl=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Cp=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"12",cy:"12",r:"4"}),i.jsx("path",{d:"M12 2v2"}),i.jsx("path",{d:"M12 20v2"}),i.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),i.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),i.jsx("path",{d:"M2 12h2"}),i.jsx("path",{d:"M20 12h2"}),i.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),i.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),c1=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),Db=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),i.jsx("path",{d:"M12 17h.01"})]}),df=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),i.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),Uc=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),i.jsx("path",{d:"M7 3v18"}),i.jsx("path",{d:"M3 7.5h4"}),i.jsx("path",{d:"M3 12h18"}),i.jsx("path",{d:"M3 16.5h4"}),i.jsx("path",{d:"M17 3v18"}),i.jsx("path",{d:"M17 7.5h4"}),i.jsx("path",{d:"M17 16.5h4"})]}),Ib=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),p2=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("path",{d:"M20.38 3.4a2 2 0 0 0-1.2-1.2a19.96 19.96 0 0 0-14.36 0a2 2 0 0 0-1.2 1.2l-.75 4.5a2 2 0 0 0 1.23 2.24l.54.18v8.08a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V10.32l.54-.18a2 2 0 0 0 1.23-2.24Z"})}),u1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),i.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),i.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),i.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),i.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),Bb=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),d1=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),i.jsx("path",{d:"M3 3v5h5"}),i.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),i.jsx("path",{d:"M16 16h5v5"})]}),Pb=a=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:i.jsx("polyline",{points:"20 6 9 17 4 12"})}),Ub=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),Fb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),qb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),$d=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),i.jsx("path",{d:"M3 3v5h5"})]}),Hb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("line",{x1:"10",y1:"2",x2:"14",y2:"2"}),i.jsx("line",{x1:"12",y1:"14",x2:"15",y2:"11"}),i.jsx("circle",{cx:"12",cy:"14",r:"8"})]}),Gb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),i.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),i.jsx("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),i.jsx("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]}),Vb=a=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[i.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}),i.jsx("path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}),i.jsx("path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}),i.jsx("path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"})]}),Yb=()=>{const{user:a,logout:s}=lf(),{loadProject:r}=ao(),o=Yu(),[u,l]=ne.useState([]),[d,h]=ne.useState(!0);ne.useEffect(()=>{p()},[]);const p=async()=>{try{const N=await to.get("/stories");l(N)}catch(N){console.error("Failed to fetch stories",N)}finally{h(!1)}},[m,y]=ne.useState(!1),w=async()=>{if(!m){y(!0);try{const N=await to.post("/stories",{title:"New Story",premise:"",data:{characters:[],scenes:[],savedMaterials:[],storyPremise:"",storyTextToAnalyze:""}});o(`/editor/${N.id}`)}catch(N){console.error("Failed to create story",N),y(!1)}}},j=async N=>{o(`/editor/${N}`)},g=async(N,A)=>{if(N.stopPropagation(),!!window.confirm("Are you sure you want to delete this story?"))try{await to.delete(`/stories/${A}`),l(u.filter(_=>_.id!==A))}catch(_){console.error("Failed to delete story",_)}},L=()=>{s(),o("/login")};return i.jsx("div",{className:"min-h-screen bg-brand-bg text-brand-text p-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("h1",{className:"text-3xl font-serif font-bold",children:["Welcome, ",i.jsx("span",{className:"text-brand-secondary",children:a==null?void 0:a.username})]}),i.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-brand-text-muted hover:text-white transition",children:[i.jsx(Ub,{className:"w-5 h-5"})," Logout"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[i.jsxs("button",{onClick:w,className:"glass-card p-6 rounded-2xl border border-white/5 border-dashed hover:border-brand-secondary/50 hover:bg-brand-secondary/5 transition flex flex-col items-center justify-center gap-4 group min-h-[200px]",children:[i.jsx("div",{className:"p-4 bg-white/5 rounded-full group-hover:bg-white/10 transition",children:i.jsx(Zo,{className:"w-8 h-8 text-brand-secondary"})}),i.jsx("span",{className:"font-bold text-lg",children:"Create New Story"})]}),d?i.jsx("div",{className:"col-span-full text-center py-10 text-brand-text-muted",children:"Loading stories..."}):u.map(N=>i.jsxs("div",{onClick:()=>j(N.id),className:"glass-card p-6 rounded-2xl border border-white/5 hover:border-brand-primary/50 cursor-pointer transition group relative flex flex-col min-h-[200px]",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:N.title}),i.jsx("p",{className:"text-sm text-brand-text-muted line-clamp-3",children:N.premise||"No premise yet..."})]}),i.jsxs("div",{className:"mt-4 flex justify-between items-end",children:[i.jsxs("span",{className:"text-xs text-brand-text-muted",children:["Updated: ",new Date(N.lastUpdated).toLocaleDateString()]}),i.jsx("button",{onClick:A=>g(A,N.id),className:"p-2 hover:bg-red-500/20 rounded-full text-brand-text-muted hover:text-red-400 transition opacity-0 group-hover:opacity-100",children:i.jsx(Fl,{className:"w-4 h-4"})})]})]},N.id))]})]})})};var wt=(a=>(a.PROTAGONIST="Protagonist",a.ANTAGONIST="Antagonist",a.DEUTERAGONIST="Deuteragonist",a.MENTOR="Mentor",a.LOVE_INTEREST="Love Interest",a.FOIL="Foil",a.SUPPORTING_CHARACTER="Supporting Character",a.MINOR_CHARACTER="Minor Character",a))(wt||{}),Da=(a=>(a.CINEMATIC="Cinematic",a.ANIME="Anime",a.WATERCOLOR="Watercolor",a.OIL_PAINTING="Oil Painting",a.CYBERPUNK="Cyberpunk",a.NOIR="Noir",a.PIXEL_ART="Pixel Art",a.CONCEPT_ART="Concept Art",a))(Da||{}),gt=(a=>(a.CHAPTER="CHAPTER",a.RELATIONSHIP_WEB="RELATIONSHIP_WEB",a.PLOT_IDEAS="PLOT_IDEAS",a.TRANSITION="TRANSITION",a.SCENE_WRITER="SCENE_WRITER",a.MAP_GENERATOR="MAP_GENERATOR",a.REASSESS_FLOW="REASSESS_FLOW",a.DIALOGUE_GENERATOR="DIALOGUE_GENERATOR",a.OBJECT_GENERATOR="OBJECT_GENERATOR",a.SETTING_GENERATOR="SETTING_GENERATOR",a.OUTLINE_GENERATOR="OUTLINE_GENERATOR",a.MIDJOURNEY_PROMPTS="MIDJOURNEY_PROMPTS",a))(gt||{});const oi="gemini-3.0-pro",nl="gemini-3.0-flash";async function Xn(a,s,r){return(await to.post("/ai/generate",{prompt:a,config:s,model:r})).text}const ef={[Da.CINEMATIC]:"Cinematic, photorealistic, 8k resolution, detailed texture, dramatic lighting, depth of field, movie still, wide dynamic range.",[Da.ANIME]:"Anime style, vibrant colors, clean lines, cel shaded, highly detailed, Studio Ghibli or Makoto Shinkai aesthetics.",[Da.WATERCOLOR]:"Watercolor painting, soft edges, artistic, painting on canvas, gentle brushstrokes, traditional media style.",[Da.OIL_PAINTING]:"Oil painting, textured brushwork, rich colors, classical art style, masterpiece, impasto details.",[Da.CYBERPUNK]:"Cyberpunk, neon lights, high tech low life, futuristic, distinct blue and pink lighting, gritty, detailed cityscape.",[Da.NOIR]:"Film noir, black and white, high contrast, dramatic shadows, moody, mystery, 1940s detective movie aesthetic.",[Da.PIXEL_ART]:"Pixel art, 16-bit or 32-bit style, retro game aesthetic, clean pixel lines.",[Da.CONCEPT_ART]:"Concept art, digital painting, highly detailed, polished, artstation trending, illustration."};async function Xu(a,s="16:9"){return(await to.post("/ai/generate-image",{prompt:a,aspectRatio:s})).url}const js=a=>{if(!a)return"{}";let s=a.trim();return s.startsWith("```json")?s=s.replace(/^```json\s*/,"").replace(/\s*```$/,""):s.startsWith("```")&&(s=s.replace(/^```\s*/,"").replace(/\s*```$/,"")),s};async function Wb(a,s,r,o,u){const l=`Create a detailed character profile.
    Name: ${a}
    Type: ${s}
    Initial Info: ${r}
    Traits: ${o}
    Backstory: ${u}

    Return JSON with "history" (detailed backstory, 2 paragraphs) and "arc" (character growth/journey).`,d=await Xn(l,{responseMimeType:"application/json"});return JSON.parse(js(d||'{"history": "", "arc": ""}'))}async function $b(a,s){const r=`Analyze the provided story text.
    Premise: ${a}
    Text: ${s}

    Identify all characters and scenes.
    
    Return a JSON object with the following structure:
    {
      "characters": [
        {
          "name": "string",
          "type": "Protagonist" | "Antagonist" | "Deuteragonist" | "Mentor" | "Love Interest" | "Foil" | "Supporting Character" | "Minor Character",
          "description": "string (visuals and role)",
          "traits": "string (comma separated)",
          "history": "string (detailed backstory inferred from text)",
          "arc": "string (character journey/development inferred from text)"
        }
      ],
      "scenes": [
        {
          "title": "string",
          "summary": "string",
          "fullText": "string (the actual text of the scene if explicitly present, otherwise empty)",
          "characters_present": ["string (names)"]
        }
      ]
    }`,o=await Xn(r,{responseMimeType:"application/json"});return JSON.parse(js(o||'{"characters": [], "scenes": []}'))}async function Xb(a,s,r,o){const u=`Write the next chapter.
    Premise: ${a}
    Context (Last 2000 chars): ${s.slice(-2e3)}
    Characters: ${r.map(l=>l.name).join(", ")}
    Recent Scenes: ${o.slice(-3).map(l=>l.title).join(", ")}
    
    Write a compelling chapter.`;return await Xn(u,{},oi)}async function Zb(a){const s=`Analyze relationships between these characters: ${a.map(o=>o.name).join(", ")}.
    Return JSON:
    {
        "nodes": [{"id": "...", "name": "...", "type": "..."}],
        "links": [{"source": "id", "target": "id", "dynamic": "short description", "strength": "Strong" | "Developing" | "Weak"}]
    }
    Use the character names to map to provided IDs if possible, otherwise use names as IDs.`,r=await Xn(s,{responseMimeType:"application/json"},nl);return JSON.parse(js(r||'{"nodes": [], "links": []}'))}async function Jb(a,s,r){const o=`Brainstorm plot ideas/twists.
    Premise: ${a}
    Characters: ${r.map(u=>u.name).join(", ")}
    
    List 5 creative plot ideas.`;try{return await Xn(o,{},oi)}catch(u){return console.error("generatePlotIdeas FAILED, retrying with Flash...",u),await Xn(o,{},nl)}}async function Qb(a){const s=`Write a smooth narrative transition between scene "${a[0].title}" and "${a[1].title}".`;return await Xn(s,{},nl)}async function Kb(a){const s=`Generate a world map structure based on this content: ${a}.
    Return JSON:
    {
        "worldDescription": "string",
        "locations": [{"id": "loc_1", "name": "...", "description": "...", "x": 20, "y": 50}] 
    }
    x and y should be between 0 and 100.`,r=await Xn(s,{responseMimeType:"application/json"},nl);return JSON.parse(js(r||"{}"))}async function ex(a,s){const r=`Analyze the narrative flow.
    Premise: ${a}
    Scene Sequence: ${s.map(o=>o.title).join(" -> ")}
    
    Identify pacing issues, plot holes, or structural improvements.`;return await Xn(r,{},oi)}async function tx(a,s){const r=`Write a dialogue scene between ${a.name} (${a.traits}) and ${s.name} (${s.traits}).`;return await Xn(r,{},oi)}async function nx(a){const s=`Invent a key object/artifact for the story: ${a}.
    Return JSON: { "name": "...", "appearance": "...", "history": "...", "significance": "..." }`,r=await Xn(s,{responseMimeType:"application/json"},nl);return JSON.parse(js(r||"{}"))}async function ax(a,s){const r=`Describe the setting.
    Premise: ${a}
    ${s?`Scene: ${s.title}
Summary: ${s.summary}`:""}
    
    Provide a rich, sensory description (sight, sound, smell).`;return await Xn(r,{},oi)}async function rx(a,s,r){const o=`Create a detailed story outline.
    Premise: ${a}
    Characters: ${s.map(l=>l.name).join(", ")}
    Ideas: ${r||"None"}
    
    Return JSON array of objects: { "act": "Act I", "title": "...", "summary": "..." }`,u=await Xn(o,{responseMimeType:"application/json"},oi);return JSON.parse(js(u||"[]"))}async function ix(a,s){let r=`SCENE SETTING:
${a.settingDescription||a.summary}

CHARACTERS PRESENT:
`;s.forEach(u=>{let l=`Name: ${u.name}
`;if(u.visualStats?(l+=`Body: ${u.visualStats.height}, ${u.visualStats.build}, ${u.visualStats.distinguishingFeatures}.
`,l+=`Face: ${u.visualStats.hairColor} hair, ${u.visualStats.eyeColor} eyes.
`):l+=`Appearance: ${u.initialInfo}
`,u.outfits&&u.outfits.length>0){const d=u.outfits.find(h=>h.id===u.activeOutfitId)||u.outfits[0];l+=`Wearing: ${d.description}
`}else l+=`Wearing: Appropriate attire for role (${u.type}).
`;r+=`${l}--
`});const o=`Create 4 detailed Midjourney image generation prompts for the following scene.

    CONTEXT:
    Scene Title: "${a.title}"
    Action Summary: ${a.summary}
    
    VISUAL DETAILS:
    ${r}
    
    IMPORTANT INSTRUCTIONS:
    1. Do NOT use character names in the prompts. Replace names with their physical descriptions (e.g., instead of "John", say "a tall muscular man with a scar wearing battle armor").
    2. Include details about the background, lighting, and camera angle.
    3. Ensure the characters described match the provided visual stats and outfits.
    4. Provide a list of prompts: Wide Shot, Medium Shot, Close Up, and Action Shot.`;return await Xn(o,{},oi)}async function sx(a,s){return await Xn(`Context:
${s}

Instruction:
${a}`,{},oi)}async function ox(a,s,r=Da.CINEMATIC){const o=ef[r]||ef[Da.CINEMATIC],u=`Generate a cinematic image for the scene: "${a.title}".
    Summary: ${a.summary}
    Setting: ${a.settingDescription||"Appropriate to the story"}
    
    Characters present:
    ${s.map(l=>`${l.name}: ${l.visualStats?`${l.visualStats.build}, ${l.visualStats.hairColor} hair`:l.initialInfo}`).join(`
`)}
    
    Style: ${o}`;return await Xu(u,"16:9")}async function lx(a,s=Da.CONCEPT_ART){const r=ef[s]||ef[Da.CONCEPT_ART],o=`Generate a full body character portrait.
    Name: ${a.name}
    Type: ${a.type}
    Appearance: ${a.visualStats?`Height: ${a.visualStats.height}, Build: ${a.visualStats.build}, Hair: ${a.visualStats.hairColor}, Eyes: ${a.visualStats.eyeColor}, Features: ${a.visualStats.distinguishingFeatures}`:a.initialInfo}
    Outfit: ${a.outfits&&a.outfits.length>0?a.outfits[0].description:"Standard attire"}
    
    Style: ${r}, neutral background.`,u=s===Da.PIXEL_ART?"1:1":"3:4";return await Xu(o,u)}async function cx(a,s,r){let o=r;return s&&(o+=`

Context Video URL: ${s}`),await Xn(o,{},oi)}async function ux(a){const s=`Convert these plot ideas into a chronological timeline.
    Ideas: ${a}
    Return JSON array: [{ "title": "...", "summary": "..." }]`,r=await Xn(s,{responseMimeType:"application/json"},nl);return JSON.parse(js(r||"[]"))}async function dx(a,s,r,o){const u=`Write the full prose for scene "${r.title}".
    Premise: ${a}
    Previous Context: ${s}
    Scene Summary: ${r.summary}
    Characters: ${o.map(l=>l.name).join(", ")}
    
    Write engaging, formatted story text.`;return await Xn(u,{},oi)}async function fx(a){const s=`Describe the setting for scene "${a.title}".
    Summary: ${a.summary}
    
    Focus on atmosphere, lighting, and sensory details.`;return await Xn(s,{},oi)}async function hx(a,s){const r=`Write a screenplay script for scene "${a.title}".
    Summary: ${a.summary}
    Characters: ${s.map(o=>o.name).join(", ")}
    
    Use standard screenplay format (Scene Heading, Action, Character, Dialogue).`;return await Xn(r,{},oi)}async function px(a,s,r){const{stylize:o=100,aspectRatio:u="16:9",version:l="6"}={},d=`Create a storyboard shot list for "${a.title}".
    Script/Summary: ${a.script||a.summary}
    
    Return JSON array of objects: 
    { "id": "shot_1", "shotType": "Wide/Close-up/etc", "visualDescription": "...", "midjourneyPrompt": "..." }
    
    IMPORTANT: For the "midjourneyPrompt" field, ensure you append the following parameters to the end of the prompt string: --stylize ${o} --ar ${u} --v ${l}`,h=await Xn(d,{responseMimeType:"application/json"},nl);return JSON.parse(js(h||"[]"))}async function mx(a){const s=`Create a loose storyboard sketch for: ${a}.
    Style: Black and white, rough sketch, pencil or ink style, storyboard aesthetic.`;return await Xu(s,"16:9")}async function Wh(a,s="PHYSICAL_TRAITS"){return{description:"Physical trait analysis requires direct server-side file handling (not yet implemented in proxy)",traits:"Generic traits"}}async function gx(a,s,r,o,u,l){const d=s===10?"This is the last page. End with a cliffhanger.":s===1?"Establish the setting and the hero.":"Advance the plot with conflict.",h=`You are writing a comic book script based on a story.
    STORY CONTEXT: ${l}
    
    PAGE ${s}. GENRE: ${r}.
    CHARACTERS:
    - ACTIVE: ${o.join(", ")}
    - VILLAIN: ${u}
    
    PREVIOUS PANELS: ${a}
    
    INSTRUCTION: ${d}
    
    OUTPUT STRICT JSON:
    {
      "caption": "Narrator text...",
      "dialogue": "Character speech...",
      "scene": "Visual description mentioning HERO or VILLAIN for image generation",
      "focus_char": "hero" | "co-star" | "villain" | "other",
      "hero_emotion": "Angry",
      "costar_emotion": "Scared",
      "villain_emotion": "Smug"
    }`,p=await Xn(h,{responseMimeType:"application/json"},oi);return JSON.parse(js(p||"{}"))}async function bx(a,s,r,o,u){const l=`Comic book panel, ${s} style.
    Scene: ${a.scene}
    
    Characters:
    Hero: ${r.name} (${r.description}) - Emotion: ${a.hero_emotion}
    ${o?`Co-star: ${o.name} (${o.description}) - Emotion: ${a.costar_emotion}`:""}
    ${u?`Villain: ${u.name} (${u.description}) - Emotion: ${a.villain_emotion}`:""}
    
    Focus: ${a.focus_char}
    
    Style: ${s} comic book art, vibrant colors, dynamic composition.`;return await Xu(l,"2:3")}async function xx(a,s){const r=`Create a villain for a ${s} comic who opposes a hero described as: "${a}".
    Return JSON: { "name": "...", "desc": "Visual description..." }`,o=await Xn(r,{responseMimeType:"application/json"},nl);return{...JSON.parse(js(o||"{}")),image:""}}async function vx(a){const s=`Visual representation of a story item/artifact.
    Name: ${a.name}
    Description: ${a.appearance}
    History: ${a.history}
    Style: Concept art, detailed, high quality, fantasy/sci-fi aesthetic appropriate for the item.
    Object isolated on simple background.`;return await Xu(s,"1:1")}const $h=({title:a,children:s,defaultCollapsed:r=!1})=>{const[o,u]=ne.useState(r);return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>u(!o),className:"flex items-center w-full text-left text-sm font-semibold text-brand-text-muted hover:text-white transition","aria-expanded":!o,children:[o?i.jsx(Bl,{className:"w-4 h-4 mr-1"}):i.jsx(cf,{className:"w-4 h-4 mr-1"}),a]}),!o&&i.jsx("div",{className:"pl-5 border-l border-brand-primary ml-2",children:s})]})},zh=[{name:"The Beginning",keywords:["begin","start","introduce","ordinary world","inciting incident","status quo"],color:"from-sky-400 to-blue-500"},{name:"Rising Action",keywords:["struggle","challenge","conflict","rising stakes","faces","learns","trials"],color:"from-yellow-400 to-orange-500"},{name:"The Climax",keywords:["climax","confrontation","peak","turning point","overcomes","battle","choice"],color:"from-red-500 to-rose-600"},{name:"Falling Action",keywords:["aftermath","consequences","fallout","resolves","return"],color:"from-orange-400 to-amber-500"},{name:"Resolution",keywords:["resolution","end","new beginning","changes","lesson","changed"],color:"from-emerald-400 to-green-600"}],yx=({arcText:a})=>{const s=ne.useMemo(()=>{const r=a.toLowerCase(),o=new Set;return zh.forEach(u=>{u.keywords.some(l=>r.includes(l))&&o.add(u.name)}),o},[a]);return s.size===0?i.jsx("div",{className:"mt-2 text-xs text-brand-text-muted italic bg-brand-bg/50 p-2 rounded-md border border-white/5",children:`Add more detail to the character's arc (e.g., mention their "struggle," "climax," or "resolution") to visualize their journey.`}):i.jsxs("div",{className:"mt-4 space-y-3",children:[i.jsx("h4",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Journey Arc"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute top-2.5 left-0 right-0 h-0.5 bg-white/10 rounded-full -z-10"}),i.jsx("div",{className:"flex justify-between items-start",children:zh.map((r,o)=>{const u=s.has(r.name);return i.jsxs("div",{className:"flex flex-col items-center group w-1/5",children:[i.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-500 shadow-lg ${u?`border-transparent bg-gradient-to-br ${r.color} scale-110`:"border-white/20 bg-brand-bg"}`,children:u&&i.jsx(Jo,{className:"w-3 h-3 text-white"})}),i.jsx("span",{className:`text-[10px] mt-2 text-center transition-colors duration-300 px-1 ${u?"font-bold text-brand-text":"text-brand-text-muted/50"}`,children:r.name}),u&&i.jsx("div",{className:`absolute top-3 left-0 h-0.5 -z-10 bg-gradient-to-r ${r.color} opacity-50`,style:{width:`${o/(zh.length-1)*100}%`}})]},r.name)})})]})]})},wx=a=>{switch(a){case wt.PROTAGONIST:return"#fbbF24";case wt.ANTAGONIST:return"#f87171";case wt.DEUTERAGONIST:return"#6ee7b7";case wt.MENTOR:return"#60a5fa";case wt.LOVE_INTEREST:return"#f472b6";case wt.FOIL:return"#c084fc";default:return"#9ca3af"}},Nx=(a,s)=>{const r={className:"w-5 h-5",style:{color:s}};switch(a){case wt.PROTAGONIST:return i.jsx(wp,{...r,title:"Protagonist"});case wt.ANTAGONIST:return i.jsx(Np,{...r,title:"Antagonist"});case wt.DEUTERAGONIST:return i.jsx(Yc,{...r,title:"Deuteragonist"});case wt.SUPPORTING_CHARACTER:return i.jsx(Yc,{...r,title:"Supporting Character"});case wt.MENTOR:return i.jsx(jp,{...r,title:"Mentor"});case wt.LOVE_INTEREST:return i.jsx(Sp,{...r,title:"Love Interest"});case wt.FOIL:return i.jsx(n1,{...r,title:"Foil"});case wt.MINOR_CHARACTER:return i.jsx(Zc,{...r,title:"Minor Character"});default:return null}},f1=({character:a,isSelected:s,onToggleSelect:r,onDelete:o,onUpdate:u,onExport:l,onGenerateImage:d,onOpenVisuals:h,onOpenSplitView:p})=>{const[m,y]=ne.useState(!1),[w,j]=ne.useState(!1),[g,L]=ne.useState(a.history),[N,A]=ne.useState(a.arc),[_,T]=ne.useState(a.type),D=wx(a.type),F=Nx(a.type,D),B=()=>{w&&(L(a.history),A(a.arc),T(a.type)),j(!w),w||y(!0)},ce=()=>{u(a.id,{history:g,arc:N,type:_}),j(!1)};return i.jsxs("div",{className:`glass-card rounded-xl transition-all duration-300 shadow-lg border ${s?"border-brand-secondary ring-2 ring-brand-secondary/30":"border-white/5 hover:border-white/10"} overflow-hidden`,children:[a.headerImage&&i.jsx("div",{className:"h-24 bg-cover bg-center",style:{backgroundImage:`url(${a.headerImage})`}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-grow min-w-0 cursor-pointer",onClick:r,children:[s?i.jsx(Jo,{className:"w-5 h-5 text-brand-secondary flex-shrink-0"}):i.jsx("div",{className:"w-5 h-5 rounded-full border border-brand-text-muted/50 flex-shrink-0"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[F,i.jsx("h3",{className:"font-bold text-brand-text text-lg truncate",children:a.name})]}),i.jsxs("p",{className:"text-xs text-brand-text-muted flex items-center gap-1",children:[a.type,i.jsx("span",{className:"w-1 h-1 rounded-full bg-brand-text-muted/50 mx-1"}),a.traits]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[w?i.jsx("button",{onClick:ce,className:"p-1.5 bg-brand-secondary/20 text-brand-secondary rounded-lg hover:bg-brand-secondary hover:text-white transition mr-1",children:i.jsx(Xc,{className:"w-4 h-4"})}):i.jsx("button",{onClick:B,className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/5 rounded-lg",children:i.jsx($u,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>y(!m),className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/5 rounded-lg",children:m?i.jsx(vp,{className:"w-4 h-4"}):i.jsx(cf,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:`mt-3 pt-3 border-t border-white/10 space-y-4 transition-all duration-300 ${m?"block":"hidden"}`,children:[i.jsx("div",{children:i.jsx($h,{title:"History & Backstory",defaultCollapsed:!1,children:w?i.jsx("textarea",{value:g,onChange:U=>L(U.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg p-2 text-sm mt-2 min-h-[100px]"}):i.jsx("p",{className:"text-sm text-brand-text-muted font-serif leading-relaxed mt-2 whitespace-pre-wrap",children:a.history})})}),i.jsx("div",{children:i.jsx($h,{title:"Character Arc",defaultCollapsed:!1,children:w?i.jsx("textarea",{value:N,onChange:U=>A(U.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg p-2 text-sm mt-2 min-h-[80px]"}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-brand-text-muted font-serif leading-relaxed mt-2 whitespace-pre-wrap",children:a.arc}),i.jsx(yx,{arcText:a.arc})]})})}),w&&i.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/30",children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Change Archetype"}),i.jsx("select",{value:_,onChange:U=>T(U.target.value),className:"w-full bg-brand-bg border border-brand-primary/50 rounded px-2 py-1 text-sm",children:Object.values(wt).map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-white/5",children:[h&&i.jsx("button",{onClick:()=>h(a),className:"p-1.5 text-sky-400 hover:text-sky-300 transition hover:bg-sky-900/20 rounded-lg flex items-center gap-1",title:"Edit Visuals & Outfits",children:i.jsx(u1,{className:"w-4 h-4"})}),p&&i.jsx("button",{onClick:p,className:"p-1.5 text-brand-secondary hover:text-white transition hover:bg-brand-secondary/20 rounded-lg",title:"Open in Split View",children:i.jsx(Pl,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>d(a),className:"p-1.5 text-purple-400 hover:text-purple-300 transition hover:bg-purple-900/20 rounded-lg",title:"Generate Portrait",children:i.jsx(si,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>l(a.id),className:"p-1.5 text-brand-text-muted hover:text-white transition hover:bg-white/10 rounded-lg",title:"Export Character",children:i.jsx(ro,{className:"w-4 h-4"})}),i.jsx("button",{onClick:o,className:"p-1.5 text-red-400 hover:text-red-300 transition hover:bg-red-900/20 rounded-lg",title:"Delete Character",children:i.jsx(Fl,{className:"w-4 h-4"})})]})]})]})]})},tf=({isOpen:a,onClose:s,title:r,children:o,maxWidth:u="2xl",showCloseButton:l=!0})=>{const d=ne.useRef(null);if(ne.useEffect(()=>{const p=m=>{m.key==="Escape"&&s()};return a&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[a,s]),!a)return null;const h={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl",full:"max-w-full m-4"}[u];return yb.createPortal(i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:s,role:"dialog","aria-modal":"true","aria-labelledby":r?"modal-title":void 0,children:i.jsxs("div",{className:`glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full ${h} max-h-[90vh] flex flex-col border border-white/10 animate-in zoom-in-95 duration-200`,onClick:p=>p.stopPropagation(),ref:d,children:[(r||l)&&i.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10 shrink-0",children:[r?i.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-brand-secondary font-serif flex items-center gap-2 truncate pr-4",children:r}):i.jsx("div",{}),l&&i.jsx("button",{onClick:s,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5","aria-label":"Close modal",children:i.jsx(tl,{className:"w-6 h-6"})})]}),o]})}),document.body)},Sx=({scene:a,allCharacters:s,allItems:r,onSave:o,onClose:u})=>{const[l,d]=ne.useState("details"),[h,p]=ne.useState(a.title),[m,y]=ne.useState(a.summary),[w,j]=ne.useState(a.fullText),[g,L]=ne.useState(a.characterIds||[]),[N,A]=ne.useState(a.itemIds||[]),[_,T]=ne.useState(a.settingDescription||""),[D,F]=ne.useState(a.script||""),B=()=>{o(a.id,{title:h,summary:m,fullText:w,characterIds:g,itemIds:N,settingDescription:_,script:D})},ce=q=>{L(ie=>ie.includes(q)?ie.filter(se=>se!==q):[...ie,q])},U=q=>{A(ie=>ie.includes(q)?ie.filter(se=>se!==q):[...ie,q])};return i.jsxs(tf,{isOpen:!0,onClose:u,title:`Edit Scene: ${h}`,maxWidth:"4xl",children:[i.jsxs("div",{className:"flex items-center border-b border-white/10 px-5 bg-brand-bg/30 shrink-0",children:[i.jsx("button",{onClick:()=>d("details"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${l==="details"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"w-4 h-4"})," Details & Draft"]})}),i.jsx("button",{onClick:()=>d("setting"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${l==="setting"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xo,{className:"w-4 h-4"})," Setting"]})}),i.jsx("button",{onClick:()=>d("script"),className:`px-4 py-3 text-sm font-medium transition border-b-2 ${l==="script"?"border-brand-secondary text-brand-secondary":"border-transparent text-brand-text-muted hover:text-white"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qu,{className:"w-4 h-4"})," Screenplay"]})})]}),i.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[l==="details"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Scene Title"}),i.jsx("input",{type:"text",value:h,onChange:q=>p(q.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"Enter scene title..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-2 flex flex-col",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Summary"}),i.jsx("textarea",{value:m,onChange:q=>y(q.target.value),rows:6,className:"w-full flex-grow bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",placeholder:"Brief summary of what happens..."})]}),i.jsxs("div",{className:"md:col-span-1 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted uppercase tracking-wider",children:"Characters"}),i.jsxs("span",{className:"text-xs text-brand-text-muted",children:[g.length," Active"]})]}),i.jsx("div",{className:"bg-brand-bg/30 rounded-xl p-2 h-[168px] overflow-y-auto border border-brand-primary/30 custom-scrollbar",children:s.length>0?s.map(q=>i.jsx("div",{onClick:()=>ce(q.id),className:`flex items-center justify-between p-2 mb-1 rounded-lg cursor-pointer transition-all duration-200 ${g.includes(q.id)?"bg-brand-secondary/20 border border-brand-secondary/40":"hover:bg-brand-primary/30 border border-transparent"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border ${g.includes(q.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:g.includes(q.id)&&i.jsx(Jo,{className:"w-3 h-3 text-white"})}),i.jsx("span",{className:`text-sm font-medium ${g.includes(q.id)?"text-white":"text-brand-text-muted"}`,children:q.name})]})},q.id)):i.jsx("p",{className:"text-xs text-brand-text-muted italic p-2",children:"No characters created yet."})}),i.jsxs("div",{className:"flex justify-between items-center mb-2 mt-4",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted uppercase tracking-wider",children:"Items"}),i.jsxs("span",{className:"text-xs text-brand-text-muted",children:[N.length," Linked"]})]}),i.jsx("div",{className:"bg-brand-bg/30 rounded-xl p-2 h-[168px] overflow-y-auto border border-brand-primary/30 custom-scrollbar",children:r.length>0?r.map(q=>i.jsx("div",{onClick:()=>U(q.id),className:`flex items-center justify-between p-2 mb-1 rounded-lg cursor-pointer transition-all duration-200 ${N.includes(q.id)?"bg-brand-secondary/20 border border-brand-secondary/40":"hover:bg-brand-primary/30 border border-transparent"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border ${N.includes(q.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:N.includes(q.id)&&i.jsx(Jo,{className:"w-3 h-3 text-white"})}),i.jsx("span",{className:`text-sm font-medium ${N.includes(q.id)?"text-white":"text-brand-text-muted"}`,children:q.name})]})},q.id)):i.jsx("p",{className:"text-xs text-brand-text-muted italic p-2",children:"No items created yet."})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Full Scene Draft (Prose)"}),i.jsx("textarea",{value:w,onChange:q=>j(q.target.value),rows:12,className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"Write the full scene prose here..."})]})]}),l==="setting"&&i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Setting Description"}),i.jsx("p",{className:"text-xs text-brand-text-muted mb-4",children:"Describe the location, atmosphere, lighting, and sensory details for this specific scene."}),i.jsx("textarea",{value:_,onChange:q=>T(q.target.value),className:"w-full flex-grow min-h-[400px] bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-serif focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",placeholder:"The room was dim, smelling of ozone and stale coffee..."})]}),l==="script"&&i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Screenplay Format"}),i.jsx("p",{className:"text-xs text-brand-text-muted mb-4",children:"Auto-generated or manually written script format (Scene Heading, Action, Dialogue)."}),i.jsx("textarea",{value:D,onChange:q=>F(q.target.value),className:"w-full flex-grow min-h-[400px] bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-sm text-brand-text font-mono focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition leading-relaxed whitespace-pre-wrap",placeholder:"EXT. CITY STREET - NIGHT..."})]})]}),i.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl shrink-0",children:[i.jsx("button",{onClick:u,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition font-medium border border-transparent hover:border-white/5",children:"Cancel"}),i.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:[i.jsx(Xc,{className:"w-5 h-5"}),"Save Changes"]})]})]})},Lp=({scene:a,isSelected:s,onToggleSelect:r,onUpdate:o,onDelete:u,onExport:l,allCharacters:d,allItems:h,isLoading:p,onGenerateDetails:m,onGenerateImage:y,onOpenStoryboard:w,isFirst:j,isLast:g,layout:L="grid",onMove:N,onOpenSplitView:A})=>{const[_,T]=ne.useState(!1),[D,F]=ne.useState(!1),[B,ce]=ne.useState(!1),U=()=>{F(!0)},q=(O,Y)=>{o(O,Y),F(!1)},ie=d.filter(O=>{var Y;return(Y=a.characterIds)==null?void 0:Y.includes(O.id)}),se=a.characterIds&&a.characterIds.length>0,I=a.isTransition;return i.jsxs(i.Fragment,{children:[D&&i.jsx(Sx,{scene:a,allCharacters:d,allItems:h,onSave:q,onClose:()=>F(!1)}),i.jsxs("div",{className:`glass-card rounded-lg shadow-sm h-full flex flex-col transition-all duration-300 overflow-hidden border ${s?"border-brand-secondary ring-1 ring-brand-secondary/30":I?"border-teal-500/30 bg-teal-900/5":"border-white/5 hover:border-white/10 hover:shadow-md"}`,children:[a.headerImage&&i.jsx("div",{className:"h-20 bg-cover bg-center opacity-90 bg-[image:var(--bg-image)]",style:{"--bg-image":`url(${a.headerImage})`}}),i.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[i.jsx("div",{className:"cursor-grab active:cursor-grabbing text-brand-text-muted hover:text-brand-text p-1 -ml-1",children:i.jsx(Tb,{className:"w-4 h-4"})}),i.jsx("input",{type:"checkbox",checked:s,onChange:r,"aria-label":"Select Scene",className:"h-4 w-4 rounded bg-brand-surface/50 border-brand-text-muted text-brand-secondary focus:ring-brand-secondary cursor-pointer flex-shrink-0"}),i.jsxs("div",{className:"flex-grow cursor-pointer group min-w-0",onClick:()=>T(!_),children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[I&&i.jsx(r1,{className:"w-3 h-3 text-teal-400 flex-shrink-0"}),i.jsx("h3",{className:`font-bold truncate text-sm leading-tight ${I?"text-teal-300":"text-brand-text group-hover:text-brand-secondary transition"}`,children:a.title})]}),i.jsxs("div",{className:"flex gap-1 mt-1",children:[a.script&&i.jsx("span",{title:"Script Ready",className:"bg-green-900/30 text-green-400 p-0.5 rounded",children:i.jsx(qu,{className:"w-2.5 h-2.5"})}),a.settingDescription&&i.jsx("span",{title:"Setting Ready",className:"bg-blue-900/30 text-blue-400 p-0.5 rounded",children:i.jsx(Xo,{className:"w-2.5 h-2.5"})}),a.storyboard&&a.storyboard.length>0&&i.jsx("span",{title:"Storyboard Ready",className:"bg-purple-900/30 text-purple-400 p-0.5 rounded",children:i.jsx(Pl,{className:"w-2.5 h-2.5"})})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(L==="vertical"||L==="horizontal")&&N&&i.jsxs("div",{className:"flex items-center text-brand-text-muted opacity-50 hover:opacity-100 mr-1",children:[i.jsx("button",{onClick:()=>N(L==="vertical"?"up":"left"),disabled:j,className:"p-0.5 disabled:opacity-20 hover:text-brand-text",title:L==="vertical"?"Move Up":"Move Left","aria-label":L==="vertical"?"Move Up":"Move Left",children:i.jsx(s1,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>N(L==="vertical"?"down":"right"),disabled:g,className:"p-0.5 disabled:opacity-20 hover:text-brand-text",title:L==="vertical"?"Move Down":"Move Right","aria-label":L==="vertical"?"Move Down":"Move Right",children:i.jsx(kp,{className:"w-3 h-3"})})]}),w&&i.jsx("button",{onClick:()=>w(a),title:"Open Storyboard",className:"text-brand-text-muted hover:text-purple-400 transition p-1 rounded hover:bg-purple-900/20",children:i.jsx(Uc,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:U,title:"Edit Details",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:i.jsx($u,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>T(!_),title:_?"Collapse":"Expand",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:_?i.jsx(vp,{className:"w-3.5 h-3.5"}):i.jsx(cf,{className:"w-3.5 h-3.5"})})]})]}),i.jsx("div",{className:`mt-2 pt-2 border-t border-white/5 space-y-2 text-xs text-brand-text flex-grow ${_?"block":"hidden"}`,children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"group",children:[i.jsx("p",{className:`whitespace-pre-wrap font-serif text-brand-text-muted transition-all ${B?"":"line-clamp-3"}`,children:a.summary}),a.summary.length>100&&i.jsx("button",{onClick:O=>{O.stopPropagation(),ce(!B)},className:"mt-1 text-[10px] font-bold text-brand-secondary/80 hover:text-brand-secondary flex items-center gap-1 transition-colors",children:B?"Less":"More"})]}),!I&&i.jsxs(i.Fragment,{children:[a.fullText&&i.jsxs("div",{className:"pt-1 border-t border-white/5",children:[i.jsx("p",{className:"text-[10px] font-bold text-brand-text-muted uppercase tracking-wider mb-1",children:"Draft"}),i.jsx("p",{className:"whitespace-pre-wrap font-serif text-brand-text-muted/80 max-h-20 overflow-y-auto custom-scrollbar line-clamp-3",children:a.fullText})]}),se&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:ie.map(O=>i.jsx("span",{className:"text-[10px] bg-brand-bg/50 border border-brand-primary/50 text-brand-text-muted px-1.5 py-0.5 rounded-md",children:O.name},O.id))})]}),i.jsxs("div",{className:"flex justify-end gap-1 pt-2 border-t border-white/5",children:[!I&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>y(a),disabled:p,title:"Generate Image",className:"text-purple-400 hover:text-purple-300 transition disabled:text-gray-600 p-1 rounded hover:bg-purple-900/20",children:i.jsx(si,{className:"w-3.5 h-3.5"})}),se&&i.jsx("button",{onClick:()=>m(a.id),disabled:p,title:"Write Scene",className:"text-brand-secondary hover:text-red-400 transition disabled:text-gray-600 p-1 rounded hover:bg-brand-secondary/10",children:i.jsx(qu,{className:"w-3.5 h-3.5"})})]}),i.jsx("button",{onClick:()=>l(a.id),title:"Export",className:"text-brand-text-muted hover:text-white transition p-1 rounded hover:bg-brand-primary/50",children:i.jsx(ro,{className:"w-3.5 h-3.5"})}),A&&i.jsx("button",{onClick:A,className:"p-1.5 text-brand-secondary hover:text-white transition hover:bg-brand-secondary/20 rounded-lg",title:"Open in Split View",children:i.jsx(Pl,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>u(a.id),title:"Delete",className:"text-red-400 hover:text-red-300 transition p-1 rounded hover:bg-red-900/20",children:i.jsx(Fl,{className:"w-3.5 h-3.5"})})]})]})})]})]})]})},jx=({onComplete:a})=>{const[s,r]=ne.useState(900),[o,u]=ne.useState(!1),[l,d]=ne.useState(15),[h,p]=ne.useState(!1);ne.useEffect(()=>{let g=null;return o&&s>0?g=setInterval(()=>{r(L=>L-1)},1e3):o&&s===0&&(u(!1),g&&clearInterval(g),a&&a()),()=>{g&&clearInterval(g)}},[o,s,a]);const m=()=>{u(!o)},y=()=>{u(!1),r(l*60)},w=g=>{d(g),r(g*60),u(!1),p(!1)},j=g=>{const L=Math.floor(g/60),N=g%60;return`${L.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`};return i.jsxs("div",{className:"bg-brand-surface/50 border border-brand-primary/30 rounded-lg p-3 flex items-center gap-4 shadow-lg backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-brand-secondary",children:[i.jsx(Hb,{className:"w-5 h-5"}),i.jsx("span",{className:"font-mono text-xl font-bold tracking-wider",children:j(s)})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:m,className:`p-1.5 rounded-md transition ${o?"text-yellow-400 hover:bg-yellow-400/10":"text-green-400 hover:bg-green-400/10"}`,title:o?"Pause Sprint":"Start Sprint",children:o?i.jsx(qb,{className:"w-5 h-5"}):i.jsx(Ib,{className:"w-5 h-5"})}),i.jsx("button",{onClick:y,className:"p-1.5 rounded-md text-brand-text-muted hover:text-white hover:bg-white/10 transition",title:"Reset Timer",children:i.jsx($d,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"h-6 w-px bg-white/10 mx-1"}),i.jsx("div",{className:"flex items-center gap-1 text-xs",children:[15,30,60].map(g=>i.jsxs("button",{onClick:()=>w(g),className:`px-2 py-1 rounded transition ${l===g&&!h?"bg-brand-secondary text-white font-bold":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,children:[g,"m"]},g))})]})},_x=({currentCount:a})=>{const[s,r]=ne.useState(2e3),[o,u]=ne.useState(!1),[l,d]=ne.useState("2000"),h=Math.min(100,Math.max(0,a/s*100)),p=()=>{const m=parseInt(l,10);!isNaN(m)&&m>0&&r(m),u(!1)};return i.jsx("div",{className:"bg-brand-surface/50 border border-brand-primary/30 rounded-lg p-3 flex items-center gap-3 shadow-lg backdrop-blur-sm min-w-[200px]",children:i.jsxs("div",{className:"flex-grow flex flex-col gap-1",children:[i.jsxs("div",{className:"flex justify-between items-end text-xs",children:[i.jsx("span",{className:"text-brand-text-muted font-bold uppercase tracking-wider",children:"Daily Goal"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-brand-text font-mono font-medium",children:a}),i.jsx("span",{className:"text-brand-text-muted",children:"/"}),o?i.jsx("input",{type:"number",value:l,onChange:m=>d(m.target.value),onBlur:p,onKeyDown:m=>m.key==="Enter"&&p(),className:"w-12 bg-black/30 border border-brand-primary/50 rounded px-1 text-right text-xs text-brand-text focus:outline-none focus:border-brand-secondary",autoFocus:!0,"aria-label":"Daily word count goal"}):i.jsx("span",{onClick:()=>u(!0),className:"text-brand-text-muted hover:text-brand-secondary cursor-pointer border-b border-transparent hover:border-brand-secondary/50 transition",title:"Click to edit goal",children:s})]})]}),i.jsx("div",{className:"h-2 w-full bg-black/40 rounded-full overflow-hidden border border-white/5",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-brand-secondary to-purple-500 transition-all duration-500 ease-out w-[var(--width)]",style:{"--width":`${h}%`}})})]})})},Ax=({imageUrl:a,onSave:s,onCancel:r})=>{const o=ne.useRef(null),[u,l]=ne.useState(100),[d,h]=ne.useState(100),[p,m]=ne.useState(100),[y,w]=ne.useState(0),[j,g]=ne.useState(!1),[L,N]=ne.useState(!1),[A,_]=ne.useState(!0),T=ne.useCallback(()=>{const B=o.current;if(!B)return;const ce=B.getContext("2d");if(!ce)return;const U=new Image;U.crossOrigin="anonymous",U.src=a,U.onload=()=>{y%180===0?(B.width=U.width,B.height=U.height):(B.width=U.height,B.height=U.width),ce.clearRect(0,0,B.width,B.height),ce.filter=`brightness(${u}%) contrast(${d}%) saturate(${p}%)`,ce.save(),ce.translate(B.width/2,B.height/2),ce.rotate(y*Math.PI/180),ce.scale(j?-1:1,L?-1:1),ce.drawImage(U,-U.width/2,-U.height/2),ce.restore(),_(!1)}},[a,u,d,p,y,j,L]);ne.useEffect(()=>{T()},[T]);const D=()=>{const B=o.current;if(B){const ce=B.toDataURL("image/png");s(ce)}},F=()=>{l(100),h(100),m(100),w(0),g(!1),N(!1)};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-900 border border-slate-700 rounded-lg overflow-hidden shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800 border-b border-slate-700",children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"Photo Editor"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:F,className:"p-2 text-slate-400 hover:text-white transition",title:"Reset","aria-label":"Reset Filters",children:i.jsx(d1,{className:"w-5 h-5"})}),i.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-red-400 transition",title:"Cancel","aria-label":"Close Editor",children:i.jsx(tl,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsxs("div",{className:"flex-1 p-8 overflow-auto flex items-center justify-center bg-slate-950",children:[i.jsx("canvas",{ref:o,className:"max-w-full max-h-full object-contain shadow-lg border border-slate-800"}),A&&i.jsx("div",{className:"text-white absolute",children:"Loading Image..."})]}),i.jsxs("div",{className:"w-80 bg-slate-800 border-l border-slate-700 p-6 flex flex-col gap-6 overflow-y-auto",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-semibold border-b border-slate-600 pb-2",children:[i.jsx(Cp,{className:"w-4 h-4"}),i.jsx("span",{children:"Adjustments"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[i.jsx("label",{children:"Brightness"}),i.jsxs("span",{children:[u,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",value:u,onChange:B=>l(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Brightness"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[i.jsx("label",{children:"Contrast"}),i.jsxs("span",{children:[d,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",value:d,onChange:B=>h(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Contrast"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[i.jsx("label",{children:"Saturation"}),i.jsxs("span",{children:[p,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",value:p,onChange:B=>m(Number(B.target.value)),className:"w-full accent-purple-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer","aria-label":"Saturation"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-semibold border-b border-slate-600 pb-2",children:[i.jsx($d,{className:"w-4 h-4"}),i.jsx("span",{children:"Transform"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>w(B=>(B-90)%360),className:"flex flex-col items-center justify-center p-3 bg-slate-700 rounded hover:bg-slate-600 text-slate-300 text-xs transition",children:[i.jsx($d,{className:"w-5 h-5 mb-1"}),"Rotate Left"]}),i.jsxs("button",{onClick:()=>w(B=>(B+90)%360),className:"flex flex-col items-center justify-center p-3 bg-slate-700 rounded hover:bg-slate-600 text-slate-300 text-xs transition scale-x-[-1]",children:[i.jsx($d,{className:"w-5 h-5 mb-1"}),i.jsx("span",{className:"scale-x-[-1]",children:"Rotate Right"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>g(!j),className:`flex flex-col items-center justify-center p-3 rounded text-slate-300 text-xs transition ${j?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:[i.jsxs("div",{className:"flex gap-1 mb-1",children:[i.jsx(s1,{className:"w-4 h-4"}),i.jsx(kp,{className:"w-4 h-4"})]}),"Flip H"]}),i.jsxs("button",{onClick:()=>N(!L),className:`flex flex-col items-center justify-center p-3 rounded text-slate-300 text-xs transition ${L?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:[i.jsxs("div",{className:"flex gap-1 mb-1",children:[i.jsx(Ob,{className:"w-4 h-4"}),i.jsx(Rb,{className:"w-4 h-4"})]}),"Flip V"]})]})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:from-purple-500 hover:to-blue-500 transition shadow-lg",children:[i.jsx(Xc,{className:"w-5 h-5"}),"Save Changes"]})]})]})]})},kx=({imageUrl:a,title:s,onClose:r,onSetHeader:o,onSave:u})=>{const[l,d]=Pc.useState(!1),[h,p]=Pc.useState(a);Pc.useEffect(()=>{p(a)},[a]);const m=()=>{const w=document.createElement("a");w.href=h;const j=s.replace(/[^a-z0-9]/gi,"_").toLowerCase();w.download=`storyweaver_image_${j}.png`,document.body.appendChild(w),w.click(),document.body.removeChild(w)},y=w=>{p(w),d(!1)};return l?i.jsx(tf,{isOpen:!0,onClose:r,title:`Edit Image: ${s}`,maxWidth:"8xl",children:i.jsx("div",{className:"h-[80vh] w-full",children:i.jsx(Ax,{imageUrl:h,onSave:y,onCancel:()=>d(!1)})})}):i.jsx(tf,{isOpen:!0,onClose:r,title:`Generated Image: ${s}`,maxWidth:"3xl",children:i.jsxs("div",{className:"overflow-hidden flex flex-col",children:[i.jsx("div",{className:"bg-brand-bg rounded-md p-2 m-4 shrink-0",children:i.jsx("img",{src:h,alt:`AI-generated image for: ${s}`,className:"max-w-full max-h-[60vh] mx-auto rounded object-contain"})}),i.jsxs("div",{className:"flex justify-center items-center gap-4 p-4 border-t border-white/10 bg-brand-bg/20 shrink-0 flex-wrap",children:[i.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-slate-600 text-white font-bold py-2 px-4 rounded-md hover:bg-slate-500 transition",children:[i.jsx($u,{className:"w-5 h-5"}),"Edit"]}),o&&i.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-500 transition",children:[i.jsx(si,{className:"w-5 h-5"}),"Set as Header"]}),u&&i.jsxs("button",{onClick:()=>u(h),className:"flex items-center gap-2 bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-500 transition",children:[i.jsx(Xc,{className:"w-5 h-5"}),"Save to Materials"]}),i.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-brand-primary text-white font-bold py-2 px-4 rounded-md hover:bg-opacity-80 transition",children:[i.jsx(ro,{className:"w-5 h-5"}),"Download"]})]})]})})},Cx=({query:a,onQueryChange:s,filters:r,onFilterChange:o})=>{const u=d=>{o({...r,[d]:!r[d]})},l=[{key:"characters",label:"Characters"},{key:"scenes",label:"Scenes"},{key:"locations",label:"Locations"},{key:"materials",label:"Materials"}];return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Ap,{className:"w-5 h-5 text-brand-text-muted"})}),i.jsx("input",{type:"text",value:a,onChange:d=>s(d.target.value),placeholder:"Search across your story...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl pl-10 pr-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Filter by:"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(({key:d,label:h})=>i.jsxs("label",{className:"flex items-center gap-2 text-sm text-brand-text-muted cursor-pointer hover:text-brand-text transition bg-brand-bg/30 p-2 rounded-lg border border-transparent hover:border-brand-primary/50",children:[i.jsx("input",{type:"checkbox",checked:r[d],onChange:()=>u(d),className:"h-4 w-4 rounded bg-brand-surface border-brand-primary text-brand-secondary focus:ring-brand-secondary cursor-pointer"}),h]},d))})]})]})},Lx=({theme:a})=>{const s=ne.useRef(null);return ne.useEffect(()=>{const r=s.current;if(!r)return;const o=r.getContext("2d");if(!o)return;let u,l=window.innerWidth,d=window.innerHeight,h=-1e3,p=-1e3,m=!1;const y=()=>{l=window.innerWidth,d=window.innerHeight,r.width=l,r.height=d,D()},w=B=>{h=B.clientX,p=B.clientY,m=!0},j=B=>{B.touches.length>0&&(h=B.touches[0].clientX,p=B.touches[0].clientY,m=!0)},g=()=>{m=!1,h=-1e3,p=-1e3};let L=[];const N=l<768?40:80,A=["rgba(99, 102, 241, ","rgba(244, 63, 94, ","rgba(14, 165, 233, ","rgba(168, 85, 247, "],_=["rgba(14, 165, 233, ","rgba(99, 102, 241, ","rgba(56, 189, 248, ","rgba(139, 92, 246, "],T=()=>a==="dark"?A:_,D=()=>{L=[];const B=T();for(let ce=0;ce<N;ce++){const U=Math.random()*100+50;L.push({x:Math.random()*l,y:Math.random()*d,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,radius:U,originalColor:B[Math.floor(Math.random()*B.length)],color:"",glowStrength:Math.random()*.5+.5})}},F=()=>{o.clearRect(0,0,l,d),o.globalCompositeOperation=a==="dark"?"screen":"multiply",L.forEach(B=>{B.x+=B.vx,B.y+=B.vy;let ce=a==="dark"?.15:.08;if(m){const q=h-B.x,ie=p-B.y,se=Math.sqrt(q*q+ie*ie),I=400;if(se<I){const O=(I-se)/I;B.x+=q/se*O*.5,B.y+=ie/se*O*.5,ce+=O*.2}}B.color=B.originalColor+ce+")",B.x<-B.radius*2&&(B.x=l+B.radius*2),B.x>l+B.radius*2&&(B.x=-B.radius*2),B.y<-B.radius*2&&(B.y=d+B.radius*2),B.y>d+B.radius*2&&(B.y=-B.radius*2),o.beginPath();const U=o.createRadialGradient(B.x,B.y,0,B.x,B.y,B.radius);U.addColorStop(0,B.color),U.addColorStop(1,a==="dark"?"rgba(0,0,0,0)":"rgba(255,255,255,0)"),o.fillStyle=U,o.arc(B.x,B.y,B.radius,0,Math.PI*2),o.fill()}),u=requestAnimationFrame(F)};return window.addEventListener("resize",y),window.addEventListener("mousemove",w),window.addEventListener("touchmove",j),window.addEventListener("mouseout",g),window.addEventListener("touchend",g),D(),F(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),window.removeEventListener("touchmove",j),window.removeEventListener("mouseout",g),window.removeEventListener("touchend",g),cancelAnimationFrame(u)}},[a]),i.jsx("canvas",{ref:s,className:"fixed top-0 left-0 w-full h-full pointer-events-none -z-10 transition-opacity duration-1000",style:{opacity:1}})},Ex=({onComplete:a})=>{const[s,r]=ne.useState(0),o=[{title:"Welcome to Story Weaver",description:"Your AI-powered creative writing partner. Designed to help you flesh out ideas, build deep characters, and weave compelling narratives from scratch or existing drafts.",icon:i.jsx(Gr,{className:"w-12 h-12 text-brand-secondary"}),color:"from-brand-secondary/20 to-purple-500/20"},{title:"Step 1: The Seed",description:"Start by entering your 'Story Premise' in the top left. This core idea guides the AI in every subsequent generation, ensuring consistency across your project.",icon:i.jsx(Ss,{className:"w-12 h-12 text-sky-400"}),color:"from-sky-500/20 to-blue-600/20"},{title:"Step 2: The Cast",description:"Use the 'Character Builder' to create detailed profiles. Give them traits, backstories, and even analyze uploaded images to generate personality descriptions.",icon:i.jsx(xp,{className:"w-12 h-12 text-amber-400"}),color:"from-amber-400/20 to-orange-500/20"},{title:"Step 3: The Plot",description:"Structure your narrative in the 'Scenes' section. Organize them in the visual 'Timeline' at the bottom to perfect your pacing and flow.",icon:i.jsx(qu,{className:"w-12 h-12 text-teal-400"}),color:"from-teal-400/20 to-emerald-500/20"},{title:"Step 4: The Toolkit",description:"Stuck? Use the 'Writer's Toolkit' to generate chapters, write dialogue between characters, brainstorm plot twists, or connect scenes with transitions.",icon:i.jsx(yp,{className:"w-12 h-12 text-violet-400"}),color:"from-violet-400/20 to-purple-600/20"},{title:"Step 5: Visuals & World",description:"Bring your story to life. Generate evocative images for scenes and characters, and create a 'World Map' to ground your setting physically.",icon:i.jsx(si,{className:"w-12 h-12 text-pink-400"}),color:"from-pink-400/20 to-rose-500/20"}],u=()=>{s<o.length-1?r(s+1):a()},l=()=>{s>0&&r(s-1)},d=o[s];return i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:i.jsxs("div",{className:"glass-panel bg-brand-surface/90 rounded-2xl shadow-2xl w-full max-w-lg border border-white/10 overflow-hidden flex flex-col relative",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${d.color} opacity-50 transition-colors duration-500 pointer-events-none`}),i.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-brand-text-muted hover:text-white transition z-10",title:"Skip Tour",children:i.jsx(tl,{className:"w-6 h-6"})}),i.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10 h-full",children:[i.jsx("div",{className:"mb-6 p-4 rounded-full bg-white/10 backdrop-blur-md shadow-lg ring-1 ring-white/20 transition-all duration-300 transform hover:scale-110",children:d.icon}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-3 font-serif tracking-wide",children:d.title}),i.jsx("p",{className:"text-brand-text-muted text-base leading-relaxed mb-8",children:d.description}),i.jsx("div",{className:"flex gap-2 mb-8",children:o.map((h,p)=>i.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${p===s?"w-8 bg-brand-secondary":"w-2 bg-white/20"}`},p))}),i.jsxs("div",{className:"flex items-center justify-between w-full mt-auto",children:[i.jsx("button",{onClick:l,disabled:s===0,className:`px-4 py-2 text-sm font-medium text-brand-text-muted hover:text-white transition ${s===0?"opacity-0 pointer-events-none":"opacity-100"}`,children:"Back"}),i.jsx("button",{onClick:u,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:s===o.length-1?i.jsxs(i.Fragment,{children:["Get Started ",i.jsx(Jo,{className:"w-5 h-5"})]}):i.jsxs(i.Fragment,{children:["Next ",i.jsx(kp,{className:"w-4 h-4"})]})})]})]})]})})},Tx="modulepreload",Ox=function(a){return"/storyweaver/"+a},m2={},Xh=function(s,r,o){let u=Promise.resolve();if(r&&r.length>0){let d=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));u=d(r.map(m=>{if(m=Ox(m),m in m2)return;m2[m]=!0;const y=m.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const j=document.createElement("link");if(j.rel=y?"stylesheet":Tx,y||(j.as="script"),j.crossOrigin="",j.href=m,p&&j.setAttribute("nonce",p),document.head.appendChild(j),y)return new Promise((g,L)=>{j.addEventListener("load",g),j.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return u.then(d=>{for(const h of d||[])h.status==="rejected"&&l(h.reason);return s().catch(l)})};function gn(a){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gn(a)}var Hr=Uint8Array,vr=Uint16Array,Hu=Uint32Array,ff=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hf=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zh=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h1=function(a,s){for(var r=new vr(31),o=0;o<31;++o)r[o]=s+=1<<a[o-1];for(var u=new Hu(r[30]),o=1;o<30;++o)for(var l=r[o];l<r[o+1];++l)u[l]=l-r[o]<<5|o;return[r,u]},p1=h1(ff,2),m1=p1[0],Jh=p1[1];m1[28]=258,Jh[258]=28;var g1=h1(hf,0),Rx=g1[0],g2=g1[1],Qh=new vr(32768);for(var Dn=0;Dn<32768;++Dn){var Yo=(Dn&43690)>>>1|(Dn&21845)<<1;Yo=(Yo&52428)>>>2|(Yo&13107)<<2,Yo=(Yo&61680)>>>4|(Yo&3855)<<4,Qh[Dn]=((Yo&65280)>>>8|(Yo&255)<<8)>>>1}var Ns=(function(a,s,r){for(var o=a.length,u=0,l=new vr(s);u<o;++u)++l[a[u]-1];var d=new vr(s);for(u=0;u<s;++u)d[u]=d[u-1]+l[u-1]<<1;var h;if(r){h=new vr(1<<s);var p=15-s;for(u=0;u<o;++u)if(a[u])for(var m=u<<4|a[u],y=s-a[u],w=d[a[u]-1]++<<y,j=w|(1<<y)-1;w<=j;++w)h[Qh[w]>>>p]=m}else for(h=new vr(o),u=0;u<o;++u)h[u]=Qh[d[a[u]-1]++]>>>15-a[u];return h}),Qo=new Hr(288);for(var Dn=0;Dn<144;++Dn)Qo[Dn]=8;for(var Dn=144;Dn<256;++Dn)Qo[Dn]=9;for(var Dn=256;Dn<280;++Dn)Qo[Dn]=7;for(var Dn=280;Dn<288;++Dn)Qo[Dn]=8;var Gu=new Hr(32);for(var Dn=0;Dn<32;++Dn)Gu[Dn]=5;var Mx=Ns(Qo,9,0),zx=Ns(Qo,9,1),Dx=Ns(Gu,5,0),Ix=Ns(Gu,5,1),Dh=function(a){for(var s=a[0],r=1;r<a.length;++r)a[r]>s&&(s=a[r]);return s},Fi=function(a,s,r){var o=s/8>>0;return(a[o]|a[o+1]<<8)>>>(s&7)&r},Ih=function(a,s){var r=s/8>>0;return(a[r]|a[r+1]<<8|a[r+2]<<16)>>>(s&7)},Ep=function(a){return(a/8>>0)+(a&7&&1)},b1=function(a,s,r){(r==null||r>a.length)&&(r=a.length);var o=new(a instanceof vr?vr:a instanceof Hu?Hu:Hr)(r-s);return o.set(a.subarray(s,r)),o},Bx=function(a,s,r){var o=a.length,u=!s||r,l=!r||r.i;r||(r={}),s||(s=new Hr(o*3));var d=function(be){var Se=s.length;if(be>Se){var je=new Hr(Math.max(Se*2,be));je.set(s),s=je}},h=r.f||0,p=r.p||0,m=r.b||0,y=r.l,w=r.d,j=r.m,g=r.n,L=o*8;do{if(!y){r.f=h=Fi(a,p,1);var N=Fi(a,p+1,3);if(p+=3,N)if(N==1)y=zx,w=Ix,j=9,g=5;else if(N==2){var D=Fi(a,p,31)+257,F=Fi(a,p+10,15)+4,B=D+Fi(a,p+5,31)+1;p+=14;for(var ce=new Hr(B),U=new Hr(19),q=0;q<F;++q)U[Zh[q]]=Fi(a,p+q*3,7);p+=F*3;var ie=Dh(U),se=(1<<ie)-1;if(!l&&p+B*(ie+7)>L)break;for(var I=Ns(U,ie,1),q=0;q<B;){var O=I[Fi(a,p,se)];p+=O&15;var A=O>>>4;if(A<16)ce[q++]=A;else{var Y=0,E=0;for(A==16?(E=3+Fi(a,p,3),p+=2,Y=ce[q-1]):A==17?(E=3+Fi(a,p,7),p+=3):A==18&&(E=11+Fi(a,p,127),p+=7);E--;)ce[q++]=Y}}var oe=ce.subarray(0,D),J=ce.subarray(D);j=Dh(oe),g=Dh(J),y=Ns(oe,j,1),w=Ns(J,g,1)}else throw"invalid block type";else{var A=Ep(p)+4,_=a[A-4]|a[A-3]<<8,T=A+_;if(T>o){if(l)throw"unexpected EOF";break}u&&d(m+_),s.set(a.subarray(A,T),m),r.b=m+=_,r.p=p=T*8;continue}if(p>L)throw"unexpected EOF"}u&&d(m+131072);for(var ae=(1<<j)-1,he=(1<<g)-1,fe=j+g+18;l||p+fe<L;){var Y=y[Ih(a,p)&ae],ge=Y>>>4;if(p+=Y&15,p>L)throw"unexpected EOF";if(!Y)throw"invalid length/literal";if(ge<256)s[m++]=ge;else if(ge==256){y=null;break}else{var P=ge-254;if(ge>264){var q=ge-257,C=ff[q];P=Fi(a,p,(1<<C)-1)+m1[q],p+=C}var G=w[Ih(a,p)&he],$=G>>>4;if(!G)throw"invalid distance";p+=G&15;var J=Rx[$];if($>3){var C=hf[$];J+=Ih(a,p)&(1<<C)-1,p+=C}if(p>L)throw"unexpected EOF";u&&d(m+131072);for(var ee=m+P;m<ee;m+=4)s[m]=s[m-J],s[m+1]=s[m+1-J],s[m+2]=s[m+2-J],s[m+3]=s[m+3-J];m=ee}}r.l=y,r.p=p,r.b=m,y&&(h=1,r.m=j,r.d=w,r.n=g)}while(!h);return m==s.length?s:b1(s,0,m)},Ks=function(a,s,r){r<<=s&7;var o=s/8>>0;a[o]|=r,a[o+1]|=r>>>8},Iu=function(a,s,r){r<<=s&7;var o=s/8>>0;a[o]|=r,a[o+1]|=r>>>8,a[o+2]|=r>>>16},Bh=function(a,s){for(var r=[],o=0;o<a.length;++o)a[o]&&r.push({s:o,f:a[o]});var u=r.length,l=r.slice();if(!u)return[new Hr(0),0];if(u==1){var d=new Hr(r[0].s+1);return d[r[0].s]=1,[d,1]}r.sort(function(B,ce){return B.f-ce.f}),r.push({s:-1,f:25001});var h=r[0],p=r[1],m=0,y=1,w=2;for(r[0]={s:-1,f:h.f+p.f,l:h,r:p};y!=u-1;)h=r[r[m].f<r[w].f?m++:w++],p=r[m!=y&&r[m].f<r[w].f?m++:w++],r[y++]={s:-1,f:h.f+p.f,l:h,r:p};for(var j=l[0].s,o=1;o<u;++o)l[o].s>j&&(j=l[o].s);var g=new vr(j+1),L=Kh(r[y-1],g,0);if(L>s){var o=0,N=0,A=L-s,_=1<<A;for(l.sort(function(ce,U){return g[U.s]-g[ce.s]||ce.f-U.f});o<u;++o){var T=l[o].s;if(g[T]>s)N+=_-(1<<L-g[T]),g[T]=s;else break}for(N>>>=A;N>0;){var D=l[o].s;g[D]<s?N-=1<<s-g[D]++-1:++o}for(;o>=0&&N;--o){var F=l[o].s;g[F]==s&&(--g[F],++N)}L=s}return[new Hr(g),L]},Kh=function(a,s,r){return a.s==-1?Math.max(Kh(a.l,s,r+1),Kh(a.r,s,r+1)):s[a.s]=r},b2=function(a){for(var s=a.length;s&&!a[--s];);for(var r=new vr(++s),o=0,u=a[0],l=1,d=function(p){r[o++]=p},h=1;h<=s;++h)if(a[h]==u&&h!=s)++l;else{if(!u&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(u),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(u);l=1,u=a[h]}return[r.subarray(0,o),s]},Bu=function(a,s){for(var r=0,o=0;o<s.length;++o)r+=a[o]*s[o];return r},ep=function(a,s,r){var o=r.length,u=Ep(s+2);a[u]=o&255,a[u+1]=o>>>8,a[u+2]=a[u]^255,a[u+3]=a[u+1]^255;for(var l=0;l<o;++l)a[u+l+4]=r[l];return(u+4+o)*8},x2=function(a,s,r,o,u,l,d,h,p,m,y){Ks(s,y++,r),++u[256];for(var w=Bh(u,15),j=w[0],g=w[1],L=Bh(l,15),N=L[0],A=L[1],_=b2(j),T=_[0],D=_[1],F=b2(N),B=F[0],ce=F[1],U=new vr(19),q=0;q<T.length;++q)U[T[q]&31]++;for(var q=0;q<B.length;++q)U[B[q]&31]++;for(var ie=Bh(U,7),se=ie[0],I=ie[1],O=19;O>4&&!se[Zh[O-1]];--O);var Y=m+5<<3,E=Bu(u,Qo)+Bu(l,Gu)+d,oe=Bu(u,j)+Bu(l,N)+d+14+3*O+Bu(U,se)+(2*U[16]+3*U[17]+7*U[18]);if(Y<=E&&Y<=oe)return ep(s,y,a.subarray(p,p+m));var J,ae,he,fe;if(Ks(s,y,1+(oe<E)),y+=2,oe<E){J=Ns(j,g,0),ae=j,he=Ns(N,A,0),fe=N;var ge=Ns(se,I,0);Ks(s,y,D-257),Ks(s,y+5,ce-1),Ks(s,y+10,O-4),y+=14;for(var q=0;q<O;++q)Ks(s,y+3*q,se[Zh[q]]);y+=3*O;for(var P=[T,B],C=0;C<2;++C)for(var G=P[C],q=0;q<G.length;++q){var $=G[q]&31;Ks(s,y,ge[$]),y+=se[$],$>15&&(Ks(s,y,G[q]>>>5&127),y+=G[q]>>>12)}}else J=Mx,ae=Qo,he=Dx,fe=Gu;for(var q=0;q<h;++q)if(o[q]>255){var $=o[q]>>>18&31;Iu(s,y,J[$+257]),y+=ae[$+257],$>7&&(Ks(s,y,o[q]>>>23&31),y+=ff[$]);var ee=o[q]&31;Iu(s,y,he[ee]),y+=fe[ee],ee>3&&(Iu(s,y,o[q]>>>5&8191),y+=hf[ee])}else Iu(s,y,J[o[q]]),y+=ae[o[q]];return Iu(s,y,J[256]),y+ae[256]},Px=new Hu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ux=function(a,s,r,o,u,l){var d=a.length,h=new Hr(o+d+5*(1+Math.floor(d/7e3))+u),p=h.subarray(o,h.length-u),m=0;if(!s||d<8)for(var y=0;y<=d;y+=65535){var w=y+65535;w<d?m=ep(p,m,a.subarray(y,w)):(p[y]=l,m=ep(p,m,a.subarray(y,d)))}else{for(var j=Px[s-1],g=j>>>13,L=j&8191,N=(1<<r)-1,A=new vr(32768),_=new vr(N+1),T=Math.ceil(r/3),D=2*T,F=function(M){return(a[M]^a[M+1]<<T^a[M+2]<<D)&N},B=new Hu(25e3),ce=new vr(288),U=new vr(32),q=0,ie=0,y=0,se=0,I=0,O=0;y<d;++y){var Y=F(y),E=y&32767,oe=_[Y];if(A[E]=oe,_[Y]=E,I<=y){var J=d-y;if((q>7e3||se>24576)&&J>423){m=x2(a,p,0,B,ce,U,ie,se,O,y-O,m),se=q=ie=0,O=y;for(var ae=0;ae<286;++ae)ce[ae]=0;for(var ae=0;ae<30;++ae)U[ae]=0}var he=2,fe=0,ge=L,P=E-oe&32767;if(J>2&&Y==F(y-P))for(var C=Math.min(g,J)-1,G=Math.min(32767,y),$=Math.min(258,J);P<=G&&--ge&&E!=oe;){if(a[y+he]==a[y+he-P]){for(var ee=0;ee<$&&a[y+ee]==a[y+ee-P];++ee);if(ee>he){if(he=ee,fe=P,ee>C)break;for(var be=Math.min(P,ee-2),Se=0,ae=0;ae<be;++ae){var je=y-P+ae+32768&32767,Ae=A[je],Ee=je-Ae+32768&32767;Ee>Se&&(Se=Ee,oe=je)}}}E=oe,oe=A[E],P+=E-oe+32768&32767}if(fe){B[se++]=268435456|Jh[he]<<18|g2[fe];var Re=Jh[he]&31,qe=g2[fe]&31;ie+=ff[Re]+hf[qe],++ce[257+Re],++U[qe],I=y+he,++q}else B[se++]=a[y],++ce[a[y]]}}m=x2(a,p,l,B,ce,U,ie,se,O,y-O,m)}return b1(h,0,o+Ep(m)+u)},Fx=function(){var a=1,s=0;return{p:function(r){for(var o=a,u=s,l=r.length,d=0;d!=l;){for(var h=Math.min(d+5552,l);d<h;++d)o+=r[d],u+=o;o%=65521,u%=65521}a=o,s=u},d:function(){return(a>>>8<<16|(s&255)<<8|s>>>8)+((a&255)<<23)*2}}},qx=function(a,s,r,o,u){return Ux(a,s.level==null?6:s.level,s.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):12+s.mem,r,o,!0)},Hx=function(a,s,r){for(;r;++s)a[s]=r,r>>>=8},Gx=function(a,s){var r=s.level,o=r==0?0:r<6?1:r==9?3:2;a[0]=120,a[1]=o<<6|(o?32-2*o:1)},Vx=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function tp(a,s){s===void 0&&(s={});var r=Fx();r.p(a);var o=qx(a,s,2,4);return Gx(o,s),Hx(o,o.length-4,r.d()),o}function Yx(a,s){return Bx((Vx(a),a.subarray(2,-4)),s)}var Et=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ph(){Et.console&&typeof Et.console.log=="function"&&Et.console.log.apply(Et.console,arguments)}var kn={log:Ph,warn:function(a){Et.console&&(typeof Et.console.warn=="function"?Et.console.warn.apply(Et.console,arguments):Ph.call(null,arguments))},error:function(a){Et.console&&(typeof Et.console.error=="function"?Et.console.error.apply(Et.console,arguments):Ph(a))}};function Uh(a,s,r){var o=new XMLHttpRequest;o.open("GET",a),o.responseType="blob",o.onload=function(){zl(o.response,s,r)},o.onerror=function(){kn.error("could not download file")},o.send()}function v2(a){var s=new XMLHttpRequest;s.open("HEAD",a,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function qd(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}}var Uu,np,zl=Et.saveAs||((typeof window>"u"?"undefined":gn(window))!=="object"||window!==Et?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(a,s,r){var o=Et.URL||Et.webkitURL,u=document.createElement("a");s=s||a.name||"download",u.download=s,u.rel="noopener",typeof a=="string"?(u.href=a,u.origin!==location.origin?v2(u.href)?Uh(a,s,r):qd(u,u.target="_blank"):qd(u)):(u.href=o.createObjectURL(a),setTimeout((function(){o.revokeObjectURL(u.href)}),4e4),setTimeout((function(){qd(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(a,s,r){if(s=s||a.name||"download",typeof a=="string")if(v2(a))Uh(a,s,r);else{var o=document.createElement("a");o.href=a,o.target="_blank",setTimeout((function(){qd(o)}))}else navigator.msSaveOrOpenBlob((function(u,l){return l===void 0?l={autoBom:!1}:gn(l)!=="object"&&(kn.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(a,r),s)}:function(a,s,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof a=="string")return Uh(a,s,r);var u=a.type==="application/octet-stream",l=/constructor/i.test(Et.HTMLElement)||Et.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||u&&l)&&(typeof FileReader>"u"?"undefined":gn(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var y=h.result;y=d?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=y:location=y,o=null},h.readAsDataURL(a)}else{var p=Et.URL||Et.webkitURL,m=p.createObjectURL(a);o?o.location=m:location.href=m,o=null,setTimeout((function(){p.revokeObjectURL(m)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function x1(a){var s;a=a||"",this.ok=!1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[a=(a=a.replace(/ /g,"")).toLowerCase()]||a;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],o=0;o<r.length;o++){var u=r[o].re,l=r[o].process,d=u.exec(a);d&&(s=l(d),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),p=this.g.toString(16),m=this.b.toString(16);return h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),"#"+h+p+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Fh(a,s){var r=a[0],o=a[1],u=a[2],l=a[3];r=rr(r,o,u,l,s[0],7,-680876936),l=rr(l,r,o,u,s[1],12,-389564586),u=rr(u,l,r,o,s[2],17,606105819),o=rr(o,u,l,r,s[3],22,-1044525330),r=rr(r,o,u,l,s[4],7,-176418897),l=rr(l,r,o,u,s[5],12,1200080426),u=rr(u,l,r,o,s[6],17,-1473231341),o=rr(o,u,l,r,s[7],22,-45705983),r=rr(r,o,u,l,s[8],7,1770035416),l=rr(l,r,o,u,s[9],12,-1958414417),u=rr(u,l,r,o,s[10],17,-42063),o=rr(o,u,l,r,s[11],22,-1990404162),r=rr(r,o,u,l,s[12],7,1804603682),l=rr(l,r,o,u,s[13],12,-40341101),u=rr(u,l,r,o,s[14],17,-1502002290),r=ir(r,o=rr(o,u,l,r,s[15],22,1236535329),u,l,s[1],5,-165796510),l=ir(l,r,o,u,s[6],9,-1069501632),u=ir(u,l,r,o,s[11],14,643717713),o=ir(o,u,l,r,s[0],20,-373897302),r=ir(r,o,u,l,s[5],5,-701558691),l=ir(l,r,o,u,s[10],9,38016083),u=ir(u,l,r,o,s[15],14,-660478335),o=ir(o,u,l,r,s[4],20,-405537848),r=ir(r,o,u,l,s[9],5,568446438),l=ir(l,r,o,u,s[14],9,-1019803690),u=ir(u,l,r,o,s[3],14,-187363961),o=ir(o,u,l,r,s[8],20,1163531501),r=ir(r,o,u,l,s[13],5,-1444681467),l=ir(l,r,o,u,s[2],9,-51403784),u=ir(u,l,r,o,s[7],14,1735328473),r=sr(r,o=ir(o,u,l,r,s[12],20,-1926607734),u,l,s[5],4,-378558),l=sr(l,r,o,u,s[8],11,-2022574463),u=sr(u,l,r,o,s[11],16,1839030562),o=sr(o,u,l,r,s[14],23,-35309556),r=sr(r,o,u,l,s[1],4,-1530992060),l=sr(l,r,o,u,s[4],11,1272893353),u=sr(u,l,r,o,s[7],16,-155497632),o=sr(o,u,l,r,s[10],23,-1094730640),r=sr(r,o,u,l,s[13],4,681279174),l=sr(l,r,o,u,s[0],11,-358537222),u=sr(u,l,r,o,s[3],16,-722521979),o=sr(o,u,l,r,s[6],23,76029189),r=sr(r,o,u,l,s[9],4,-640364487),l=sr(l,r,o,u,s[12],11,-421815835),u=sr(u,l,r,o,s[15],16,530742520),r=or(r,o=sr(o,u,l,r,s[2],23,-995338651),u,l,s[0],6,-198630844),l=or(l,r,o,u,s[7],10,1126891415),u=or(u,l,r,o,s[14],15,-1416354905),o=or(o,u,l,r,s[5],21,-57434055),r=or(r,o,u,l,s[12],6,1700485571),l=or(l,r,o,u,s[3],10,-1894986606),u=or(u,l,r,o,s[10],15,-1051523),o=or(o,u,l,r,s[1],21,-2054922799),r=or(r,o,u,l,s[8],6,1873313359),l=or(l,r,o,u,s[15],10,-30611744),u=or(u,l,r,o,s[6],15,-1560198380),o=or(o,u,l,r,s[13],21,1309151649),r=or(r,o,u,l,s[4],6,-145523070),l=or(l,r,o,u,s[11],10,-1120210379),u=or(u,l,r,o,s[2],15,718787259),o=or(o,u,l,r,s[9],21,-343485551),a[0]=$o(r,a[0]),a[1]=$o(o,a[1]),a[2]=$o(u,a[2]),a[3]=$o(l,a[3])}function pf(a,s,r,o,u,l){return s=$o($o(s,a),$o(o,l)),$o(s<<u|s>>>32-u,r)}function rr(a,s,r,o,u,l,d){return pf(s&r|~s&o,a,s,u,l,d)}function ir(a,s,r,o,u,l,d){return pf(s&o|r&~o,a,s,u,l,d)}function sr(a,s,r,o,u,l,d){return pf(s^r^o,a,s,u,l,d)}function or(a,s,r,o,u,l,d){return pf(r^(s|~o),a,s,u,l,d)}function v1(a){var s,r=a.length,o=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=a.length;s+=64)Fh(o,Wx(a.substring(s-64,s)));a=a.substring(s-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<a.length;s++)u[s>>2]|=a.charCodeAt(s)<<(s%4<<3);if(u[s>>2]|=128<<(s%4<<3),s>55)for(Fh(o,u),s=0;s<16;s++)u[s]=0;return u[14]=8*r,Fh(o,u),o}function Wx(a){var s,r=[];for(s=0;s<64;s+=4)r[s>>2]=a.charCodeAt(s)+(a.charCodeAt(s+1)<<8)+(a.charCodeAt(s+2)<<16)+(a.charCodeAt(s+3)<<24);return r}Uu=Et.atob.bind(Et),np=Et.btoa.bind(Et);var y2="0123456789abcdef".split("");function $x(a){for(var s="",r=0;r<4;r++)s+=y2[a>>8*r+4&15]+y2[a>>8*r&15];return s}function Xx(a){return String.fromCharCode((255&a)>>0,(65280&a)>>8,(16711680&a)>>16,(4278190080&a)>>24)}function ap(a){return v1(a).map(Xx).join("")}var Zx=(function(a){for(var s=0;s<a.length;s++)a[s]=$x(a[s]);return a.join("")})(v1("hello"))!="5d41402abc4b2a76b9719d911017c592";function $o(a,s){if(Zx){var r=(65535&a)+(65535&s);return(a>>16)+(s>>16)+(r>>16)<<16|65535&r}return a+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rp(a,s){var r,o,u,l;if(a!==r){for(var d=(u=a,l=1+(256/a.length>>0),new Array(l+1).join(u)),h=[],p=0;p<256;p++)h[p]=p;var m=0;for(p=0;p<256;p++){var y=h[p];m=(m+y+d.charCodeAt(p))%256,h[p]=h[m],h[m]=y}r=a,o=h}else h=o;var w=s.length,j=0,g=0,L="";for(p=0;p<w;p++)g=(g+(y=h[j=(j+1)%256]))%256,h[j]=h[g],h[g]=y,d=h[(h[j]+h[g])%256],L+=String.fromCharCode(s.charCodeAt(p)^d);return L}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var w2={print:4,modify:8,copy:16,"annot-forms":32};function Dc(a,s,r,o){this.v=1,this.r=2;var u=192;a.forEach((function(h){if(w2.perm!==void 0)throw new Error("Invalid permission: "+h);u+=w2[h]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(s+this.padding).substr(0,32),d=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^u)),this.encryptionKey=ap(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=rp(this.encryptionKey,this.padding)}function Ic(a){if(/[^\u0000-\u00ff]/.test(a))throw new Error("Invalid PDF Name Object: "+a+", Only accept ASCII characters.");for(var s="",r=a.length,o=0;o<r;o++){var u=a.charCodeAt(o);u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?s+="#"+("0"+u.toString(16)).slice(-2):s+=a[o]}return s}function N2(a){if(gn(a)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(r,o,u){if(u=u||!1,typeof r!="string"||typeof o!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(r)||(s[r]={});var l=Math.random().toString(35);return s[r][l]=[o,!!u],l},this.unsubscribe=function(r){for(var o in s)if(s[o][r])return delete s[o][r],Object.keys(s[o]).length===0&&delete s[o],!0;return!1},this.publish=function(r){if(s.hasOwnProperty(r)){var o=Array.prototype.slice.call(arguments,1),u=[];for(var l in s[r]){var d=s[r][l];try{d[0].apply(a,o)}catch(h){Et.console&&kn.error("jsPDF PubSub Error",h.message,h)}d[1]&&u.push(l)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function nf(a){if(!(this instanceof nf))return new nf(a);var s="opacity,stroke-opacity".split(",");for(var r in a)a.hasOwnProperty(r)&&s.indexOf(r)>=0&&(this[r]=a[r]);this.id="",this.objectNumber=-1}function y1(a,s){this.gState=a,this.matrix=s,this.id="",this.objectNumber=-1}function Dl(a,s,r,o,u){if(!(this instanceof Dl))return new Dl(a,s,r,o,u);this.type=a==="axial"?2:3,this.coords=s,this.colors=r,y1.call(this,o,u)}function Bc(a,s,r,o,u){if(!(this instanceof Bc))return new Bc(a,s,r,o,u);this.boundingBox=a,this.xStep=s,this.yStep=r,this.stream="",this.cloneIndex=0,y1.call(this,o,u)}function Ct(a){var s,r=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],u=arguments[2],l=arguments[3],d=[],h=1,p=16,m="S",y=null;gn(a=a||{})==="object"&&(r=a.orientation,o=a.unit||o,u=a.format||u,l=a.compress||a.compressPdf||l,(y=a.encryption||null)!==null&&(y.userPassword=y.userPassword||"",y.ownerPassword=y.ownerPassword||"",y.userPermissions=y.userPermissions||[]),h=typeof a.userUnit=="number"?Math.abs(a.userUnit):1,a.precision!==void 0&&(s=a.precision),a.floatPrecision!==void 0&&(p=a.floatPrecision),m=a.defaultPathOperation||"S"),d=a.filters||(l===!0?["FlateEncode"]:d),o=o||"mm",r=(""+(r||"P")).toLowerCase();var w=a.putOnlyUsedFonts||!1,j={},g={internal:{},__private__:{}};g.__private__.PubSub=N2;var L="1.3",N=g.__private__.getPdfVersion=function(){return L};g.__private__.setPdfVersion=function(S){L=S};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return A};var _=g.__private__.getPageFormat=function(S){return A[S]};u=u||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},D=T.COMPAT;function F(){this.saveGraphicsState(),W(new Nt(rt,0,0,-rt,0,ts()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),m="n",D=T.ADVANCED}function B(){this.restoreGraphicsState(),m="S",D=T.COMPAT}var ce=g.__private__.combineFontStyleAndFontWeight=function(S,V){if(S=="bold"&&V=="normal"||S=="bold"&&V==400||S=="normal"&&V=="italic"||S=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(S=V==400||V==="normal"?S==="italic"?"italic":"normal":V!=700&&V!=="bold"||S!=="normal"?(V==700?"bold":V)+""+S:"bold"),S};g.advancedAPI=function(S){var V=D===T.COMPAT;return V&&F.call(this),typeof S!="function"||(S(this),V&&B.call(this)),this},g.compatAPI=function(S){var V=D===T.ADVANCED;return V&&B.call(this),typeof S!="function"||(S(this),V&&F.call(this)),this},g.isAdvancedAPI=function(){return D===T.ADVANCED};var U,q=function(S){if(D!==T.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ie=g.roundToPrecision=g.__private__.roundToPrecision=function(S,V){var pe=s||V;if(isNaN(S)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(pe).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof p=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(S,p)}:p==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(S,16)};var se=g.f2=g.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return ie(S,2)},I=g.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return ie(S,3)},O=g.scale=g.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return D===T.COMPAT?S*rt:D===T.ADVANCED?S:void 0},Y=function(S){return D===T.COMPAT?ts()-S:D===T.ADVANCED?S:void 0},E=function(S){return O(Y(S))};g.__private__.setPrecision=g.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(s=parseInt(S,10))};var oe,J="00000000000000000000000000000000",ae=g.__private__.getFileId=function(){return J},he=g.__private__.setFileId=function(S){return J=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():J.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),y!==null&&(Tn=new Dc(y.userPermissions,y.userPassword,y.ownerPassword,J)),J};g.setFileId=function(S){return he(S),this},g.getFileId=function(){return ae()};var fe=g.__private__.convertDateToPDFDate=function(S){var V=S.getTimezoneOffset(),pe=V<0?"+":"-",ye=Math.floor(Math.abs(V/60)),ze=Math.abs(V%60),Ye=[pe,$(ye),"'",$(ze),"'"].join("");return["D:",S.getFullYear(),$(S.getMonth()+1),$(S.getDate()),$(S.getHours()),$(S.getMinutes()),$(S.getSeconds()),Ye].join("")},ge=g.__private__.convertPDFDateToDate=function(S){var V=parseInt(S.substr(2,4),10),pe=parseInt(S.substr(6,2),10)-1,ye=parseInt(S.substr(8,2),10),ze=parseInt(S.substr(10,2),10),Ye=parseInt(S.substr(12,2),10),nt=parseInt(S.substr(14,2),10);return new Date(V,pe,ye,ze,Ye,nt,0)},P=g.__private__.setCreationDate=function(S){var V;if(S===void 0&&(S=new Date),S instanceof Date)V=fe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=S}return oe=V},C=g.__private__.getCreationDate=function(S){var V=oe;return S==="jsDate"&&(V=ge(oe)),V};g.setCreationDate=function(S){return P(S),this},g.getCreationDate=function(S){return C(S)};var G,$=g.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ee=g.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},be=0,Se=[],je=[],Ae=0,Ee=[],Re=[],qe=!1,Xe=je,M=function(){be=0,Ae=0,je=[],Se=[],Ee=[],ca=Ln(),ln=Ln()};g.__private__.setCustomOutputDestination=function(S){qe=!0,Xe=S};var me=function(S){qe||(Xe=S)};g.__private__.resetCustomOutputDestination=function(){qe=!1,Xe=je};var W=g.__private__.out=function(S){return S=S.toString(),Ae+=S.length+1,Xe.push(S),Xe},le=g.__private__.write=function(S){return W(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},te=g.__private__.getArrayBuffer=function(S){for(var V=S.length,pe=new ArrayBuffer(V),ye=new Uint8Array(pe);V--;)ye[V]=S.charCodeAt(V);return pe},de=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return de};var ke=a.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(S){return ke=D===T.ADVANCED?S/rt:S,this};var Le,xe=g.__private__.getFontSize=g.getFontSize=function(){return D===T.COMPAT?ke:ke*rt},Oe=a.R2L||!1;g.__private__.setR2L=g.setR2L=function(S){return Oe=S,this},g.__private__.getR2L=g.getR2L=function(){return Oe};var De,Ge=g.__private__.setZoomMode=function(S){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))Le=S;else if(isNaN(S)){if(V.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');Le=S}else Le=parseInt(S,10)};g.__private__.getZoomMode=function(){return Le};var at,ct=g.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');De=S};g.__private__.getPageMode=function(){return De};var dt=g.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');at=S};g.__private__.getLayoutMode=function(){return at},g.__private__.setDisplayMode=g.setDisplayMode=function(S,V,pe){return Ge(S),dt(V),ct(pe),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(S){if(Object.keys(ft).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[S]},g.__private__.getDocumentProperties=function(){return ft},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(S){for(var V in ft)ft.hasOwnProperty(V)&&S[V]&&(ft[V]=S[V]);return this},g.__private__.setDocumentProperty=function(S,V){if(Object.keys(ft).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[S]=V};var Lt,rt,Cn,ht,an,zt={},St={},Ba=[],Ht={},lr={},Tt={},In={},Zn=null,Gt=0,_t=[],qt=new N2(g),Si=a.hotfixes||[],Jn={},Wa={},Aa=[],Nt=function S(V,pe,ye,ze,Ye,nt){if(!(this instanceof S))return new S(V,pe,ye,ze,Ye,nt);isNaN(V)&&(V=1),isNaN(pe)&&(pe=0),isNaN(ye)&&(ye=0),isNaN(ze)&&(ze=1),isNaN(Ye)&&(Ye=0),isNaN(nt)&&(nt=0),this._matrix=[V,pe,ye,ze,Ye,nt]};Object.defineProperty(Nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Nt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(S)},Nt.prototype.multiply=function(S){var V=S.sx*this.sx+S.shy*this.shx,pe=S.sx*this.shy+S.shy*this.sy,ye=S.shx*this.sx+S.sy*this.shx,ze=S.shx*this.shy+S.sy*this.sy,Ye=S.tx*this.sx+S.ty*this.shx+this.tx,nt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Nt(V,pe,ye,ze,Ye,nt)},Nt.prototype.decompose=function(){var S=this.sx,V=this.shy,pe=this.shx,ye=this.sy,ze=this.tx,Ye=this.ty,nt=Math.sqrt(S*S+V*V),ut=(S/=nt)*pe+(V/=nt)*ye;pe-=S*ut,ye-=V*ut;var vt=Math.sqrt(pe*pe+ye*ye);return ut/=vt,S*(ye/=vt)<V*(pe/=vt)&&(S=-S,V=-V,ut=-ut,nt=-nt),{scale:new Nt(nt,0,0,vt,0,0),translate:new Nt(1,0,0,1,ze,Ye),rotate:new Nt(S,V,-V,S,0,0),skew:new Nt(1,0,ut,1,0,0)}},Nt.prototype.toString=function(S){return this.join(" ")},Nt.prototype.inversed=function(){var S=this.sx,V=this.shy,pe=this.shx,ye=this.sy,ze=this.tx,Ye=this.ty,nt=1/(S*ye-V*pe),ut=ye*nt,vt=-V*nt,Ot=-pe*nt,Mt=S*nt;return new Nt(ut,vt,Ot,Mt,-ut*ze-Ot*Ye,-vt*ze-Mt*Ye)},Nt.prototype.applyToPoint=function(S){var V=S.x*this.sx+S.y*this.shx+this.tx,pe=S.x*this.shy+S.y*this.sy+this.ty;return new Ts(V,pe)},Nt.prototype.applyToRectangle=function(S){var V=this.applyToPoint(S),pe=this.applyToPoint(new Ts(S.x+S.w,S.y+S.h));return new ml(V.x,V.y,pe.x-V.x,pe.y-V.y)},Nt.prototype.clone=function(){var S=this.sx,V=this.shy,pe=this.shx,ye=this.sy,ze=this.tx,Ye=this.ty;return new Nt(S,V,pe,ye,ze,Ye)},g.Matrix=Nt;var $a=g.matrixMult=function(S,V){return V.multiply(S)},cr=new Nt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=cr;var la=function(S,V){if(!lr[S]){var pe=(V instanceof Dl?"Sh":"P")+(Object.keys(Ht).length+1).toString(10);V.id=pe,lr[S]=pe,Ht[pe]=V,qt.publish("addPattern",V)}};g.ShadingPattern=Dl,g.TilingPattern=Bc,g.addShadingPattern=function(S,V){return q("addShadingPattern()"),la(S,V),this},g.beginTilingPattern=function(S){q("beginTilingPattern()"),Jl(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},g.endTilingPattern=function(S,V){q("endTilingPattern()"),V.stream=Re[G].join(`
`),la(S,V),qt.publish("endTilingPattern",V),Aa.pop().restore()};var dn=g.__private__.newObject=function(){var S=Ln();return xa(S,!0),S},Ln=g.__private__.newObjectDeferred=function(){return be++,Se[be]=function(){return Ae},be},xa=function(S,V){return V=typeof V=="boolean"&&V,Se[S]=Ae,V&&W(S+" 0 obj"),S},Yr=g.__private__.newAdditionalObject=function(){var S={objId:Ln(),content:""};return Ee.push(S),S},ca=Ln(),ln=Ln(),bn=g.__private__.decodeColorString=function(S){var V=S.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var pe=parseFloat(V[0]);V=[pe,pe,pe,"r"]}for(var ye="#",ze=0;ze<3;ze++)ye+=("0"+Math.floor(255*parseFloat(V[ze])).toString(16)).slice(-2);return ye},ua=g.__private__.encodeColorString=function(S){var V;typeof S=="string"&&(S={ch1:S});var pe=S.ch1,ye=S.ch2,ze=S.ch3,Ye=S.ch4,nt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var ut=new x1(pe);if(ut.ok)pe=ut.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var vt=parseInt(pe.substr(1),16);pe=vt>>16&255,ye=vt>>8&255,ze=255&vt}if(ye===void 0||Ye===void 0&&pe===ye&&ye===ze)if(typeof pe=="string")V=pe+" "+nt[0];else switch(S.precision){case 2:V=se(pe/255)+" "+nt[0];break;case 3:default:V=I(pe/255)+" "+nt[0]}else if(Ye===void 0||gn(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return V=["1.","1.","1.",nt[1]].join(" ");if(typeof pe=="string")V=[pe,ye,ze,nt[1]].join(" ");else switch(S.precision){case 2:V=[se(pe/255),se(ye/255),se(ze/255),nt[1]].join(" ");break;default:case 3:V=[I(pe/255),I(ye/255),I(ze/255),nt[1]].join(" ")}}else if(typeof pe=="string")V=[pe,ye,ze,Ye,nt[2]].join(" ");else switch(S.precision){case 2:V=[se(pe),se(ye),se(ze),se(Ye),nt[2]].join(" ");break;case 3:default:V=[I(pe),I(ye),I(ze),I(Ye),nt[2]].join(" ")}return V},fn=g.__private__.getFilters=function(){return d},Xa=g.__private__.putStream=function(S){var V=(S=S||{}).data||"",pe=S.filters||fn(),ye=S.alreadyAppliedFilters||[],ze=S.addLength1||!1,Ye=V.length,nt=S.objectId,ut=function(va){return va};if(y!==null&&nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");y!==null&&(ut=Tn.encryptor(nt,0));var vt={};pe===!0&&(pe=["FlateEncode"]);var Ot=S.additionalKeyValues||[],Mt=(vt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(V,pe):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(vt.data.length!==0&&(Ot.push({key:"Length",value:vt.data.length}),ze===!0&&Ot.push({key:"Length1",value:Ye})),Mt.length!=0)if(Mt.split("/").length-1==1)Ot.push({key:"Filter",value:Mt});else{Ot.push({key:"Filter",value:"["+Mt+"]"});for(var Xt=0;Xt<Ot.length;Xt+=1)if(Ot[Xt].key==="DecodeParms"){for(var On=[],Rn=0;Rn<vt.reverseChain.split("/").length-1;Rn+=1)On.push("null");On.push(Ot[Xt].value),Ot[Xt].value="["+On.join(" ")+"]"}}W("<<");for(var Vn=0;Vn<Ot.length;Vn++)W("/"+Ot[Vn].key+" "+Ot[Vn].value);W(">>"),vt.data.length!==0&&(W("stream"),W(ut(vt.data)),W("endstream"))},yr=g.__private__.putPage=function(S){var V=S.number,pe=S.data,ye=S.objId,ze=S.contentsObjId;xa(ye,!0),W("<</Type /Page"),W("/Parent "+S.rootDictionaryObjId+" 0 R"),W("/Resources "+S.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(U(S.mediaBox.bottomLeftX))+" "+parseFloat(U(S.mediaBox.bottomLeftY))+" "+U(S.mediaBox.topRightX)+" "+U(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&W("/CropBox ["+U(S.cropBox.bottomLeftX)+" "+U(S.cropBox.bottomLeftY)+" "+U(S.cropBox.topRightX)+" "+U(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&W("/BleedBox ["+U(S.bleedBox.bottomLeftX)+" "+U(S.bleedBox.bottomLeftY)+" "+U(S.bleedBox.topRightX)+" "+U(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&W("/TrimBox ["+U(S.trimBox.bottomLeftX)+" "+U(S.trimBox.bottomLeftY)+" "+U(S.trimBox.topRightX)+" "+U(S.trimBox.topRightY)+"]"),S.artBox!==null&&W("/ArtBox ["+U(S.artBox.bottomLeftX)+" "+U(S.artBox.bottomLeftY)+" "+U(S.artBox.topRightX)+" "+U(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&W("/UserUnit "+S.userUnit),qt.publish("putPage",{objId:ye,pageContext:_t[V],pageNumber:V,page:pe}),W("/Contents "+ze+" 0 R"),W(">>"),W("endobj");var Ye=pe.join(`
`);return D===T.ADVANCED&&(Ye+=`
Q`),xa(ze,!0),Xa({data:Ye,filters:fn(),objectId:ze}),W("endobj"),ye},Wr=g.__private__.putPages=function(){var S,V,pe=[];for(S=1;S<=Gt;S++)_t[S].objId=Ln(),_t[S].contentsObjId=Ln();for(S=1;S<=Gt;S++)pe.push(yr({number:S,data:Re[S],objId:_t[S].objId,contentsObjId:_t[S].contentsObjId,mediaBox:_t[S].mediaBox,cropBox:_t[S].cropBox,bleedBox:_t[S].bleedBox,trimBox:_t[S].trimBox,artBox:_t[S].artBox,userUnit:_t[S].userUnit,rootDictionaryObjId:ca,resourceDictionaryObjId:ln}));xa(ca,!0),W("<</Type /Pages");var ye="/Kids [";for(V=0;V<Gt;V++)ye+=pe[V]+" 0 R ";W(ye+"]"),W("/Count "+Gt),W(">>"),W("endobj"),qt.publish("postPutPages")},ur=function(S){qt.publish("putFont",{font:S,out:W,newObject:dn,putStream:Xa}),S.isAlreadyPutted!==!0&&(S.objectNumber=dn(),W("<<"),W("/Type /Font"),W("/BaseFont /"+Ic(S.postScriptName)),W("/Subtype /Type1"),typeof S.encoding=="string"&&W("/Encoding /"+S.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},Za=function(){for(var S in zt)zt.hasOwnProperty(S)&&(w===!1||w===!0&&j.hasOwnProperty(S))&&ur(zt[S])},Ja=function(S){S.objectNumber=dn();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[U(S.x),U(S.y),U(S.x+S.width),U(S.y+S.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var pe=S.pages[1].join(`
`);Xa({data:pe,additionalKeyValues:V,objectId:S.objectNumber}),W("endobj")},tt=function(){for(var S in Jn)Jn.hasOwnProperty(S)&&Ja(Jn[S])},st=function(S,V){var pe,ye=[],ze=1/(V-1);for(pe=0;pe<1;pe+=ze)ye.push(pe);if(ye.push(1),S[0].offset!=0){var Ye={offset:0,color:S[0].color};S.unshift(Ye)}if(S[S.length-1].offset!=1){var nt={offset:1,color:S[S.length-1].color};S.push(nt)}for(var ut="",vt=0,Ot=0;Ot<ye.length;Ot++){for(pe=ye[Ot];pe>S[vt+1].offset;)vt++;var Mt=S[vt].offset,Xt=(pe-Mt)/(S[vt+1].offset-Mt),On=S[vt].color,Rn=S[vt+1].color;ut+=ee(Math.round((1-Xt)*On[0]+Xt*Rn[0]).toString(16))+ee(Math.round((1-Xt)*On[1]+Xt*Rn[1]).toString(16))+ee(Math.round((1-Xt)*On[2]+Xt*Rn[2]).toString(16))}return ut.trim()},en=function(S,V){V||(V=21);var pe=dn(),ye=st(S.colors,V),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+V+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xa({data:ye,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),W("endobj"),S.objectNumber=dn(),W("<< /ShadingType "+S.type),W("/ColorSpace /DeviceRGB");var Ye="/Coords ["+U(parseFloat(S.coords[0]))+" "+U(parseFloat(S.coords[1]))+" ";S.type===2?Ye+=U(parseFloat(S.coords[2]))+" "+U(parseFloat(S.coords[3])):Ye+=U(parseFloat(S.coords[2]))+" "+U(parseFloat(S.coords[3]))+" "+U(parseFloat(S.coords[4]))+" "+U(parseFloat(S.coords[5])),W(Ye+="]"),S.matrix&&W("/Matrix ["+S.matrix.toString()+"]"),W("/Function "+pe+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Pt=function(S,V){var pe=Ln(),ye=dn();V.push({resourcesOid:pe,objectOid:ye}),S.objectNumber=ye;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+S.boundingBox.map(U).join(" ")+"]"}),ze.push({key:"XStep",value:U(S.xStep)}),ze.push({key:"YStep",value:U(S.yStep)}),ze.push({key:"Resources",value:pe+" 0 R"}),S.matrix&&ze.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Xa({data:S.stream,additionalKeyValues:ze,objectId:S.objectNumber}),W("endobj")},nn=function(S){var V;for(V in Ht)Ht.hasOwnProperty(V)&&(Ht[V]instanceof Dl?en(Ht[V]):Ht[V]instanceof Bc&&Pt(Ht[V],S))},ka=function(S){for(var V in S.objectNumber=dn(),W("<<"),S)switch(V){case"opacity":W("/ca "+se(S[V]));break;case"stroke-opacity":W("/CA "+se(S[V]))}W(">>"),W("endobj")},Sn=function(){var S;for(S in Tt)Tt.hasOwnProperty(S)&&ka(Tt[S])},Qn=function(){for(var S in W("/XObject <<"),Jn)Jn.hasOwnProperty(S)&&Jn[S].objectNumber>=0&&W("/"+S+" "+Jn[S].objectNumber+" 0 R");qt.publish("putXobjectDict"),W(">>")},Jc=function(){Tn.oid=dn(),W("<<"),W("/Filter /Standard"),W("/V "+Tn.v),W("/R "+Tn.r),W("/U <"+Tn.toHexString(Tn.U)+">"),W("/O <"+Tn.toHexString(Tn.O)+">"),W("/P "+Tn.P),W(">>"),W("endobj")},al=function(){for(var S in W("/Font <<"),zt)zt.hasOwnProperty(S)&&(w===!1||w===!0&&j.hasOwnProperty(S))&&W("/"+S+" "+zt[S].objectNumber+" 0 R");W(">>")},Hl=function(){if(Object.keys(Ht).length>0){for(var S in W("/Shading <<"),Ht)Ht.hasOwnProperty(S)&&Ht[S]instanceof Dl&&Ht[S].objectNumber>=0&&W("/"+S+" "+Ht[S].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),W(">>")}},io=function(S){if(Object.keys(Ht).length>0){for(var V in W("/Pattern <<"),Ht)Ht.hasOwnProperty(V)&&Ht[V]instanceof g.TilingPattern&&Ht[V].objectNumber>=0&&Ht[V].objectNumber<S&&W("/"+V+" "+Ht[V].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),W(">>")}},so=function(){if(Object.keys(Tt).length>0){var S;for(S in W("/ExtGState <<"),Tt)Tt.hasOwnProperty(S)&&Tt[S].objectNumber>=0&&W("/"+S+" "+Tt[S].objectNumber+" 0 R");qt.publish("putGStateDict"),W(">>")}},En=function(S){xa(S.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),al(),Hl(),io(S.objectOid),so(),Qn(),W(">>"),W("endobj")},wr=function(){var S=[];Za(),Sn(),tt(),nn(S),qt.publish("putResources"),S.forEach(En),En({resourcesOid:ln,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources")},Pa=function(){qt.publish("putAdditionalObjects");for(var S=0;S<Ee.length;S++){var V=Ee[S];xa(V.objId,!0),W(V.content),W("endobj")}qt.publish("postPutAdditionalObjects")},rl=function(S){St[S.fontName]=St[S.fontName]||{},St[S.fontName][S.fontStyle]=S.id},il=function(S,V,pe,ye,ze){var Ye={id:"F"+(Object.keys(zt).length+1).toString(10),postScriptName:S,fontName:V,fontStyle:pe,encoding:ye,isStandardFont:ze||!1,metadata:{}};return qt.publish("addFont",{font:Ye,instance:this}),zt[Ye.id]=Ye,rl(Ye),Ye.id},sl=function(S){for(var V=0,pe=de.length;V<pe;V++){var ye=il.call(this,S[V][0],S[V][1],S[V][2],de[V][3],!0);w===!1&&(j[ye]=!0);var ze=S[V][0].split("-");rl({id:ye,fontName:ze[0],fontStyle:ze[1]||""})}qt.publish("addFonts",{fonts:zt,dictionary:St})},Nr=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(ye){var V=ye.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var pe="Error in function "+V.split(`
`)[0].split("<")[0]+": "+ye.message;if(!Et.console)throw new Error(pe);Et.console.error(pe,ye),Et.alert&&alert(pe)}},S.foo.bar=S,S.foo},ji=function(S,V){var pe,ye,ze,Ye,nt,ut,vt,Ot,Mt;if(ze=(V=V||{}).sourceEncoding||"Unicode",nt=V.outputEncoding,(V.autoencode||nt)&&zt[Lt].metadata&&zt[Lt].metadata[ze]&&zt[Lt].metadata[ze].encoding&&(Ye=zt[Lt].metadata[ze].encoding,!nt&&zt[Lt].encoding&&(nt=zt[Lt].encoding),!nt&&Ye.codePages&&(nt=Ye.codePages[0]),typeof nt=="string"&&(nt=Ye[nt]),nt)){for(vt=!1,ut=[],pe=0,ye=S.length;pe<ye;pe++)(Ot=nt[S.charCodeAt(pe)])?ut.push(String.fromCharCode(Ot)):ut.push(S[pe]),ut[pe].charCodeAt(0)>>8&&(vt=!0);S=ut.join("")}for(pe=S.length;vt===void 0&&pe!==0;)S.charCodeAt(pe-1)>>8&&(vt=!0),pe--;if(!vt)return S;for(ut=V.noBOM?[]:[254,255],pe=0,ye=S.length;pe<ye;pe++){if((Mt=(Ot=S.charCodeAt(pe))>>8)>>8)throw new Error("Character at position "+pe+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ut.push(Mt),ut.push(Ot-(Mt<<8))}return String.fromCharCode.apply(void 0,ut)},Qa=g.__private__.pdfEscape=g.pdfEscape=function(S,V){return ji(S,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ca=g.__private__.beginPage=function(S){Re[++Gt]=[],_t[Gt]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},lo(Gt),me(Re[G])},oo=function(S,V){var pe,ye,ze;switch(r=V||r,typeof S=="string"&&(pe=_(S.toLowerCase()),Array.isArray(pe)&&(ye=pe[0],ze=pe[1])),Array.isArray(S)&&(ye=S[0]*rt,ze=S[1]*rt),isNaN(ye)&&(ye=u[0],ze=u[1]),(ye>14400||ze>14400)&&(kn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),ze=Math.min(14400,ze)),u=[ye,ze],r.substr(0,1)){case"l":ze>ye&&(u=[ze,ye]);break;case"p":ye>ze&&(u=[ze,ye])}Ca(u),Ls(da),W(Jr),hl!==0&&W(hl+" J"),pl!==0&&W(pl+" j"),qt.publish("addPage",{pageNumber:Gt})},Gl=function(S){S>0&&S<=Gt&&(Re.splice(S,1),_t.splice(S,1),Gt--,G>Gt&&(G=Gt),this.setPage(G))},lo=function(S){S>0&&S<=Gt&&(G=S)},Wi=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Re.length-1},ol=function(S,V,pe){var ye,ze=void 0;return pe=pe||{},S=S!==void 0?S:zt[Lt].fontName,V=V!==void 0?V:zt[Lt].fontStyle,ye=S.toLowerCase(),St[ye]!==void 0&&St[ye][V]!==void 0?ze=St[ye][V]:St[S]!==void 0&&St[S][V]!==void 0?ze=St[S][V]:pe.disableWarning===!1&&kn.warn("Unable to look up font label for font '"+S+"', '"+V+"'. Refer to getFontList() for available fonts."),ze||pe.noFallback||(ze=St.times[V])==null&&(ze=St.times.normal),ze},Vl=g.__private__.putInfo=function(){var S=dn(),V=function(ye){return ye};for(var pe in y!==null&&(V=Tn.encryptor(S,0)),W("<<"),W("/Producer ("+Qa(V("jsPDF "+Ct.version))+")"),ft)ft.hasOwnProperty(pe)&&ft[pe]&&W("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+Qa(V(ft[pe]))+")");W("/CreationDate ("+Qa(V(oe))+")"),W(">>"),W("endobj")},li=g.__private__.putCatalog=function(S){var V=(S=S||{}).rootDictionaryObjId||ca;switch(dn(),W("<<"),W("/Type /Catalog"),W("/Pages "+V+" 0 R"),Le||(Le="fullwidth"),Le){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+Le;pe.substr(pe.length-1)==="%"&&(Le=parseInt(Le)/100),typeof Le=="number"&&W("/OpenAction [3 0 R /XYZ null null "+se(Le)+"]")}switch(at||(at="continuous"),at){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}De&&W("/PageMode /"+De),qt.publish("putCatalog"),W(">>"),W("endobj")},Qc=g.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(be+1)),W("/Root "+be+" 0 R"),W("/Info "+(be-1)+" 0 R"),y!==null&&W("/Encrypt "+Tn.oid+" 0 R"),W("/ID [ <"+J+"> <"+J+"> ]"),W(">>")},Yl=g.__private__.putHeader=function(){W("%PDF-"+L),W("%")},Wl=g.__private__.putXRef=function(){var S="0000000000";W("xref"),W("0 "+(be+1)),W("0000000000 65535 f ");for(var V=1;V<=be;V++)typeof Se[V]=="function"?W((S+Se[V]()).slice(-10)+" 00000 n "):Se[V]!==void 0?W((S+Se[V]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},$r=g.__private__.buildDocument=function(){M(),me(je),qt.publish("buildDocument"),Yl(),Wr(),Pa(),wr(),y!==null&&Jc(),Vl(),li();var S=Ae;return Wl(),Qc(),W("startxref"),W(""+S),W("%%EOF"),me(Re[G]),je.join(`
`)},co=g.__private__.getBlob=function(S){return new Blob([te(S)],{type:"application/pdf"})},uo=g.output=g.__private__.output=Nr((function(S,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",S){case void 0:return $r();case"save":g.save(V.filename);break;case"arraybuffer":return te($r());case"blob":return co($r());case"bloburi":case"bloburl":if(Et.URL!==void 0&&typeof Et.URL.createObjectURL=="function")return Et.URL&&Et.URL.createObjectURL(co($r()))||void 0;kn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",ye=$r();try{pe=np(ye)}catch{pe=np(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+V.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Et)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(ze=V.pdfObjectUrl,Ye="");var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",ut=Et.open();return ut!==null&&ut.document.write(nt),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Et)==="[object Window]"){var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Ot=Et.open();if(Ot!==null){Ot.document.write(vt);var Mt=this;Ot.document.documentElement.querySelector("#pdfViewer").onload=function(){Ot.document.title=V.filename,Ot.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return Ot}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Et)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',On=Et.open();if(On!==null&&(On.document.write(Xt),On.document.title=V.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return Et.document.location.href=this.output("datauristring",V);default:return null}})),As=function(S){return Array.isArray(Si)===!0&&Si.indexOf(S)>-1};switch(o){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=As("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);rt=o}var Tn=null;P(),he();var ll=function(S){return y!==null?Tn.encryptor(S,0):function(V){return V}},fo=g.__private__.getPageInfo=g.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[S].objId,pageNumber:S,pageContext:_t[S]}},jt=g.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in _t)if(_t[V].objId===S)break;return fo(V)},$i=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:_t[G].objId,pageNumber:G,pageContext:_t[G]}};g.addPage=function(){return oo.apply(this,arguments),this},g.setPage=function(){return lo.apply(this,arguments),me.call(this,Re[G]),this},g.insertPage=function(S){return this.addPage(),this.movePage(G,S),this},g.movePage=function(S,V){var pe,ye;if(S>V){pe=Re[S],ye=_t[S];for(var ze=S;ze>V;ze--)Re[ze]=Re[ze-1],_t[ze]=_t[ze-1];Re[V]=pe,_t[V]=ye,this.setPage(V)}else if(S<V){pe=Re[S],ye=_t[S];for(var Ye=S;Ye<V;Ye++)Re[Ye]=Re[Ye+1],_t[Ye]=_t[Ye+1];Re[V]=pe,_t[V]=ye,this.setPage(V)}return this},g.deletePage=function(){return Gl.apply(this,arguments),this},g.__private__.text=g.text=function(S,V,pe,ye,ze){var Ye,nt,ut,vt,Ot,Mt,Xt,On,Rn,Vn=(ye=ye||{}).scope||this;if(typeof S=="number"&&typeof V=="number"&&(typeof pe=="string"||Array.isArray(pe))){var va=pe;pe=V,V=S,S=va}if(arguments[3]instanceof Nt?(q("The transform parameter of text() with a Matrix value"),Rn=ze):(ut=arguments[4],vt=arguments[5],gn(Xt=arguments[3])==="object"&&Xt!==null||(typeof ut=="string"&&(vt=ut,ut=null),typeof Xt=="string"&&(vt=Xt,Xt=null),typeof Xt=="number"&&(ut=Xt,Xt=null),ye={flags:Xt,angle:ut,align:vt})),isNaN(V)||isNaN(pe)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return Vn;var aa="",La=!1,dr=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:Qi,Ai=Vn.internal.scaleFactor;function Ql(xn){return xn=xn.split("	").join(Array(ye.TabLen||9).join(" ")),Qa(xn,Xt)}function xo(xn){for(var vn,Yn=xn.concat(),Kn=[],hi=Yn.length;hi--;)typeof(vn=Yn.shift())=="string"?Kn.push(vn):Array.isArray(xn)&&(vn.length===1||vn[1]===void 0&&vn[2]===void 0)?Kn.push(vn[0]):Kn.push([vn[0],vn[1],vn[2]]);return Kn}function vo(xn,vn){var Yn;if(typeof xn=="string")Yn=vn(xn)[0];else if(Array.isArray(xn)){for(var Kn,hi,pi=xn.concat(),Ta=[],Ms=pi.length;Ms--;)typeof(Kn=pi.shift())=="string"?Ta.push(vn(Kn)[0]):Array.isArray(Kn)&&typeof Kn[0]=="string"&&(hi=vn(Kn[0],Kn[1],Kn[2]),Ta.push([hi[0],hi[1],hi[2]]));Yn=Ta}return Yn}var ui=!1,ki=!0;if(typeof S=="string")ui=!0;else if(Array.isArray(S)){var xl=S.concat();nt=[];for(var Ci,Ua=xl.length;Ua--;)(typeof(Ci=xl.shift())!="string"||Array.isArray(Ci)&&typeof Ci[0]!="string")&&(ki=!1);ui=ki}if(ui===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Rs=ke/Vn.internal.scaleFactor,ns=Rs*(dr-1);switch(ye.baseline){case"bottom":pe-=ns;break;case"top":pe+=Rs-ns;break;case"hanging":pe+=Rs-2*ns;break;case"middle":pe+=Rs/2-ns}if((Mt=ye.maxWidth||0)>0&&(typeof S=="string"?S=Vn.splitTextToSize(S,Mt):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce((function(xn,vn){return xn.concat(Vn.splitTextToSize(vn,Mt))}),[]))),Ye={text:S,x:V,y:pe,options:ye,mutex:{pdfEscape:Qa,activeFontKey:Lt,fonts:zt,activeFontSize:ke}},qt.publish("preProcessText",Ye),S=Ye.text,ut=(ye=Ye.options).angle,!(Rn instanceof Nt)&&ut&&typeof ut=="number"){ut*=Math.PI/180,ye.rotationDirection===0&&(ut=-ut),D===T.ADVANCED&&(ut=-ut);var as=Math.cos(ut),yo=Math.sin(ut);Rn=new Nt(as,yo,-yo,as,0,0)}else ut&&ut instanceof Nt&&(Rn=ut);D!==T.ADVANCED||Rn||(Rn=cr),(Ot=ye.charSpace||go)!==void 0&&(aa+=U(O(Ot))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=ye.horizontalScale)!==void 0&&(aa+=U(100*On)+` Tz
`),ye.lang;var Fa=-1,Kl=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,vl=Vn.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":Fa=0;break;case 1:case!0:case"stroke":Fa=1;break;case 2:case"fillThenStroke":Fa=2;break;case 3:case"invisible":Fa=3;break;case 4:case"fillAndAddForClipping":Fa=4;break;case 5:case"strokeAndAddPathForClipping":Fa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fa=6;break;case 7:case"addToPathForClipping":Fa=7}var ec=vl.usedRenderingMode!==void 0?vl.usedRenderingMode:-1;Fa!==-1?aa+=Fa+` Tr
`:ec!==-1&&(aa+=`0 Tr
`),Fa!==-1&&(vl.usedRenderingMode=Fa),vt=ye.align||"left";var Qr,yl=ke*dr,tu=Vn.internal.pageSize.getWidth(),qa=zt[Lt];Ot=ye.charSpace||go,Mt=ye.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Ar=[];if(Object.prototype.toString.call(S)==="[object Array]"){var fr;nt=xo(S),vt!=="left"&&(Qr=nt.map((function(xn){return Vn.getStringUnitWidth(xn,{font:qa,charSpace:Ot,fontSize:ke,doKerning:!1})*ke/Ai})));var kr,Li=0;if(vt==="right"){V-=Qr[0],S=[],Ua=nt.length;for(var Kr=0;Kr<Ua;Kr++)Kr===0?(kr=Zr(V),fr=_r(pe)):(kr=O(Li-Qr[Kr]),fr=-yl),S.push([nt[Kr],kr,fr]),Li=Qr[Kr]}else if(vt==="center"){V-=Qr[0]/2,S=[],Ua=nt.length;for(var ei=0;ei<Ua;ei++)ei===0?(kr=Zr(V),fr=_r(pe)):(kr=O((Li-Qr[ei])/2),fr=-yl),S.push([nt[ei],kr,fr]),Li=Qr[ei]}else if(vt==="left"){S=[],Ua=nt.length;for(var wo=0;wo<Ua;wo++)S.push(nt[wo])}else{if(vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');S=[],Ua=nt.length,Mt=Mt!==0?Mt:tu;for(var Ea=0;Ea<Ua;Ea++)fr=Ea===0?_r(pe):-yl,kr=Ea===0?Zr(V):0,Ea<Ua-1?Ar.push(U(O((Mt-Qr[Ea])/(nt[Ea].split(" ").length-1)))):Ar.push(0),S.push([nt[Ea],kr,fr])}}var rs=typeof ye.R2L=="boolean"?ye.R2L:Oe;rs===!0&&(S=vo(S,(function(xn,vn,Yn){return[xn.split("").reverse().join(""),vn,Yn]}))),Ye={text:S,x:V,y:pe,options:ye,mutex:{pdfEscape:Qa,activeFontKey:Lt,fonts:zt,activeFontSize:ke}},qt.publish("postProcessText",Ye),S=Ye.text,La=Ye.mutex.isHex||!1;var Ei=zt[Lt].encoding;Ei!=="WinAnsiEncoding"&&Ei!=="StandardEncoding"||(S=vo(S,(function(xn,vn,Yn){return[Ql(xn),vn,Yn]}))),nt=xo(S),S=[];for(var di,Cr,Ha,Lr=0,is=1,ss=Array.isArray(nt[0])?is:Lr,er="",No=function(xn,vn,Yn){var Kn="";return Yn instanceof Nt?(Yn=typeof ye.angle=="number"?$a(Yn,new Nt(1,0,0,1,xn,vn)):$a(new Nt(1,0,0,1,xn,vn),Yn),D===T.ADVANCED&&(Yn=$a(new Nt(1,0,0,-1,0,0),Yn)),Kn=Yn.join(" ")+` Tm
`):Kn=U(xn)+" "+U(vn)+` Td
`,Kn},hr=0;hr<nt.length;hr++){switch(er="",ss){case is:Ha=(La?"<":"(")+nt[hr][0]+(La?">":")"),di=parseFloat(nt[hr][1]),Cr=parseFloat(nt[hr][2]);break;case Lr:Ha=(La?"<":"(")+nt[hr]+(La?">":")"),di=Zr(V),Cr=_r(pe)}Ar!==void 0&&Ar[hr]!==void 0&&(er=Ar[hr]+` Tw
`),hr===0?S.push(er+No(di,Cr,Rn)+Ha):ss===Lr?S.push(er+Ha):ss===is&&S.push(er+No(di,Cr,Rn)+Ha)}S=ss===Lr?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var fi=`BT
/`;return fi+=Lt+" "+ke+` Tf
`,fi+=U(ke*dr)+` TL
`,fi+=Es+`
`,fi+=aa,fi+=S,W(fi+="ET"),j[Lt]=!0,Vn};var $l=g.__private__.clip=g.clip=function(S){return W(S==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return $l("evenodd")},g.__private__.discardPath=g.discardPath=function(){return W("n"),this};var Sr=g.__private__.isValidStyle=function(S){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(V=!0),V};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(S){return Sr(S)&&(m=S),this};var cl=g.__private__.getStyle=g.getStyle=function(S){var V=m;switch(S){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=S}return V},Xi=g.close=function(){return W("h"),this};g.stroke=function(){return W("S"),this},g.fill=function(S){return Ka("f",S),this},g.fillEvenOdd=function(S){return Ka("f*",S),this},g.fillStroke=function(S){return Ka("B",S),this},g.fillStrokeEvenOdd=function(S){return Ka("B*",S),this};var Ka=function(S,V){gn(V)==="object"?ci(V,S):W(S)},ks=function(S){S===null||D===T.ADVANCED&&S===void 0||(S=cl(S),W(S))};function Cs(S,V,pe,ye,ze){var Ye=new Bc(V||this.boundingBox,pe||this.xStep,ye||this.yStep,this.gState,ze||this.matrix);Ye.stream=this.stream;var nt=S+"$$"+this.cloneIndex+++"$$";return la(nt,Ye),Ye}var ci=function(S,V){var pe=lr[S.key],ye=Ht[pe];if(ye instanceof Dl)W("q"),W(ul(V)),ye.gState&&g.setGState(ye.gState),W(S.matrix.toString()+" cm"),W("/"+pe+" sh"),W("Q");else if(ye instanceof Bc){var ze=new Nt(1,0,0,-1,0,ts());S.matrix&&(ze=ze.multiply(S.matrix||cr),pe=Cs.call(ye,S.key,S.boundingBox,S.xStep,S.yStep,ze).id),W("q"),W("/Pattern cs"),W("/"+pe+" scn"),ye.gState&&g.setGState(ye.gState),W(V),W("Q")}},ul=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zi=g.moveTo=function(S,V){return W(U(O(S))+" "+U(E(V))+" m"),this},Ji=g.lineTo=function(S,V){return W(U(O(S))+" "+U(E(V))+" l"),this},Xr=g.curveTo=function(S,V,pe,ye,ze,Ye){return W([U(O(S)),U(E(V)),U(O(pe)),U(E(ye)),U(O(ze)),U(E(Ye)),"c"].join(" ")),this};g.__private__.line=g.line=function(S,V,pe,ye,ze){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(ye)||!Sr(ze))throw new Error("Invalid arguments passed to jsPDF.line");return D===T.COMPAT?this.lines([[pe-S,ye-V]],S,V,[1,1],ze||"S"):this.lines([[pe-S,ye-V]],S,V,[1,1]).stroke()},g.__private__.lines=g.lines=function(S,V,pe,ye,ze,Ye){var nt,ut,vt,Ot,Mt,Xt,On,Rn,Vn,va,aa,La;if(typeof S=="number"&&(La=pe,pe=V,V=S,S=La),ye=ye||[1,1],Ye=Ye||!1,isNaN(V)||isNaN(pe)||!Array.isArray(S)||!Array.isArray(ye)||!Sr(ze)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zi(V,pe),nt=ye[0],ut=ye[1],Ot=S.length,va=V,aa=pe,vt=0;vt<Ot;vt++)(Mt=S[vt]).length===2?(va=Mt[0]*nt+va,aa=Mt[1]*ut+aa,Ji(va,aa)):(Xt=Mt[0]*nt+va,On=Mt[1]*ut+aa,Rn=Mt[2]*nt+va,Vn=Mt[3]*ut+aa,va=Mt[4]*nt+va,aa=Mt[5]*ut+aa,Xr(Xt,On,Rn,Vn,va,aa));return Ye&&Xi(),ks(ze),this},g.path=function(S){for(var V=0;V<S.length;V++){var pe=S[V],ye=pe.c;switch(pe.op){case"m":Zi(ye[0],ye[1]);break;case"l":Ji(ye[0],ye[1]);break;case"c":Xr.apply(this,ye);break;case"h":Xi()}}return this},g.__private__.rect=g.rect=function(S,V,pe,ye,ze){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(ye)||!Sr(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return D===T.COMPAT&&(ye=-ye),W([U(O(S)),U(E(V)),U(O(pe)),U(O(ye)),"re"].join(" ")),ks(ze),this},g.__private__.triangle=g.triangle=function(S,V,pe,ye,ze,Ye,nt){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(ye)||isNaN(ze)||isNaN(Ye)||!Sr(nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-S,ye-V],[ze-pe,Ye-ye],[S-ze,V-Ye]],S,V,[1,1],nt,!0),this},g.__private__.roundedRect=g.roundedRect=function(S,V,pe,ye,ze,Ye,nt){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(ye)||isNaN(ze)||isNaN(Ye)||!Sr(nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*pe),Ye=Math.min(Ye,.5*ye),this.lines([[pe-2*ze,0],[ze*ut,0,ze,Ye-Ye*ut,ze,Ye],[0,ye-2*Ye],[0,Ye*ut,-ze*ut,Ye,-ze,Ye],[2*ze-pe,0],[-ze*ut,0,-ze,-Ye*ut,-ze,-Ye],[0,2*Ye-ye],[0,-Ye*ut,ze*ut,-Ye,ze,-Ye]],S+ze,V,[1,1],nt,!0),this},g.__private__.ellipse=g.ellipse=function(S,V,pe,ye,ze){if(isNaN(S)||isNaN(V)||isNaN(pe)||isNaN(ye)||!Sr(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*pe,nt=4/3*(Math.SQRT2-1)*ye;return Zi(S+pe,V),Xr(S+pe,V-nt,S+Ye,V-ye,S,V-ye),Xr(S-Ye,V-ye,S-pe,V-nt,S-pe,V),Xr(S-pe,V+nt,S-Ye,V+ye,S,V+ye),Xr(S+Ye,V+ye,S+pe,V+nt,S+pe,V),ks(ze),this},g.__private__.circle=g.circle=function(S,V,pe,ye){if(isNaN(S)||isNaN(V)||isNaN(pe)||!Sr(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,V,pe,pe,ye)},g.setFont=function(S,V,pe){return pe&&(V=ce(V,pe)),Lt=ol(S,V,{disableWarning:!1}),this};var ho=g.__private__.getFont=g.getFont=function(){return zt[ol.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var S,V,pe={};for(S in St)if(St.hasOwnProperty(S))for(V in pe[S]=[],St[S])St[S].hasOwnProperty(V)&&pe[S].push(V);return pe},g.addFont=function(S,V,pe,ye,ze){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(pe=ce(pe,ye)),ze=ze||"Identity-H",il.call(this,S,V,pe,ze)};var Qi,da=a.lineWidth||.200025,jr=g.__private__.getLineWidth=g.getLineWidth=function(){return da},Ls=g.__private__.setLineWidth=g.setLineWidth=function(S){return da=S,W(U(O(S))+" w"),this};g.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(S,V){if(S=S||[],V=V||0,isNaN(V)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map((function(pe){return U(O(pe))})).join(" "),V=U(O(V)),W("["+S+"] "+V+" d"),this};var Ki=g.__private__.getLineHeight=g.getLineHeight=function(){return ke*Qi};g.__private__.getLineHeight=g.getLineHeight=function(){return ke*Qi};var Xl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Qi=S),this},po=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Qi};Xl(a.lineHeight);var Zr=g.__private__.getHorizontalCoordinate=function(S){return O(S)},_r=g.__private__.getVerticalCoordinate=function(S){return D===T.ADVANCED?S:_t[G].mediaBox.topRightY-_t[G].mediaBox.bottomLeftY-O(S)},mo=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(S){return U(Zr(S))},_i=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(S){return U(_r(S))},Jr=a.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return bn(Jr)},g.__private__.setStrokeColor=g.setDrawColor=function(S,V,pe,ye){return Jr=ua({ch1:S,ch2:V,ch3:pe,ch4:ye,pdfColorType:"draw",precision:2}),W(Jr),this};var dl=a.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return bn(dl)},g.__private__.setFillColor=g.setFillColor=function(S,V,pe,ye){return dl=ua({ch1:S,ch2:V,ch3:pe,ch4:ye,pdfColorType:"fill",precision:2}),W(dl),this};var Es=a.textColor||"0 g",fl=g.__private__.getTextColor=g.getTextColor=function(){return bn(Es)};g.__private__.setTextColor=g.setTextColor=function(S,V,pe,ye){return Es=ua({ch1:S,ch2:V,ch3:pe,ch4:ye,pdfColorType:"text",precision:3}),this};var go=a.charSpace,Kc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(go||0)};g.__private__.setCharSpace=g.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return go=S,this};var hl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(S){var V=g.CapJoinStyles[S];if(V===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hl=V,W(V+" J"),this};var pl=0;g.__private__.setLineJoin=g.setLineJoin=function(S){var V=g.CapJoinStyles[S];if(V===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pl=V,W(V+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(U(O(S))+" M"),this},g.GState=nf,g.setGState=function(S){(S=typeof S=="string"?Tt[In[S]]:Zl(null,S)).equals(Zn)||(W("/"+S.id+" gs"),Zn=S)};var Zl=function(S,V){if(!S||!In[S]){var pe=!1;for(var ye in Tt)if(Tt.hasOwnProperty(ye)&&Tt[ye].equals(V)){pe=!0;break}if(pe)V=Tt[ye];else{var ze="GS"+(Object.keys(Tt).length+1).toString(10);Tt[ze]=V,V.id=ze}return S&&(In[S]=V.id),qt.publish("addGState",V),V}};g.addGState=function(S,V){return Zl(S,V),this},g.saveGraphicsState=function(){return W("q"),Ba.push({key:Lt,size:ke,color:Es}),this},g.restoreGraphicsState=function(){W("Q");var S=Ba.pop();return Lt=S.key,ke=S.size,Es=S.color,Zn=null,this},g.setCurrentTransformationMatrix=function(S){return W(S.toString()+" cm"),this},g.comment=function(S){return W("#"+S),this};var Ts=function(S,V){var pe=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(Ye){isNaN(Ye)||(pe=parseFloat(Ye))}});var ye=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Ye){isNaN(Ye)||(ye=parseFloat(Ye))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(Ye){ze=Ye.toString()}}),this},ml=function(S,V,pe,ye){Ts.call(this,S,V),this.type="rect";var ze=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(nt){isNaN(nt)||(ze=parseFloat(nt))}});var Ye=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(nt){isNaN(nt)||(Ye=parseFloat(nt))}}),this},gl=function(){this.page=Gt,this.currentPage=G,this.pages=Re.slice(0),this.pagesContext=_t.slice(0),this.x=Cn,this.y=ht,this.matrix=an,this.width=Os(G),this.height=ts(G),this.outputDestination=Xe,this.id="",this.objectNumber=-1};gl.prototype.restore=function(){Gt=this.page,G=this.currentPage,_t=this.pagesContext,Re=this.pages,Cn=this.x,ht=this.y,an=this.matrix,bl(G,this.width),bo(G,this.height),Xe=this.outputDestination};var Jl=function(S,V,pe,ye,ze){Aa.push(new gl),Gt=G=0,Re=[],Cn=S,ht=V,an=ze,Ca([pe,ye])},eu=function(S){if(Wa[S])Aa.pop().restore();else{var V=new gl,pe="Xo"+(Object.keys(Jn).length+1).toString(10);V.id=pe,Wa[S]=pe,Jn[pe]=V,qt.publish("addFormObject",V),Aa.pop().restore()}};for(var es in g.beginFormObject=function(S,V,pe,ye,ze){return Jl(S,V,pe,ye,ze),this},g.endFormObject=function(S){return eu(S),this},g.doFormObject=function(S,V){var pe=Jn[Wa[S]];return W("q"),W(V.toString()+" cm"),W("/"+pe.id+" Do"),W("Q"),this},g.getFormObject=function(S){var V=Jn[Wa[S]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},g.save=function(S,V){return S=S||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(zl(co($r()),S),typeof zl.unload=="function"&&Et.setTimeout&&setTimeout(zl.unload,911),this):new Promise((function(pe,ye){try{var ze=zl(co($r()),S);typeof zl.unload=="function"&&Et.setTimeout&&setTimeout(zl.unload,911),pe(ze)}catch(Ye){ye(Ye.message)}}))},Ct.API)Ct.API.hasOwnProperty(es)&&(es==="events"&&Ct.API.events.length?(function(S,V){var pe,ye,ze;for(ze=V.length-1;ze!==-1;ze--)pe=V[ze][0],ye=V[ze][1],S.subscribe.apply(S,[pe].concat(typeof ye=="function"?[ye]:ye))})(qt,Ct.API.events):g[es]=Ct.API[es]);var Os=g.getPageWidth=function(S){return(_t[S=S||G].mediaBox.topRightX-_t[S].mediaBox.bottomLeftX)/rt},bl=g.setPageWidth=function(S,V){_t[S].mediaBox.topRightX=V*rt+_t[S].mediaBox.bottomLeftX},ts=g.getPageHeight=function(S){return(_t[S=S||G].mediaBox.topRightY-_t[S].mediaBox.bottomLeftY)/rt},bo=g.setPageHeight=function(S,V){_t[S].mediaBox.topRightY=V*rt+_t[S].mediaBox.bottomLeftY};return g.internal={pdfEscape:Qa,getStyle:cl,getFont:ho,getFontSize:xe,getCharSpace:Kc,getTextColor:fl,getLineHeight:Ki,getLineHeightFactor:po,getLineWidth:jr,write:le,getHorizontalCoordinate:Zr,getVerticalCoordinate:_r,getCoordinateString:mo,getVerticalCoordinateString:_i,collections:{},newObject:dn,newAdditionalObject:Yr,newObjectDeferred:Ln,newObjectDeferredBegin:xa,getFilters:fn,putStream:Xa,events:qt,scaleFactor:rt,pageSize:{getWidth:function(){return Os(G)},setWidth:function(S){bl(G,S)},getHeight:function(){return ts(G)},setHeight:function(S){bo(G,S)}},encryptionOptions:y,encryption:Tn,getEncryptor:ll,output:uo,getNumberOfPages:Wi,pages:Re,out:W,f2:se,f3:I,getPageInfo:fo,getPageInfoByObjId:jt,getCurrentPageInfo:$i,getPDFVersion:N,Point:Ts,Rectangle:ml,Matrix:Nt,hasHotfix:As},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Os(G)},set:function(S){bl(G,S)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ts(G)},set:function(S){bo(G,S)},enumerable:!0,configurable:!0}),sl.call(g,de),Lt="F1",oo(u,r),qt.publish("initialized"),g}Dc.prototype.lsbFirstWord=function(a){return String.fromCharCode(a>>0&255,a>>8&255,a>>16&255,a>>24&255)},Dc.prototype.toHexString=function(a){return a.split("").map((function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Dc.prototype.hexToBytes=function(a){for(var s=[],r=0;r<a.length;r+=2)s.push(String.fromCharCode(parseInt(a.substr(r,2),16)));return s.join("")},Dc.prototype.processOwnerPassword=function(a,s){return rp(ap(s).substr(0,5),a)},Dc.prototype.encryptor=function(a,s){var r=ap(this.encryptionKey+String.fromCharCode(255&a,a>>8&255,a>>16&255,255&s,s>>8&255)).substr(0,10);return function(o){return rp(r,o)}},nf.prototype.equals=function(a){var s,r="id,objectNumber,equals";if(!a||gn(a)!==gn(this))return!1;var o=0;for(s in this)if(!(r.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!a.hasOwnProperty(s)||this[s]!==a[s])return!1;o++}for(s in a)a.hasOwnProperty(s)&&r.indexOf(s)<0&&o--;return o===0},Ct.API={events:[]},Ct.version="2.5.1";var na=Ct.API,Tp=1,ql=function(a){return a.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mc=function(a){return a.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bt=function(a){return a.toFixed(2)},Wo=function(a){return a.toFixed(5)};na.__acroform__={};var Vr=function(a,s){a.prototype=Object.create(s.prototype),a.prototype.constructor=a},S2=function(a){return a*Tp},ys=function(a){var s=new N1,r=mt.internal.getHeight(a)||0,o=mt.internal.getWidth(a)||0;return s.BBox=[0,0,Number(Bt(o)),Number(Bt(r))],s},Jx=na.__acroform__.setBit=function(a,s){if(a=a||0,s=s||0,isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return a|=1<<s},Qx=na.__acroform__.clearBit=function(a,s){if(a=a||0,s=s||0,isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return a&=~(1<<s)},Kx=na.__acroform__.getBit=function(a,s){if(isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(a&1<<s)==0?0:1},ia=na.__acroform__.getBitForPdf=function(a,s){if(isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Kx(a,s-1)},sa=na.__acroform__.setBitForPdf=function(a,s){if(isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Jx(a,s-1)},oa=na.__acroform__.clearBitForPdf=function(a,s){if(isNaN(a)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Qx(a,s-1)},ev=na.__acroform__.calculateCoordinates=function(a,s){var r=s.internal.getHorizontalCoordinate,o=s.internal.getVerticalCoordinate,u=a[0],l=a[1],d=a[2],h=a[3],p={};return p.lowerLeft_X=r(u)||0,p.lowerLeft_Y=o(l+h)||0,p.upperRight_X=r(u+d)||0,p.upperRight_Y=o(l)||0,[Number(Bt(p.lowerLeft_X)),Number(Bt(p.lowerLeft_Y)),Number(Bt(p.upperRight_X)),Number(Bt(p.upperRight_Y))]},tv=function(a){if(a.appearanceStreamContent)return a.appearanceStreamContent;if(a.V||a.DV){var s=[],r=a._V||a.DV,o=ip(a,r),u=a.scope.internal.getFont(a.fontName,a.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(a.scope.__private__.encodeColorString(a.color)),s.push("/"+u+" "+Bt(o.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(o.text),s.push("ET"),s.push("Q"),s.push("EMC");var l=ys(a);return l.scope=a.scope,l.stream=s.join(`
`),l}},ip=function(a,s){var r=a.fontSize===0?a.maxFontSize:a.fontSize,o={text:"",fontSize:""},u=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");u=a.multiline?u.map((function(I){return I.split(`
`)})):u.map((function(I){return[I]}));var l=r,d=mt.internal.getHeight(a)||0;d=d<0?-d:d;var h=mt.internal.getWidth(a)||0;h=h<0?-h:h;var p=function(I,O,Y){if(I+1<u.length){var E=O+" "+u[I+1][0];return Hd(E,a,Y).width<=h-4}return!1};l++;e:for(;l>0;){s="",l--;var m,y,w=Hd("3",a,l).height,j=a.multiline?d-l:(d-w)/2,g=j+=2,L=0,N=0,A=0;if(l<=0){s=`(...) Tj
`,s+="% Width of Text: "+Hd(s,a,l=12).width+", FieldWidth:"+h+`
`;break}for(var _="",T=0,D=0;D<u.length;D++)if(u.hasOwnProperty(D)){var F=!1;if(u[D].length!==1&&A!==u[D].length-1){if((w+2)*(T+2)+2>d)continue e;_+=u[D][A],F=!0,N=D,D--}else{_=(_+=u[D][A]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var B=parseInt(D),ce=p(B,_,l),U=D>=u.length-1;if(ce&&!U){_+=" ",A=0;continue}if(ce||U){if(U)N=B;else if(a.multiline&&(w+2)*(T+2)+2>d)continue e}else{if(!a.multiline||(w+2)*(T+2)+2>d)continue e;N=B}}for(var q="",ie=L;ie<=N;ie++){var se=u[ie];if(a.multiline){if(ie===N){q+=se[A]+" ",A=(A+1)%se.length;continue}if(ie===L){q+=se[se.length-1]+" ";continue}}q+=se[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,y=Hd(q,a,l).width,a.textAlign){case"right":m=h-y-2;break;case"center":m=(h-y)/2;break;case"left":default:m=2}s+=Bt(m)+" "+Bt(g)+` Td
`,s+="("+ql(q)+`) Tj
`,s+=-Bt(m)+` 0 Td
`,g=-(l+2),y=0,L=F?N:N+1,T++,_=""}break}return o.text=s,o.fontSize=l,o},Hd=function(a,s,r){var o=s.scope.internal.getFont(s.fontName,s.fontStyle),u=s.scope.getStringUnitWidth(a,{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:s.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:u}},nv={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},av=function(a,s){var r={type:"reference",object:a};s.internal.getPageInfo(a.page).pageContext.annotations.find((function(o){return o.type===r.type&&o.object===r.object}))===void 0&&s.internal.getPageInfo(a.page).pageContext.annotations.push(r)},rv=function(a,s){for(var r in a)if(a.hasOwnProperty(r)){var o=r,u=a[r];s.internal.newObjectDeferredBegin(u.objId,!0),gn(u)==="object"&&typeof u.putStream=="function"&&u.putStream(),delete a[o]}},iv=function(a,s){if(s.scope=a,a.internal!==void 0&&(a.internal.acroformPlugin===void 0||a.internal.acroformPlugin.isInitialized===!1)){if(Vi.FieldNum=0,a.internal.acroformPlugin=JSON.parse(JSON.stringify(nv)),a.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Tp=a.internal.scaleFactor,a.internal.acroformPlugin.acroFormDictionaryRoot=new S1,a.internal.acroformPlugin.acroFormDictionaryRoot.scope=a,a.internal.acroformPlugin.acroFormDictionaryRoot._eventID=a.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(a)})),a.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in o)if(o.hasOwnProperty(u)){var l=o[u];l.objId=void 0,l.hasAnnotation&&av(l,r)}})(a)})),a.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(a)})),a.internal.events.subscribe("postPutPages",(function(r){(function(o,u){var l=!o;for(var d in o||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(d)){var h=o[d],p=[],m=h.Rect;if(h.Rect&&(h.Rect=ev(h.Rect,u)),u.internal.newObjectDeferredBegin(h.objId,!0),h.DA=mt.createDefaultAppearanceStream(h),gn(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(p=h.getKeyValueListForStream()),h.Rect=m,h.hasAppearanceStream&&!h.appearanceStreamContent){var y=tv(h);p.push({key:"AP",value:"<</N "+y+">>"}),u.internal.acroformPlugin.xForms.push(y)}if(h.appearanceStreamContent){var w="";for(var j in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(j)){var g=h.appearanceStreamContent[j];if(w+="/"+j+" ",w+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var d in g)if(g.hasOwnProperty(d)){var L=g[d];typeof L=="function"&&(L=L.call(u,h)),w+="/"+d+" "+L+" ",u.internal.acroformPlugin.xForms.indexOf(L)>=0||u.internal.acroformPlugin.xForms.push(L)}}else typeof(L=g)=="function"&&(L=L.call(u,h)),w+="/"+d+" "+L,u.internal.acroformPlugin.xForms.indexOf(L)>=0||u.internal.acroformPlugin.xForms.push(L);w+=">>"}p.push({key:"AP",value:`<<
`+w+">>"})}u.internal.putStream({additionalKeyValues:p,objectId:h.objId}),u.internal.out("endobj")}l&&rv(u.internal.acroformPlugin.xForms,u)})(r,a)})),a.internal.acroformPlugin.isInitialized=!0}},w1=na.__acroform__.arrayToPdfArray=function(a,s,r){var o=function(d){return d};if(Array.isArray(a)){for(var u="[",l=0;l<a.length;l++)switch(l!==0&&(u+=" "),gn(a[l])){case"boolean":case"number":case"object":u+=a[l].toString();break;case"string":a[l].substr(0,1)!=="/"?(s!==void 0&&r&&(o=r.internal.getEncryptor(s)),u+="("+ql(o(a[l].toString()))+")"):u+=a[l].toString()}return u+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qh=function(a,s,r){var o=function(u){return u};return s!==void 0&&r&&(o=r.internal.getEncryptor(s)),(a=a||"").toString(),a="("+ql(o(a))+")"},ws=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(a){this._objId=a}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ws.prototype.toString=function(){return this.objId+" 0 R"},ws.prototype.putStream=function(){var a=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:a,objectId:this.objId}),this.scope.internal.out("endobj")},ws.prototype.getKeyValueListForStream=function(){var a=[],s=Object.getOwnPropertyNames(this).filter((function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"}));for(var r in s)if(Object.getOwnPropertyDescriptor(this,s[r]).configurable===!1){var o=s[r],u=this[o];u&&(Array.isArray(u)?a.push({key:o,value:w1(u,this.objId,this.scope)}):u instanceof ws?(u.scope=this.scope,a.push({key:o,value:u.objId+" 0 R"})):typeof u!="function"&&a.push({key:o,value:u}))}return a};var N1=function(){ws.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var a,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){a=r.trim()},get:function(){return a||null}})};Vr(N1,ws);var S1=function(){ws.call(this);var a,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(a){var r=function(o){return o};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ql(r(a))+")"}},set:function(r){a=r}})};Vr(S1,ws);var Vi=function a(){ws.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');s=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ia(s,3)},set:function(_){_?this.F=sa(s,3):this.F=oa(s,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(_){o=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(_){o[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(_){o[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(_){o[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(_){o[3]=_}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof af)return;l="FieldObject"+a.FieldNum++}var _=function(T){return T};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+ql(_(l))+")"},set:function(_){l=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(_){l=_}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/Tp:m},set:function(_){m=_}});var y="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return y},set:function(_){y=_}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof af||this instanceof Il))return qh(w,this.objId,this.scope)},set:function(_){_=_.toString(),w=_}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Ia?j:qh(j,this.objId,this.scope)},set:function(_){_=_.toString(),j=this instanceof Ia?_:_.substr(0,1)==="("?Mc(_.substr(1,_.length-2)):Mc(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia?Mc(j.substr(1,j.length-1)):j},set:function(_){_=_.toString(),j=this instanceof Ia?"/"+_:_}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ia?g:qh(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=this instanceof Ia?_:_.substr(0,1)==="("?Mc(_.substr(1,_.length-2)):Mc(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia?Mc(g.substr(1,g.length-1)):g},set:function(_){_=_.toString(),g=this instanceof Ia?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(_){_=!!_,N=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(_){L=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,1)},set:function(_){_?this.Ff=sa(this.Ff,1):this.Ff=oa(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,2)},set:function(_){_?this.Ff=sa(this.Ff,2):this.Ff=oa(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,3)},set:function(_){_?this.Ff=sa(this.Ff,3):this.Ff=oa(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');A=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(A){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};Vr(Vi,ws);var Fc=function(){Vi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var a=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return a},set:function(r){a=r}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return w1(s,this.objId,this.scope)},set:function(r){var o,u;u=[],typeof(o=r)=="string"&&(u=(function(l,d,h){h||(h=1);for(var p,m=[];p=d.exec(l);)m.push(p[h]);return m})(o,/\((.*?)\)/g)),s=u}}),this.getOptions=function(){return s},this.setOptions=function(r){s=r,this.sort&&s.sort()},this.addOption=function(r){r=(r=r||"").toString(),s.push(r),this.sort&&s.sort()},this.removeOption=function(r,o){for(o=o||!1,r=(r=r||"").toString();s.indexOf(r)!==-1&&(s.splice(s.indexOf(r),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,18)},set:function(r){r?this.Ff=sa(this.Ff,18):this.Ff=oa(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=sa(this.Ff,19):this.Ff=oa(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,20)},set:function(r){r?(this.Ff=sa(this.Ff,20),s.sort()):this.Ff=oa(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,22)},set:function(r){r?this.Ff=sa(this.Ff,22):this.Ff=oa(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,23)},set:function(r){r?this.Ff=sa(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,27)},set:function(r){r?this.Ff=sa(this.Ff,27):this.Ff=oa(this.Ff,27)}}),this.hasAppearanceStream=!1};Vr(Fc,Vi);var qc=function(){Fc.call(this),this.fontName="helvetica",this.combo=!1};Vr(qc,Fc);var Hc=function(){qc.call(this),this.combo=!0};Vr(Hc,qc);var Xd=function(){Hc.call(this),this.edit=!0};Vr(Xd,Hc);var Ia=function(){Vi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,15)},set:function(r){r?this.Ff=sa(this.Ff,15):this.Ff=oa(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,16)},set:function(r){r?this.Ff=sa(this.Ff,16):this.Ff=oa(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,17)},set:function(r){r?this.Ff=sa(this.Ff,17):this.Ff=oa(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,26)},set:function(r){r?this.Ff=sa(this.Ff,26):this.Ff=oa(this.Ff,26)}});var a,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+ql(r(s[o]))+")");return u.push(">>"),u.join(`
`)}},set:function(r){gn(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(r){a="/"+r}})};Vr(Ia,Vi);var Zd=function(){Ia.call(this),this.pushButton=!0};Vr(Zd,Ia);var Gc=function(){Ia.call(this),this.radio=!0,this.pushButton=!1;var a=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return a},set:function(s){a=s!==void 0?s:[]}})};Vr(Gc,Ia);var af=function(){var a,s;Vi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return a},set:function(u){a=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(u){s=u}});var r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(h){return h};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),o)d.push("/"+l+" ("+ql(u(o[l]))+")");return d.push(">>"),d.join(`
`)},set:function(u){gn(u)==="object"&&(o=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(u){typeof u=="string"&&(o.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(u){r=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(u){r="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vr(af,Vi),Gc.prototype.setAppearance=function(a){if(!("createAppearanceStream"in a)||!("getCA"in a))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var r=this.Kids[s];r.appearanceStreamContent=a.createAppearanceStream(r.optionName),r.caption=a.getCA()}},Gc.prototype.createOption=function(a){var s=new af;return s.Parent=this,s.optionName=a,this.Kids.push(s),sv.call(this.scope,s),s};var Jd=function(){Ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=mt.CheckBox.createAppearanceStream()};Vr(Jd,Ia);var Il=function(){Vi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,13)},set:function(s){s?this.Ff=sa(this.Ff,13):this.Ff=oa(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,21)},set:function(s){s?this.Ff=sa(this.Ff,21):this.Ff=oa(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,23)},set:function(s){s?this.Ff=sa(this.Ff,23):this.Ff=oa(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,24)},set:function(s){s?this.Ff=sa(this.Ff,24):this.Ff=oa(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,25)},set:function(s){s?this.Ff=sa(this.Ff,25):this.Ff=oa(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,26)},set:function(s){s?this.Ff=sa(this.Ff,26):this.Ff=oa(this.Ff,26)}});var a=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return a},set:function(s){Number.isInteger(s)&&(a=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vr(Il,Vi);var Qd=function(){Il.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,14)},set:function(a){a?this.Ff=sa(this.Ff,14):this.Ff=oa(this.Ff,14)}}),this.password=!0};Vr(Qd,Il);var mt={CheckBox:{createAppearanceStream:function(){return{N:{On:mt.CheckBox.YesNormal},D:{On:mt.CheckBox.YesPushDown,Off:mt.CheckBox.OffPushDown}}},YesPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=[],o=a.scope.internal.getFont(a.fontName,a.fontStyle).id,u=a.scope.__private__.encodeColorString(a.color),l=ip(a,a.caption);return r.push("0.749023 g"),r.push("0 0 "+Bt(mt.internal.getWidth(a))+" "+Bt(mt.internal.getHeight(a))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+o+" "+Bt(l.fontSize)+" Tf "+u),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),s.stream=r.join(`
`),s},YesNormal:function(a){var s=ys(a);s.scope=a.scope;var r=a.scope.internal.getFont(a.fontName,a.fontStyle).id,o=a.scope.__private__.encodeColorString(a.color),u=[],l=mt.internal.getHeight(a),d=mt.internal.getWidth(a),h=ip(a,a.caption);return u.push("1 g"),u.push("0 0 "+Bt(d)+" "+Bt(l)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+Bt(d-1)+" "+Bt(l-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+r+" "+Bt(h.fontSize)+" Tf "+o),u.push(h.text),u.push("ET"),u.push("Q"),s.stream=u.join(`
`),s},OffPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bt(mt.internal.getWidth(a))+" "+Bt(mt.internal.getHeight(a))+" re"),r.push("f"),s.stream=r.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(a){var s={D:{Off:mt.RadioButton.Circle.OffPushDown},N:{}};return s.N[a]=mt.RadioButton.Circle.YesNormal,s.D[a]=mt.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(a){var s=ys(a);s.scope=a.scope;var r=[],o=mt.internal.getWidth(a)<=mt.internal.getHeight(a)?mt.internal.getWidth(a)/4:mt.internal.getHeight(a)/4;o=Number((.9*o).toFixed(5));var u=mt.internal.Bezier_C,l=Number((o*u).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wo(mt.internal.getWidth(a)/2)+" "+Wo(mt.internal.getHeight(a)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=[],o=mt.internal.getWidth(a)<=mt.internal.getHeight(a)?mt.internal.getWidth(a)/4:mt.internal.getHeight(a)/4;o=Number((.9*o).toFixed(5));var u=Number((2*o).toFixed(5)),l=Number((u*mt.internal.Bezier_C).toFixed(5)),d=Number((o*mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wo(mt.internal.getWidth(a)/2)+" "+Wo(mt.internal.getHeight(a)/2)+" cm"),r.push(u+" 0 m"),r.push(u+" "+l+" "+l+" "+u+" 0 "+u+" c"),r.push("-"+l+" "+u+" -"+u+" "+l+" -"+u+" 0 c"),r.push("-"+u+" -"+l+" -"+l+" -"+u+" 0 -"+u+" c"),r.push(l+" -"+u+" "+u+" -"+l+" "+u+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wo(mt.internal.getWidth(a)/2)+" "+Wo(mt.internal.getHeight(a)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+d+" "+d+" "+o+" 0 "+o+" c"),r.push("-"+d+" "+o+" -"+o+" "+d+" -"+o+" 0 c"),r.push("-"+o+" -"+d+" -"+d+" -"+o+" 0 -"+o+" c"),r.push(d+" -"+o+" "+o+" -"+d+" "+o+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=[],o=mt.internal.getWidth(a)<=mt.internal.getHeight(a)?mt.internal.getWidth(a)/4:mt.internal.getHeight(a)/4;o=Number((.9*o).toFixed(5));var u=Number((2*o).toFixed(5)),l=Number((u*mt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wo(mt.internal.getWidth(a)/2)+" "+Wo(mt.internal.getHeight(a)/2)+" cm"),r.push(u+" 0 m"),r.push(u+" "+l+" "+l+" "+u+" 0 "+u+" c"),r.push("-"+l+" "+u+" -"+u+" "+l+" -"+u+" 0 c"),r.push("-"+u+" -"+l+" -"+l+" -"+u+" 0 -"+u+" c"),r.push(l+" -"+u+" "+u+" -"+l+" "+u+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s}},Cross:{createAppearanceStream:function(a){var s={D:{Off:mt.RadioButton.Cross.OffPushDown},N:{}};return s.N[a]=mt.RadioButton.Cross.YesNormal,s.D[a]=mt.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(a){var s=ys(a);s.scope=a.scope;var r=[],o=mt.internal.calculateCross(a);return r.push("q"),r.push("1 1 "+Bt(mt.internal.getWidth(a)-2)+" "+Bt(mt.internal.getHeight(a)-2)+" re"),r.push("W"),r.push("n"),r.push(Bt(o.x1.x)+" "+Bt(o.x1.y)+" m"),r.push(Bt(o.x2.x)+" "+Bt(o.x2.y)+" l"),r.push(Bt(o.x4.x)+" "+Bt(o.x4.y)+" m"),r.push(Bt(o.x3.x)+" "+Bt(o.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=mt.internal.calculateCross(a),o=[];return o.push("0.749023 g"),o.push("0 0 "+Bt(mt.internal.getWidth(a))+" "+Bt(mt.internal.getHeight(a))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+Bt(mt.internal.getWidth(a)-2)+" "+Bt(mt.internal.getHeight(a)-2)+" re"),o.push("W"),o.push("n"),o.push(Bt(r.x1.x)+" "+Bt(r.x1.y)+" m"),o.push(Bt(r.x2.x)+" "+Bt(r.x2.y)+" l"),o.push(Bt(r.x4.x)+" "+Bt(r.x4.y)+" m"),o.push(Bt(r.x3.x)+" "+Bt(r.x3.y)+" l"),o.push("s"),o.push("Q"),s.stream=o.join(`
`),s},OffPushDown:function(a){var s=ys(a);s.scope=a.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Bt(mt.internal.getWidth(a))+" "+Bt(mt.internal.getHeight(a))+" re"),r.push("f"),s.stream=r.join(`
`),s}}},createDefaultAppearanceStream:function(a){var s=a.scope.internal.getFont(a.fontName,a.fontStyle).id,r=a.scope.__private__.encodeColorString(a.color);return"/"+s+" "+a.fontSize+" Tf "+r}};mt.internal={Bezier_C:.551915024494,calculateCross:function(a){var s=mt.internal.getWidth(a),r=mt.internal.getHeight(a),o=Math.min(s,r);return{x1:{x:(s-o)/2,y:(r-o)/2+o},x2:{x:(s-o)/2+o,y:(r-o)/2},x3:{x:(s-o)/2,y:(r-o)/2},x4:{x:(s-o)/2+o,y:(r-o)/2+o}}}},mt.internal.getWidth=function(a){var s=0;return gn(a)==="object"&&(s=S2(a.Rect[2])),s},mt.internal.getHeight=function(a){var s=0;return gn(a)==="object"&&(s=S2(a.Rect[3])),s};var sv=na.addField=function(a){if(iv(this,a),!(a instanceof Vi))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=a).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),a.page=a.scope.internal.getCurrentPageInfo().pageNumber,this};na.AcroFormChoiceField=Fc,na.AcroFormListBox=qc,na.AcroFormComboBox=Hc,na.AcroFormEditBox=Xd,na.AcroFormButton=Ia,na.AcroFormPushButton=Zd,na.AcroFormRadioButton=Gc,na.AcroFormCheckBox=Jd,na.AcroFormTextField=Il,na.AcroFormPasswordField=Qd,na.AcroFormAppearance=mt,na.AcroForm={ChoiceField:Fc,ListBox:qc,ComboBox:Hc,EditBox:Xd,Button:Ia,PushButton:Zd,RadioButton:Gc,CheckBox:Jd,TextField:Il,PasswordField:Qd,Appearance:mt},Ct.AcroForm={ChoiceField:Fc,ListBox:qc,ComboBox:Hc,EditBox:Xd,Button:Ia,PushButton:Zd,RadioButton:Gc,CheckBox:Jd,TextField:Il,PasswordField:Qd,Appearance:mt};Ct.AcroForm;function j1(a){return a.reduce((function(s,r,o){return s[r]=o,s}),{})}(function(a){a.__addimage__={};var s="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=a.__addimage__.getImageFileTypeByImageData=function(I,O){var Y,E,oe,J,ae,he=s;if((O=O||s)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ce(I))for(ae in r)for(oe=r[ae],Y=0;Y<oe.length;Y+=1){for(J=!0,E=0;E<oe[Y].length;E+=1)if(oe[Y][E]!==void 0&&oe[Y][E]!==I[E]){J=!1;break}if(J===!0){he=ae;break}}else for(ae in r)for(oe=r[ae],Y=0;Y<oe.length;Y+=1){for(J=!0,E=0;E<oe[Y].length;E+=1)if(oe[Y][E]!==void 0&&oe[Y][E]!==I.charCodeAt(E)){J=!1;break}if(J===!0){he=ae;break}}return he===s&&O!==s&&(he=O),he},u=function I(O){for(var Y=this.internal.write,E=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:O.width}),J.push({key:"Height",value:O.height}),O.colorSpace===A.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===A.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var ae="",he=0,fe=O.transparency.length;he<fe;he++)ae+=O.transparency[he]+" "+O.transparency[he]+" ";J.push({key:"Mask",value:"["+ae+"]"})}O.sMask!==void 0&&J.push({key:"SMask",value:O.objectId+1+" 0 R"});var ge=O.filter!==void 0?["/"+O.filter]:void 0;if(E({data:O.data,additionalKeyValues:J,alreadyAppliedFilters:ge,objectId:O.objectId}),Y("endobj"),"sMask"in O&&O.sMask!==void 0){var P="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,C={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:P,data:O.sMask};"filter"in O&&(C.filter=O.filter),I.call(this,C)}if(O.colorSpace===A.INDEXED){var G=this.internal.newObject();E({data:q(new Uint8Array(O.palette)),objectId:G}),Y("endobj")}},l=function(){var I=this.internal.collections.addImage_images;for(var O in I)u.call(this,I[O])},d=function(){var I,O=this.internal.collections.addImage_images,Y=this.internal.write;for(var E in O)Y("/I"+(I=O[E]).index,I.objectId,"0","R")},h=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},p=function(){var I=this.internal.collections.addImage_images;return h.call(this),I},m=function(){return Object.keys(this.internal.collections.addImage_images).length},y=function(I){return typeof a["process"+I.toUpperCase()]=="function"},w=function(I){return gn(I)==="object"&&I.nodeType===1},j=function(I,O){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var Y=""+I.getAttribute("src");if(Y.indexOf("data:image/")===0)return Uu(unescape(Y).split("base64,").pop());var E=a.loadFile(Y,!0);if(E!==void 0)return E}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var oe;switch(O){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return Uu(I.toDataURL(oe,1).split("base64,").pop())}},g=function(I){var O=this.internal.collections.addImage_images;if(O){for(var Y in O)if(I===O[Y].alias)return O[Y]}},L=function(I,O,Y){return I||O||(I=-96,O=-96),I<0&&(I=-1*Y.width*72/I/this.internal.scaleFactor),O<0&&(O=-1*Y.height*72/O/this.internal.scaleFactor),I===0&&(I=O*Y.width/Y.height),O===0&&(O=I*Y.height/Y.width),[I,O]},N=function(I,O,Y,E,oe,J){var ae=L.call(this,Y,E,oe),he=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,ge=p.call(this);if(Y=ae[0],E=ae[1],ge[oe.index]=oe,J){J*=Math.PI/180;var P=Math.cos(J),C=Math.sin(J),G=function(ee){return ee.toFixed(4)},$=[G(P),G(C),G(-1*C),G(P),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,he(I),fe(O+E),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([he(Y),"0","0",he(E),"0","0","cm"].join(" "))):this.internal.write([he(Y),"0","0",he(E),he(I),fe(O+E),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},A=a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=a.__addimage__.sHashCode=function(I){var O,Y,E=0;if(typeof I=="string")for(Y=I.length,O=0;O<Y;O++)E=(E<<5)-E+I.charCodeAt(O),E|=0;else if(ce(I))for(Y=I.byteLength/2,O=0;O<Y;O++)E=(E<<5)-E+I[O],E|=0;return E},D=a.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var O=!0;return I.length===0&&(O=!1),I.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(O=!1),O},F=a.__addimage__.extractImageFromDataUrl=function(I){var O=(I=I||"").split("base64,"),Y=null;if(O.length===2){var E=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(E)&&(Y={mimeType:E[1],charset:E[2],data:O[1]})}return Y},B=a.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};a.__addimage__.isArrayBuffer=function(I){return B()&&I instanceof ArrayBuffer};var ce=a.__addimage__.isArrayBufferView=function(I){return B()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},U=a.__addimage__.binaryStringToUint8Array=function(I){for(var O=I.length,Y=new Uint8Array(O),E=0;E<O;E++)Y[E]=I.charCodeAt(E);return Y},q=a.__addimage__.arrayBufferToBinaryString=function(I){for(var O="",Y=ce(I)?I:new Uint8Array(I),E=0;E<Y.length;E+=8192)O+=String.fromCharCode.apply(null,Y.subarray(E,E+8192));return O};a.addImage=function(){var I,O,Y,E,oe,J,ae,he,fe;if(typeof arguments[1]=="number"?(O=s,Y=arguments[1],E=arguments[2],oe=arguments[3],J=arguments[4],ae=arguments[5],he=arguments[6],fe=arguments[7]):(O=arguments[1],Y=arguments[2],E=arguments[3],oe=arguments[4],J=arguments[5],ae=arguments[6],he=arguments[7],fe=arguments[8]),gn(I=arguments[0])==="object"&&!w(I)&&"imageData"in I){var ge=I;I=ge.imageData,O=ge.format||O||s,Y=ge.x||Y||0,E=ge.y||E||0,oe=ge.w||ge.width||oe,J=ge.h||ge.height||J,ae=ge.alias||ae,he=ge.compression||he,fe=ge.rotation||ge.angle||fe}var P=this.internal.getFilters();if(he===void 0&&P.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(Y)||isNaN(E))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var C=ie.call(this,I,O,ae,he);return N.call(this,Y,E,oe,J,C,fe),this};var ie=function(I,O,Y,E){var oe,J,ae;if(typeof I=="string"&&o(I)===s){I=unescape(I);var he=se(I,!1);(he!==""||(he=a.loadFile(I,!0))!==void 0)&&(I=he)}if(w(I)&&(I=j(I,O)),O=o(I,O),!y(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((ae=Y)==null||ae.length===0)&&(Y=(function(fe){return typeof fe=="string"||ce(fe)?T(fe):ce(fe.data)?T(fe.data):null})(I)),(oe=g.call(this,Y))||(B()&&(I instanceof Uint8Array||O==="RGBA"||(J=I,I=U(I))),oe=this["process"+O.toUpperCase()](I,m.call(this),Y,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in a.image_compression?fe:_.NONE})(E),J)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},se=a.__addimage__.convertBase64ToBinaryString=function(I,O){var Y;O=typeof O!="boolean"||O;var E,oe="";if(typeof I=="string"){E=(Y=F(I))!==null?Y.data:I;try{oe=Uu(E)}catch(J){if(O)throw D(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};a.getImageProperties=function(I){var O,Y,E="";if(w(I)&&(I=j(I)),typeof I=="string"&&o(I)===s&&((E=se(I,!1))===""&&(E=a.loadFile(I)||""),I=E),Y=o(I),!y(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!B()||I instanceof Uint8Array||(I=U(I)),!(O=this["process"+Y.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=Y,O}})(Ct.API),(function(a){var s=function(r){if(r!==void 0&&r!="")return!0};Ct.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),a.events.push(["putPage",function(r){for(var o,u,l,d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,y=!1,w=0;w<m.length&&!y;w++)switch((o=m[w]).type){case"link":(s(o.options.url)||s(o.options.pageNumber))&&(y=!0);break;case"reference":case"text":case"freetext":y=!0}if(y!=0){this.internal.write("/Annots [");for(var j=0;j<m.length;j++){o=m[j];var g=this.internal.pdfEscape,L=this.internal.getEncryptor(r.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(N.objId),T=o.title||"Note";l="<</Type /Annot /Subtype /Text "+(u="/Rect ["+d(o.bounds.x)+" "+h(o.bounds.y+o.bounds.h)+" "+d(o.bounds.x+o.bounds.w)+" "+h(o.bounds.y)+"] ")+"/Contents ("+g(_(o.contents))+")",l+=" /Popup "+A.objId+" 0 R",l+=" /P "+p.objId+" 0 R",l+=" /T ("+g(_(T))+") >>",N.content=l;var D=N.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+d(o.bounds.x+30)+" "+h(o.bounds.y+o.bounds.h)+" "+d(o.bounds.x+o.bounds.w+30)+" "+h(o.bounds.y)+"] ")+" /Parent "+D,o.open&&(l+=" /Open true"),l+=" >>",A.content=l,this.internal.write(N.objId,"0 R",A.objId,"0 R");break;case"freetext":u="/Rect ["+d(o.bounds.x)+" "+h(o.bounds.y)+" "+d(o.bounds.x+o.bounds.w)+" "+h(o.bounds.y+o.bounds.h)+"] ";var F=o.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+g(L(o.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(o.options.name){var B=this.annotations._nameMap[o.options.name];o.options.pageNumber=B.page,o.options.top=B.y}else o.options.top||(o.options.top=0);if(u="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",l="",o.options.url)l="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+g(L(o.options.url))+") >>";else if(o.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,l+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var ce=h(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),l+=" /XYZ "+o.options.left+" "+ce+" "+o.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),a.createAnnotation=function(r){var o=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":o.pageContext.annotations.push(r)}},a.link=function(r,o,u,l,d){var h=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:p(r),y:m(o),w:p(r+u),h:m(o+l)},options:d,type:"link"})},a.textWithLink=function(r,o,u,l){var d,h,p=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){h=l.maxWidth;var y=this.splitTextToSize(r,h).length;d=Math.ceil(m*y)}else h=p,d=m;return this.text(r,o,u,l),u+=.2*m,l.align==="center"&&(o-=p/2),l.align==="right"&&(o-=p),this.link(o,u-m,h,d,l),p},a.getTextWidth=function(r){var o=this.internal.getFontSize();return this.getStringUnitWidth(r)*o/this.internal.scaleFactor}})(Ct.API),(function(a){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];a.__arabicParser__={};var l=a.__arabicParser__.isInArabicSubstitutionA=function(N){return s[N.charCodeAt(0)]!==void 0},d=a.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},h=a.__arabicParser__.isArabicEndLetter=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length<=2},p=a.__arabicParser__.isArabicAlfLetter=function(N){return d(N)&&u.indexOf(N.charCodeAt(0))>=0};a.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=1};var m=a.__arabicParser__.arabicLetterHasFinalForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=2};a.__arabicParser__.arabicLetterHasInitialForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length>=3};var y=a.__arabicParser__.arabicLetterHasMedialForm=function(N){return d(N)&&l(N)&&s[N.charCodeAt(0)].length==4},w=a.__arabicParser__.resolveLigatures=function(N){var A=0,_=r,T="",D=0;for(A=0;A<N.length;A+=1)_[N.charCodeAt(A)]!==void 0?(D++,typeof(_=_[N.charCodeAt(A)])=="number"&&(T+=String.fromCharCode(_),_=r,D=0),A===N.length-1&&(_=r,T+=N.charAt(A-(D-1)),A-=D-1,D=0)):(_=r,T+=N.charAt(A-D),A-=D,D=0);return T};a.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&o[N.charCodeAt(0)]!==void 0};var j=a.__arabicParser__.getCorrectForm=function(N,A,_){return d(N)?l(N)===!1?-1:!m(N)||!d(A)&&!d(_)||!d(_)&&h(A)||h(N)&&!d(A)||h(N)&&p(A)||h(N)&&h(A)?0:y(N)&&d(A)&&!h(A)&&d(_)&&m(_)?3:h(N)||!d(_)?1:2:-1},g=function(N){var A=0,_=0,T=0,D="",F="",B="",ce=(N=N||"").split("\\s+"),U=[];for(A=0;A<ce.length;A+=1){for(U.push(""),_=0;_<ce[A].length;_+=1)D=ce[A][_],F=ce[A][_-1],B=ce[A][_+1],d(D)?(T=j(D,F,B),U[A]+=T!==-1?String.fromCharCode(s[D.charCodeAt(0)][T]):D):U[A]+=D;U[A]=w(U[A])}return U.join(" ")},L=a.__arabicParser__.processArabic=a.processArabic=function(){var N,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(A)){var T=0;for(_=[],T=0;T<A.length;T+=1)Array.isArray(A[T])?_.push([g(A[T][0]),A[T][1],A[T][2]]):_.push([g(A[T])]);N=_}else N=g(A);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};a.events.push(["preProcessText",L])})(Ct.API),Ct.API.autoPrint=function(a){var s;switch((a=a||{}).variant=a.variant||"non-conform",a.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+s+" 0 R")}))}return this},(function(a){var s=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(h){r=h}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(h){o=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(h){u=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(h){l=h}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(h){d=h}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(r,o){var u;if((r=r||"2d")!=="2d")return null;for(u in o)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=o[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},a.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])})(Ct.API),(function(a){var s={left:0,top:0,bottom:0,right:0},r=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var y=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(N){w=N}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(N){j=N}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(N){L=N}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},a.setHeaderFunction=function(p){return o.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},a.getTextDimensions=function(p,m){o.call(this);var y=(m=m||{}).fontSize||this.getFontSize(),w=m.font||this.getFont(),j=m.scaleFactor||this.internal.scaleFactor,g=0,L=0,N=0,A=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var _=m.maxWidth;_>0?typeof p=="string"?p=this.splitTextToSize(p,_):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce((function(D,F){return D.concat(A.splitTextToSize(F,_))}),[])):p=Array.isArray(p)?p:[p];for(var T=0;T<p.length;T++)g<(N=this.getStringUnitWidth(p[T],{font:w})*y)&&(g=N);return g!==0&&(L=p.length),{w:g/=j,h:Math.max((L*y*this.getLineHeightFactor()-y*(this.getLineHeightFactor()-1))/j,0)}},a.cellAddPage=function(){o.call(this),this.addPage();var p=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new l(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=a.cell=function(){var p;p=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),o.call(this);var m=this.internal.__cell__.lastCell,y=this.internal.__cell__.padding,w=this.internal.__cell__.margins||s,j=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===p.lineNumber?(p.x=(m.x||0)+(m.width||0),p.y=m.y||0):m.y+m.height+p.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=w.top,g&&j&&(this.printHeaderRow(p.lineNumber,!0),p.y+=j[0].height)):p.y=m.y+m.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,r===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-y,p.y+y,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+y,{align:"center",baseline:"top",maxWidth:p.width-y-y}):this.text(p.text,p.x+y,p.y+y,{align:"left",baseline:"top",maxWidth:p.width-y-y})),this.internal.__cell__.lastCell=p,this};a.table=function(p,m,y,w,j){if(o.call(this),!y)throw new Error("No data for PDF table.");var g,L,N,A,_=[],T=[],D=[],F={},B={},ce=[],U=[],q=(j=j||{}).autoSize||!1,ie=j.printHeaders!==!1,se=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,I=j.margins||Object.assign({width:this.getPageWidth()},s),O=typeof j.padding=="number"?j.padding:3,Y=j.headerBackgroundColor||"#c8c8c8",E=j.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=ie,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=se,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=E,this.setFontSize(se),w==null)T=_=Object.keys(y[0]),D=_.map((function(){return"left"}));else if(Array.isArray(w)&&gn(w[0])==="object")for(_=w.map((function(ge){return ge.name})),T=w.map((function(ge){return ge.prompt||ge.name||""})),D=w.map((function(ge){return ge.align||"left"})),g=0;g<w.length;g+=1)B[w[g].name]=w[g].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(T=_=w,D=_.map((function(){return"left"})));if(q||Array.isArray(w)&&typeof w[0]=="string")for(g=0;g<_.length;g+=1){for(F[A=_[g]]=y.map((function(ge){return ge[A]})),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(T[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=F[A],this.setFont(void 0,"normal"),N=0;N<L.length;N+=1)ce.push(this.getTextDimensions(L[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[A]=Math.max.apply(null,ce)+O+O,ce=[]}if(ie){var oe={};for(g=0;g<_.length;g+=1)oe[_[g]]={},oe[_[g]].text=T[g],oe[_[g]].align=D[g];var J=h.call(this,oe,B);U=_.map((function(ge){return new l(p,m,B[ge],J,oe[ge].text,void 0,oe[ge].align)})),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ae=w.reduce((function(ge,P){return ge[P.name]=P.align,ge}),{});for(g=0;g<y.length;g+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:g,data:y[g]},this);var he=h.call(this,y[g],B);for(N=0;N<_.length;N+=1){var fe=y[g][_[N]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:g,col:N,data:fe},this),d.call(this,new l(p,m,B[_[N]],he,fe,g+2,ae[_[N]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=m,this};var h=function(p,m){var y=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(p).map((function(g){var L=p[g];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,m[g]-y-y)}),this).map((function(g){return this.getLineHeightFactor()*g.length*w/j+y+y}),this).reduce((function(g,L){return Math.max(g,L)}),0)};a.setTableHeaderRow=function(p){o.call(this),this.internal.__cell__.tableHeaderRow=p},a.printHeaderRow=function(p,m){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var y;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){y=this.internal.__cell__.tableHeaderRow[g].clone(),m&&(y.y=this.internal.__cell__.margins.top||0,j.push(y)),y.lineNumber=p;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,y),this.setTextColor(L)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),r=!1}})(Ct.API);var _1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],sp=j1(A1),k1=[100,200,300,400,500,600,700,800,900],ov=j1(k1);function op(a){var s=a.family.replace(/"|'/g,"").toLowerCase(),r=(function(l){return _1[l=l||"normal"]?l:"normal"})(a.style),o=(function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}})(a.weight),u=(function(l){return typeof sp[l=l||"normal"]=="number"?l:"normal"})(a.stretch);return{family:s,style:r,weight:o,stretch:u,src:a.src||[],ref:a.ref||{name:s,style:[u,r,o].join(" ")}}}function j2(a,s,r,o){var u;for(u=r;u>=0&&u<s.length;u+=o)if(a[s[u]])return a[s[u]];for(u=r;u>=0&&u<s.length;u-=o)if(a[s[u]])return a[s[u]]}var lv={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function A2(a){return[a.stretch,a.style,a.weight,a.family].join(" ")}function cv(a,s,r){for(var o=(r=r||{}).defaultFontFamily||"times",u=Object.assign({},lv,r.genericFontFamilies||{}),l=null,d=null,h=0;h<s.length;++h)if(u[(l=op(s[h])).family]&&(l.family=u[l.family]),a.hasOwnProperty(l.family)){d=a[l.family];break}if(!(d=d||a[o]))throw new Error("Could not find a font-family for the rule '"+A2(l)+"' and default family '"+o+"'.");if(d=(function(p,m){if(m[p])return m[p];var y=sp[p],w=y<=sp.normal?-1:1,j=j2(m,A1,y,w);if(!j)throw new Error("Could not find a matching font-stretch value for "+p);return j})(l.stretch,d),d=(function(p,m){if(m[p])return m[p];for(var y=_1[p],w=0;w<y.length;++w)if(m[y[w]])return m[y[w]];throw new Error("Could not find a matching font-style for "+p)})(l.style,d),!(d=(function(p,m){if(m[p])return m[p];if(p===400&&m[500])return m[500];if(p===500&&m[400])return m[400];var y=ov[p],w=j2(m,k1,y,p<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+p);return w})(l.weight,d)))throw new Error("Failed to resolve a font for the rule '"+A2(l)+"'.");return d}function k2(a){return a.trimLeft()}function uv(a,s){for(var r=0;r<a.length;){if(a.charAt(r)===s)return[a.substring(0,r),a.substring(r+1)];r+=1}return null}function dv(a){var s=a.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],a.substring(s[0].length)]}var Gd,C2,L2,Hh=["times"];(function(a){var s,r,o,u,l,d,h,p,m,y=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new p,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new d,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new d,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};a.events.push(["initialized",function(){this.context2d=new w(this),s=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,h=this.internal.Rectangle,p=this.internal.Matrix,m=new y}]);var w=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=C;Object.defineProperty(this,"pdf",{get:function(){return G}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(me){$=!!me}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(me){ee=!!me}});var be=0;Object.defineProperty(this,"posX",{get:function(){return be},set:function(me){isNaN(me)||(be=me)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(me){isNaN(me)||(Se=me)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(me){var W;typeof me=="number"?W=[me,me,me,me]:((W=new Array(4))[0]=me[0],W[1]=me.length>=2?me[1]:W[0],W[2]=me.length>=3?me[2]:W[0],W[3]=me.length>=4?me[3]:W[1]),m.margin=W}});var je=!1;Object.defineProperty(this,"autoPaging",{get:function(){return je},set:function(me){je=me}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(me){Ae=me}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(me){Ee=me}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(me){me instanceof y&&(m=me)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(me){m.path=me}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(me){Re=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var W;W=j(me),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var W=j(me);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var qe=null;function Xe(me,W){if(qe===null){var le=(function(te){var de=[];return Object.keys(te).forEach((function(ke){te[ke].forEach((function(Le){var xe=null;switch(Le){case"bold":xe={family:ke,weight:"bold"};break;case"italic":xe={family:ke,style:"italic"};break;case"bolditalic":xe={family:ke,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:ke}}xe!==null&&(xe.ref={name:ke,style:Le},de.push(xe))}))})),de})(me.getFontList());qe=(function(te){for(var de={},ke=0;ke<te.length;++ke){var Le=op(te[ke]),xe=Le.family,Oe=Le.stretch,De=Le.style,Ge=Le.weight;de[xe]=de[xe]||{},de[xe][Oe]=de[xe][Oe]||{},de[xe][Oe][De]=de[xe][Oe][De]||{},de[xe][Oe][De][Ge]=Le}return de})(le.concat(W))}return qe}var M=null;Object.defineProperty(this,"fontFaces",{get:function(){return M},set:function(me){qe=null,M=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var W;if(this.ctx.font=me,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(me))!==null){var le=W[1],te=(W[2],W[3]),de=W[4],ke=(W[5],W[6]),Le=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(de)[2];de=Math.floor(Le==="px"?parseFloat(de)*this.pdf.internal.scaleFactor:Le==="em"?parseFloat(de)*this.pdf.getFontSize():parseFloat(de)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(de);var xe=(function(ft){var Lt,rt,Cn=[],ht=ft.trim();if(ht==="")return Hh;if(ht in _2)return[_2[ht]];for(;ht!=="";){switch(rt=null,Lt=(ht=k2(ht)).charAt(0)){case'"':case"'":rt=uv(ht.substring(1),Lt);break;default:rt=dv(ht)}if(rt===null||(Cn.push(rt[0]),(ht=k2(rt[1]))!==""&&ht.charAt(0)!==","))return Hh;ht=ht.replace(/^,/,"")}return Cn})(ke);if(this.fontFaces){var Oe=cv(Xe(this.pdf,this.fontFaces),xe.map((function(ft){return{family:ft,stretch:"normal",weight:te,style:le}})));this.pdf.setFont(Oe.ref.name,Oe.ref.style)}else{var De="";(te==="bold"||parseInt(te,10)>=700||le==="bold")&&(De="bold"),le==="italic"&&(De+="italic"),De.length===0&&(De="normal");for(var Ge="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ct=0;ct<xe.length;ct++){if(this.pdf.internal.getFont(xe[ct],De,{noFallback:!0,disableWarning:!0})!==void 0){Ge=xe[ct];break}if(De==="bolditalic"&&this.pdf.internal.getFont(xe[ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=xe[ct],De="bold";else if(this.pdf.internal.getFont(xe[ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=xe[ct],De="normal";break}}if(Ge===""){for(var dt=0;dt<xe.length;dt++)if(at[xe[dt]]){Ge=at[xe[dt]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,De)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,P.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,P.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};w.prototype.setLineDash=function(C){this.lineDash=C},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){F.call(this,"fill",!1)},w.prototype.stroke=function(){F.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(C,G){if(isNaN(C)||isNaN(G))throw kn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new d(C,G));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new d(C,G)},w.prototype.closePath=function(){var C=new d(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&gn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){C=new d(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(C.x,C.y)},w.prototype.lineTo=function(C,G){if(isNaN(C)||isNaN(G))throw kn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new d(C,G));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new d($.x,$.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},w.prototype.quadraticCurveTo=function(C,G,$,ee){if(isNaN($)||isNaN(ee)||isNaN(C)||isNaN(G))throw kn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var be=this.ctx.transform.applyToPoint(new d($,ee)),Se=this.ctx.transform.applyToPoint(new d(C,G));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:be.x,y:be.y}),this.ctx.lastPoint=new d(be.x,be.y)},w.prototype.bezierCurveTo=function(C,G,$,ee,be,Se){if(isNaN(be)||isNaN(Se)||isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee))throw kn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var je=this.ctx.transform.applyToPoint(new d(be,Se)),Ae=this.ctx.transform.applyToPoint(new d(C,G)),Ee=this.ctx.transform.applyToPoint(new d($,ee));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Ee.x,y2:Ee.y,x:je.x,y:je.y}),this.ctx.lastPoint=new d(je.x,je.y)},w.prototype.arc=function(C,G,$,ee,be,Se){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee)||isNaN(be))throw kn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var je=this.ctx.transform.applyToPoint(new d(C,G));C=je.x,G=je.y;var Ae=this.ctx.transform.applyToPoint(new d(0,$)),Ee=this.ctx.transform.applyToPoint(new d(0,0));$=Math.sqrt(Math.pow(Ae.x-Ee.x,2)+Math.pow(Ae.y-Ee.y,2))}Math.abs(be-ee)>=2*Math.PI&&(ee=0,be=2*Math.PI),this.path.push({type:"arc",x:C,y:G,radius:$,startAngle:ee,endAngle:be,counterclockwise:Se})},w.prototype.arcTo=function(C,G,$,ee,be){throw new Error("arcTo not implemented.")},w.prototype.rect=function(C,G,$,ee){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee))throw kn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,G),this.lineTo(C+$,G),this.lineTo(C+$,G+ee),this.lineTo(C,G+ee),this.lineTo(C,G),this.lineTo(C+$,G),this.lineTo(C,G)},w.prototype.fillRect=function(C,G,$,ee){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee))throw kn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var be={};this.lineCap!=="butt"&&(be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,G,$,ee),this.fill(),be.hasOwnProperty("lineCap")&&(this.lineCap=be.lineCap),be.hasOwnProperty("lineJoin")&&(this.lineJoin=be.lineJoin)}},w.prototype.strokeRect=function(C,G,$,ee){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee))throw kn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(C,G,$,ee),this.stroke())},w.prototype.clearRect=function(C,G,$,ee){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee))throw kn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,G,$,ee))},w.prototype.save=function(C){C=typeof C!="boolean"||C;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new y(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},w.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(G),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(C){var G,$,ee,be;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))G=0,$=0,ee=0,be=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(Se!==null)G=parseInt(Se[1]),$=parseInt(Se[2]),ee=parseInt(Se[3]),be=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)G=parseInt(Se[1]),$=parseInt(Se[2]),ee=parseInt(Se[3]),be=parseFloat(Se[4]);else{if(be=1,typeof C=="string"&&C.charAt(0)!=="#"){var je=new x1(C);C=je.ok?je.toHex():"#000000"}C.length===4?(G=C.substring(1,2),G+=G,$=C.substring(2,3),$+=$,ee=C.substring(3,4),ee+=ee):(G=C.substring(1,3),$=C.substring(3,5),ee=C.substring(5,7)),G=parseInt(G,16),$=parseInt($,16),ee=parseInt(ee,16)}}return{r:G,g:$,b:ee,a:be,style:C}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(C,G,$,ee){if(isNaN(G)||isNaN($)||typeof C!="string")throw kn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var be=he(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;O.call(this,{text:C,x:G,y:$,scale:Se,angle:be,align:this.textAlign,maxWidth:ee})}},w.prototype.strokeText=function(C,G,$,ee){if(isNaN(G)||isNaN($)||typeof C!="string")throw kn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){ee=isNaN(ee)?void 0:ee;var be=he(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;O.call(this,{text:C,x:G,y:$,scale:Se,renderingMode:"stroke",angle:be,align:this.textAlign,maxWidth:ee})}},w.prototype.measureText=function(C){if(typeof C!="string")throw kn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,$=this.pdf.internal.scaleFactor,ee=G.internal.getFontSize(),be=G.getStringUnitWidth(C)*ee/G.internal.scaleFactor,Se=function(je){var Ae=(je=je||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this};return new Se({width:be*=Math.round(96*$/72*1e4)/1e4})},w.prototype.scale=function(C,G){if(isNaN(C)||isNaN(G))throw kn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new p(C,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply($)},w.prototype.rotate=function(C){if(isNaN(C))throw kn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new p(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},w.prototype.translate=function(C,G){if(isNaN(C)||isNaN(G))throw kn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new p(1,0,0,1,C,G);this.ctx.transform=this.ctx.transform.multiply($)},w.prototype.transform=function(C,G,$,ee,be,Se){if(isNaN(C)||isNaN(G)||isNaN($)||isNaN(ee)||isNaN(be)||isNaN(Se))throw kn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var je=new p(C,G,$,ee,be,Se);this.ctx.transform=this.ctx.transform.multiply(je)},w.prototype.setTransform=function(C,G,$,ee,be,Se){C=isNaN(C)?1:C,G=isNaN(G)?0:G,$=isNaN($)?0:$,ee=isNaN(ee)?1:ee,be=isNaN(be)?0:be,Se=isNaN(Se)?0:Se,this.ctx.transform=new p(C,G,$,ee,be,Se)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(C,G,$,ee,be,Se,je,Ae,Ee){var Re=this.pdf.getImageProperties(C),qe=1,Xe=1,M=1,me=1;ee!==void 0&&Ae!==void 0&&(M=Ae/ee,me=Ee/be,qe=Re.width/ee*Ae/ee,Xe=Re.height/be*Ee/be),Se===void 0&&(Se=G,je=$,G=0,$=0),ee!==void 0&&Ae===void 0&&(Ae=ee,Ee=be),ee===void 0&&Ae===void 0&&(Ae=Re.width,Ee=Re.height);for(var W,le=this.ctx.transform.decompose(),te=he(le.rotate.shx),de=new p,ke=(de=(de=(de=de.multiply(le.translate)).multiply(le.skew)).multiply(le.scale)).applyToRectangle(new h(Se-G*M,je-$*me,ee*qe,be*Xe)),Le=A.call(this,ke),xe=[],Oe=0;Oe<Le.length;Oe+=1)xe.indexOf(Le[Oe])===-1&&xe.push(Le[Oe]);if(D(xe),this.autoPaging)for(var De=xe[0],Ge=xe[xe.length-1],at=De;at<Ge+1;at++){this.pdf.setPage(at);var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=at===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=at===1?0:ft+(at-2)*Lt;if(this.ctx.clip_path.length!==0){var Cn=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(W,this.posX+this.margin[3],-rt+dt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=Cn}var ht=JSON.parse(JSON.stringify(ke));ht=T([ht],this.posX+this.margin[3],-rt+dt+this.ctx.prevPageLastElemOffset)[0];var an=(at>De||at<Ge)&&N.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Lt,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,te),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,te)};var A=function(C,G,$){var ee=[];G=G||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var be=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":ee.push(Math.floor((C.y+be)/$)+1);break;case"arc":ee.push(Math.floor((C.y+be-C.radius)/$)+1),ee.push(Math.floor((C.y+be+C.radius)/$)+1);break;case"qct":var Se=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);ee.push(Math.floor((Se.y+be)/$)+1),ee.push(Math.floor((Se.y+Se.h+be)/$)+1);break;case"bct":var je=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);ee.push(Math.floor((je.y+be)/$)+1),ee.push(Math.floor((je.y+je.h+be)/$)+1);break;case"rect":ee.push(Math.floor((C.y+be)/$)+1),ee.push(Math.floor((C.y+C.h+be)/$)+1)}for(var Ae=0;Ae<ee.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<ee[Ae];)_.call(this);return ee},_=function(){var C=this.fillStyle,G=this.strokeStyle,$=this.font,ee=this.lineCap,be=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=G,this.font=$,this.lineCap=ee,this.lineWidth=be,this.lineJoin=Se},T=function(C,G,$){for(var ee=0;ee<C.length;ee++)switch(C[ee].type){case"bct":C[ee].x2+=G,C[ee].y2+=$;case"qct":C[ee].x1+=G,C[ee].y1+=$;case"mt":case"lt":case"arc":default:C[ee].x+=G,C[ee].y+=$}return C},D=function(C){return C.sort((function(G,$){return G-$}))},F=function(C,G){for(var $,ee,be=this.fillStyle,Se=this.strokeStyle,je=this.lineCap,Ae=this.lineWidth,Ee=Math.abs(Ae*this.ctx.transform.scaleX),Re=this.lineJoin,qe=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),M=[],me=0;me<Xe.length;me++)if(Xe[me].x!==void 0)for(var W=A.call(this,Xe[me]),le=0;le<W.length;le+=1)M.indexOf(W[le])===-1&&M.push(W[le]);for(var te=0;te<M.length;te++)for(;this.pdf.internal.getNumberOfPages()<M[te];)_.call(this);if(D(M),this.autoPaging)for(var de=M[0],ke=M[M.length-1],Le=de;Le<ke+1;Le++){this.pdf.setPage(Le),this.fillStyle=be,this.strokeStyle=Se,this.lineCap=je,this.lineWidth=Ee,this.lineJoin=Re;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=Le===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=Le===1?0:De+(Le-2)*Ge;if(this.ctx.clip_path.length!==0){var ct=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T($,this.posX+this.margin[3],-at+Oe+this.ctx.prevPageLastElemOffset),B.call(this,C,!0),this.path=ct}if(ee=JSON.parse(JSON.stringify(qe)),this.path=T(ee,this.posX+this.margin[3],-at+Oe+this.ctx.prevPageLastElemOffset),G===!1||Le===0){var dt=(Le>de||Le<ke)&&N.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Ge,null).clip().discardPath()),B.call(this,C,G),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=Ee,B.call(this,C,G),this.lineWidth=Ae;this.path=qe},B=function(C,G){if((C!=="stroke"||G||!L.call(this))&&(C==="stroke"||G||!g.call(this))){for(var $,ee,be=[],Se=this.path,je=0;je<Se.length;je++){var Ae=Se[je];switch(Ae.type){case"begin":be.push({begin:!0});break;case"close":be.push({close:!0});break;case"mt":be.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Ee=be.length;if(Se[je-1]&&!isNaN(Se[je-1].x)&&($=[Ae.x-Se[je-1].x,Ae.y-Se[je-1].y],Ee>0)){for(;Ee>=0;Ee--)if(be[Ee-1].close!==!0&&be[Ee-1].begin!==!0){be[Ee-1].deltas.push($),be[Ee-1].abs.push(Ae);break}}break;case"bct":$=[Ae.x1-Se[je-1].x,Ae.y1-Se[je-1].y,Ae.x2-Se[je-1].x,Ae.y2-Se[je-1].y,Ae.x-Se[je-1].x,Ae.y-Se[je-1].y],be[be.length-1].deltas.push($);break;case"qct":var Re=Se[je-1].x+2/3*(Ae.x1-Se[je-1].x),qe=Se[je-1].y+2/3*(Ae.y1-Se[je-1].y),Xe=Ae.x+2/3*(Ae.x1-Ae.x),M=Ae.y+2/3*(Ae.y1-Ae.y),me=Ae.x,W=Ae.y;$=[Re-Se[je-1].x,qe-Se[je-1].y,Xe-Se[je-1].x,M-Se[je-1].y,me-Se[je-1].x,W-Se[je-1].y],be[be.length-1].deltas.push($);break;case"arc":be.push({deltas:[],abs:[],arc:!0}),Array.isArray(be[be.length-1].abs)&&be[be.length-1].abs.push(Ae)}}ee=G?null:C==="stroke"?"stroke":"fill";for(var le=!1,te=0;te<be.length;te++)if(be[te].arc)for(var de=be[te].abs,ke=0;ke<de.length;ke++){var Le=de[ke];Le.type==="arc"?q.call(this,Le.x,Le.y,Le.radius,Le.startAngle,Le.endAngle,Le.counterclockwise,void 0,G,!le):Y.call(this,Le.x,Le.y),le=!0}else if(be[te].close===!0)this.pdf.internal.out("h"),le=!1;else if(be[te].begin!==!0){var xe=be[te].start.x,Oe=be[te].start.y;E.call(this,be[te].deltas,xe,Oe),le=!0}ee&&ie.call(this,ee),G&&se.call(this)}},ce=function(C){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-$;case"top":return C+G-$;case"hanging":return C+G-2*$;case"middle":return C+G/2-$;case"ideographic":return C;case"alphabetic":default:return C}},U=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(G,$){this.colorStops.push([G,$])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(C,G,$,ee,be,Se,je,Ae,Ee){for(var Re=J.call(this,$,ee,be,Se),qe=0;qe<Re.length;qe++){var Xe=Re[qe];qe===0&&(Ee?I.call(this,Xe.x1+C,Xe.y1+G):Y.call(this,Xe.x1+C,Xe.y1+G)),oe.call(this,C,G,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}Ae?se.call(this):ie.call(this,je)},ie=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},se=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(C,G){this.pdf.internal.out(r(C)+" "+o(G)+" m")},O=function(C){var G;switch(C.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var $=this.pdf.getTextDimensions(C.text),ee=ce.call(this,C.y),be=U.call(this,ee)-$.h,Se=this.ctx.transform.applyToPoint(new d(C.x,ee)),je=this.ctx.transform.decompose(),Ae=new p;Ae=(Ae=(Ae=Ae.multiply(je.translate)).multiply(je.skew)).multiply(je.scale);for(var Ee,Re,qe,Xe=this.ctx.transform.applyToRectangle(new h(C.x,ee,$.w,$.h)),M=Ae.applyToRectangle(new h(C.x,be,$.w,$.h)),me=A.call(this,M),W=[],le=0;le<me.length;le+=1)W.indexOf(me[le])===-1&&W.push(me[le]);if(D(W),this.autoPaging)for(var te=W[0],de=W[W.length-1],ke=te;ke<de+1;ke++){this.pdf.setPage(ke);var Le=ke===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],De=Oe-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],at=Ge-this.margin[3],ct=ke===1?0:xe+(ke-2)*De;if(this.ctx.clip_path.length!==0){var dt=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ee,this.posX+this.margin[3],-1*ct+Le),B.call(this,"fill",!0),this.path=dt}var ft=T([JSON.parse(JSON.stringify(M))],this.posX+this.margin[3],-ct+Le+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*C.scale),qe=this.lineWidth,this.lineWidth=qe*C.scale);var Lt=this.autoPaging!=="text";if(Lt||ft.y+ft.h<=Oe){if(Lt||ft.y>=Le&&ft.x<=Ge){var rt=Lt?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||Ge-ft.x)[0],Cn=T([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-ct+Le+this.ctx.prevPageLastElemOffset)[0],ht=Lt&&(ke>te||ke<de)&&N.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,De,null).clip().discardPath()),this.pdf.text(rt,Cn.x,Cn.y,{angle:C.angle,align:G,renderingMode:C.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else ft.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-ft.y);C.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=qe)}else C.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*C.scale),qe=this.lineWidth,this.lineWidth=qe*C.scale),this.pdf.text(C.text,Se.x+this.posX,Se.y+this.posY,{angle:C.angle,align:G,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=qe)},Y=function(C,G,$,ee){$=$||0,ee=ee||0,this.pdf.internal.out(r(C+$)+" "+o(G+ee)+" l")},E=function(C,G,$){return this.pdf.lines(C,G,$,null,null)},oe=function(C,G,$,ee,be,Se,je,Ae){this.pdf.internal.out([s(u($+C)),s(l(ee+G)),s(u(be+C)),s(l(Se+G)),s(u(je+C)),s(l(Ae+G)),"c"].join(" "))},J=function(C,G,$,ee){for(var be=2*Math.PI,Se=Math.PI/2;G>$;)G-=be;var je=Math.abs($-G);je<be&&ee&&(je=be-je);for(var Ae=[],Ee=ee?-1:1,Re=G;je>1e-5;){var qe=Re+Ee*Math.min(je,Se);Ae.push(ae.call(this,C,Re,qe)),je-=Math.abs(qe-Re),Re=qe}return Ae},ae=function(C,G,$){var ee=($-G)/2,be=C*Math.cos(ee),Se=C*Math.sin(ee),je=be,Ae=-Se,Ee=je*je+Ae*Ae,Re=Ee+je*be+Ae*Se,qe=4/3*(Math.sqrt(2*Ee*Re)-Re)/(je*Se-Ae*be),Xe=je-qe*Ae,M=Ae+qe*je,me=Xe,W=-M,le=ee+G,te=Math.cos(le),de=Math.sin(le);return{x1:C*Math.cos(G),y1:C*Math.sin(G),x2:Xe*te-M*de,y2:Xe*de+M*te,x3:me*te-W*de,y3:me*de+W*te,x4:C*Math.cos($),y4:C*Math.sin($)}},he=function(C){return 180*C/Math.PI},fe=function(C,G,$,ee,be,Se){var je=C+.5*($-C),Ae=G+.5*(ee-G),Ee=be+.5*($-be),Re=Se+.5*(ee-Se),qe=Math.min(C,be,je,Ee),Xe=Math.max(C,be,je,Ee),M=Math.min(G,Se,Ae,Re),me=Math.max(G,Se,Ae,Re);return new h(qe,M,Xe-qe,me-M)},ge=function(C,G,$,ee,be,Se,je,Ae){var Ee,Re,qe,Xe,M,me,W,le,te,de,ke,Le,xe,Oe,De=$-C,Ge=ee-G,at=be-$,ct=Se-ee,dt=je-be,ft=Ae-Se;for(Re=0;Re<41;Re++)te=(W=(qe=C+(Ee=Re/40)*De)+Ee*((M=$+Ee*at)-qe))+Ee*(M+Ee*(be+Ee*dt-M)-W),de=(le=(Xe=G+Ee*Ge)+Ee*((me=ee+Ee*ct)-Xe))+Ee*(me+Ee*(Se+Ee*ft-me)-le),Re==0?(ke=te,Le=de,xe=te,Oe=de):(ke=Math.min(ke,te),Le=Math.min(Le,de),xe=Math.max(xe,te),Oe=Math.max(Oe,de));return new h(Math.round(ke),Math.round(Le),Math.round(xe-ke),Math.round(Oe-Le))},P=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,G,$=(C=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:G}));this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(Ct.API),(function(a){var s=function(l){var d,h,p,m,y,w,j,g,L,N;for(h=[],p=0,m=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;m>p;p+=4)(y=(l.charCodeAt(p)<<24)+(l.charCodeAt(p+1)<<16)+(l.charCodeAt(p+2)<<8)+l.charCodeAt(p+3))!==0?(w=(y=((y=((y=((y=(y-(N=y%85))/85)-(L=y%85))/85)-(g=y%85))/85)-(j=y%85))/85)%85,h.push(w+33,j+33,g+33,L+33,N+33)):h.push(122);return(function(A,_){for(var T=_;T>0;T--)A.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},r=function(l){var d,h,p,m,y,w=String,j="length",g=255,L="charCodeAt",N="slice",A="replace";for(l[N](-2),l=l[N](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),p=[],m=0,y=(l+=d="uuuuu"[N](l[j]%5||5))[j];y>m;m+=5)h=52200625*(l[L](m)-33)+614125*(l[L](m+1)-33)+7225*(l[L](m+2)-33)+85*(l[L](m+3)-33)+(l[L](m+4)-33),p.push(g&h>>24,g&h>>16,g&h>>8,g&h);return(function(_,T){for(var D=T;D>0;D--)_.pop()})(p,d[j]),w.fromCharCode.apply(w,p)},o=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var h="",p=0;p<l.length;p+=2)h+=String.fromCharCode("0x"+(l[p]+l[p+1]));return h},u=function(l){for(var d=new Uint8Array(l.length),h=l.length;h--;)d[h]=l.charCodeAt(h);return l=(d=tp(d)).reduce((function(p,m){return p+String.fromCharCode(m)}),"")};a.processDataByFilters=function(l,d){var h=0,p=l||"",m=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":p=r(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=s(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=o(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map((function(y){return("0"+y.charCodeAt().toString(16)).slice(-2)})).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=u(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(Ct.API),(function(a){a.loadFile=function(s,r,o){return(function(u,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var h=void 0;try{h=(function(p,m,y){var w=new XMLHttpRequest,j=0,g=function(L){var N=L.length,A=[],_=String.fromCharCode;for(j=0;j<N;j+=1)A.push(_(255&L.charCodeAt(j)));return A.join("")};if(w.open("GET",p,!m),w.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(w.onload=function(){w.status===200?y(g(this.responseText)):y(void 0)}),w.send(null),m&&w.status===200)return g(w.responseText)})(u,l,d)}catch{}return h})(s,r,o)},a.loadImageFile=a.loadFile})(Ct.API),(function(a){function s(){return(Et.html2canvas?Promise.resolve(Et.html2canvas):Xh(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))})).then((function(d){return d.default?d.default:d}))}function r(){return(Et.DOMPurify?Promise.resolve(Et.DOMPurify):Xh(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(d){return Promise.reject(new Error("Could not load dompurify: "+d))})).then((function(d){return d.default?d.default:d}))}var o=function(d){var h=gn(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},u=function(d,h){var p=document.createElement(d);for(var m in h.className&&(p.className=h.className),h.innerHTML&&h.dompurify&&(p.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)p.style[m]=h.style[m];return p},l=function d(h){var p=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),m=d.convert(Promise.resolve(),p);return m=(m=m.setProgress(1,d,1,[d])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,h){return d.__proto__=h||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,h){return this.then((function(){switch(h=h||(function(p){switch(o(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d)){case"string":return this.then(r).then((function(p){return this.set({src:u("div",{innerHTML:d,dompurify:p})})}));case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=(function p(m,y){for(var w=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),j=m.firstChild;j;j=j.nextSibling)y!==!0&&j.nodeType===1&&j.nodeName==="SCRIPT"||w.appendChild(p(j,y));return m.nodeType===1&&(m.nodeName==="CANVAS"?(w.width=m.width,w.height=m.height,w.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(w.value=m.value),w.addEventListener("load",(function(){w.scrollTop=m.scrollTop,w.scrollLeft=m.scrollLeft}),!0)),w})(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(s).then((function(h){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,h(this.prop.container,p)})).then((function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)}))},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(s).then((function(h){var p=this.opt.jsPDF,m=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var j=0;j<m.length;++j){var g=m[j],L=g.src.find((function(N){return N.format==="truetype"}));L&&p.addFont(L.url,g.ref.name,g.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,p.context2d.save(!0),h(this.prop.container,w)})).then((function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},l.prototype.output=function(d,h,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},l.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(d,h)}))},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}}))},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},l.prototype.set=function(d){if(o(d)!=="object")return this;var h=Object.keys(d||{}).map((function(p){if(p in l.template.prop)return function(){this.prop[p]=d[p]};switch(p){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[p]=d[p]}}}),this);return this.then((function(){return this.thenList(h)}))},l.prototype.get=function(d,h){return this.then((function(){var p=d in l.template.prop?this.prop[d]:this.opt[d];return h?h(p):p}))},l.prototype.setMargin=function(d){return this.then((function(){switch(o(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d})).then(this.setPageSize)},l.prototype.setPageSize=function(d){function h(p,m){return Math.floor(p*m/72*96)}return this.then((function(){(d=d||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d}))},l.prototype.setProgress=function(d,h,p,m){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,h,p,m){return this.setProgress(d?this.progress.val+d:null,h||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},l.prototype.then=function(d,h){var p=this;return this.thenCore(d,h,(function(m,y){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,(function(w){return p.updateProgress(null,m),w})).then(m,y).then((function(w){return p.updateProgress(1),w}))}))},l.prototype.thenCore=function(d,h,p){p=p||Promise.prototype.then,d&&(d=d.bind(this)),h&&(h=h.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),y=p.call(m,d,h);return l.convert(y,this.__proto__)},l.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},l.prototype.thenList=function(d){var h=this;return d.forEach((function(p){h=h.thenCore(p)})),h},l.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return l.convert(h,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then((function(){throw new Error(d)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ct.getPageSize=function(d,h,p){if(gn(d)==="object"){var m=d;d=m.orientation,h=m.unit||h,p=m.format||p}h=h||"mm",p=p||"a4",d=(""+(d||"P")).toLowerCase();var y,w=(""+p).toLowerCase(),j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var g,L=0,N=0;if(j.hasOwnProperty(w))L=j[w][1]/y,N=j[w][0]/y;else try{L=p[1],N=p[0]}catch{throw new Error("Invalid format: "+p)}if(d==="p"||d==="portrait")d="p",N>L&&(g=N,N=L,L=g);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",L>N&&(g=N,N=L,L=g)}return{width:N,height:L,unit:h,k:y,orientation:d}},a.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(op):null;var p=new l(h);return h.worker?p:p.from(d).doCallback()}})(Ct.API),Ct.API.addJS=function(a){return L2=a,this.internal.events.subscribe("postPutResources",(function(){Gd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),C2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L2+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Gd!==void 0&&C2!==void 0&&this.internal.out("/Names <</JavaScript "+Gd+" 0 R>>")})),this},(function(a){var s;a.events.push(["postPutResources",function(){var r=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=r.outline.render().split(/\r\n/),l=0;l<u.length;l++){var d=u[l],h=o.exec(d);if(h!=null){var p=h[1];r.internal.newObjectDeferredBegin(p,!1)}r.internal.write(d)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,y=[];for(l=0;l<m;l++){var w=r.internal.newObject();y.push(w);var j=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<y.length;l++)r.internal.write("(page_"+(l+1)+")"+y[l]+" 0 R");r.internal.write(" ] >>","endobj"),s=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),a.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+s+" 0 R"))}]),a.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(o,u,l){var d={title:u,options:l,children:[]};return o==null&&(o=this.root),o.children.push(d),d},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(o){o.id=r.internal.newObjectDeferred();for(var u=0;u<o.children.length;u++)this.genIds_r(o.children[u])},r.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},r.outline.renderItems=function(o){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<o.children.length;l++){var d=o.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(o)),l>0&&this.line("/Prev "+this.makeRef(o.children[l-1])),l<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var h=this.count=this.count_r({count:0},d);if(h>0&&this.line("/Count "+h),d.options&&d.options.pageNumber){var p=r.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var m=0;m<o.children.length;m++)this.renderItems(o.children[m])},r.outline.line=function(o){this.ctx.val+=o+`\r
`},r.outline.makeRef=function(o){return o.id+" 0 R"},r.outline.makeString=function(o){return"("+r.internal.pdfEscape(o)+")"},r.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(o,u){for(var l=0;l<u.children.length;l++)o.count++,this.count_r(o,u.children[l]);return o.count}}])})(Ct.API),(function(a){var s=[192,193,194,195,196,197,198,199];a.processJPEG=function(r,o,u,l,d,h){var p,m=this.decode.DCT_DECODE,y=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=d||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(p=(function(w){for(var j,g=256*w.charCodeAt(4)+w.charCodeAt(5),L=w.length,N={width:0,height:0,numcomponents:1},A=4;A<L;A+=2){if(A+=g,s.indexOf(w.charCodeAt(A+1))!==-1){j=256*w.charCodeAt(A+5)+w.charCodeAt(A+6),N={width:256*w.charCodeAt(A+7)+w.charCodeAt(A+8),height:j,numcomponents:w.charCodeAt(A+9)};break}g=256*w.charCodeAt(A+2)+w.charCodeAt(A+3)}return N})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}y={data:r,width:p.width,height:p.height,colorSpace:h,bitsPerComponent:8,filter:m,index:o,alias:u}}return y}})(Ct.API);var zc,Vd,E2,T2,O2,fv=(function(){var a,s,r;function o(l){var d,h,p,m,y,w,j,g,L,N,A,_,T,D;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(d=this.readUInt32(),L=(function(){var F,B;for(B=[],F=0;F<4;++F)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(d);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},y=this.readUInt16(),m=this.readUInt16()||100,w.delay=1e3*y/m,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(L==="fdAT"&&(this.pos+=4,d-=4),l=(w!=null?w.data:void 0)||this.imgData,_=0;0<=d?_<d:_>d;0<=d?++_:--_)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(d),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((N=p-this.transparency.indexed.length)>0)for(T=0;0<=N?T<N:T>N;0<=N?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case"tEXt":j=(A=this.read(d)).indexOf(0),g=String.fromCharCode.apply(String,A.slice(0,j)),this.text[g]=String.fromCharCode.apply(String,A.slice(j+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=d}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}o.prototype.read=function(l){var d,h;for(h=[],d=0;0<=l?d<l:d>l;0<=l?++d:--d)h.push(this.data[this.pos++]);return h},o.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},o.prototype.decodePixels=function(l){var d=this.pixelBitlength/8,h=new Uint8Array(this.width*this.height*d),p=0,m=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function y(w,j,g,L){var N,A,_,T,D,F,B,ce,U,q,ie,se,I,O,Y,E,oe,J,ae,he,fe,ge=Math.ceil((m.width-w)/g),P=Math.ceil((m.height-j)/L),C=m.width==ge&&m.height==P;for(O=d*ge,se=C?h:new Uint8Array(O*P),F=l.length,I=0,A=0;I<P&&p<F;){switch(l[p++]){case 0:for(T=oe=0;oe<O;T=oe+=1)se[A++]=l[p++];break;case 1:for(T=J=0;J<O;T=J+=1)N=l[p++],D=T<d?0:se[A-d],se[A++]=(N+D)%256;break;case 2:for(T=ae=0;ae<O;T=ae+=1)N=l[p++],_=(T-T%d)/d,Y=I&&se[(I-1)*O+_*d+T%d],se[A++]=(Y+N)%256;break;case 3:for(T=he=0;he<O;T=he+=1)N=l[p++],_=(T-T%d)/d,D=T<d?0:se[A-d],Y=I&&se[(I-1)*O+_*d+T%d],se[A++]=(N+Math.floor((D+Y)/2))%256;break;case 4:for(T=fe=0;fe<O;T=fe+=1)N=l[p++],_=(T-T%d)/d,D=T<d?0:se[A-d],I===0?Y=E=0:(Y=se[(I-1)*O+_*d+T%d],E=_&&se[(I-1)*O+(_-1)*d+T%d]),B=D+Y-E,ce=Math.abs(B-D),q=Math.abs(B-Y),ie=Math.abs(B-E),U=ce<=q&&ce<=ie?D:q<=ie?Y:E,se[A++]=(N+U)%256;break;default:throw new Error("Invalid filter algorithm: "+l[p-1])}if(!C){var G=((j+I*L)*m.width+w)*d,$=I*O;for(T=0;T<ge;T+=1){for(var ee=0;ee<d;ee+=1)h[G++]=se[$++];G+=(g-1)*d}}I++}}return l=Yx(l),m.interlaceMethod==1?(y(0,0,8,8),y(4,0,8,8),y(0,4,4,8),y(2,0,4,4),y(0,2,2,4),y(1,0,2,2),y(0,1,1,2)):y(0,0,1,1),h},o.prototype.decodePalette=function(){var l,d,h,p,m,y,w,j,g;for(h=this.palette,y=this.transparency.indexed||[],m=new Uint8Array((y.length||0)+h.length),p=0,l=0,d=w=0,j=h.length;w<j;d=w+=3)m[p++]=h[d],m[p++]=h[d+1],m[p++]=h[d+2],m[p++]=(g=y[l++])!=null?g:255;return m},o.prototype.copyToImageData=function(l,d){var h,p,m,y,w,j,g,L,N,A,_;if(p=this.colors,N=null,h=this.hasAlphaChannel,this.palette.length&&(N=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),p=4,h=!0),L=(m=l.data||l).length,w=N||d,y=j=0,p===1)for(;y<L;)g=N?4*d[y/4]:j,A=w[g++],m[y++]=A,m[y++]=A,m[y++]=A,m[y++]=h?w[g++]:255,j=g;else for(;y<L;)g=N?4*d[y/4]:j,m[y++]=w[g++],m[y++]=w[g++],m[y++]=w[g++],m[y++]=h?w[g++]:255,j=g},o.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var u=function(){if(Object.prototype.toString.call(Et)==="[object Window]"){try{s=Et.document.createElement("canvas"),r=s.getContext("2d")}catch{return!1}return!0}return!1};return u(),a=function(l){var d;if(u()===!0)return r.width=l.width,r.height=l.height,r.clearRect(0,0,l.width,l.height),r.putImageData(l,0,0),(d=new Image).src=s.toDataURL(),d;throw new Error("This method requires a Browser with Canvas-capability.")},o.prototype.decodeFrames=function(l){var d,h,p,m,y,w,j,g;if(this.animation){for(g=[],h=y=0,w=(j=this.animation.frames).length;y<w;h=++y)d=j[h],p=l.createImageData(d.width,d.height),m=this.decodePixels(new Uint8Array(d.data)),this.copyToImageData(p,m),d.imageData=p,g.push(d.image=a(p));return g}},o.prototype.renderFrame=function(l,d){var h,p,m;return h=(p=this.animation.frames)[d],m=p[d-1],d===0&&l.clearRect(0,0,this.width,this.height),(m!=null?m.disposeOp:void 0)===1?l.clearRect(m.xOffset,m.yOffset,m.width,m.height):(m!=null?m.disposeOp:void 0)===2&&l.putImageData(m.imageData,m.xOffset,m.yOffset),h.blendOp===0&&l.clearRect(h.xOffset,h.yOffset,h.width,h.height),l.drawImage(h.image,h.xOffset,h.yOffset)},o.prototype.animate=function(l){var d,h,p,m,y,w,j=this;return h=0,w=this.animation,m=w.numFrames,p=w.frames,y=w.numPlays,(d=function(){var g,L;if(g=h++%m,L=p[g],j.renderFrame(l,g),m>1&&h/m<y)return j.animation._timeout=setTimeout(d,L.delay)})()},o.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},o.prototype.render=function(l){var d,h;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,d=l.getContext("2d"),this.animation?(this.decodeFrames(d),this.animate(d)):(h=d.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),d.putImageData(h,0,0))},o})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hv(a){var s=0;if(a[s++]!==71||a[s++]!==73||a[s++]!==70||a[s++]!==56||(a[s++]+1&253)!=56||a[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=a[s++]|a[s++]<<8,o=a[s++]|a[s++]<<8,u=a[s++],l=u>>7,d=1<<(7&u)+1;a[s++],a[s++];var h=null,p=null;l&&(h=s,p=d,s+=3*d);var m=!0,y=[],w=0,j=null,g=0,L=null;for(this.width=r,this.height=o;m&&s<a.length;)switch(a[s++]){case 33:switch(a[s++]){case 255:if(a[s]!==11||a[s+1]==78&&a[s+2]==69&&a[s+3]==84&&a[s+4]==83&&a[s+5]==67&&a[s+6]==65&&a[s+7]==80&&a[s+8]==69&&a[s+9]==50&&a[s+10]==46&&a[s+11]==48&&a[s+12]==3&&a[s+13]==1&&a[s+16]==0)s+=14,L=a[s++]|a[s++]<<8,s++;else for(s+=12;;){if(!((I=a[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}break;case 249:if(a[s++]!==4||a[s+4]!==0)throw new Error("Invalid graphics extension block.");var N=a[s++];w=a[s++]|a[s++]<<8,j=a[s++],(1&N)==0&&(j=null),g=N>>2&7,s++;break;case 254:for(;;){if(!((I=a[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}break;default:throw new Error("Unknown graphic control label: 0x"+a[s-1].toString(16))}break;case 44:var A=a[s++]|a[s++]<<8,_=a[s++]|a[s++]<<8,T=a[s++]|a[s++]<<8,D=a[s++]|a[s++]<<8,F=a[s++],B=F>>6&1,ce=1<<(7&F)+1,U=h,q=p,ie=!1;F>>7&&(ie=!0,U=s,q=ce,s+=3*ce);var se=s;for(s++;;){var I;if(!((I=a[s++])>=0))throw Error("Invalid block size");if(I===0)break;s+=I}y.push({x:A,y:_,width:T,height:D,has_local_palette:ie,palette_offset:U,palette_size:q,data_offset:se,data_length:s-se,transparent_index:j,interlaced:!!B,delay:w,disposal:g});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+a[s-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return L},this.frameInfo=function(O){if(O<0||O>=y.length)throw new Error("Frame index out of range.");return y[O]},this.decodeAndBlitFrameBGRA=function(O,Y){var E=this.frameInfo(O),oe=E.width*E.height,J=new Uint8Array(oe);R2(a,E.data_offset,J,oe);var ae=E.palette_offset,he=E.transparent_index;he===null&&(he=256);var fe=E.width,ge=r-fe,P=fe,C=4*(E.y*r+E.x),G=4*((E.y+E.height)*r+E.x),$=C,ee=4*ge;E.interlaced===!0&&(ee+=4*r*7);for(var be=8,Se=0,je=J.length;Se<je;++Se){var Ae=J[Se];if(P===0&&(P=fe,($+=ee)>=G&&(ee=4*ge+4*r*(be-1),$=C+(fe+ge)*(be<<1),be>>=1)),Ae===he)$+=4;else{var Ee=a[ae+3*Ae],Re=a[ae+3*Ae+1],qe=a[ae+3*Ae+2];Y[$++]=qe,Y[$++]=Re,Y[$++]=Ee,Y[$++]=255}--P}},this.decodeAndBlitFrameRGBA=function(O,Y){var E=this.frameInfo(O),oe=E.width*E.height,J=new Uint8Array(oe);R2(a,E.data_offset,J,oe);var ae=E.palette_offset,he=E.transparent_index;he===null&&(he=256);var fe=E.width,ge=r-fe,P=fe,C=4*(E.y*r+E.x),G=4*((E.y+E.height)*r+E.x),$=C,ee=4*ge;E.interlaced===!0&&(ee+=4*r*7);for(var be=8,Se=0,je=J.length;Se<je;++Se){var Ae=J[Se];if(P===0&&(P=fe,($+=ee)>=G&&(ee=4*ge+4*r*(be-1),$=C+(fe+ge)*(be<<1),be>>=1)),Ae===he)$+=4;else{var Ee=a[ae+3*Ae],Re=a[ae+3*Ae+1],qe=a[ae+3*Ae+2];Y[$++]=Ee,Y[$++]=Re,Y[$++]=qe,Y[$++]=255}--P}}}function R2(a,s,r,o){for(var u=a[s++],l=1<<u,d=l+1,h=d+1,p=u+1,m=(1<<p)-1,y=0,w=0,j=0,g=a[s++],L=new Int32Array(4096),N=null;;){for(;y<16&&g!==0;)w|=a[s++]<<y,y+=8,g===1?g=a[s++]:--g;if(y<p)break;var A=w&m;if(w>>=p,y-=p,A!==l){if(A===d)break;for(var _=A<h?A:N,T=0,D=_;D>l;)D=L[D]>>8,++T;var F=D;if(j+T+(_!==A?1:0)>o)return void kn.log("Warning, gif stream longer than expected.");r[j++]=F;var B=j+=T;for(_!==A&&(r[j++]=F),D=_;T--;)D=L[D],r[--B]=255&D,D>>=8;N!==null&&h<4096&&(L[h++]=N<<8|F,h>=m+1&&p<12&&(++p,m=m<<1|1)),N=A}else h=d+1,m=(1<<(p=u+1))-1,N=null}return j!==o&&kn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gh(a){var s,r,o,u,l,d=Math.floor,h=new Array(64),p=new Array(64),m=new Array(64),y=new Array(64),w=new Array(65535),j=new Array(65535),g=new Array(64),L=new Array(64),N=[],A=0,_=7,T=new Array(64),D=new Array(64),F=new Array(64),B=new Array(256),ce=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(C,G){for(var $=0,ee=0,be=new Array,Se=1;Se<=16;Se++){for(var je=1;je<=C[Se];je++)be[G[ee]]=[],be[G[ee]][0]=$,be[G[ee]][1]=Se,ee++,$++;$*=2}return be}function ae(C){for(var G=C[0],$=C[1]-1;$>=0;)G&1<<$&&(A|=1<<_),$--,--_<0&&(A==255?(he(255),he(0)):he(A),_=7,A=0)}function he(C){N.push(C)}function fe(C){he(C>>8&255),he(255&C)}function ge(C,G,$,ee,be){for(var Se,je=be[0],Ae=be[240],Ee=(function(de,ke){var Le,xe,Oe,De,Ge,at,ct,dt,ft,Lt,rt=0;for(ft=0;ft<8;++ft){Le=de[rt],xe=de[rt+1],Oe=de[rt+2],De=de[rt+3],Ge=de[rt+4],at=de[rt+5],ct=de[rt+6];var Cn=Le+(dt=de[rt+7]),ht=Le-dt,an=xe+ct,zt=xe-ct,St=Oe+at,Ba=Oe-at,Ht=De+Ge,lr=De-Ge,Tt=Cn+Ht,In=Cn-Ht,Zn=an+St,Gt=an-St;de[rt]=Tt+Zn,de[rt+4]=Tt-Zn;var _t=.707106781*(Gt+In);de[rt+2]=In+_t,de[rt+6]=In-_t;var qt=.382683433*((Tt=lr+Ba)-(Gt=zt+ht)),Si=.5411961*Tt+qt,Jn=1.306562965*Gt+qt,Wa=.707106781*(Zn=Ba+zt),Aa=ht+Wa,Nt=ht-Wa;de[rt+5]=Nt+Si,de[rt+3]=Nt-Si,de[rt+1]=Aa+Jn,de[rt+7]=Aa-Jn,rt+=8}for(rt=0,ft=0;ft<8;++ft){Le=de[rt],xe=de[rt+8],Oe=de[rt+16],De=de[rt+24],Ge=de[rt+32],at=de[rt+40],ct=de[rt+48];var $a=Le+(dt=de[rt+56]),cr=Le-dt,la=xe+ct,dn=xe-ct,Ln=Oe+at,xa=Oe-at,Yr=De+Ge,ca=De-Ge,ln=$a+Yr,bn=$a-Yr,ua=la+Ln,fn=la-Ln;de[rt]=ln+ua,de[rt+32]=ln-ua;var Xa=.707106781*(fn+bn);de[rt+16]=bn+Xa,de[rt+48]=bn-Xa;var yr=.382683433*((ln=ca+xa)-(fn=dn+cr)),Wr=.5411961*ln+yr,ur=1.306562965*fn+yr,Za=.707106781*(ua=xa+dn),Ja=cr+Za,tt=cr-Za;de[rt+40]=tt+Wr,de[rt+24]=tt-Wr,de[rt+8]=Ja+ur,de[rt+56]=Ja-ur,rt++}for(ft=0;ft<64;++ft)Lt=de[ft]*ke[ft],g[ft]=Lt>0?Lt+.5|0:Lt-.5|0;return g})(C,G),Re=0;Re<64;++Re)L[U[Re]]=Ee[Re];var qe=L[0]-$;$=L[0],qe==0?ae(ee[0]):(ae(ee[j[Se=32767+qe]]),ae(w[Se]));for(var Xe=63;Xe>0&&L[Xe]==0;)Xe--;if(Xe==0)return ae(je),$;for(var M,me=1;me<=Xe;){for(var W=me;L[me]==0&&me<=Xe;)++me;var le=me-W;if(le>=16){M=le>>4;for(var te=1;te<=M;++te)ae(Ae);le&=15}Se=32767+L[me],ae(be[(le<<4)+j[Se]]),ae(w[Se]),me++}return Xe!=63&&ae(je),$}function P(C){C=Math.min(Math.max(C,1),100),l!=C&&((function(G){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var be=d(($[ee]*G+50)/100);be=Math.min(Math.max(be,1),255),h[U[ee]]=be}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],je=0;je<64;je++){var Ae=d((Se[je]*G+50)/100);Ae=Math.min(Math.max(Ae,1),255),p[U[je]]=Ae}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,qe=0;qe<8;qe++)for(var Xe=0;Xe<8;Xe++)m[Re]=1/(h[U[Re]]*Ee[qe]*Ee[Xe]*8),y[Re]=1/(p[U[Re]]*Ee[qe]*Ee[Xe]*8),Re++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),l=C)}this.encode=function(C,G){G&&P(G),N=new Array,A=0,_=7,fe(65496),fe(65504),fe(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),fe(1),fe(1),he(0),he(0),(function(){fe(65499),fe(132),he(0);for(var xe=0;xe<64;xe++)he(h[xe]);he(1);for(var Oe=0;Oe<64;Oe++)he(p[Oe])})(),(function(xe,Oe){fe(65472),fe(17),he(8),fe(Oe),fe(xe),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(C.width,C.height),(function(){fe(65476),fe(418),he(0);for(var xe=0;xe<16;xe++)he(q[xe+1]);for(var Oe=0;Oe<=11;Oe++)he(ie[Oe]);he(16);for(var De=0;De<16;De++)he(se[De+1]);for(var Ge=0;Ge<=161;Ge++)he(I[Ge]);he(1);for(var at=0;at<16;at++)he(O[at+1]);for(var ct=0;ct<=11;ct++)he(Y[ct]);he(17);for(var dt=0;dt<16;dt++)he(E[dt+1]);for(var ft=0;ft<=161;ft++)he(oe[ft])})(),fe(65498),fe(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var $=0,ee=0,be=0;A=0,_=7,this.encode.displayName="_encode_";for(var Se,je,Ae,Ee,Re,qe,Xe,M,me,W=C.data,le=C.width,te=C.height,de=4*le,ke=0;ke<te;){for(Se=0;Se<de;){for(Re=de*ke+Se,Xe=-1,M=0,me=0;me<64;me++)qe=Re+(M=me>>3)*de+(Xe=4*(7&me)),ke+M>=te&&(qe-=de*(ke+1+M-te)),Se+Xe>=de&&(qe-=Se+Xe-de+4),je=W[qe++],Ae=W[qe++],Ee=W[qe++],T[me]=(ce[je]+ce[Ae+256>>0]+ce[Ee+512>>0]>>16)-128,D[me]=(ce[je+768>>0]+ce[Ae+1024>>0]+ce[Ee+1280>>0]>>16)-128,F[me]=(ce[je+1280>>0]+ce[Ae+1536>>0]+ce[Ee+1792>>0]>>16)-128;$=ge(T,m,$,s,o),ee=ge(D,y,ee,r,u),be=ge(F,y,be,r,u),Se+=32}ke+=8}if(_>=0){var Le=[];Le[1]=_+1,Le[0]=(1<<_+1)-1,ae(Le)}return fe(65497),new Uint8Array(N)},a=a||50,(function(){for(var C=String.fromCharCode,G=0;G<256;G++)B[G]=C(G)})(),s=J(q,ie),r=J(O,Y),o=J(se,I),u=J(E,oe),(function(){for(var C=1,G=2,$=1;$<=15;$++){for(var ee=C;ee<G;ee++)j[32767+ee]=$,w[32767+ee]=[],w[32767+ee][1]=$,w[32767+ee][0]=ee;for(var be=-(G-1);be<=-C;be++)j[32767+be]=$,w[32767+be]=[],w[32767+be][1]=$,w[32767+be][0]=G-1+be;C<<=1,G<<=1}})(),(function(){for(var C=0;C<256;C++)ce[C]=19595*C,ce[C+256>>0]=38470*C,ce[C+512>>0]=7471*C+32768,ce[C+768>>0]=-11059*C,ce[C+1024>>0]=-21709*C,ce[C+1280>>0]=32768*C+8421375,ce[C+1536>>0]=-27439*C,ce[C+1792>>0]=-5329*C})(),P(a)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qi(a,s){if(this.pos=0,this.buffer=a,this.datav=new DataView(a.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M2(a){function s(q){if(!q)throw Error("assert :P")}function r(q,ie,se){for(var I=0;4>I;I++)if(q[ie+I]!=se.charCodeAt(I))return!0;return!1}function o(q,ie,se,I,O){for(var Y=0;Y<O;Y++)q[ie+Y]=se[I+Y]}function u(q,ie,se,I){for(var O=0;O<I;O++)q[ie+O]=se}function l(q){return new Int32Array(q)}function d(q,ie){for(var se=[],I=0;I<q;I++)se.push(new ie);return se}function h(q,ie){var se=[];return(function I(O,Y,E){for(var oe=E[Y],J=0;J<oe&&(O.push(E.length>Y+1?[]:new ie),!(E.length<Y+1));J++)I(O[J],Y+1,E)})(se,0,q),se}var p=function(){var q=this;function ie(f,x){for(var k=1<<x-1>>>0;f&k;)k>>>=1;return k?(f&k-1)+k:f}function se(f,x,k,R,H){s(!(R%k));do f[x+(R-=k)]=H;while(0<R)}function I(f,x,k,R,H){if(s(2328>=H),512>=H)var X=l(512);else if((X=l(H))==null)return 0;return(function(Z,Q,re,ue,we,Be){var Ie,Te,Qe=Q,Ve=1<<re,Ne=l(16),Ce=l(16);for(s(we!=0),s(ue!=null),s(Z!=null),s(0<re),Te=0;Te<we;++Te){if(15<ue[Te])return 0;++Ne[ue[Te]]}if(Ne[0]==we)return 0;for(Ce[1]=0,Ie=1;15>Ie;++Ie){if(Ne[Ie]>1<<Ie)return 0;Ce[Ie+1]=Ce[Ie]+Ne[Ie]}for(Te=0;Te<we;++Te)Ie=ue[Te],0<ue[Te]&&(Be[Ce[Ie]++]=Te);if(Ce[15]==1)return(ue=new O).g=0,ue.value=Be[0],se(Z,Qe,1,Ve,ue),Ve;var Ze,et=-1,$e=Ve-1,lt=0,it=1,xt=1,ot=1<<re;for(Te=0,Ie=1,we=2;Ie<=re;++Ie,we<<=1){if(it+=xt<<=1,0>(xt-=Ne[Ie]))return 0;for(;0<Ne[Ie];--Ne[Ie])(ue=new O).g=Ie,ue.value=Be[Te++],se(Z,Qe+lt,we,ot,ue),lt=ie(lt,Ie)}for(Ie=re+1,we=2;15>=Ie;++Ie,we<<=1){if(it+=xt<<=1,0>(xt-=Ne[Ie]))return 0;for(;0<Ne[Ie];--Ne[Ie]){if(ue=new O,(lt&$e)!=et){for(Qe+=ot,Ze=1<<(et=Ie)-re;15>et&&!(0>=(Ze-=Ne[et]));)++et,Ze<<=1;Ve+=ot=1<<(Ze=et-re),Z[Q+(et=lt&$e)].g=Ze+re,Z[Q+et].value=Qe-Q-et}ue.g=Ie-re,ue.value=Be[Te++],se(Z,Qe+(lt>>re),we,ot,ue),lt=ie(lt,Ie)}}return it!=2*Ce[15]-1?0:Ve})(f,x,k,R,H,X)}function O(){this.value=this.g=0}function Y(){this.value=this.g=0}function E(){this.G=d(5,O),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(Ua,Y)}function oe(f,x,k,R){s(f!=null),s(x!=null),s(2147483648>R),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=x,f.pa=k,f.Jd=x,f.Yc=k+R,f.Zc=4<=R?k+R-4+1:k,Se(f)}function J(f,x){for(var k=0;0<x--;)k|=Ae(f,128)<<x;return k}function ae(f,x){var k=J(f,x);return je(f)?-k:k}function he(f,x,k,R){var H,X=0;for(s(f!=null),s(x!=null),s(4294967288>R),f.Sb=R,f.Ra=0,f.u=0,f.h=0,4<R&&(R=4),H=0;H<R;++H)X+=x[k+H]<<8*H;f.Ra=X,f.bb=R,f.oa=x,f.pa=k}function fe(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<as-8>>>0,++f.bb,f.u-=8;$(f)&&(f.h=1,f.u=0)}function ge(f,x){if(s(0<=x),!f.h&&x<=ns){var k=G(f)&Rs[x];return f.u+=x,fe(f),k}return f.h=1,f.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(f){return f.Ra>>>(f.u&as-1)>>>0}function $(f){return s(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>as}function ee(f,x){f.u=x,f.h=$(f)}function be(f){f.u>=yo&&(s(f.u>=yo),fe(f))}function Se(f){s(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(s(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function je(f){return J(f,1)}function Ae(f,x){var k=f.Ca;0>f.b&&Se(f);var R=f.b,H=k*x>>>8,X=(f.I>>>R>H)+0;for(X?(k-=H,f.I-=H+1<<R>>>0):k=H+1,R=k,H=0;256<=R;)H+=8,R>>=8;return R=7^H+Fa[R],f.b-=R,f.Ca=(k<<R)-1,X}function Ee(f,x,k){f[x+0]=k>>24&255,f[x+1]=k>>16&255,f[x+2]=k>>8&255,f[x+3]=k>>0&255}function Re(f,x){return f[x+0]<<0|f[x+1]<<8}function qe(f,x){return Re(f,x)|f[x+2]<<16}function Xe(f,x){return Re(f,x)|Re(f,x+2)<<16}function M(f,x){var k=1<<x;return s(f!=null),s(0<x),f.X=l(k),f.X==null?0:(f.Mb=32-x,f.Xa=x,1)}function me(f,x){s(f!=null),s(x!=null),s(f.Xa==x.Xa),o(x.X,0,f.X,0,1<<x.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function le(f,x,k,R){s(k!=null),s(R!=null);var H=k[0],X=R[0];return H==0&&(H=(f*X+x/2)/x),X==0&&(X=(x*H+f/2)/f),0>=H||0>=X?0:(k[0]=H,R[0]=X,1)}function te(f,x){return f+(1<<x)-1>>>x}function de(f,x){return((4278255360&f)+(4278255360&x)>>>0&4278255360)+((16711935&f)+(16711935&x)>>>0&16711935)>>>0}function ke(f,x){q[x]=function(k,R,H,X,Z,Q,re){var ue;for(ue=0;ue<Z;++ue){var we=q[f](Q[re+ue-1],H,X+ue);Q[re+ue]=de(k[R+ue],we)}}}function Le(){this.ud=this.hd=this.jd=0}function xe(f,x){return((4278124286&(f^x))>>>1)+(f&x)>>>0}function Oe(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function De(f,x){return Oe(f+(f-x+.5>>1))}function Ge(f,x,k){return Math.abs(x-k)-Math.abs(f-k)}function at(f,x,k,R,H,X,Z){for(R=X[Z-1],k=0;k<H;++k)X[Z+k]=R=de(f[x+k],R)}function ct(f,x,k,R,H){var X;for(X=0;X<k;++X){var Z=f[x+X],Q=Z>>8&255,re=16711935&(re=(re=16711935&Z)+((Q<<16)+Q));R[H+X]=(4278255360&Z)+re>>>0}}function dt(f,x){x.jd=f>>0&255,x.hd=f>>8&255,x.ud=f>>16&255}function ft(f,x,k,R,H,X){var Z;for(Z=0;Z<R;++Z){var Q=x[k+Z],re=Q>>>8,ue=Q,we=255&(we=(we=Q>>>16)+((f.jd<<24>>24)*(re<<24>>24)>>>5));ue=255&(ue=(ue=ue+((f.hd<<24>>24)*(re<<24>>24)>>>5))+((f.ud<<24>>24)*(we<<24>>24)>>>5)),H[X+Z]=(4278255360&Q)+(we<<16)+ue}}function Lt(f,x,k,R,H){q[x]=function(X,Z,Q,re,ue,we,Be,Ie,Te){for(re=Be;re<Ie;++re)for(Be=0;Be<Te;++Be)ue[we++]=H(Q[R(X[Z++])])},q[f]=function(X,Z,Q,re,ue,we,Be){var Ie=8>>X.b,Te=X.Ea,Qe=X.K[0],Ve=X.w;if(8>Ie)for(X=(1<<X.b)-1,Ve=(1<<Ie)-1;Z<Q;++Z){var Ne,Ce=0;for(Ne=0;Ne<Te;++Ne)Ne&X||(Ce=R(re[ue++])),we[Be++]=H(Qe[Ce&Ve]),Ce>>=Ie}else q["VP8LMapColor"+k](re,ue,Qe,Ve,we,Be,Z,Q,Te)}}function rt(f,x,k,R,H){for(k=x+k;x<k;){var X=f[x++];R[H++]=X>>16&255,R[H++]=X>>8&255,R[H++]=X>>0&255}}function Cn(f,x,k,R,H){for(k=x+k;x<k;){var X=f[x++];R[H++]=X>>16&255,R[H++]=X>>8&255,R[H++]=X>>0&255,R[H++]=X>>24&255}}function ht(f,x,k,R,H){for(k=x+k;x<k;){var X=(Z=f[x++])>>16&240|Z>>12&15,Z=Z>>0&240|Z>>28&15;R[H++]=X,R[H++]=Z}}function an(f,x,k,R,H){for(k=x+k;x<k;){var X=(Z=f[x++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;R[H++]=X,R[H++]=Z}}function zt(f,x,k,R,H){for(k=x+k;x<k;){var X=f[x++];R[H++]=X>>0&255,R[H++]=X>>8&255,R[H++]=X>>16&255}}function St(f,x,k,R,H,X){if(X==0)for(k=x+k;x<k;)Ee(R,((X=f[x++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),H+=32;else o(R,H,f,x,k)}function Ba(f,x){q[x][0]=q[f+"0"],q[x][1]=q[f+"1"],q[x][2]=q[f+"2"],q[x][3]=q[f+"3"],q[x][4]=q[f+"4"],q[x][5]=q[f+"5"],q[x][6]=q[f+"6"],q[x][7]=q[f+"7"],q[x][8]=q[f+"8"],q[x][9]=q[f+"9"],q[x][10]=q[f+"10"],q[x][11]=q[f+"11"],q[x][12]=q[f+"12"],q[x][13]=q[f+"13"],q[x][14]=q[f+"0"],q[x][15]=q[f+"0"]}function Ht(f){return f==_l||f==ic||f==jo||f==sc}function lr(){this.eb=[],this.size=this.A=this.fb=0}function Tt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function In(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new lr,this.f.kb=new Tt,this.sd=null}function Zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _t(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function qt(f,x){var k=f.T,R=x.ba.f.RGBA,H=R.eb,X=R.fb+f.ka*R.A,Z=Na[x.ba.S],Q=f.y,re=f.O,ue=f.f,we=f.N,Be=f.ea,Ie=f.W,Te=x.cc,Qe=x.dc,Ve=x.Mc,Ne=x.Nc,Ce=f.ka,Ze=f.ka+f.T,et=f.U,$e=et+1>>1;for(Ce==0?Z(Q,re,null,null,ue,we,Be,Ie,ue,we,Be,Ie,H,X,null,null,et):(Z(x.ec,x.fc,Q,re,Te,Qe,Ve,Ne,ue,we,Be,Ie,H,X-R.A,H,X,et),++k);Ce+2<Ze;Ce+=2)Te=ue,Qe=we,Ve=Be,Ne=Ie,we+=f.Rc,Ie+=f.Rc,X+=2*R.A,Z(Q,(re+=2*f.fa)-f.fa,Q,re,Te,Qe,Ve,Ne,ue,we,Be,Ie,H,X-R.A,H,X,et);return re+=f.fa,f.j+Ze<f.o?(o(x.ec,x.fc,Q,re,et),o(x.cc,x.dc,ue,we,$e),o(x.Mc,x.Nc,Be,Ie,$e),k--):1&Ze||Z(Q,re,null,null,ue,we,Be,Ie,ue,we,Be,Ie,H,X+R.A,null,null,et),k}function Si(f,x,k){var R=f.F,H=[f.J];if(R!=null){var X=f.U,Z=x.ba.S,Q=Z==jl||Z==jo;x=x.ba.f.RGBA;var re=[0],ue=f.ka;re[0]=f.T,f.Kb&&(ue==0?--re[0]:(--ue,H[0]-=f.width),f.j+f.ka+f.T==f.o&&(re[0]=f.o-f.j-ue));var we=x.eb;ue=x.fb+ue*x.A,f=Ms(R,H[0],f.width,X,re,we,ue+(Q?0:3),x.A),s(k==re),f&&Ht(Z)&&pi(we,ue,Q,X,re,x.A)}return 0}function Jn(f){var x=f.ma,k=x.ba.S,R=11>k,H=k==Ra||k==Er||k==jl||k==So||k==12||Ht(k);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!ki(x.Oa,f,H?11:12))return 0;if(H&&Ht(k)&&nt(),f.da)alert("todo:use_scaling");else{if(R){if(x.Ib=_t,f.Kb){if(k=f.U+1>>1,x.memory=l(f.U+2*k),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+f.U,x.Mc=x.cc,x.Nc=x.dc+k,x.Ib=qt,nt()}}else alert("todo:EmitYUV");H&&(x.Jb=Si,R&&ze())}if(R&&!hs){for(f=0;256>f;++f)Sa[f]=89858*(f-128)+ko>>Dr,mf[f]=-22014*(f-128)+ko,Qu[f]=-45773*(f-128),dc[f]=113618*(f-128)+ko>>Dr;for(f=Bs;f<fs;++f)x=76283*(f-16)+ko>>Dr,gf[f-Bs]=dr(x,255),bf[f-Bs]=dr(x+8>>4,15);hs=1}return 1}function Wa(f){var x=f.ma,k=f.U,R=f.T;return s(!(1&f.ka)),0>=k||0>=R?0:(k=x.Ib(f,x),x.Jb!=null&&x.Jb(f,x,k),x.Dc+=k,1)}function Aa(f){f.ma.memory=null}function Nt(f,x,k,R){return ge(f,8)!=47?0:(x[0]=ge(f,14)+1,k[0]=ge(f,14)+1,R[0]=ge(f,1),ge(f,3)!=0?0:!f.h)}function $a(f,x){if(4>f)return f+1;var k=f-2>>1;return(2+(1&f)<<k)+ge(x,k)+1}function cr(f,x){return 120<x?x-120:1<=(k=((k=Or[x-1])>>4)*f+(8-(15&k)))?k:1;var k}function la(f,x,k){var R=G(k),H=f[x+=255&R].g-8;return 0<H&&(ee(k,k.u+8),R=G(k),x+=f[x].value,x+=R&(1<<H)-1),ee(k,k.u+f[x].g),f[x].value}function dn(f,x,k){return k.g+=f.g,k.value+=f.value<<x>>>0,s(8>=k.g),f.g}function Ln(f,x,k){var R=f.xc;return s((x=R==0?0:f.vc[f.md*(k>>R)+(x>>R)])<f.Wb),f.Ya[x]}function xa(f,x,k,R){var H=f.ab,X=f.c*x,Z=f.C;x=Z+x;var Q=k,re=R;for(R=f.Ta,k=f.Ua;0<H--;){var ue=f.gc[H],we=Z,Be=x,Ie=Q,Te=re,Qe=(re=R,Q=k,ue.Ea);switch(s(we<Be),s(Be<=ue.nc),ue.hc){case 2:ec(Ie,Te,(Be-we)*Qe,re,Q);break;case 0:var Ve=we,Ne=Be,Ce=re,Ze=Q,et=(ot=ue).Ea;Ve==0&&(Kl(Ie,Te,null,null,1,Ce,Ze),at(Ie,Te+1,0,0,et-1,Ce,Ze+1),Te+=et,Ze+=et,++Ve);for(var $e=1<<ot.b,lt=$e-1,it=te(et,ot.b),xt=ot.K,ot=ot.w+(Ve>>ot.b)*it;Ve<Ne;){var tn=xt,Yt=ot,Zt=1;for(vl(Ie,Te,Ce,Ze-et,1,Ce,Ze);Zt<et;){var Dt=(Zt&~lt)+$e;Dt>et&&(Dt=et),(0,Ar[tn[Yt++]>>8&15])(Ie,Te+ +Zt,Ce,Ze+Zt-et,Dt-Zt,Ce,Ze+Zt),Zt=Dt}Te+=et,Ze+=et,++Ve&lt||(ot+=it)}Be!=ue.nc&&o(re,Q-Qe,re,Q+(Be-we-1)*Qe,Qe);break;case 1:for(Qe=Ie,Ne=Te,et=(Ie=ue.Ea)-(Ze=Ie&~(Ce=(Te=1<<ue.b)-1)),Ve=te(Ie,ue.b),$e=ue.K,ue=ue.w+(we>>ue.b)*Ve;we<Be;){for(lt=$e,it=ue,xt=new Le,ot=Ne+Ze,tn=Ne+Ie;Ne<ot;)dt(lt[it++],xt),fr(xt,Qe,Ne,Te,re,Q),Ne+=Te,Q+=Te;Ne<tn&&(dt(lt[it++],xt),fr(xt,Qe,Ne,et,re,Q),Ne+=et,Q+=et),++we&Ce||(ue+=Ve)}break;case 3:if(Ie==re&&Te==Q&&0<ue.b){for(Ne=re,Ie=Qe=Q+(Be-we)*Qe-(Ze=(Be-we)*te(ue.Ea,ue.b)),Te=re,Ce=Q,Ve=[],Ze=(et=Ze)-1;0<=Ze;--Ze)Ve[Ze]=Te[Ce+Ze];for(Ze=et-1;0<=Ze;--Ze)Ne[Ie+Ze]=Ve[Ze];Qr(ue,we,Be,re,Qe,re,Q)}else Qr(ue,we,Be,Ie,Te,re,Q)}Q=R,re=k}re!=k&&o(R,k,Q,re,X)}function Yr(f,x){var k=f.V,R=f.Ba+f.c*f.C,H=x-f.C;if(s(x<=f.l.o),s(16>=H),0<H){var X=f.l,Z=f.Ta,Q=f.Ua,re=X.width;if(xa(f,H,k,R),H=Q=[Q],s((k=f.C)<(R=x)),s(X.v<X.va),R>X.o&&(R=X.o),k<X.j){var ue=X.j-k;k=X.j,H[0]+=ue*re}if(k>=R?k=0:(H[0]+=4*X.v,X.ka=k-X.j,X.U=X.va-X.v,X.T=R-k,k=1),k){if(Q=Q[0],11>(k=f.ca).S){var we=k.f.RGBA,Be=(R=k.S,H=X.U,X=X.T,ue=we.eb,we.A),Ie=X;for(we=we.fb+f.Ma*we.A;0<Ie--;){var Te=Z,Qe=Q,Ve=H,Ne=ue,Ce=we;switch(R){case ac:kr(Te,Qe,Ve,Ne,Ce);break;case Ra:Li(Te,Qe,Ve,Ne,Ce);break;case _l:Li(Te,Qe,Ve,Ne,Ce),pi(Ne,Ce,0,Ve,1,0);break;case rc:wo(Te,Qe,Ve,Ne,Ce);break;case Er:St(Te,Qe,Ve,Ne,Ce,1);break;case ic:St(Te,Qe,Ve,Ne,Ce,1),pi(Ne,Ce,0,Ve,1,0);break;case jl:St(Te,Qe,Ve,Ne,Ce,0);break;case jo:St(Te,Qe,Ve,Ne,Ce,0),pi(Ne,Ce,1,Ve,1,0);break;case So:Kr(Te,Qe,Ve,Ne,Ce);break;case sc:Kr(Te,Qe,Ve,Ne,Ce),Ta(Ne,Ce,Ve,1,0);break;case os:ei(Te,Qe,Ve,Ne,Ce);break;default:s(0)}Q+=re,we+=Be}f.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");s(f.Ma<=k.height)}}f.C=x,s(f.C<=f.i)}function ca(f){var x;if(0<f.ua)return 0;for(x=0;x<f.Wb;++x){var k=f.Ya[x].G,R=f.Ya[x].H;if(0<k[1][R[1]+0].g||0<k[2][R[2]+0].g||0<k[3][R[3]+0].g)return 0}return 1}function ln(f,x,k,R,H,X){if(f.Z!=0){var Z=f.qd,Q=f.rd;for(s(Oi[f.Z]!=null);x<k;++x)Oi[f.Z](Z,Q,R,H,R,H,X),Z=R,Q=H,H+=X;f.qd=Z,f.rd=Q}}function bn(f,x){var k=f.l.ma,R=k.Z==0||k.Z==1?f.l.j:f.C;if(R=f.C<R?R:f.C,s(x<=f.l.o),x>R){var H=f.l.width,X=k.ca,Z=k.tb+H*R,Q=f.V,re=f.Ba+f.c*R,ue=f.gc;s(f.ab==1),s(ue[0].hc==3),tu(ue[0],R,x,Q,re,X,Z),ln(k,R,x,X,Z,H)}f.C=f.Ma=x}function ua(f,x,k,R,H,X,Z){var Q=f.$/R,re=f.$%R,ue=f.m,we=f.s,Be=k+f.$,Ie=Be;H=k+R*H;var Te=k+R*X,Qe=280+we.ua,Ve=f.Pb?Q:16777216,Ne=0<we.ua?we.Wa:null,Ce=we.wc,Ze=Be<Te?Ln(we,re,Q):null;s(f.C<X),s(Te<=H);var et=!1;e:for(;;){for(;et||Be<Te;){var $e=0;if(Q>=Ve){var lt=Be-k;s((Ve=f).Pb),Ve.wd=Ve.m,Ve.xd=lt,0<Ve.s.ua&&me(Ve.s.Wa,Ve.s.vb),Ve=Q+ls}if(re&Ce||(Ze=Ln(we,re,Q)),s(Ze!=null),Ze.Qb&&(x[Be]=Ze.qb,et=!0),!et)if(be(ue),Ze.jc){$e=ue,lt=x;var it=Be,xt=Ze.pd[G($e)&Ua-1];s(Ze.jc),256>xt.g?(ee($e,$e.u+xt.g),lt[it]=xt.value,$e=0):(ee($e,$e.u+xt.g-256),s(256<=xt.value),$e=xt.value),$e==0&&(et=!0)}else $e=la(Ze.G[0],Ze.H[0],ue);if(ue.h)break;if(et||256>$e){if(!et)if(Ze.nd)x[Be]=(Ze.qb|$e<<8)>>>0;else{if(be(ue),et=la(Ze.G[1],Ze.H[1],ue),be(ue),lt=la(Ze.G[2],Ze.H[2],ue),it=la(Ze.G[3],Ze.H[3],ue),ue.h)break;x[Be]=(it<<24|et<<16|$e<<8|lt)>>>0}if(et=!1,++Be,++re>=R&&(re=0,++Q,Z!=null&&Q<=X&&!(Q%16)&&Z(f,Q),Ne!=null))for(;Ie<Be;)$e=x[Ie++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e}else if(280>$e){if($e=$a($e-256,ue),lt=la(Ze.G[4],Ze.H[4],ue),be(ue),lt=cr(R,lt=$a(lt,ue)),ue.h)break;if(Be-k<lt||H-Be<$e)break e;for(it=0;it<$e;++it)x[Be+it]=x[Be+it-lt];for(Be+=$e,re+=$e;re>=R;)re-=R,++Q,Z!=null&&Q<=X&&!(Q%16)&&Z(f,Q);if(s(Be<=H),re&Ce&&(Ze=Ln(we,re,Q)),Ne!=null)for(;Ie<Be;)$e=x[Ie++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e}else{if(!($e<Qe))break e;for(et=$e-280,s(Ne!=null);Ie<Be;)$e=x[Ie++],Ne.X[(506832829*$e&4294967295)>>>Ne.Mb]=$e;$e=Be,s(!(et>>>(lt=Ne).Xa)),x[$e]=lt.X[et],et=!0}et||s(ue.h==$(ue))}if(f.Pb&&ue.h&&Be<H)s(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&me(f.s.vb,f.s.Wa);else{if(ue.h)break e;Z!=null&&Z(f,Q>X?X:Q),f.a=0,f.$=Be-k}return 1}return f.a=3,0}function fn(f){s(f!=null),f.vc=null,f.yc=null,f.Ya=null;var x=f.Wa;x!=null&&(x.X=null),f.vb=null,s(f!=null)}function Xa(){var f=new eu;return f==null?null:(f.a=0,f.xb=au,Ba("Predictor","VP8LPredictors"),Ba("Predictor","VP8LPredictors_C"),Ba("PredictorAdd","VP8LPredictorsAdd"),Ba("PredictorAdd","VP8LPredictorsAdd_C"),ec=ct,fr=ft,kr=rt,Li=Cn,Kr=ht,ei=an,wo=zt,q.VP8LMapColor32b=yl,q.VP8LMapColor8b=qa,f)}function yr(f,x,k,R,H){var X=1,Z=[f],Q=[x],re=R.m,ue=R.s,we=null,Be=0;e:for(;;){if(k)for(;X&&ge(re,1);){var Ie=Z,Te=Q,Qe=R,Ve=1,Ne=Qe.m,Ce=Qe.gc[Qe.ab],Ze=ge(Ne,2);if(Qe.Oc&1<<Ze)X=0;else{switch(Qe.Oc|=1<<Ze,Ce.hc=Ze,Ce.Ea=Ie[0],Ce.nc=Te[0],Ce.K=[null],++Qe.ab,s(4>=Qe.ab),Ze){case 0:case 1:Ce.b=ge(Ne,3)+2,Ve=yr(te(Ce.Ea,Ce.b),te(Ce.nc,Ce.b),0,Qe,Ce.K),Ce.K=Ce.K[0];break;case 3:var et,$e=ge(Ne,8)+1,lt=16<$e?0:4<$e?1:2<$e?2:3;if(Ie[0]=te(Ce.Ea,lt),Ce.b=lt,et=Ve=yr($e,1,0,Qe,Ce.K)){var it,xt=$e,ot=Ce,tn=1<<(8>>ot.b),Yt=l(tn);if(Yt==null)et=0;else{var Zt=ot.K[0],Dt=ot.w;for(Yt[0]=ot.K[0][0],it=1;it<1*xt;++it)Yt[it]=de(Zt[Dt+it],Yt[it-1]);for(;it<4*tn;++it)Yt[it]=0;ot.K[0]=null,ot.K[0]=Yt,et=1}}Ve=et;break;case 2:break;default:s(0)}X=Ve}}if(Z=Z[0],Q=Q[0],X&&ge(re,1)&&!(X=1<=(Be=ge(re,4))&&11>=Be)){R.a=3;break e}var cn;if(cn=X)t:{var rn,At,hn,fa=R,Pn=Z,Ma=Q,Kt=Be,ja=k,tr=fa.m,ra=fa.s,Un=[null],ha=1,gr=0,Ir=Rr[Kt];n:for(;;){if(ja&&ge(tr,1)){var ea=ge(tr,3)+2,$n=te(Pn,ea),pa=te(Ma,ea),br=$n*pa;if(!yr($n,pa,0,fa,Un))break n;for(Un=Un[0],ra.xc=ea,rn=0;rn<br;++rn){var gi=Un[rn]>>8&65535;Un[rn]=gi,gi>=ha&&(ha=gi+1)}}if(tr.h)break n;for(At=0;5>At;++At){var Mn=Ds[At];!At&&0<Kt&&(Mn+=1<<Kt),gr<Mn&&(gr=Mn)}var bi=d(ha*Ir,O),nr=ha,Fn=d(nr,E);if(Fn==null)var Ps=null;else s(65536>=nr),Ps=Fn;var xr=l(gr);if(Ps==null||xr==null||bi==null){fa.a=1;break n}var Rt=bi;for(rn=hn=0;rn<ha;++rn){var Ft=Ps[rn],_n=Ft.G,Ri=Ft.H,Us=0,xi=1,Ll=0;for(At=0;5>At;++At){Mn=Ds[At],_n[At]=Rt,Ri[At]=hn,!At&&0<Kt&&(Mn+=1<<Kt);r:{var ps,ms=Mn,hc=fa,yn=xr,iu=Rt,su=hn,pc=0,Mi=hc.m,xf=ge(Mi,1);if(u(yn,0,0,ms),xf){var ou=ge(Mi,1)+1,lu=ge(Mi,1),mc=ge(Mi,lu==0?1:8);yn[mc]=1,ou==2&&(yn[mc=ge(Mi,8)]=1);var ma=1}else{var qn=l(19),El=ge(Mi,4)+4;if(19<El){hc.a=3;var gs=0;break r}for(ps=0;ps<El;++ps)qn[Al[ps]]=ge(Mi,3);var Lo=void 0,Fs=void 0,vi=hc,gc=qn,Eo=ms,bc=yn,xc=0,zi=vi.m,cu=8,uu=d(128,O);a:for(;I(uu,0,7,gc,19);){if(ge(zi,1)){var Ku=2+2*ge(zi,3);if((Lo=2+ge(zi,Ku))>Eo)break a}else Lo=Eo;for(Fs=0;Fs<Eo&&Lo--;){be(zi);var du=uu[0+(127&G(zi))];ee(zi,zi.u+du.g);var bs=du.value;if(16>bs)bc[Fs++]=bs,bs!=0&&(cu=bs);else{var ed=bs==16,td=bs-16,nd=_o[td],fu=ge(zi,Tr[td])+nd;if(Fs+fu>Eo)break a;for(var ad=ed?cu:0;0<fu--;)bc[Fs++]=ad}}xc=1;break a}xc||(vi.a=3),ma=xc}(ma=ma&&!Mi.h)&&(pc=I(iu,su,8,yn,ms)),ma&&pc!=0?gs=pc:(hc.a=3,gs=0)}if(gs==0)break n;if(xi&&oc[At]==1&&(xi=Rt[hn].g==0),Us+=Rt[hn].g,hn+=gs,3>=At){var qs,vc=xr[0];for(qs=1;qs<Mn;++qs)xr[qs]>vc&&(vc=xr[qs]);Ll+=vc}}if(Ft.nd=xi,Ft.Qb=0,xi&&(Ft.qb=(_n[3][Ri[3]+0].value<<24|_n[1][Ri[1]+0].value<<16|_n[2][Ri[2]+0].value)>>>0,Us==0&&256>_n[0][Ri[0]+0].value&&(Ft.Qb=1,Ft.qb+=_n[0][Ri[0]+0].value<<8)),Ft.jc=!Ft.Qb&&6>Ll,Ft.jc){var Tl,yi=Ft;for(Tl=0;Tl<Ua;++Tl){var Di=Tl,Ii=yi.pd[Di],yc=yi.G[0][yi.H[0]+Di];256<=yc.value?(Ii.g=yc.g+256,Ii.value=yc.value):(Ii.g=0,Ii.value=0,Di>>=dn(yc,8,Ii),Di>>=dn(yi.G[1][yi.H[1]+Di],16,Ii),Di>>=dn(yi.G[2][yi.H[2]+Di],0,Ii),dn(yi.G[3][yi.H[3]+Di],24,Ii))}}}ra.vc=Un,ra.Wb=ha,ra.Ya=Ps,ra.yc=bi,cn=1;break t}cn=0}if(!(X=cn)){R.a=3;break e}if(0<Be){if(ue.ua=1<<Be,!M(ue.Wa,Be)){R.a=1,X=0;break e}}else ue.ua=0;var wc=R,Hs=Z,rd=Q,To=wc.s,Oo=To.xc;if(wc.c=Hs,wc.i=rd,To.md=te(Hs,Oo),To.wc=Oo==0?-1:(1<<Oo)-1,k){R.xb=cs;break e}if((we=l(Z*Q))==null){R.a=1,X=0;break e}X=(X=ua(R,we,0,Z,Q,Q,null))&&!re.h;break e}return X?(H!=null?H[0]=we:(s(we==null),s(k)),R.$=0,k||fn(ue)):fn(ue),X}function Wr(f,x){var k=f.c*f.i,R=k+x+16*x;return s(f.c<=x),f.V=l(R),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+k+x,1)}function ur(f,x){var k=f.C,R=x-k,H=f.V,X=f.Ba+f.c*k;for(s(x<=f.l.o);0<R;){var Z=16<R?16:R,Q=f.l.ma,re=f.l.width,ue=re*Z,we=Q.ca,Be=Q.tb+re*k,Ie=f.Ta,Te=f.Ua;xa(f,Z,H,X),pr(Ie,Te,we,Be,ue),ln(Q,k,k+Z,we,Be,re),R-=Z,H+=Z*f.c,k+=Z}s(k==x),f.C=f.Ma=x}function Za(){this.ub=this.yd=this.td=this.Rb=0}function Ja(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function st(){this.Yb=(function(){var f=[];return(function x(k,R,H){for(var X=H[R],Z=0;Z<X&&(k.push(H.length>R+1?[]:0),!(H.length<R+1));Z++)x(k[Z],R+1,H)})(f,0,[3,11]),f})()}function en(){this.jb=l(3),this.Wc=h([4,8],st),this.Xc=h([4,17],st)}function Pt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function nn(){this.ld=this.La=this.dd=this.tc=0}function ka(){this.Na=this.la=0}function Sn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qn(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jc(){this.uc=this.M=this.Nb=0,this.wa=Array(new nn),this.Y=0,this.ya=Array(new Qn),this.aa=0,this.l=new io}function al(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Hl(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Za,this.Kc=new Ja,this.ed=new Pt,this.Qa=new tt,this.Ic=this.$c=this.Aa=0,this.D=new Jc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,P),this.ia=0,this.pb=d(4,Sn),this.Pa=new en,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new al),this.Hd=0,this.rb=Array(new ka),this.sb=0,this.wa=Array(new nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qn),this.L=this.aa=0,this.gd=h([4,2],nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function io(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function so(){var f=new Hl;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,mr||(mr=rl)),f}function En(f,x,k){return f.a==0&&(f.a=x,f.sc=k,f.cb=0),0}function wr(f,x,k){return 3<=k&&f[x+0]==157&&f[x+1]==1&&f[x+2]==42}function Pa(f,x){if(f==null)return 0;if(f.a=0,f.sc="OK",x==null)return En(f,2,"null VP8Io passed to VP8GetHeaders()");var k=x.data,R=x.w,H=x.ha;if(4>H)return En(f,7,"Truncated header.");var X=k[R+0]|k[R+1]<<8|k[R+2]<<16,Z=f.Od;if(Z.Rb=!(1&X),Z.td=X>>1&7,Z.yd=X>>4&1,Z.ub=X>>5,3<Z.td)return En(f,3,"Incorrect keyframe parameters.");if(!Z.yd)return En(f,4,"Frame not displayable.");R+=3,H-=3;var Q=f.Kc;if(Z.Rb){if(7>H)return En(f,7,"cannot parse picture header");if(!wr(k,R,H))return En(f,3,"Bad code word");Q.c=16383&(k[R+4]<<8|k[R+3]),Q.Td=k[R+4]>>6,Q.i=16383&(k[R+6]<<8|k[R+5]),Q.Ud=k[R+6]>>6,R+=7,H-=7,f.za=Q.c+15>>4,f.Ub=Q.i+15>>4,x.width=Q.c,x.height=Q.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,u((X=f.Pa).jb,0,255,X.jb.length),s((X=f.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,u(X.Zb,0,0,X.Zb.length),u(X.Lb,0,0,X.Lb)}if(Z.ub>H)return En(f,7,"bad partition length");oe(X=f.m,k,R,Z.ub),R+=Z.ub,H-=Z.ub,Z.Rb&&(Q.Ld=je(X),Q.Kd=je(X)),Q=f.Qa;var re,ue=f.Pa;if(s(X!=null),s(Q!=null),Q.Cb=je(X),Q.Cb){if(Q.Bb=je(X),je(X)){for(Q.Fb=je(X),re=0;4>re;++re)Q.Zb[re]=je(X)?ae(X,7):0;for(re=0;4>re;++re)Q.Lb[re]=je(X)?ae(X,6):0}if(Q.Bb)for(re=0;3>re;++re)ue.jb[re]=je(X)?J(X,8):255}else Q.Bb=0;if(X.Ka)return En(f,3,"cannot parse segment header");if((Q=f.ed).zd=je(X),Q.Tb=J(X,6),Q.wb=J(X,3),Q.Pc=je(X),Q.Pc&&je(X)){for(ue=0;4>ue;++ue)je(X)&&(Q.vd[ue]=ae(X,6));for(ue=0;4>ue;++ue)je(X)&&(Q.od[ue]=ae(X,6))}if(f.L=Q.Tb==0?0:Q.zd?1:2,X.Ka)return En(f,3,"cannot parse filter header");var we=H;if(H=re=R,R=re+we,Q=we,f.Xb=(1<<J(f.m,2))-1,we<3*(ue=f.Xb))k=7;else{for(re+=3*ue,Q-=3*ue,we=0;we<ue;++we){var Be=k[H+0]|k[H+1]<<8|k[H+2]<<16;Be>Q&&(Be=Q),oe(f.Jc[+we],k,re,Be),re+=Be,Q-=Be,H+=3}oe(f.Jc[+ue],k,re,Q),k=re<R?0:5}if(k!=0)return En(f,k,"cannot parse partitions");for(k=J(re=f.m,7),H=je(re)?ae(re,4):0,R=je(re)?ae(re,4):0,Q=je(re)?ae(re,4):0,ue=je(re)?ae(re,4):0,re=je(re)?ae(re,4):0,we=f.Qa,Be=0;4>Be;++Be){if(we.Cb){var Ie=we.Zb[Be];we.Fb||(Ie+=k)}else{if(0<Be){f.pb[Be]=f.pb[0];continue}Ie=k}var Te=f.pb[Be];Te.Sc[0]=Mr[dr(Ie+H,127)],Te.Sc[1]=zr[dr(Ie+0,127)],Te.Eb[0]=2*Mr[dr(Ie+R,127)],Te.Eb[1]=101581*zr[dr(Ie+Q,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=Mr[dr(Ie+ue,117)],Te.Qc[1]=zr[dr(Ie+re,127)],Te.lc=Ie+re}if(!Z.Rb)return En(f,4,"Not a key frame.");for(je(X),Z=f.Pa,k=0;4>k;++k){for(H=0;8>H;++H)for(R=0;3>R;++R)for(Q=0;11>Q;++Q)ue=Ae(X,jn[k][H][R][Q])?J(X,8):Ju[k][H][R][Q],Z.Wc[k][H].Yb[R][Q]=ue;for(H=0;17>H;++H)Z.Xc[k][H]=Z.Wc[k][Vt[H]]}return f.kc=je(X),f.kc&&(f.Bd=J(X,8)),f.cb=1}function rl(f,x,k,R,H,X,Z){var Q=x[H].Yb[k];for(k=0;16>H;++H){if(!Ae(f,Q[k+0]))return H;for(;!Ae(f,Q[k+1]);)if(Q=x[++H].Yb[0],k=0,H==16)return 16;var re=x[H+1].Yb;if(Ae(f,Q[k+2])){var ue=f,we=0;if(Ae(ue,(Ie=Q)[(Be=k)+3]))if(Ae(ue,Ie[Be+6])){for(Q=0,Be=2*(we=Ae(ue,Ie[Be+8]))+(Ie=Ae(ue,Ie[Be+9+we])),we=0,Ie=Zu[Be];Ie[Q];++Q)we+=we+Ae(ue,Ie[Q]);we+=3+(8<<Be)}else Ae(ue,Ie[Be+7])?(we=7+2*Ae(ue,165),we+=Ae(ue,145)):we=5+Ae(ue,159);else we=Ae(ue,Ie[Be+4])?3+Ae(ue,Ie[Be+5]):2;Q=re[2]}else we=1,Q=re[1];re=Z+nu[H],0>(ue=f).b&&Se(ue);var Be,Ie=ue.b,Te=(Be=ue.Ca>>1)-(ue.I>>Ie)>>31;--ue.b,ue.Ca+=Te,ue.Ca|=1,ue.I-=(Be+1&Te)<<Ie,X[re]=((we^Te)-Te)*R[(0<H)+0]}return 16}function il(f){var x=f.rb[f.sb-1];x.la=0,x.Na=0,u(f.zc,0,0,f.zc.length),f.ja=0}function sl(f,x){if(f==null)return 0;if(x==null)return En(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Pa(f,x))return 0;if(s(f.cb),x.ac==null||x.ac(x)){x.ob&&(f.L=0);var k=Co[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=x.v-k>>4,f.zb=x.j-k>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=x.o+15+k>>4,f.Hb=x.va+15+k>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var R=f.ed;for(k=0;4>k;++k){var H;if(f.Qa.Cb){var X=f.Qa.Lb[k];f.Qa.Fb||(X+=R.Tb)}else X=R.Tb;for(H=0;1>=H;++H){var Z=f.gd[k][H],Q=X;if(R.Pc&&(Q+=R.vd[0],H&&(Q+=R.od[0])),0<(Q=0>Q?0:63<Q?63:Q)){var re=Q;0<R.wb&&(re=4<R.wb?re>>2:re>>1)>9-R.wb&&(re=9-R.wb),1>re&&(re=1),Z.dd=re,Z.tc=2*Q+re,Z.ld=40<=Q?2:15<=Q?1:0}else Z.tc=0;Z.La=H}}}k=0}else En(f,6,"Frame setup failed"),k=f.a;if(k=k==0){if(k){f.$c=0,0<f.Aa||(f.Ic=Cl);e:{k=f.Ic,R=4*(re=f.za);var ue=32*re,we=re+1,Be=0<f.L?re*(0<f.Aa?2:1):0,Ie=(f.Aa==2?2:1)*re;if((Z=R+832+(H=3*(16*k+Co[f.L])/2*ue)+(X=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=Z)k=0;else{if(Z>f.Vb){if(f.Vb=0,f.Ec=l(Z),f.Fc=0,f.Ec==null){k=En(f,1,"no memory during frame initialization.");break e}f.Vb=Z}Z=f.Ec,Q=f.Fc,f.Ac=Z,f.Bc=Q,Q+=R,f.Gd=d(ue,al),f.Hd=0,f.rb=d(we+1,ka),f.sb=1,f.wa=Be?d(Be,nn):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=re),s(!0),f.oc=Z,f.pc=Q,Q+=832,f.ya=d(Ie,Qn),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=re),f.R=16*re,f.B=8*re,re=(ue=Co[f.L])*f.R,ue=ue/2*f.B,f.sa=Z,f.ta=Q+re,f.qa=f.sa,f.ra=f.ta+16*k*f.R+ue,f.Ha=f.qa,f.Ia=f.ra+8*k*f.B+ue,f.$c=0,Q+=H,f.mb=X?Z:null,f.nb=X?Q:null,s(Q+X<=f.Fc+f.Vb),il(f),u(f.Ac,f.Bc,0,R),k=1}}if(k){if(x.ka=0,x.y=f.sa,x.O=f.ta,x.f=f.qa,x.N=f.ra,x.ea=f.Ha,x.Vd=f.Ia,x.fa=f.R,x.Rc=f.B,x.F=null,x.J=0,!nc){for(k=-255;255>=k;++k)zs[255+k]=0>k?-k:k;for(k=-1020;1020>=k;++k)tc[1020+k]=-128>k?-128:127<k?127:k;for(k=-112;112>=k;++k)wl[112+k]=-16>k?-16:15<k?15:k;for(k=-255;510>=k;++k)Nl[255+k]=0>k?0:255<k?255:k;nc=1}Ea=Vl,rs=Gl,di=lo,Cr=Wi,Ha=ol,Ei=oo,Lr=dl,is=Es,ss=Kc,er=hl,No=fl,hr=go,fi=pl,xn=Zl,vn=po,Yn=Zr,Kn=_r,hi=mo,Bn[0]=Sr,Bn[1]=Qc,Bn[2]=$i,Bn[3]=$l,Bn[4]=cl,Bn[5]=Ka,Bn[6]=Xi,Bn[7]=ks,Bn[8]=ci,Bn[9]=Cs,Ga[0]=As,Ga[1]=Wl,Ga[2]=$r,Ga[3]=co,Ga[4]=Tn,Ga[5]=ll,Ga[6]=fo,ti[0]=Xr,ti[1]=Yl,ti[2]=ul,ti[3]=Zi,ti[4]=Qi,ti[5]=ho,ti[6]=da,k=1}else k=0}k&&(k=(function(Te,Qe){for(Te.M=0;Te.M<Te.Va;++Te.M){var Ve,Ne=Te.Jc[Te.M&Te.Xb],Ce=Te.m,Ze=Te;for(Ve=0;Ve<Ze.za;++Ve){var et=Ce,$e=Ze,lt=$e.Ac,it=$e.Bc+4*Ve,xt=$e.zc,ot=$e.ya[$e.aa+Ve];if($e.Qa.Bb?ot.$b=Ae(et,$e.Pa.jb[0])?2+Ae(et,$e.Pa.jb[2]):Ae(et,$e.Pa.jb[1]):ot.$b=0,$e.kc&&(ot.Ad=Ae(et,$e.Bd)),ot.Za=!Ae(et,145)+0,ot.Za){var tn=ot.Ob,Yt=0;for($e=0;4>$e;++$e){var Zt,Dt=xt[0+$e];for(Zt=0;4>Zt;++Zt){Dt=wa[lt[it+Zt]][Dt];for(var cn=lc[Ae(et,Dt[0])];0<cn;)cn=lc[2*cn+Ae(et,Dt[cn])];Dt=-cn,lt[it+Zt]=Dt}o(tn,Yt,lt,it,4),Yt+=4,xt[0+$e]=Dt}}else Dt=Ae(et,156)?Ae(et,128)?1:3:Ae(et,163)?2:0,ot.Ob[0]=Dt,u(lt,it,Dt,4),u(xt,0,Dt,4);ot.Dd=Ae(et,142)?Ae(et,114)?Ae(et,183)?1:3:2:0}if(Ze.m.Ka)return En(Te,7,"Premature end-of-partition0 encountered.");for(;Te.ja<Te.za;++Te.ja){if(Ze=Ne,et=(Ce=Te).rb[Ce.sb-1],lt=Ce.rb[Ce.sb+Ce.ja],Ve=Ce.ya[Ce.aa+Ce.ja],it=Ce.kc?Ve.Ad:0)et.la=lt.la=0,Ve.Za||(et.Na=lt.Na=0),Ve.Hc=0,Ve.Gc=0,Ve.ia=0;else{var rn,At;if(et=lt,lt=Ze,it=Ce.Pa.Xc,xt=Ce.ya[Ce.aa+Ce.ja],ot=Ce.pb[xt.$b],$e=xt.ad,tn=0,Yt=Ce.rb[Ce.sb-1],Dt=Zt=0,u($e,tn,0,384),xt.Za)var hn=0,fa=it[3];else{cn=l(16);var Pn=et.Na+Yt.Na;if(Pn=mr(lt,it[1],Pn,ot.Eb,0,cn,0),et.Na=Yt.Na=(0<Pn)+0,1<Pn)Ea(cn,0,$e,tn);else{var Ma=cn[0]+3>>3;for(cn=0;256>cn;cn+=16)$e[tn+cn]=Ma}hn=1,fa=it[0]}var Kt=15&et.la,ja=15&Yt.la;for(cn=0;4>cn;++cn){var tr=1&ja;for(Ma=At=0;4>Ma;++Ma)Kt=Kt>>1|(tr=(Pn=mr(lt,fa,Pn=tr+(1&Kt),ot.Sc,hn,$e,tn))>hn)<<7,At=At<<2|(3<Pn?3:1<Pn?2:$e[tn+0]!=0),tn+=16;Kt>>=4,ja=ja>>1|tr<<7,Zt=(Zt<<8|At)>>>0}for(fa=Kt,hn=ja>>4,rn=0;4>rn;rn+=2){for(At=0,Kt=et.la>>4+rn,ja=Yt.la>>4+rn,cn=0;2>cn;++cn){for(tr=1&ja,Ma=0;2>Ma;++Ma)Pn=tr+(1&Kt),Kt=Kt>>1|(tr=0<(Pn=mr(lt,it[2],Pn,ot.Qc,0,$e,tn)))<<3,At=At<<2|(3<Pn?3:1<Pn?2:$e[tn+0]!=0),tn+=16;Kt>>=2,ja=ja>>1|tr<<5}Dt|=At<<4*rn,fa|=Kt<<4<<rn,hn|=(240&ja)<<rn}et.la=fa,Yt.la=hn,xt.Hc=Zt,xt.Gc=Dt,xt.ia=43690&Dt?0:ot.ia,it=!(Zt|Dt)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[Ve.$b][Ve.Za],Ce.wa[Ce.Y+Ce.ja].La|=!it),Ze.Ka)return En(Te,7,"Premature end-of-file encountered.")}if(il(Te),Ce=Qe,Ze=1,Ve=(Ne=Te).D,et=0<Ne.L&&Ne.M>=Ne.zb&&Ne.M<=Ne.Va,Ne.Aa==0)e:{if(Ve.M=Ne.M,Ve.uc=et,vo(Ne,Ve),Ze=1,Ve=(At=Ne.D).Nb,et=(Dt=Co[Ne.L])*Ne.R,lt=Dt/2*Ne.B,cn=16*Ve*Ne.R,Ma=8*Ve*Ne.B,it=Ne.sa,xt=Ne.ta-et+cn,ot=Ne.qa,$e=Ne.ra-lt+Ma,tn=Ne.Ha,Yt=Ne.Ia-lt+Ma,ja=(Kt=At.M)==0,Zt=Kt>=Ne.Va-1,Ne.Aa==2&&vo(Ne,At),At.uc)for(tr=(Pn=Ne).D.M,s(Pn.D.uc),At=Pn.yb;At<Pn.Hb;++At){hn=At,fa=tr;var ra=(Un=(Mn=Pn).D).Nb;rn=Mn.R;var Un=Un.wa[Un.Y+hn],ha=Mn.sa,gr=Mn.ta+16*ra*rn+16*hn,Ir=Un.dd,ea=Un.tc;if(ea!=0)if(s(3<=ea),Mn.L==1)0<hn&&Yn(ha,gr,rn,ea+4),Un.La&&hi(ha,gr,rn,ea),0<fa&&vn(ha,gr,rn,ea+4),Un.La&&Kn(ha,gr,rn,ea);else{var $n=Mn.B,pa=Mn.qa,br=Mn.ra+8*ra*$n+8*hn,gi=Mn.Ha,Mn=Mn.Ia+8*ra*$n+8*hn;ra=Un.ld,0<hn&&(is(ha,gr,rn,ea+4,Ir,ra),er(pa,br,gi,Mn,$n,ea+4,Ir,ra)),Un.La&&(hr(ha,gr,rn,ea,Ir,ra),xn(pa,br,gi,Mn,$n,ea,Ir,ra)),0<fa&&(Lr(ha,gr,rn,ea+4,Ir,ra),ss(pa,br,gi,Mn,$n,ea+4,Ir,ra)),Un.La&&(No(ha,gr,rn,ea,Ir,ra),fi(pa,br,gi,Mn,$n,ea,Ir,ra))}}if(Ne.ia&&alert("todo:DitherRow"),Ce.put!=null){if(At=16*Kt,Kt=16*(Kt+1),ja?(Ce.y=Ne.sa,Ce.O=Ne.ta+cn,Ce.f=Ne.qa,Ce.N=Ne.ra+Ma,Ce.ea=Ne.Ha,Ce.W=Ne.Ia+Ma):(At-=Dt,Ce.y=it,Ce.O=xt,Ce.f=ot,Ce.N=$e,Ce.ea=tn,Ce.W=Yt),Zt||(Kt-=Dt),Kt>Ce.o&&(Kt=Ce.o),Ce.F=null,Ce.J=null,Ne.Fa!=null&&0<Ne.Fa.length&&At<Kt&&(Ce.J=bo(Ne,Ce,At,Kt-At),Ce.F=Ne.mb,Ce.F==null&&Ce.F.length==0)){Ze=En(Ne,3,"Could not decode alpha data.");break e}At<Ce.j&&(Dt=Ce.j-At,At=Ce.j,s(!(1&Dt)),Ce.O+=Ne.R*Dt,Ce.N+=Ne.B*(Dt>>1),Ce.W+=Ne.B*(Dt>>1),Ce.F!=null&&(Ce.J+=Ce.width*Dt)),At<Kt&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=At-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=Kt-At,Ze=Ce.put(Ce))}Ve+1!=Ne.Ic||Zt||(o(Ne.sa,Ne.ta-et,it,xt+16*Ne.R,et),o(Ne.qa,Ne.ra-lt,ot,$e+8*Ne.B,lt),o(Ne.Ha,Ne.Ia-lt,tn,Yt+8*Ne.B,lt))}if(!Ze)return En(Te,6,"Output aborted.")}return 1})(f,x)),x.bc!=null&&x.bc(x),k&=1}return k?(f.cb=0,k):0}function Nr(f,x,k,R,H){H=f[x+k+32*R]+(H>>3),f[x+k+32*R]=-256&H?0>H?0:255:H}function ji(f,x,k,R,H,X){Nr(f,x,0,k,R+H),Nr(f,x,1,k,R+X),Nr(f,x,2,k,R-X),Nr(f,x,3,k,R-H)}function Qa(f){return(20091*f>>16)+f}function Ca(f,x,k,R){var H,X=0,Z=l(16);for(H=0;4>H;++H){var Q=f[x+0]+f[x+8],re=f[x+0]-f[x+8],ue=(35468*f[x+4]>>16)-Qa(f[x+12]),we=Qa(f[x+4])+(35468*f[x+12]>>16);Z[X+0]=Q+we,Z[X+1]=re+ue,Z[X+2]=re-ue,Z[X+3]=Q-we,X+=4,x++}for(H=X=0;4>H;++H)Q=(f=Z[X+0]+4)+Z[X+8],re=f-Z[X+8],ue=(35468*Z[X+4]>>16)-Qa(Z[X+12]),Nr(k,R,0,0,Q+(we=Qa(Z[X+4])+(35468*Z[X+12]>>16))),Nr(k,R,1,0,re+ue),Nr(k,R,2,0,re-ue),Nr(k,R,3,0,Q-we),X++,R+=32}function oo(f,x,k,R){var H=f[x+0]+4,X=35468*f[x+4]>>16,Z=Qa(f[x+4]),Q=35468*f[x+1]>>16;ji(k,R,0,H+Z,f=Qa(f[x+1]),Q),ji(k,R,1,H+X,f,Q),ji(k,R,2,H-X,f,Q),ji(k,R,3,H-Z,f,Q)}function Gl(f,x,k,R,H){Ca(f,x,k,R),H&&Ca(f,x+16,k,R+4)}function lo(f,x,k,R){rs(f,x+0,k,R,1),rs(f,x+32,k,R+128,1)}function Wi(f,x,k,R){var H;for(f=f[x+0]+4,H=0;4>H;++H)for(x=0;4>x;++x)Nr(k,R,x,H,f)}function ol(f,x,k,R){f[x+0]&&Cr(f,x+0,k,R),f[x+16]&&Cr(f,x+16,k,R+4),f[x+32]&&Cr(f,x+32,k,R+128),f[x+48]&&Cr(f,x+48,k,R+128+4)}function Vl(f,x,k,R){var H,X=l(16);for(H=0;4>H;++H){var Z=f[x+0+H]+f[x+12+H],Q=f[x+4+H]+f[x+8+H],re=f[x+4+H]-f[x+8+H],ue=f[x+0+H]-f[x+12+H];X[0+H]=Z+Q,X[8+H]=Z-Q,X[4+H]=ue+re,X[12+H]=ue-re}for(H=0;4>H;++H)Z=(f=X[0+4*H]+3)+X[3+4*H],Q=X[1+4*H]+X[2+4*H],re=X[1+4*H]-X[2+4*H],ue=f-X[3+4*H],k[R+0]=Z+Q>>3,k[R+16]=ue+re>>3,k[R+32]=Z-Q>>3,k[R+48]=ue-re>>3,R+=64}function li(f,x,k){var R,H=x-32,X=Oa,Z=255-f[H-1];for(R=0;R<k;++R){var Q,re=X,ue=Z+f[x-1];for(Q=0;Q<k;++Q)f[x+Q]=re[ue+f[H+Q]];x+=32}}function Qc(f,x){li(f,x,4)}function Yl(f,x){li(f,x,8)}function Wl(f,x){li(f,x,16)}function $r(f,x){var k;for(k=0;16>k;++k)o(f,x+32*k,f,x-32,16)}function co(f,x){var k;for(k=16;0<k;--k)u(f,x,f[x-1],16),x+=32}function uo(f,x,k){var R;for(R=0;16>R;++R)u(x,k+32*R,f,16)}function As(f,x){var k,R=16;for(k=0;16>k;++k)R+=f[x-1+32*k]+f[x+k-32];uo(R>>5,f,x)}function Tn(f,x){var k,R=8;for(k=0;16>k;++k)R+=f[x-1+32*k];uo(R>>4,f,x)}function ll(f,x){var k,R=8;for(k=0;16>k;++k)R+=f[x+k-32];uo(R>>4,f,x)}function fo(f,x){uo(128,f,x)}function jt(f,x,k){return f+2*x+k+2>>2}function $i(f,x){var k,R=x-32;for(R=new Uint8Array([jt(f[R-1],f[R+0],f[R+1]),jt(f[R+0],f[R+1],f[R+2]),jt(f[R+1],f[R+2],f[R+3]),jt(f[R+2],f[R+3],f[R+4])]),k=0;4>k;++k)o(f,x+32*k,R,0,R.length)}function $l(f,x){var k=f[x-1],R=f[x-1+32],H=f[x-1+64],X=f[x-1+96];Ee(f,x+0,16843009*jt(f[x-1-32],k,R)),Ee(f,x+32,16843009*jt(k,R,H)),Ee(f,x+64,16843009*jt(R,H,X)),Ee(f,x+96,16843009*jt(H,X,X))}function Sr(f,x){var k,R=4;for(k=0;4>k;++k)R+=f[x+k-32]+f[x-1+32*k];for(R>>=3,k=0;4>k;++k)u(f,x+32*k,R,4)}function cl(f,x){var k=f[x-1+0],R=f[x-1+32],H=f[x-1+64],X=f[x-1-32],Z=f[x+0-32],Q=f[x+1-32],re=f[x+2-32],ue=f[x+3-32];f[x+0+96]=jt(R,H,f[x-1+96]),f[x+1+96]=f[x+0+64]=jt(k,R,H),f[x+2+96]=f[x+1+64]=f[x+0+32]=jt(X,k,R),f[x+3+96]=f[x+2+64]=f[x+1+32]=f[x+0+0]=jt(Z,X,k),f[x+3+64]=f[x+2+32]=f[x+1+0]=jt(Q,Z,X),f[x+3+32]=f[x+2+0]=jt(re,Q,Z),f[x+3+0]=jt(ue,re,Q)}function Xi(f,x){var k=f[x+1-32],R=f[x+2-32],H=f[x+3-32],X=f[x+4-32],Z=f[x+5-32],Q=f[x+6-32],re=f[x+7-32];f[x+0+0]=jt(f[x+0-32],k,R),f[x+1+0]=f[x+0+32]=jt(k,R,H),f[x+2+0]=f[x+1+32]=f[x+0+64]=jt(R,H,X),f[x+3+0]=f[x+2+32]=f[x+1+64]=f[x+0+96]=jt(H,X,Z),f[x+3+32]=f[x+2+64]=f[x+1+96]=jt(X,Z,Q),f[x+3+64]=f[x+2+96]=jt(Z,Q,re),f[x+3+96]=jt(Q,re,re)}function Ka(f,x){var k=f[x-1+0],R=f[x-1+32],H=f[x-1+64],X=f[x-1-32],Z=f[x+0-32],Q=f[x+1-32],re=f[x+2-32],ue=f[x+3-32];f[x+0+0]=f[x+1+64]=X+Z+1>>1,f[x+1+0]=f[x+2+64]=Z+Q+1>>1,f[x+2+0]=f[x+3+64]=Q+re+1>>1,f[x+3+0]=re+ue+1>>1,f[x+0+96]=jt(H,R,k),f[x+0+64]=jt(R,k,X),f[x+0+32]=f[x+1+96]=jt(k,X,Z),f[x+1+32]=f[x+2+96]=jt(X,Z,Q),f[x+2+32]=f[x+3+96]=jt(Z,Q,re),f[x+3+32]=jt(Q,re,ue)}function ks(f,x){var k=f[x+0-32],R=f[x+1-32],H=f[x+2-32],X=f[x+3-32],Z=f[x+4-32],Q=f[x+5-32],re=f[x+6-32],ue=f[x+7-32];f[x+0+0]=k+R+1>>1,f[x+1+0]=f[x+0+64]=R+H+1>>1,f[x+2+0]=f[x+1+64]=H+X+1>>1,f[x+3+0]=f[x+2+64]=X+Z+1>>1,f[x+0+32]=jt(k,R,H),f[x+1+32]=f[x+0+96]=jt(R,H,X),f[x+2+32]=f[x+1+96]=jt(H,X,Z),f[x+3+32]=f[x+2+96]=jt(X,Z,Q),f[x+3+64]=jt(Z,Q,re),f[x+3+96]=jt(Q,re,ue)}function Cs(f,x){var k=f[x-1+0],R=f[x-1+32],H=f[x-1+64],X=f[x-1+96];f[x+0+0]=k+R+1>>1,f[x+2+0]=f[x+0+32]=R+H+1>>1,f[x+2+32]=f[x+0+64]=H+X+1>>1,f[x+1+0]=jt(k,R,H),f[x+3+0]=f[x+1+32]=jt(R,H,X),f[x+3+32]=f[x+1+64]=jt(H,X,X),f[x+3+64]=f[x+2+64]=f[x+0+96]=f[x+1+96]=f[x+2+96]=f[x+3+96]=X}function ci(f,x){var k=f[x-1+0],R=f[x-1+32],H=f[x-1+64],X=f[x-1+96],Z=f[x-1-32],Q=f[x+0-32],re=f[x+1-32],ue=f[x+2-32];f[x+0+0]=f[x+2+32]=k+Z+1>>1,f[x+0+32]=f[x+2+64]=R+k+1>>1,f[x+0+64]=f[x+2+96]=H+R+1>>1,f[x+0+96]=X+H+1>>1,f[x+3+0]=jt(Q,re,ue),f[x+2+0]=jt(Z,Q,re),f[x+1+0]=f[x+3+32]=jt(k,Z,Q),f[x+1+32]=f[x+3+64]=jt(R,k,Z),f[x+1+64]=f[x+3+96]=jt(H,R,k),f[x+1+96]=jt(X,H,R)}function ul(f,x){var k;for(k=0;8>k;++k)o(f,x+32*k,f,x-32,8)}function Zi(f,x){var k;for(k=0;8>k;++k)u(f,x,f[x-1],8),x+=32}function Ji(f,x,k){var R;for(R=0;8>R;++R)u(x,k+32*R,f,8)}function Xr(f,x){var k,R=8;for(k=0;8>k;++k)R+=f[x+k-32]+f[x-1+32*k];Ji(R>>4,f,x)}function ho(f,x){var k,R=4;for(k=0;8>k;++k)R+=f[x+k-32];Ji(R>>3,f,x)}function Qi(f,x){var k,R=4;for(k=0;8>k;++k)R+=f[x-1+32*k];Ji(R>>3,f,x)}function da(f,x){Ji(128,f,x)}function jr(f,x,k){var R=f[x-k],H=f[x+0],X=3*(H-R)+Ti[1020+f[x-2*k]-f[x+k]],Z=Sl[112+(X+4>>3)];f[x-k]=Oa[255+R+Sl[112+(X+3>>3)]],f[x+0]=Oa[255+H-Z]}function Ls(f,x,k,R){var H=f[x+0],X=f[x+k];return ya[255+f[x-2*k]-f[x-k]]>R||ya[255+X-H]>R}function Ki(f,x,k,R){return 4*ya[255+f[x-k]-f[x+0]]+ya[255+f[x-2*k]-f[x+k]]<=R}function Xl(f,x,k,R,H){var X=f[x-3*k],Z=f[x-2*k],Q=f[x-k],re=f[x+0],ue=f[x+k],we=f[x+2*k],Be=f[x+3*k];return 4*ya[255+Q-re]+ya[255+Z-ue]>R?0:ya[255+f[x-4*k]-X]<=H&&ya[255+X-Z]<=H&&ya[255+Z-Q]<=H&&ya[255+Be-we]<=H&&ya[255+we-ue]<=H&&ya[255+ue-re]<=H}function po(f,x,k,R){var H=2*R+1;for(R=0;16>R;++R)Ki(f,x+R,k,H)&&jr(f,x+R,k)}function Zr(f,x,k,R){var H=2*R+1;for(R=0;16>R;++R)Ki(f,x+R*k,1,H)&&jr(f,x+R*k,1)}function _r(f,x,k,R){var H;for(H=3;0<H;--H)po(f,x+=4*k,k,R)}function mo(f,x,k,R){var H;for(H=3;0<H;--H)Zr(f,x+=4,k,R)}function _i(f,x,k,R,H,X,Z,Q){for(X=2*X+1;0<H--;){if(Xl(f,x,k,X,Z))if(Ls(f,x,k,Q))jr(f,x,k);else{var re=f,ue=x,we=k,Be=re[ue-2*we],Ie=re[ue-we],Te=re[ue+0],Qe=re[ue+we],Ve=re[ue+2*we],Ne=27*(Ze=Ti[1020+3*(Te-Ie)+Ti[1020+Be-Qe]])+63>>7,Ce=18*Ze+63>>7,Ze=9*Ze+63>>7;re[ue-3*we]=Oa[255+re[ue-3*we]+Ze],re[ue-2*we]=Oa[255+Be+Ce],re[ue-we]=Oa[255+Ie+Ne],re[ue+0]=Oa[255+Te-Ne],re[ue+we]=Oa[255+Qe-Ce],re[ue+2*we]=Oa[255+Ve-Ze]}x+=R}}function Jr(f,x,k,R,H,X,Z,Q){for(X=2*X+1;0<H--;){if(Xl(f,x,k,X,Z))if(Ls(f,x,k,Q))jr(f,x,k);else{var re=f,ue=x,we=k,Be=re[ue-we],Ie=re[ue+0],Te=re[ue+we],Qe=Sl[112+((Ve=3*(Ie-Be))+4>>3)],Ve=Sl[112+(Ve+3>>3)],Ne=Qe+1>>1;re[ue-2*we]=Oa[255+re[ue-2*we]+Ne],re[ue-we]=Oa[255+Be+Ve],re[ue+0]=Oa[255+Ie-Qe],re[ue+we]=Oa[255+Te-Ne]}x+=R}}function dl(f,x,k,R,H,X){_i(f,x,k,1,16,R,H,X)}function Es(f,x,k,R,H,X){_i(f,x,1,k,16,R,H,X)}function fl(f,x,k,R,H,X){var Z;for(Z=3;0<Z;--Z)Jr(f,x+=4*k,k,1,16,R,H,X)}function go(f,x,k,R,H,X){var Z;for(Z=3;0<Z;--Z)Jr(f,x+=4,1,k,16,R,H,X)}function Kc(f,x,k,R,H,X,Z,Q){_i(f,x,H,1,8,X,Z,Q),_i(k,R,H,1,8,X,Z,Q)}function hl(f,x,k,R,H,X,Z,Q){_i(f,x,1,H,8,X,Z,Q),_i(k,R,1,H,8,X,Z,Q)}function pl(f,x,k,R,H,X,Z,Q){Jr(f,x+4*H,H,1,8,X,Z,Q),Jr(k,R+4*H,H,1,8,X,Z,Q)}function Zl(f,x,k,R,H,X,Z,Q){Jr(f,x+4,1,H,8,X,Z,Q),Jr(k,R+4,1,H,8,X,Z,Q)}function Ts(){this.ba=new In,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ml(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Jl(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new E,this.yc=new O}function eu(){this.xb=this.a=0,this.l=new io,this.ca=new In,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Jl,this.ab=0,this.gc=d(4,gl),this.Oc=0}function es(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new io,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Os(f,x,k,R,H,X,Z){for(f=f==null?0:f[x+0],x=0;x<Z;++x)H[X+x]=f+k[R+x]&255,f=H[X+x]}function bl(f,x,k,R,H,X,Z){var Q;if(f==null)Os(null,null,k,R,H,X,Z);else for(Q=0;Q<Z;++Q)H[X+Q]=f[x+Q]+k[R+Q]&255}function ts(f,x,k,R,H,X,Z){if(f==null)Os(null,null,k,R,H,X,Z);else{var Q,re=f[x+0],ue=re,we=re;for(Q=0;Q<Z;++Q)ue=we+(re=f[x+Q])-ue,we=k[R+Q]+(-256&ue?0>ue?0:255:ue)&255,ue=re,H[X+Q]=we}}function bo(f,x,k,R){var H=x.width,X=x.o;if(s(f!=null&&x!=null),0>k||0>=R||k+R>X)return null;if(!f.Cc){if(f.ga==null){var Z;if(f.ga=new es,(Z=f.ga==null)||(Z=x.width*x.o,s(f.Gb.length==0),f.Gb=l(Z),f.Uc=0,f.Gb==null?Z=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,Z=1),Z=!Z),!Z){Z=f.ga;var Q=f.Fa,re=f.P,ue=f.qc,we=f.mb,Be=f.nb,Ie=re+1,Te=ue-1,Qe=Z.l;if(s(Q!=null&&we!=null&&x!=null),Oi[0]=null,Oi[1]=Os,Oi[2]=bl,Oi[3]=ts,Z.ca=we,Z.tb=Be,Z.c=x.width,Z.i=x.height,s(0<Z.c&&0<Z.i),1>=ue)x=0;else if(Z.$a=Q[re+0]>>0&3,Z.Z=Q[re+0]>>2&3,Z.Lc=Q[re+0]>>4&3,re=Q[re+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||re)x=0;else if(Qe.put=Wa,Qe.ac=Jn,Qe.bc=Aa,Qe.ma=Z,Qe.width=x.width,Qe.height=x.height,Qe.Da=x.Da,Qe.v=x.v,Qe.va=x.va,Qe.j=x.j,Qe.o=x.o,Z.$a)e:{s(Z.$a==1),x=Xa();t:for(;;){if(x==null){x=0;break e}if(s(Z!=null),Z.mc=x,x.c=Z.c,x.i=Z.i,x.l=Z.l,x.l.ma=Z,x.l.width=Z.c,x.l.height=Z.i,x.a=0,he(x.m,Q,Ie,Te),!yr(Z.c,Z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&ca(x.s)?(Z.ic=1,Q=x.c*x.i,x.Ta=null,x.Ua=0,x.V=l(Q),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Z.ic=0,x=Wr(x,Z.c)),!x))break t;x=1;break e}Z.mc=null,x=0}else x=Te>=Z.c*Z.i;Z=!x}if(Z)return null;f.ga.Lc!=1?f.Ga=0:R=X-k}s(f.ga!=null),s(k+R<=X);e:{if(x=(Q=f.ga).c,X=Q.l.o,Q.$a==0){if(Ie=f.rc,Te=f.Vc,Qe=f.Fa,re=f.P+1+k*x,ue=f.mb,we=f.nb+k*x,s(re<=f.P+f.qc),Q.Z!=0)for(s(Oi[Q.Z]!=null),Z=0;Z<R;++Z)Oi[Q.Z](Ie,Te,Qe,re,ue,we,x),Ie=ue,Te=we,we+=x,re+=x;else for(Z=0;Z<R;++Z)o(ue,we,Qe,re,x),Ie=ue,Te=we,we+=x,re+=x;f.rc=Ie,f.Vc=Te}else{if(s(Q.mc!=null),x=k+R,s((Z=Q.mc)!=null),s(x<=Z.i),Z.C>=x)x=1;else if(Q.ic||ze(),Q.ic){Q=Z.V,Ie=Z.Ba,Te=Z.c;var Ve=Z.i,Ne=(Qe=1,re=Z.$/Te,ue=Z.$%Te,we=Z.m,Be=Z.s,Z.$),Ce=Te*Ve,Ze=Te*x,et=Be.wc,$e=Ne<Ze?Ln(Be,ue,re):null;s(Ne<=Ce),s(x<=Ve),s(ca(Be));t:for(;;){for(;!we.h&&Ne<Ze;){if(ue&et||($e=Ln(Be,ue,re)),s($e!=null),be(we),256>(Ve=la($e.G[0],$e.H[0],we)))Q[Ie+Ne]=Ve,++Ne,++ue>=Te&&(ue=0,++re<=x&&!(re%16)&&bn(Z,re));else{if(!(280>Ve)){Qe=0;break t}Ve=$a(Ve-256,we);var lt,it=la($e.G[4],$e.H[4],we);if(be(we),!(Ne>=(it=cr(Te,it=$a(it,we)))&&Ce-Ne>=Ve)){Qe=0;break t}for(lt=0;lt<Ve;++lt)Q[Ie+Ne+lt]=Q[Ie+Ne+lt-it];for(Ne+=Ve,ue+=Ve;ue>=Te;)ue-=Te,++re<=x&&!(re%16)&&bn(Z,re);Ne<Ze&&ue&et&&($e=Ln(Be,ue,re))}s(we.h==$(we))}bn(Z,re>x?x:re);break t}!Qe||we.h&&Ne<Ce?(Qe=0,Z.a=we.h?5:3):Z.$=Ne,x=Qe}else x=ua(Z,Z.V,Z.Ba,Z.c,Z.i,x,ur);if(!x){R=0;break e}}k+R>=X&&(f.Cc=1),R=1}if(!R)return null;if(f.Cc&&((R=f.ga)!=null&&(R.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+k*H}function S(f,x,k,R,H,X){for(;0<H--;){var Z,Q=f,re=x+(k?1:0),ue=f,we=x+(k?0:3);for(Z=0;Z<R;++Z){var Be=ue[we+4*Z];Be!=255&&(Be*=32897,Q[re+4*Z+0]=Q[re+4*Z+0]*Be>>23,Q[re+4*Z+1]=Q[re+4*Z+1]*Be>>23,Q[re+4*Z+2]=Q[re+4*Z+2]*Be>>23)}x+=X}}function V(f,x,k,R,H){for(;0<R--;){var X;for(X=0;X<k;++X){var Z=f[x+2*X+0],Q=15&(ue=f[x+2*X+1]),re=4369*Q,ue=(240&ue|ue>>4)*re>>16;f[x+2*X+0]=(240&Z|Z>>4)*re>>16&240|(15&Z|Z<<4)*re>>16>>4&15,f[x+2*X+1]=240&ue|Q}x+=H}}function pe(f,x,k,R,H,X,Z,Q){var re,ue,we=255;for(ue=0;ue<H;++ue){for(re=0;re<R;++re){var Be=f[x+re];X[Z+4*re]=Be,we&=Be}x+=k,Z+=Q}return we!=255}function ye(f,x,k,R,H){var X;for(X=0;X<H;++X)k[R+X]=f[x+X]>>8}function ze(){pi=S,Ta=V,Ms=pe,pr=ye}function Ye(f,x,k){q[f]=function(R,H,X,Z,Q,re,ue,we,Be,Ie,Te,Qe,Ve,Ne,Ce,Ze,et){var $e,lt=et-1>>1,it=Q[re+0]|ue[we+0]<<16,xt=Be[Ie+0]|Te[Qe+0]<<16;s(R!=null);var ot=3*it+xt+131074>>2;for(x(R[H+0],255&ot,ot>>16,Ve,Ne),X!=null&&(ot=3*xt+it+131074>>2,x(X[Z+0],255&ot,ot>>16,Ce,Ze)),$e=1;$e<=lt;++$e){var tn=Q[re+$e]|ue[we+$e]<<16,Yt=Be[Ie+$e]|Te[Qe+$e]<<16,Zt=it+tn+xt+Yt+524296,Dt=Zt+2*(tn+xt)>>3;ot=Dt+it>>1,it=(Zt=Zt+2*(it+Yt)>>3)+tn>>1,x(R[H+2*$e-1],255&ot,ot>>16,Ve,Ne+(2*$e-1)*k),x(R[H+2*$e-0],255&it,it>>16,Ve,Ne+(2*$e-0)*k),X!=null&&(ot=Zt+xt>>1,it=Dt+Yt>>1,x(X[Z+2*$e-1],255&ot,ot>>16,Ce,Ze+(2*$e-1)*k),x(X[Z+2*$e+0],255&it,it>>16,Ce,Ze+(2*$e+0)*k)),it=tn,xt=Yt}1&et||(ot=3*it+xt+131074>>2,x(R[H+et-1],255&ot,ot>>16,Ve,Ne+(et-1)*k),X!=null&&(ot=3*xt+it+131074>>2,x(X[Z+et-1],255&ot,ot>>16,Ce,Ze+(et-1)*k)))}}function nt(){Na[ac]=Is,Na[Ra]=Ao,Na[rc]=ru,Na[Er]=cc,Na[jl]=us,Na[So]=mi,Na[os]=ds,Na[_l]=Ao,Na[ic]=cc,Na[jo]=us,Na[sc]=mi}function ut(f){return f&-16384?0>f?0:255:f>>uc}function vt(f,x){return ut((19077*f>>8)+(26149*x>>8)-14234)}function Ot(f,x,k){return ut((19077*f>>8)-(6419*x>>8)-(13320*k>>8)+8708)}function Mt(f,x){return ut((19077*f>>8)+(33050*x>>8)-17685)}function Xt(f,x,k,R,H){R[H+0]=vt(f,k),R[H+1]=Ot(f,x,k),R[H+2]=Mt(f,x)}function On(f,x,k,R,H){R[H+0]=Mt(f,x),R[H+1]=Ot(f,x,k),R[H+2]=vt(f,k)}function Rn(f,x,k,R,H){var X=Ot(f,x,k);x=X<<3&224|Mt(f,x)>>3,R[H+0]=248&vt(f,k)|X>>5,R[H+1]=x}function Vn(f,x,k,R,H){var X=240&Mt(f,x)|15;R[H+0]=240&vt(f,k)|Ot(f,x,k)>>4,R[H+1]=X}function va(f,x,k,R,H){R[H+0]=255,Xt(f,x,k,R,H+1)}function aa(f,x,k,R,H){On(f,x,k,R,H),R[H+3]=255}function La(f,x,k,R,H){Xt(f,x,k,R,H),R[H+3]=255}function dr(f,x){return 0>f?0:f>x?x:f}function Ai(f,x,k){q[f]=function(R,H,X,Z,Q,re,ue,we,Be){for(var Ie=we+(-2&Be)*k;we!=Ie;)x(R[H+0],X[Z+0],Q[re+0],ue,we),x(R[H+1],X[Z+0],Q[re+0],ue,we+k),H+=2,++Z,++re,we+=2*k;1&Be&&x(R[H+0],X[Z+0],Q[re+0],ue,we)}}function Ql(f,x,k){return k==0?f==0?x==0?6:5:x==0?4:0:k}function xo(f,x,k,R,H){switch(f>>>30){case 3:rs(x,k,R,H,0);break;case 2:Ei(x,k,R,H);break;case 1:Cr(x,k,R,H)}}function vo(f,x){var k,R,H=x.M,X=x.Nb,Z=f.oc,Q=f.pc+40,re=f.oc,ue=f.pc+584,we=f.oc,Be=f.pc+600;for(k=0;16>k;++k)Z[Q+32*k-1]=129;for(k=0;8>k;++k)re[ue+32*k-1]=129,we[Be+32*k-1]=129;for(0<H?Z[Q-1-32]=re[ue-1-32]=we[Be-1-32]=129:(u(Z,Q-32-1,127,21),u(re,ue-32-1,127,9),u(we,Be-32-1,127,9)),R=0;R<f.za;++R){var Ie=x.ya[x.aa+R];if(0<R){for(k=-1;16>k;++k)o(Z,Q+32*k-4,Z,Q+32*k+12,4);for(k=-1;8>k;++k)o(re,ue+32*k-4,re,ue+32*k+4,4),o(we,Be+32*k-4,we,Be+32*k+4,4)}var Te=f.Gd,Qe=f.Hd+R,Ve=Ie.ad,Ne=Ie.Hc;if(0<H&&(o(Z,Q-32,Te[Qe].y,0,16),o(re,ue-32,Te[Qe].f,0,8),o(we,Be-32,Te[Qe].ea,0,8)),Ie.Za){var Ce=Z,Ze=Q-32+16;for(0<H&&(R>=f.za-1?u(Ce,Ze,Te[Qe].y[15],4):o(Ce,Ze,Te[Qe+1].y,0,4)),k=0;4>k;k++)Ce[Ze+128+k]=Ce[Ze+256+k]=Ce[Ze+384+k]=Ce[Ze+0+k];for(k=0;16>k;++k,Ne<<=2)Ce=Z,Ze=Q+Wn[k],Bn[Ie.Ob[k]](Ce,Ze),xo(Ne,Ve,16*+k,Ce,Ze)}else if(Ce=Ql(R,H,Ie.Ob[0]),Ga[Ce](Z,Q),Ne!=0)for(k=0;16>k;++k,Ne<<=2)xo(Ne,Ve,16*+k,Z,Q+Wn[k]);for(k=Ie.Gc,Ce=Ql(R,H,Ie.Dd),ti[Ce](re,ue),ti[Ce](we,Be),Ne=Ve,Ce=re,Ze=ue,255&(Ie=k>>0)&&(170&Ie?di(Ne,256,Ce,Ze):Ha(Ne,256,Ce,Ze)),Ie=we,Ne=Be,255&(k>>=8)&&(170&k?di(Ve,320,Ie,Ne):Ha(Ve,320,Ie,Ne)),H<f.Ub-1&&(o(Te[Qe].y,0,Z,Q+480,16),o(Te[Qe].f,0,re,ue+224,8),o(Te[Qe].ea,0,we,Be+224,8)),k=8*X*f.B,Te=f.sa,Qe=f.ta+16*R+16*X*f.R,Ve=f.qa,Ie=f.ra+8*R+k,Ne=f.Ha,Ce=f.Ia+8*R+k,k=0;16>k;++k)o(Te,Qe+k*f.R,Z,Q+32*k,16);for(k=0;8>k;++k)o(Ve,Ie+k*f.B,re,ue+32*k,8),o(Ne,Ce+k*f.B,we,Be+32*k,8)}}function ui(f,x,k,R,H,X,Z,Q,re){var ue=[0],we=[0],Be=0,Ie=re!=null?re.kd:0,Te=re??new ml;if(f==null||12>k)return 7;Te.data=f,Te.w=x,Te.ha=k,x=[x],k=[k],Te.gb=[Te.gb];e:{var Qe=x,Ve=k,Ne=Te.gb;if(s(f!=null),s(Ve!=null),s(Ne!=null),Ne[0]=0,12<=Ve[0]&&!r(f,Qe[0],"RIFF")){if(r(f,Qe[0]+8,"WEBP")){Ne=3;break e}var Ce=Xe(f,Qe[0]+4);if(12>Ce||4294967286<Ce){Ne=3;break e}if(Ie&&Ce>Ve[0]-8){Ne=7;break e}Ne[0]=Ce,Qe[0]+=12,Ve[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Ce=0<Te.gb[0],k=k[0];;){e:{var Ze=f;Ve=x,Ne=k;var et=ue,$e=we,lt=Qe=[0];if((ot=Be=[Be])[0]=0,8>Ne[0])Ne=7;else{if(!r(Ze,Ve[0],"VP8X")){if(Xe(Ze,Ve[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var it=Xe(Ze,Ve[0]+8),xt=1+qe(Ze,Ve[0]+12);if(2147483648<=xt*(Ze=1+qe(Ze,Ve[0]+15))){Ne=3;break e}lt!=null&&(lt[0]=it),et!=null&&(et[0]=xt),$e!=null&&($e[0]=Ze),Ve[0]+=18,Ne[0]-=18,ot[0]=1}Ne=0}}if(Be=Be[0],Qe=Qe[0],Ne!=0)return Ne;if(Ve=!!(2&Qe),!Ce&&Be)return 3;if(X!=null&&(X[0]=!!(16&Qe)),Z!=null&&(Z[0]=Ve),Q!=null&&(Q[0]=0),Z=ue[0],Qe=we[0],Be&&Ve&&re==null){Ne=0;break}if(4>k){Ne=7;break}if(Ce&&Be||!Ce&&!Be&&!r(f,x[0],"ALPH")){k=[k],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{it=f,Ne=x,Ce=k;var ot=Te.gb;et=Te.na,$e=Te.P,lt=Te.Sa,xt=22,s(it!=null),s(Ce!=null),Ze=Ne[0];var tn=Ce[0];for(s(et!=null),s(lt!=null),et[0]=null,$e[0]=null,lt[0]=0;;){if(Ne[0]=Ze,Ce[0]=tn,8>tn){Ne=7;break e}var Yt=Xe(it,Ze+4);if(4294967286<Yt){Ne=3;break e}var Zt=8+Yt+1&-2;if(xt+=Zt,0<ot&&xt>ot){Ne=3;break e}if(!r(it,Ze,"VP8 ")||!r(it,Ze,"VP8L")){Ne=0;break e}if(tn[0]<Zt){Ne=7;break e}r(it,Ze,"ALPH")||(et[0]=it,$e[0]=Ze+8,lt[0]=Yt),Ze+=Zt,tn-=Zt}}if(k=k[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Ne!=0)break}k=[k],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(ot=f,Ne=x,Ce=k,et=Te.gb[0],$e=Te.Ja,lt=Te.xa,it=Ne[0],Ze=!r(ot,it,"VP8 "),xt=!r(ot,it,"VP8L"),s(ot!=null),s(Ce!=null),s($e!=null),s(lt!=null),8>Ce[0])Ne=7;else{if(Ze||xt){if(ot=Xe(ot,it+4),12<=et&&ot>et-12){Ne=3;break e}if(Ie&&ot>Ce[0]-8){Ne=7;break e}$e[0]=ot,Ne[0]+=8,Ce[0]-=8,lt[0]=xt}else lt[0]=5<=Ce[0]&&ot[it+0]==47&&!(ot[it+4]>>5),$e[0]=Ce[0];Ne=0}if(k=k[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],x=x[0],Ne!=0)break;if(4294967286<Te.Ja)return 3;if(Q==null||Ve||(Q[0]=Te.xa?2:1),Z=[Z],Qe=[Qe],Te.xa){if(5>k){Ne=7;break}Q=Z,Ie=Qe,Ve=X,f==null||5>k?f=0:5<=k&&f[x+0]==47&&!(f[x+4]>>5)?(Ce=[0],ot=[0],et=[0],he($e=new C,f,x,k),Nt($e,Ce,ot,et)?(Q!=null&&(Q[0]=Ce[0]),Ie!=null&&(Ie[0]=ot[0]),Ve!=null&&(Ve[0]=et[0]),f=1):f=0):f=0}else{if(10>k){Ne=7;break}Q=Qe,f==null||10>k||!wr(f,x+3,k-3)?f=0:(Ie=f[x+0]|f[x+1]<<8|f[x+2]<<16,Ve=16383&(f[x+7]<<8|f[x+6]),f=16383&(f[x+9]<<8|f[x+8]),1&Ie||3<(Ie>>1&7)||!(Ie>>4&1)||Ie>>5>=Te.Ja||!Ve||!f?f=0:(Z&&(Z[0]=Ve),Q&&(Q[0]=f),f=1))}if(!f||(Z=Z[0],Qe=Qe[0],Be&&(ue[0]!=Z||we[0]!=Qe)))return 3;re!=null&&(re[0]=Te,re.offset=x-re.w,s(4294967286>x-re.w),s(re.offset==re.ha-k));break}return Ne==0||Ne==7&&Be&&re==null?(X!=null&&(X[0]|=Te.na!=null&&0<Te.na.length),R!=null&&(R[0]=Z),H!=null&&(H[0]=Qe),0):Ne}function ki(f,x,k){var R=x.width,H=x.height,X=0,Z=0,Q=R,re=H;if(x.Da=f!=null&&0<f.Da,x.Da&&(Q=f.cd,re=f.bd,X=f.v,Z=f.j,11>k||(X&=-2,Z&=-2),0>X||0>Z||0>=Q||0>=re||X+Q>R||Z+re>H))return 0;if(x.v=X,x.j=Z,x.va=X+Q,x.o=Z+re,x.U=Q,x.T=re,x.da=f!=null&&0<f.da,x.da){if(!le(Q,re,k=[f.ib],X=[f.hb]))return 0;x.ib=k[0],x.hb=X[0]}return x.ob=f!=null&&f.ob,x.Kb=f==null||!f.Sd,x.da&&(x.ob=x.ib<3*R/4&&x.hb<3*H/4,x.Kb=0),1}function xl(f){if(f==null)return 2;if(11>f.S){var x=f.f.RGBA;x.fb+=(f.height-1)*x.A,x.A=-x.A}else x=f.f.kb,f=f.height,x.O+=(f-1)*x.fa,x.fa=-x.fa,x.N+=(f-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(f-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(f-1)*x.lb,x.lb=-x.lb);return 0}function Ci(f,x,k,R){if(R==null||0>=f||0>=x)return 2;if(k!=null){if(k.Da){var H=k.cd,X=k.bd,Z=-2&k.v,Q=-2&k.j;if(0>Z||0>Q||0>=H||0>=X||Z+H>f||Q+X>x)return 2;f=H,x=X}if(k.da){if(!le(f,x,H=[k.ib],X=[k.hb]))return 2;f=H[0],x=X[0]}}R.width=f,R.height=x;e:{var re=R.width,ue=R.height;if(f=R.S,0>=re||0>=ue||!(f>=ac&&13>f))f=2;else{if(0>=R.Rd&&R.sd==null){Z=X=H=x=0;var we=(Q=re*fc[f])*ue;if(11>f||(X=(ue+1)/2*(x=(re+1)/2),f==12&&(Z=(H=re)*ue)),(ue=l(we+2*X+Z))==null){f=1;break e}R.sd=ue,11>f?((re=R.f.RGBA).eb=ue,re.fb=0,re.A=Q,re.size=we):((re=R.f.kb).y=ue,re.O=0,re.fa=Q,re.Fd=we,re.f=ue,re.N=0+we,re.Ab=x,re.Cd=X,re.ea=ue,re.W=0+we+X,re.Db=x,re.Ed=X,f==12&&(re.F=ue,re.J=0+we+2*X),re.Tc=Z,re.lb=H)}if(x=1,H=R.S,X=R.width,Z=R.height,H>=ac&&13>H)if(11>H)f=R.f.RGBA,x&=(Q=Math.abs(f.A))*(Z-1)+X<=f.size,x&=Q>=X*fc[H],x&=f.eb!=null;else{f=R.f.kb,Q=(X+1)/2,we=(Z+1)/2,re=Math.abs(f.fa),ue=Math.abs(f.Ab);var Be=Math.abs(f.Db),Ie=Math.abs(f.lb),Te=Ie*(Z-1)+X;x&=re*(Z-1)+X<=f.Fd,x&=ue*(we-1)+Q<=f.Cd,x=(x&=Be*(we-1)+Q<=f.Ed)&re>=X&ue>=Q&Be>=Q,x&=f.y!=null,x&=f.f!=null,x&=f.ea!=null,H==12&&(x&=Ie>=X,x&=Te<=f.Tc,x&=f.F!=null)}else x=0;f=x?0:2}}return f!=0||k!=null&&k.fd&&(f=xl(R)),f}var Ua=64,Rs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ns=24,as=32,yo=8,Fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ke("Predictor0","PredictorAdd0"),q.Predictor0=function(){return 4278190080},q.Predictor1=function(f){return f},q.Predictor2=function(f,x,k){return x[k+0]},q.Predictor3=function(f,x,k){return x[k+1]},q.Predictor4=function(f,x,k){return x[k-1]},q.Predictor5=function(f,x,k){return xe(xe(f,x[k+1]),x[k+0])},q.Predictor6=function(f,x,k){return xe(f,x[k-1])},q.Predictor7=function(f,x,k){return xe(f,x[k+0])},q.Predictor8=function(f,x,k){return xe(x[k-1],x[k+0])},q.Predictor9=function(f,x,k){return xe(x[k+0],x[k+1])},q.Predictor10=function(f,x,k){return xe(xe(f,x[k-1]),xe(x[k+0],x[k+1]))},q.Predictor11=function(f,x,k){var R=x[k+0];return 0>=Ge(R>>24&255,f>>24&255,(x=x[k-1])>>24&255)+Ge(R>>16&255,f>>16&255,x>>16&255)+Ge(R>>8&255,f>>8&255,x>>8&255)+Ge(255&R,255&f,255&x)?R:f},q.Predictor12=function(f,x,k){var R=x[k+0];return(Oe((f>>24&255)+(R>>24&255)-((x=x[k-1])>>24&255))<<24|Oe((f>>16&255)+(R>>16&255)-(x>>16&255))<<16|Oe((f>>8&255)+(R>>8&255)-(x>>8&255))<<8|Oe((255&f)+(255&R)-(255&x)))>>>0},q.Predictor13=function(f,x,k){var R=x[k-1];return(De((f=xe(f,x[k+0]))>>24&255,R>>24&255)<<24|De(f>>16&255,R>>16&255)<<16|De(f>>8&255,R>>8&255)<<8|De(f>>0&255,R>>0&255))>>>0};var Kl=q.PredictorAdd0;q.PredictorAdd1=at,ke("Predictor2","PredictorAdd2"),ke("Predictor3","PredictorAdd3"),ke("Predictor4","PredictorAdd4"),ke("Predictor5","PredictorAdd5"),ke("Predictor6","PredictorAdd6"),ke("Predictor7","PredictorAdd7"),ke("Predictor8","PredictorAdd8"),ke("Predictor9","PredictorAdd9"),ke("Predictor10","PredictorAdd10"),ke("Predictor11","PredictorAdd11"),ke("Predictor12","PredictorAdd12"),ke("Predictor13","PredictorAdd13");var vl=q.PredictorAdd2;Lt("ColorIndexInverseTransform","MapARGB","32b",(function(f){return f>>8&255}),(function(f){return f})),Lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(f){return f}),(function(f){return f>>8&255}));var ec,Qr=q.ColorIndexInverseTransform,yl=q.MapARGB,tu=q.VP8LColorIndexInverseTransformAlpha,qa=q.MapAlpha,Ar=q.VP8LPredictorsAdd=[];Ar.length=16,(q.VP8LPredictors=[]).length=16,(q.VP8LPredictorsAdd_C=[]).length=16,(q.VP8LPredictors_C=[]).length=16;var fr,kr,Li,Kr,ei,wo,Ea,rs,Ei,di,Cr,Ha,Lr,is,ss,er,No,hr,fi,xn,vn,Yn,Kn,hi,pi,Ta,Ms,pr,zs=l(511),tc=l(2041),wl=l(225),Nl=l(767),nc=0,Ti=tc,Sl=wl,Oa=Nl,ya=zs,ac=0,Ra=1,rc=2,Er=3,jl=4,So=5,os=6,_l=7,ic=8,jo=9,sc=10,Tr=[2,3,7],_o=[3,3,11],Ds=[280,256,256,256,40],oc=[0,1,1,1,0],Al=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Or=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ls=8,Mr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mr=null,Zu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ju=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wa=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Vt=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ga=[],Bn=[],ti=[],cs=1,au=2,Oi=[],Na=[];Ye("UpsampleRgbLinePair",Xt,3),Ye("UpsampleBgrLinePair",On,3),Ye("UpsampleRgbaLinePair",La,4),Ye("UpsampleBgraLinePair",aa,4),Ye("UpsampleArgbLinePair",va,4),Ye("UpsampleRgba4444LinePair",Vn,2),Ye("UpsampleRgb565LinePair",Rn,2);var Is=q.UpsampleRgbLinePair,ru=q.UpsampleBgrLinePair,Ao=q.UpsampleRgbaLinePair,cc=q.UpsampleBgraLinePair,us=q.UpsampleArgbLinePair,mi=q.UpsampleRgba4444LinePair,ds=q.UpsampleRgb565LinePair,Dr=16,ko=1<<Dr-1,Bs=-227,fs=482,uc=6,hs=0,Sa=l(256),dc=l(256),Qu=l(256),mf=l(256),gf=l(fs-Bs),bf=l(fs-Bs);Ai("YuvToRgbRow",Xt,3),Ai("YuvToBgrRow",On,3),Ai("YuvToRgbaRow",La,4),Ai("YuvToBgraRow",aa,4),Ai("YuvToArgbRow",va,4),Ai("YuvToRgba4444Row",Vn,2),Ai("YuvToRgb565Row",Rn,2);var Wn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Co=[0,2,8],kl=[8,7,6,4,4,2,2,2,1,1,1,1],Cl=1;this.WebPDecodeRGBA=function(f,x,k,R,H){var X=Ra,Z=new Ts,Q=new In;Z.ba=Q,Q.S=X,Q.width=[Q.width],Q.height=[Q.height];var re=Q.width,ue=Q.height,we=new Zn;if(we==null||f==null)var Be=2;else s(we!=null),Be=ui(f,x,k,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Be!=0?re=0:(re!=null&&(re[0]=we.width[0]),ue!=null&&(ue[0]=we.height[0]),re=1),re){Q.width=Q.width[0],Q.height=Q.height[0],R!=null&&(R[0]=Q.width),H!=null&&(H[0]=Q.height);e:{if(R=new io,(H=new ml).data=f,H.w=x,H.ha=k,H.kd=1,x=[0],s(H!=null),((f=ui(H.data,H.w,H.ha,null,null,null,x,null,H))==0||f==7)&&x[0]&&(f=4),(x=f)==0){if(s(Z!=null),R.data=H.data,R.w=H.w+H.offset,R.ha=H.ha-H.offset,R.put=Wa,R.ac=Jn,R.bc=Aa,R.ma=Z,H.xa){if((f=Xa())==null){Z=1;break e}if((function(Ie,Te){var Qe=[0],Ve=[0],Ne=[0];t:for(;;){if(Ie==null)return 0;if(Te==null)return Ie.a=2,0;if(Ie.l=Te,Ie.a=0,he(Ie.m,Te.data,Te.w,Te.ha),!Nt(Ie.m,Qe,Ve,Ne)){Ie.a=3;break t}if(Ie.xb=au,Te.width=Qe[0],Te.height=Ve[0],!yr(Qe[0],Ve[0],1,Ie,null))break t;return 1}return s(Ie.a!=0),0})(f,R)){if(R=(x=Ci(R.width,R.height,Z.Oa,Z.ba))==0){t:{R=f;n:for(;;){if(R==null){R=0;break t}if(s(R.s.yc!=null),s(R.s.Ya!=null),s(0<R.s.Wb),s((k=R.l)!=null),s((H=k.ma)!=null),R.xb!=0){if(R.ca=H.ba,R.tb=H.tb,s(R.ca!=null),!ki(H.Oa,k,Er)){R.a=2;break n}if(!Wr(R,k.width)||k.da)break n;if((k.da||Ht(R.ca.S))&&ze(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&ze()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!M(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!ua(R,R.V,R.Ba,R.c,R.i,k.o,Yr))break n;H.Dc=R.Ma,R=1;break t}s(R.a!=0),R=0}R=!R}R&&(x=f.a)}else x=f.a}else{if((f=new so)==null){Z=1;break e}if(f.Fa=H.na,f.P=H.P,f.qc=H.Sa,Pa(f,R)){if((x=Ci(R.width,R.height,Z.Oa,Z.ba))==0){if(f.Aa=0,k=Z.Oa,s((H=f)!=null),k!=null){if(0<(re=0>(re=k.Md)?0:100<re?255:255*re/100)){for(ue=we=0;4>ue;++ue)12>(Be=H.pb[ue]).lc&&(Be.ia=re*kl[0>Be.lc?0:Be.lc]>>3),we|=Be.ia;we&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=k.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}sl(f,R)||(x=f.a)}}else x=f.a}x==0&&Z.Oa!=null&&Z.Oa.fd&&(x=xl(Z.ba))}Z=x}X=Z!=0?null:11>X?Q.f.RGBA.eb:Q.f.kb.y}else X=null;return X};var fc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(q,ie){for(var se="",I=0;I<4;I++)se+=String.fromCharCode(q[ie++]);return se}function y(q,ie){return(q[ie+0]<<0|q[ie+1]<<8|q[ie+2]<<16)>>>0}function w(q,ie){return(q[ie+0]<<0|q[ie+1]<<8|q[ie+2]<<16|q[ie+3]<<24)>>>0}new p;var j=[0],g=[0],L=[],N=new p,A=a,_=(function(q,ie){var se={},I=0,O=!1,Y=0,E=0;if(se.frames=[],!(function(G,$,ee,be){for(var Se=0;Se<be;Se++)if(G[$+Se]!=ee.charCodeAt(Se))return!0;return!1})(q,ie,"RIFF",4)){var oe,J;for(w(q,ie+=4),ie+=8;ie<q.length;){var ae=m(q,ie),he=w(q,ie+=4);ie+=4;var fe=he+(1&he);switch(ae){case"VP8 ":case"VP8L":se.frames[I]===void 0&&(se.frames[I]={}),(C=se.frames[I]).src_off=O?E:ie-8,C.src_size=Y+he+8,I++,O&&(O=!1,Y=0,E=0);break;case"VP8X":(C=se.header={}).feature_flags=q[ie];var ge=ie+4;C.canvas_width=1+y(q,ge),ge+=3,C.canvas_height=1+y(q,ge),ge+=3;break;case"ALPH":O=!0,Y=fe+8,E=ie-8;break;case"ANIM":(C=se.header).bgcolor=w(q,ie),ge=ie+4,C.loop_count=(oe=q)[(J=ge)+0]<<0|oe[J+1]<<8,ge+=2;break;case"ANMF":var P,C;(C=se.frames[I]={}).offset_x=2*y(q,ie),ie+=3,C.offset_y=2*y(q,ie),ie+=3,C.width=1+y(q,ie),ie+=3,C.height=1+y(q,ie),ie+=3,C.duration=y(q,ie),ie+=3,P=q[ie++],C.dispose=1&P,C.blend=P>>1&1}ae!="ANMF"&&(ie+=fe)}return se}})(A,0);_.response=A,_.rgbaoutput=!0,_.dataurl=!1;var T=_.header?_.header:null,D=_.frames?_.frames:null;if(T){T.loop_counter=T.loop_count,j=[T.canvas_height],g=[T.canvas_width];for(var F=0;F<D.length&&D[F].blend!=0;F++);}var B=D[0],ce=N.WebPDecodeRGBA(A,B.src_off,B.src_size,g,j);B.rgba=ce,B.imgwidth=g[0],B.imgheight=j[0];for(var U=0;U<g[0]*j[0]*4;U++)L[U]=ce[U];return this.width=g,this.height=j,this.data=L,this}(function(a){var s=function(){return typeof tp=="function"},r=function(j,g,L,N){var A=4,_=d;switch(N){case a.image_compression.FAST:A=1,_=l;break;case a.image_compression.MEDIUM:A=6,_=h;break;case a.image_compression.SLOW:A=9,_=p}j=o(j,g,L,_);var T=tp(j,{level:A});return a.__addimage__.arrayBufferToBinaryString(T)},o=function(j,g,L,N){for(var A,_,T,D=j.length/g,F=new Uint8Array(j.length+D),B=y(),ce=0;ce<D;ce+=1){if(T=ce*g,A=j.subarray(T,T+g),N)F.set(N(A,L,_),T+ce);else{for(var U,q=B.length,ie=[];U<q;U+=1)ie[U]=B[U](A,L,_);var se=w(ie.concat());F.set(ie[se],T+ce)}_=A}return F},u=function(j){var g=Array.apply([],j);return g.unshift(0),g},l=function(j,g){var L,N=[],A=j.length;N[0]=1;for(var _=0;_<A;_+=1)L=j[_-g]||0,N[_+1]=j[_]-L+256&255;return N},d=function(j,g,L){var N,A=[],_=j.length;A[0]=2;for(var T=0;T<_;T+=1)N=L&&L[T]||0,A[T+1]=j[T]-N+256&255;return A},h=function(j,g,L){var N,A,_=[],T=j.length;_[0]=3;for(var D=0;D<T;D+=1)N=j[D-g]||0,A=L&&L[D]||0,_[D+1]=j[D]+256-(N+A>>>1)&255;return _},p=function(j,g,L){var N,A,_,T,D=[],F=j.length;D[0]=4;for(var B=0;B<F;B+=1)N=j[B-g]||0,A=L&&L[B]||0,_=L&&L[B-g]||0,T=m(N,A,_),D[B+1]=j[B]-T+256&255;return D},m=function(j,g,L){if(j===g&&g===L)return j;var N=Math.abs(g-L),A=Math.abs(j-L),_=Math.abs(j+g-L-L);return N<=A&&N<=_?j:A<=_?g:L},y=function(){return[u,l,d,h,p]},w=function(j){var g=j.map((function(L){return L.reduce((function(N,A){return N+Math.abs(A)}),0)}));return g.indexOf(Math.min.apply(null,g))};a.processPNG=function(j,g,L,N){var A,_,T,D,F,B,ce,U,q,ie,se,I,O,Y,E,oe=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(j)&&(j=new Uint8Array(j)),this.__addimage__.isArrayBufferView(j)){if(j=(T=new fv(j)).imgData,_=T.bits,A=T.colorSpace,F=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){q=(U=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,se=new Uint8Array(q*T.colors),ie=new Uint8Array(q);var ae,he=T.pixelBitlength-T.bits;for(Y=0,E=0;Y<q;Y++){for(O=U[Y],ae=0;ae<he;)se[E++]=O>>>ae&255,ae+=T.bits;ie[Y]=O>>>ae&255}}if(T.bits===16){q=(U=new Uint32Array(T.decodePixels().buffer)).length,se=new Uint8Array(q*(32/T.pixelBitlength)*T.colors),ie=new Uint8Array(q*(32/T.pixelBitlength)),I=T.colors>1,Y=0,E=0;for(var fe=0;Y<q;)O=U[Y++],se[E++]=O>>>0&255,I&&(se[E++]=O>>>16&255,O=U[Y++],se[E++]=O>>>0&255),ie[fe++]=O>>>16&255;_=8}N!==a.image_compression.NONE&&s()?(j=r(se,T.width*T.colors,T.colors,N),ce=r(ie,T.width,1,N)):(j=se,ce=ie,oe=void 0)}if(T.colorType===3&&(A=this.color_spaces.INDEXED,B=T.palette,T.transparency.indexed)){var ge=T.transparency.indexed,P=0;for(Y=0,q=ge.length;Y<q;++Y)P+=ge[Y];if((P/=255)===q-1&&ge.indexOf(0)!==-1)D=[ge.indexOf(0)];else if(P!==q){for(U=T.decodePixels(),ie=new Uint8Array(U.length),Y=0,q=U.length;Y<q;Y++)ie[Y]=ge[U[Y]];ce=r(ie,T.width,1)}}var C=(function(G){var $;switch(G){case a.image_compression.FAST:$=11;break;case a.image_compression.MEDIUM:$=13;break;case a.image_compression.SLOW:$=14;break;default:$=12}return $})(N);return oe===this.decode.FLATE_DECODE&&(J="/Predictor "+C+" "),J+="/Colors "+F+" /BitsPerComponent "+_+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:L,data:j,index:g,filter:oe,decodeParameters:J,transparency:D,palette:B,sMask:ce,predictor:C,width:T.width,height:T.height,bitsPerComponent:_,colorSpace:A}}}})(Ct.API),(function(a){a.processGIF89A=function(s,r,o,u){var l=new hv(s),d=l.width,h=l.height,p=[];l.decodeAndBlitFrameRGBA(0,p);var m={data:p,width:d,height:h},y=new Gh(100).encode(m,100);return a.processJPEG.call(this,y,r,o,u)},a.processGIF87A=a.processGIF89A})(Ct.API),qi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var a=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(a);for(var s=0;s<a;s++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:u,green:o,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qi.prototype.parseBGR=function(){this.pos=this.offset;try{var a="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[a]()}catch(r){kn.log("bit decode error:"+r)}},qi.prototype.bit1=function(){var a,s=Math.ceil(this.width/8),r=s%4;for(a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,u=0;u<s;u++)for(var l=this.datav.getUint8(this.pos++,!0),d=o*this.width*4+8*u*4,h=0;h<8&&8*u+h<this.width;h++){var p=this.palette[l>>7-h&1];this.data[d+4*h]=p.blue,this.data[d+4*h+1]=p.green,this.data[d+4*h+2]=p.red,this.data[d+4*h+3]=255}r!==0&&(this.pos+=4-r)}},qi.prototype.bit4=function(){for(var a=Math.ceil(this.width/2),s=a%4,r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,u=0;u<a;u++){var l=this.datav.getUint8(this.pos++,!0),d=o*this.width*4+2*u*4,h=l>>4,p=15&l,m=this.palette[h];if(this.data[d]=m.blue,this.data[d+1]=m.green,this.data[d+2]=m.red,this.data[d+3]=255,2*u+1>=this.width)break;m=this.palette[p],this.data[d+4]=m.blue,this.data[d+4+1]=m.green,this.data[d+4+2]=m.red,this.data[d+4+3]=255}s!==0&&(this.pos+=4-s)}},qi.prototype.bit8=function(){for(var a=this.width%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*o;if(u<this.palette.length){var d=this.palette[u];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}a!==0&&(this.pos+=4-a)}},qi.prototype.bit15=function(){for(var a=this.width%3,s=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,u=0;u<this.width;u++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&s)/s*255|0,h=(l>>5&s)/s*255|0,p=(l>>10&s)/s*255|0,m=l>>15?255:0,y=o*this.width*4+4*u;this.data[y]=p,this.data[y+1]=h,this.data[y+2]=d,this.data[y+3]=m}this.pos+=a}},qi.prototype.bit16=function(){for(var a=this.width%3,s=parseInt("11111",2),r=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var u=this.bottom_up?o:this.height-1-o,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(d&s)/s*255|0,p=(d>>5&r)/r*255|0,m=(d>>11)/s*255|0,y=u*this.width*4+4*l;this.data[y]=m,this.data[y+1]=p,this.data[y+2]=h,this.data[y+3]=255}this.pos+=a}},qi.prototype.bit24=function(){for(var a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=s*this.width*4+4*r;this.data[d]=l,this.data[d+1]=u,this.data[d+2]=o,this.data[d+3]=255}this.pos+=this.width%4}},qi.prototype.bit32=function(){for(var a=this.height-1;a>=0;a--)for(var s=this.bottom_up?a:this.height-1-a,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+4*r;this.data[h]=l,this.data[h+1]=u,this.data[h+2]=o,this.data[h+3]=d}},qi.prototype.getData=function(){return this.data},(function(a){a.processBMP=function(s,r,o,u){var l=new qi(s,!1),d=l.width,h=l.height,p={data:l.getData(),width:d,height:h},m=new Gh(100).encode(p,100);return a.processJPEG.call(this,m,r,o,u)}})(Ct.API),M2.prototype.getData=function(){return this.data},(function(a){a.processWEBP=function(s,r,o,u){var l=new M2(s),d=l.width,h=l.height,p={data:l.getData(),width:d,height:h},m=new Gh(100).encode(p,100);return a.processJPEG.call(this,m,r,o,u)}})(Ct.API),Ct.API.processRGBA=function(a,s,r){for(var o=a.data,u=o.length,l=new Uint8Array(u/4*3),d=new Uint8Array(u/4),h=0,p=0,m=0;m<u;m+=4){var y=o[m],w=o[m+1],j=o[m+2],g=o[m+3];l[h++]=y,l[h++]=w,l[h++]=j,d[p++]=g}var L=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:L,index:s,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:a.width,height:a.height}},Ct.API.setLanguage=function(a){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[a]!==void 0&&(this.internal.languageSettings.languageCode=a,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},zc=Ct.API,Vd=zc.getCharWidthsArray=function(a,s){var r,o,u=(s=s||{}).font||this.internal.getFont(),l=s.fontSize||this.internal.getFontSize(),d=s.charSpace||this.internal.getCharSpace(),h=s.widths?s.widths:u.metadata.Unicode.widths,p=h.fof?h.fof:1,m=s.kerning?s.kerning:u.metadata.Unicode.kerning,y=m.fof?m.fof:1,w=s.doKerning!==!1,j=0,g=a.length,L=0,N=h[0]||p,A=[];for(r=0;r<g;r++)o=a.charCodeAt(r),typeof u.metadata.widthOfString=="function"?A.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(o))+d*(1e3/l)||0)/1e3):(j=w&&gn(m[o])==="object"&&!isNaN(parseInt(m[o][L],10))?m[o][L]/y:0,A.push((h[o]||N)/p+j)),L=o;return A},E2=zc.getStringUnitWidth=function(a,s){var r=(s=s||{}).fontSize||this.internal.getFontSize(),o=s.font||this.internal.getFont(),u=s.charSpace||this.internal.getCharSpace();return zc.processArabic&&(a=zc.processArabic(a)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(a,r,u)/r:Vd.apply(this,arguments).reduce((function(l,d){return l+d}),0)},T2=function(a,s,r,o){for(var u=[],l=0,d=a.length,h=0;l!==d&&h+s[l]<r;)h+=s[l],l++;u.push(a.slice(0,l));var p=l;for(h=0;l!==d;)h+s[l]>o&&(u.push(a.slice(p,l)),h=0,p=l),h+=s[l],l++;return p!==l&&u.push(a.slice(p,l)),u},O2=function(a,s,r){r||(r={});var o,u,l,d,h,p,m,y=[],w=[y],j=r.textIndent||0,g=0,L=0,N=a.split(" "),A=Vd.apply(this,[" ",r])[0];if(p=r.lineIndent===-1?N[0].length+2:r.lineIndent||0){var _=Array(p).join(" "),T=[];N.map((function(F){(F=F.split(/\s*\n/)).length>1?T=T.concat(F.map((function(B,ce){return(ce&&B.length?`
`:"")+B}))):T.push(F[0])})),N=T,p=E2.apply(this,[_,r])}for(l=0,d=N.length;l<d;l++){var D=0;if(o=N[l],p&&o[0]==`
`&&(o=o.substr(1),D=1),j+g+(L=(u=Vd.apply(this,[o,r])).reduce((function(F,B){return F+B}),0))>s||D){if(L>s){for(h=T2.apply(this,[o,u,s-(j+g),s]),y.push(h.shift()),y=[h.pop()];h.length;)w.push([h.shift()]);L=u.slice(o.length-(y[0]?y[0].length:0)).reduce((function(F,B){return F+B}),0)}else y=[o];w.push(y),j=L+p,g=A}else y.push(o),j+=g+L,g=A}return m=p?function(F,B){return(B?_:"")+F.join(" ")}:function(F){return F.join(" ")},w.map(m)},zc.splitTextToSize=function(a,s,r){var o,u=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(y){if(y.widths&&y.kerning)return{widths:y.widths,kerning:y.kerning};var w=this.internal.getFont(y.fontName,y.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);o=Array.isArray(a)?a:String(a).split(/\r?\n/);var d=1*this.internal.scaleFactor*s/u;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/u:0,l.lineIndent=r.lineIndent;var h,p,m=[];for(h=0,p=o.length;h<p;h++)m=m.concat(O2.apply(this,[o[h],d,l]));return m},(function(a){a.__fontmetrics__=a.__fontmetrics__||{};for(var s="klmnopqrstuvwxyz",r={},o={},u=0;u<s.length;u++)r[s[u]]="0123456789abcdef"[u],o["0123456789abcdef"[u]]=s[u];var l=function(w){return"0x"+parseInt(w,10).toString(16)},d=a.__fontmetrics__.compress=function(w){var j,g,L,N,A=["{"];for(var _ in w){if(j=w[_],isNaN(parseInt(_,10))?g="'"+_+"'":(_=parseInt(_,10),g=(g=l(_).slice(2)).slice(0,-1)+o[g.slice(-1)]),typeof j=="number")j<0?(L=l(j).slice(3),N="-"):(L=l(j).slice(2),N=""),L=N+L.slice(0,-1)+o[L.slice(-1)];else{if(gn(j)!=="object")throw new Error("Don't know what to do with value type "+gn(j)+".");L=d(j)}A.push(g+L)}return A.push("}"),A.join("")},h=a.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var j,g,L,N,A={},_=1,T=A,D=[],F="",B="",ce=w.length-1,U=1;U<ce;U+=1)(N=w[U])=="'"?j?(L=j.join(""),j=void 0):j=[]:j?j.push(N):N=="{"?(D.push([T,L]),T={},L=void 0):N=="}"?((g=D.pop())[0][g[1]]=T,L=void 0,T=g[0]):N=="-"?_=-1:L===void 0?r.hasOwnProperty(N)?(F+=r[N],L=parseInt(F,16)*_,_=1,F=""):F+=N:r.hasOwnProperty(N)?(B+=r[N],T[L]=parseInt(B,16)*_,_=1,L=void 0,B=""):B+=N;return A},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFont",function(w){var j=w.font,g=y.Unicode[j.postScriptName];g&&(j.metadata.Unicode={},j.metadata.Unicode.widths=g.widths,j.metadata.Unicode.kerning=g.kerning);var L=m.Unicode[j.postScriptName];L&&(j.metadata.Unicode.encoding=L,j.encoding=L.codePages[0])}])})(Ct.API),(function(a){var s=function(r){for(var o=r.length,u=new Uint8Array(o),l=0;l<o;l++)u[l]=r.charCodeAt(l);return u};a.API.events.push(["addFont",function(r){var o=void 0,u=r.font,l=r.instance;if(!u.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(o=l.existsFileInVFS(u.postScriptName)===!1?l.loadFile(u.postScriptName):l.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(d,h){h=/^\x00\x01\x00\x00/.test(h)?s(h):s(Uu(h)),d.metadata=a.API.TTFFont.open(h),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(u,o)}}])})(Ct),(function(a){function s(){return(Et.canvg?Promise.resolve(Et.canvg):Xh(()=>import("./index.es-tuIvjZkv.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Ct.API.addSvgAsImage=function(r,o,u,l,d,h,p,m){if(isNaN(o)||isNaN(u))throw kn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(d))throw kn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var y=document.createElement("canvas");y.width=l,y.height=d;var w=y.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,y.width,y.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return s().then((function(L){return L.fromString(w,r,j)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(L){return L.render(j)})).then((function(){g.addImage(y.toDataURL("image/jpeg",1),o,u,l,d,p,m)}))}})(),Ct.API.putTotalPages=function(a){var s,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(a,"g"),r=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(a,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var u=0;u<this.internal.pages[o].length;u++)this.internal.pages[o][u]=this.internal.pages[o][u].replace(s,r);return this},Ct.API.viewerPreferences=function(a,s){var r;a=a||{},s=s||!1;var o,u,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(d),p=[],m=0,y=0,w=0;function j(L,N){var A,_=!1;for(A=0;A<L.length;A+=1)L[A]===N&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,a==="reset"||s===!0){var g=h.length;for(w=0;w<g;w+=1)r[h[w]].value=r[h[w]].defaultValue,r[h[w]].explicitSet=!1}if(gn(a)==="object"){for(u in a)if(l=a[u],j(h,u)&&l!==void 0){if(r[u].type==="boolean"&&typeof l=="boolean")r[u].value=l;else if(r[u].type==="name"&&j(r[u].valueSet,l))r[u].value=l;else if(r[u].type==="integer"&&Number.isInteger(l))r[u].value=l;else if(r[u].type==="array"){for(m=0;m<l.length;m+=1)if(o=!0,l[m].length===1&&typeof l[m][0]=="number")p.push(String(l[m]-1));else if(l[m].length>1){for(y=0;y<l[m].length;y+=1)typeof l[m][y]!="number"&&(o=!1);o===!0&&p.push([l[m][0]-1,l[m][1]-1].join(" "))}r[u].value="["+p.join(" ")+"]"}else r[u].value=r[u].defaultValue;r[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var L,N=[];for(L in r)r[L].explicitSet===!0&&(r[L].type==="name"?N.push("/"+L+" /"+r[L].value):N.push("/"+L+" "+r[L].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(a){var s=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(o)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),m=l.length+d.length+h.length+u.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(u+l+d+h+p),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};a.addMetadata=function(o,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",s)),this}})(Ct.API),(function(a){var s=a.API,r=s.pdfEscape16=function(l,d){for(var h,p=d.metadata.Unicode.widths,m=["","0","00","000","0000"],y=[""],w=0,j=l.length;w<j;++w){if(h=d.metadata.characterToGlyph(l.charCodeAt(w)),d.metadata.glyIdsUsed.push(h),d.metadata.toUnicode[h]=l.charCodeAt(w),p.indexOf(h)==-1&&(p.push(h),p.push([parseInt(d.metadata.widthOfGlyph(h),10)])),h=="0")return y.join("");h=h.toString(16),y.push(m[4-h.length],h)}return y.join("")},o=function(l){var d,h,p,m,y,w,j;for(y=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],w=0,j=(h=Object.keys(l).sort((function(g,L){return g-L}))).length;w<j;w++)d=h[w],p.length>=100&&(y+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(m=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),p.push("<"+d+"><"+m+">"));return p.length&&(y+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),y+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(l){(function(d){var h=d.font,p=d.out,m=d.newObject,y=d.putStream;if(h.metadata instanceof a.API.TTFFont&&h.encoding==="Identity-H"){for(var w=h.metadata.Unicode.widths,j=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),g="",L=0;L<j.length;L++)g+=String.fromCharCode(j[L]);var N=m();y({data:g,addLength1:!0,objectId:N}),p("endobj");var A=m();y({data:o(h.metadata.toUnicode),addLength1:!0,objectId:A}),p("endobj");var _=m();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Ic(h.fontName)),p("/FontFile2 "+N+" 0 R"),p("/FontBBox "+a.API.PDFObject.convert(h.metadata.bbox)),p("/Flags "+h.metadata.flags),p("/StemV "+h.metadata.stemV),p("/ItalicAngle "+h.metadata.italicAngle),p("/Ascent "+h.metadata.ascender),p("/Descent "+h.metadata.decender),p("/CapHeight "+h.metadata.capHeight),p(">>"),p("endobj");var T=m();p("<<"),p("/Type /Font"),p("/BaseFont /"+Ic(h.fontName)),p("/FontDescriptor "+_+" 0 R"),p("/W "+a.API.PDFObject.convert(w)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+h.encoding+")"),p(">>"),p(">>"),p("endobj"),h.objectNumber=m(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+A+" 0 R"),p("/BaseFont /"+Ic(h.fontName)),p("/Encoding /"+h.encoding),p("/DescendantFonts ["+T+" 0 R]"),p(">>"),p("endobj"),h.isAlreadyPutted=!0}})(l)}]),s.events.push(["putFont",function(l){(function(d){var h=d.font,p=d.out,m=d.newObject,y=d.putStream;if(h.metadata instanceof a.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var w=h.metadata.rawData,j="",g=0;g<w.length;g++)j+=String.fromCharCode(w[g]);var L=m();y({data:j,addLength1:!0,objectId:L}),p("endobj");var N=m();y({data:o(h.metadata.toUnicode),addLength1:!0,objectId:N}),p("endobj");var A=m();p("<<"),p("/Descent "+h.metadata.decender),p("/CapHeight "+h.metadata.capHeight),p("/StemV "+h.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+L+" 0 R"),p("/Flags 96"),p("/FontBBox "+a.API.PDFObject.convert(h.metadata.bbox)),p("/FontName /"+Ic(h.fontName)),p("/ItalicAngle "+h.metadata.italicAngle),p("/Ascent "+h.metadata.ascender),p(">>"),p("endobj"),h.objectNumber=m();for(var _=0;_<h.metadata.hmtx.widths.length;_++)h.metadata.hmtx.widths[_]=parseInt(h.metadata.hmtx.widths[_]*(1e3/h.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Ic(h.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+a.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),p("endobj"),h.isAlreadyPutted=!0}})(l)}]);var u=function(l){var d,h=l.text||"",p=l.x,m=l.y,y=l.options||{},w=l.mutex||{},j=w.pdfEscape,g=w.activeFontKey,L=w.fonts,N=g,A="",_=0,T="",D=L[N].encoding;if(L[N].encoding!=="Identity-H")return{text:h,x:p,y:m,options:y,mutex:w};for(T=h,N=g,Array.isArray(h)&&(T=h[0]),_=0;_<T.length;_+=1)L[N].metadata.hasOwnProperty("cmap")&&(d=L[N].metadata.cmap.unicode.codeMap[T[_].charCodeAt(0)]),d||T[_].charCodeAt(0)<256&&L[N].metadata.hasOwnProperty("Unicode")?A+=T[_]:A+="";var F="";return parseInt(N.slice(1))<14||D==="WinAnsiEncoding"?F=j(A,N).split("").map((function(B){return B.charCodeAt(0).toString(16)})).join(""):D==="Identity-H"&&(F=r(A,L[N])),w.isHex=!0,{text:F,x:p,y:m,options:y,mutex:w}};s.events.push(["postProcessText",function(l){var d=l.text||"",h=[],p={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var m=0;for(m=0;m<d.length;m+=1)Array.isArray(d[m])&&d[m].length===3?h.push([u(Object.assign({},p,{text:d[m][0]})).text,d[m][1],d[m][2]]):h.push(u(Object.assign({},p,{text:d[m]})).text);l.text=h}else l.text=u(Object.assign({},p,{text:d})).text}])})(Ct),(function(a){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};a.existsFileInVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0},a.addFileToVFS=function(r,o){return s.call(this),this.internal.vFS[r]=o,this},a.getFileFromVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Ct.API),(function(a){a.__bidiEngine__=a.prototype.__bidiEngine__=function(o){var u,l,d,h,p,m,y,w=s,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,D=0;this.__bidiEngine__={};var F=function(I){var O=I.charCodeAt(),Y=O>>8,E=N[Y];return E!==void 0?w[256*E+(255&O)]:Y===252||Y===253?"AL":_.test(Y)?"L":Y===8?"R":"N"},B=function(I){for(var O,Y=0;Y<I.length;Y++){if((O=F(I.charAt(Y)))==="L")return!1;if(O==="R")return!0}return!1},ce=function(I,O,Y,E){var oe,J,ae,he,fe=O[E];switch(fe){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(fe="AN");break;case"AL":T=!0,fe="R";break;case"WS":fe="N";break;case"CS":E<1||E+1>=O.length||(oe=Y[E-1])!=="EN"&&oe!=="AN"||(J=O[E+1])!=="EN"&&J!=="AN"?fe="N":T&&(J="AN"),fe=J===oe?J:"N";break;case"ES":fe=(oe=E>0?Y[E-1]:"B")==="EN"&&E+1<O.length&&O[E+1]==="EN"?"EN":"N";break;case"ET":if(E>0&&Y[E-1]==="EN"){fe="EN";break}if(T){fe="N";break}for(ae=E+1,he=O.length;ae<he&&O[ae]==="ET";)ae++;fe=ae<he&&O[ae]==="EN"?"EN":"N";break;case"NSM":if(d&&!h){for(he=O.length,ae=E+1;ae<he&&O[ae]==="NSM";)ae++;if(ae<he){var ge=I[E],P=ge>=1425&&ge<=2303||ge===64286;if(oe=O[ae],P&&(oe==="R"||oe==="AL")){fe="R";break}}}fe=E<1||(oe=O[E-1])==="B"?"N":Y[E-1];break;case"B":T=!1,u=!0,fe=D;break;case"S":l=!0,fe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":fe="N"}return fe},U=function(I,O,Y){var E=I.split("");return Y&&q(E,Y,{hiLevel:D}),E.reverse(),O&&O.reverse(),E.join("")},q=function(I,O,Y){var E,oe,J,ae,he,fe=-1,ge=I.length,P=0,C=[],G=D?g:j,$=[];for(T=!1,u=!1,l=!1,oe=0;oe<ge;oe++)$[oe]=F(I[oe]);for(J=0;J<ge;J++){if(he=P,C[J]=ce(I,$,C,J),E=240&(P=G[he][L[C[J]]]),P&=15,O[J]=ae=G[P][5],E>0)if(E===16){for(oe=fe;oe<J;oe++)O[oe]=1;fe=-1}else fe=-1;if(G[P][6])fe===-1&&(fe=J);else if(fe>-1){for(oe=fe;oe<J;oe++)O[oe]=ae;fe=-1}$[J]==="B"&&(O[J]=0),Y.hiLevel|=ae}l&&(function(ee,be,Se){for(var je=0;je<Se;je++)if(ee[je]==="S"){be[je]=D;for(var Ae=je-1;Ae>=0&&ee[Ae]==="WS";Ae--)be[Ae]=D}})($,O,ge)},ie=function(I,O,Y,E,oe){if(!(oe.hiLevel<I)){if(I===1&&D===1&&!u)return O.reverse(),void(Y&&Y.reverse());for(var J,ae,he,fe,ge=O.length,P=0;P<ge;){if(E[P]>=I){for(he=P+1;he<ge&&E[he]>=I;)he++;for(fe=P,ae=he-1;fe<ae;fe++,ae--)J=O[fe],O[fe]=O[ae],O[ae]=J,Y&&(J=Y[fe],Y[fe]=Y[ae],Y[ae]=J);P=he}P++}}},se=function(I,O,Y){var E=I.split(""),oe={hiLevel:D};return Y||(Y=[]),q(E,Y,oe),(function(J,ae,he){if(he.hiLevel!==0&&y)for(var fe,ge=0;ge<J.length;ge++)ae[ge]===1&&(fe=A.indexOf(J[ge]))>=0&&(J[ge]=A[fe+1])})(E,Y,oe),ie(2,E,O,Y,oe),ie(1,E,O,Y,oe),E.join("")};return this.__bidiEngine__.doBidiReorder=function(I,O,Y){if((function(oe,J){if(J)for(var ae=0;ae<oe.length;ae++)J[ae]=ae;h===void 0&&(h=B(oe)),m===void 0&&(m=B(oe))})(I,O),d||!p||m)if(d&&p&&h^m)D=h?1:0,I=U(I,O,Y);else if(!d&&p&&m)D=h?1:0,I=se(I,O,Y),I=U(I,O);else if(!d||h||p||m){if(d&&!p&&h^m)I=U(I,O),h?(D=0,I=se(I,O,Y)):(D=1,I=se(I,O,Y),I=U(I,O));else if(d&&h&&!p&&m)D=1,I=se(I,O,Y),I=U(I,O);else if(!d&&!p&&h^m){var E=y;h?(D=1,I=se(I,O,Y),D=0,y=!1,I=se(I,O,Y),y=E):(D=0,I=se(I,O,Y),I=U(I,O),D=1,y=!1,I=se(I,O,Y),y=E,I=U(I,O))}}else D=0,I=se(I,O,Y);else D=h?1:0,I=se(I,O,Y);return I},this.__bidiEngine__.setOptions=function(I){I&&(d=I.isInputVisual,p=I.isOutputVisual,h=I.isInputRtl,m=I.isOutputRtl,y=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new a.__bidiEngine__({isInputVisual:!0});a.API.events.push(["postProcessText",function(o){var u=o.text,l=(o.x,o.y,o.options||{}),d=(o.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(u)==="[object Array]"){var h=0;for(d=[],h=0;h<u.length;h+=1)Object.prototype.toString.call(u[h])==="[object Array]"?d.push([r.doBidiReorder(u[h][0]),u[h][1],u[h][2]]):d.push([r.doBidiReorder(u[h])]);o.text=d}else o.text=r.doBidiReorder(u);r.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function a(s){var r;if(this.rawData=s,r=this.contents=new Ko(s),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Cv(this),this.registerTTF()}return a.open=function(s){return new a(s)},a.prototype.parse=function(){return this.directory=new pv(this.contents),this.head=new gv(this),this.name=new wv(this),this.cmap=new C1(this),this.toUnicode={},this.hhea=new bv(this),this.maxp=new Nv(this),this.hmtx=new Sv(this),this.post=new vv(this),this.os2=new xv(this),this.loca=new kv(this),this.glyf=new jv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},a.prototype.registerTTF=function(){var s,r,o,u,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,h,p,m;for(m=[],d=0,h=(p=this.bbox).length;d<h;d++)s=p[d],m.push(Math.round(s*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(o=255&(u=this.post.italic_angle),(32768&(r=u>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},a.prototype.characterToGlyph=function(s){var r;return((r=this.cmap.unicode)!=null?r.codeMap[s]:void 0)||0},a.prototype.widthOfGlyph=function(s){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*r},a.prototype.widthOfString=function(s,r,o){var u,l,d,h;for(d=0,l=0,h=(s=""+s).length;0<=h?l<h:l>h;l=0<=h?++l:--l)u=s.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(u))+o*(1e3/r)||0;return d*(r/1e3)},a.prototype.lineHeight=function(s,r){var o;return r==null&&(r=!1),o=r?this.lineGap:0,(this.ascender+o-this.decender)/1e3*s},a})();var Yi,Ko=(function(){function a(s){this.data=s??[],this.pos=0,this.length=this.data.length}return a.prototype.readByte=function(){return this.data[this.pos++]},a.prototype.writeByte=function(s){return this.data[this.pos++]=s},a.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},a.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},a.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},a.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},a.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},a.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},a.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},a.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},a.prototype.readString=function(s){var r,o;for(o=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)o[r]=String.fromCharCode(this.readByte());return o.join("")},a.prototype.writeString=function(s){var r,o,u;for(u=[],r=0,o=s.length;0<=o?r<o:r>o;r=0<=o?++r:--r)u.push(this.writeByte(s.charCodeAt(r)));return u},a.prototype.readShort=function(){return this.readInt16()},a.prototype.writeShort=function(s){return this.writeInt16(s)},a.prototype.readLongLong=function(){var s,r,o,u,l,d,h,p;return s=this.readByte(),r=this.readByte(),o=this.readByte(),u=this.readByte(),l=this.readByte(),d=this.readByte(),h=this.readByte(),p=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^r)+1099511627776*(255^o)+4294967296*(255^u)+16777216*(255^l)+65536*(255^d)+256*(255^h)+(255^p)+1):72057594037927940*s+281474976710656*r+1099511627776*o+4294967296*u+16777216*l+65536*d+256*h+p},a.prototype.writeLongLong=function(s){var r,o;return r=Math.floor(s/4294967296),o=4294967295&s,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},a.prototype.readInt=function(){return this.readInt32()},a.prototype.writeInt=function(s){return this.writeInt32(s)},a.prototype.read=function(s){var r,o;for(r=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)r.push(this.readByte());return r},a.prototype.write=function(s){var r,o,u,l;for(l=[],o=0,u=s.length;o<u;o++)r=s[o],l.push(this.writeByte(r));return l},a})(),pv=(function(){var a;function s(r){var o,u,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},u=0,l=this.tableCount;0<=l?u<l:u>l;u=0<=l?++u:--u)o={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[o.tag]=o}return s.prototype.encode=function(r){var o,u,l,d,h,p,m,y,w,j,g,L,N;for(N in g=Object.keys(r).length,p=Math.log(2),w=16*Math.floor(Math.log(g)/p),d=Math.floor(w/p),y=16*g-w,(u=new Ko).writeInt(this.scalarType),u.writeShort(g),u.writeShort(w),u.writeShort(d),u.writeShort(y),l=16*g,m=u.pos+l,h=null,L=[],r)for(j=r[N],u.writeString(N),u.writeInt(a(j)),u.writeInt(m),u.writeInt(j.length),L=L.concat(j),N==="head"&&(h=m),m+=j.length;m%4;)L.push(0),m++;return u.write(L),o=2981146554-a(u.data),u.pos=h+8,u.writeUInt32(o),u.data},a=function(r){var o,u,l,d;for(r=L1.call(r);r.length%4;)r.push(0);for(l=new Ko(r),u=0,o=0,d=r.length;o<d;o=o+=4)u+=l.readUInt32();return 4294967295&u},s})(),mv={}.hasOwnProperty,_s=function(a,s){for(var r in s)mv.call(s,r)&&(a[r]=s[r]);function o(){this.constructor=a}return o.prototype=s.prototype,a.prototype=new o,a.__super__=s.prototype,a};Yi=(function(){function a(s){var r;this.file=s,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return a.prototype.parse=function(){},a.prototype.encode=function(){},a.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},a})();var gv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="head",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},s.prototype.encode=function(r){var o;return(o=new Ko).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(r),o.writeShort(this.glyphDataFormat),o.data},s})(),z2=(function(){function a(s,r){var o,u,l,d,h,p,m,y,w,j,g,L,N,A,_,T,D;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=r+s.readInt(),w=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=s.readByte();break;case 4:for(g=s.readUInt16(),j=g/2,s.pos+=6,l=(function(){var F,B;for(B=[],p=F=0;0<=j?F<j:F>j;p=0<=j?++F:--F)B.push(s.readUInt16());return B})(),s.pos+=2,N=(function(){var F,B;for(B=[],p=F=0;0<=j?F<j:F>j;p=0<=j?++F:--F)B.push(s.readUInt16());return B})(),m=(function(){var F,B;for(B=[],p=F=0;0<=j?F<j:F>j;p=0<=j?++F:--F)B.push(s.readUInt16());return B})(),y=(function(){var F,B;for(B=[],p=F=0;0<=j?F<j:F>j;p=0<=j?++F:--F)B.push(s.readUInt16());return B})(),u=(this.length-s.pos+this.offset)/2,h=(function(){var F,B;for(B=[],p=F=0;0<=u?F<u:F>u;p=0<=u?++F:--F)B.push(s.readUInt16());return B})(),p=_=0,D=l.length;_<D;p=++_)for(A=l[p],o=T=L=N[p];L<=A?T<=A:T>=A;o=L<=A?++T:--T)y[p]===0?d=o+m[p]:(d=h[y[p]/2+(o-L)-(j-p)]||0)!==0&&(d+=m[p]),this.codeMap[o]=65535&d}s.pos=w}return a.encode=function(s,r){var o,u,l,d,h,p,m,y,w,j,g,L,N,A,_,T,D,F,B,ce,U,q,ie,se,I,O,Y,E,oe,J,ae,he,fe,ge,P,C,G,$,ee,be,Se,je,Ae,Ee,Re,qe;switch(E=new Ko,d=Object.keys(s).sort((function(Xe,M){return Xe-M})),r){case"macroman":for(N=0,A=(function(){var Xe=[];for(L=0;L<256;++L)Xe.push(0);return Xe})(),T={0:0},l={},oe=0,fe=d.length;oe<fe;oe++)T[Ae=s[u=d[oe]]]==null&&(T[Ae]=++N),l[u]={old:s[u],new:T[s[u]]},A[u]=T[s[u]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(A),{charMap:l,subtable:E.data,maxGlyphID:N+1};case"unicode":for(O=[],w=[],D=0,T={},o={},_=m=null,J=0,ge=d.length;J<ge;J++)T[B=s[u=d[J]]]==null&&(T[B]=++D),o[u]={old:B,new:T[B]},h=T[B]-u,_!=null&&h===m||(_&&w.push(_),O.push(u),m=h),_=u;for(_&&w.push(_),w.push(65535),O.push(65535),se=2*(ie=O.length),q=2*Math.pow(Math.log(ie)/Math.LN2,2),j=Math.log(q/2)/Math.LN2,U=2*ie-q,p=[],ce=[],g=[],L=ae=0,P=O.length;ae<P;L=++ae){if(I=O[L],y=w[L],I===65535){p.push(0),ce.push(0);break}if(I-(Y=o[I].new)>=32768)for(p.push(0),ce.push(2*(g.length+ie-L)),u=he=I;I<=y?he<=y:he>=y;u=I<=y?++he:--he)g.push(o[u].new);else p.push(Y-I),ce.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*ie+2*g.length),E.writeUInt16(0),E.writeUInt16(se),E.writeUInt16(q),E.writeUInt16(j),E.writeUInt16(U),Se=0,C=w.length;Se<C;Se++)u=w[Se],E.writeUInt16(u);for(E.writeUInt16(0),je=0,G=O.length;je<G;je++)u=O[je],E.writeUInt16(u);for(Ee=0,$=p.length;Ee<$;Ee++)h=p[Ee],E.writeUInt16(h);for(Re=0,ee=ce.length;Re<ee;Re++)F=ce[Re],E.writeUInt16(F);for(qe=0,be=g.length;qe<be;qe++)N=g[qe],E.writeUInt16(N);return{charMap:o,subtable:E.data,maxGlyphID:D+1}}},a})(),C1=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="cmap",s.prototype.parse=function(r){var o,u,l;for(r.pos=this.offset,this.version=r.readUInt16(),l=r.readUInt16(),this.tables=[],this.unicode=null,u=0;0<=l?u<l:u>l;u=0<=l?++u:--u)o=new z2(r,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},s.encode=function(r,o){var u,l;return o==null&&(o="macroman"),u=z2.encode(r,o),(l=new Ko).writeUInt16(0),l.writeUInt16(1),u.table=l.data.concat(u.subtable),u},s})(),bv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="hhea",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},s})(),xv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="OS/2",s.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var o,u;for(u=[],o=0;o<10;++o)u.push(r.readByte());return u})(),this.charRange=(function(){var o,u;for(u=[],o=0;o<4;++o)u.push(r.readInt());return u})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var o,u;for(u=[],o=0;o<2;o=++o)u.push(r.readInt());return u})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},s})(),vv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="post",s.prototype.parse=function(r){var o,u,l;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var d;for(u=r.readUInt16(),this.glyphNameIndex=[],d=0;0<=u?d<u:d>u;d=0<=u?++d:--d)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],l=[];r.pos<this.offset+this.length;)o=r.readByte(),l.push(this.names.push(r.readString(o)));return l;case 151552:return u=r.readUInt16(),this.offsets=r.read(u);case 196608:break;case 262144:return this.map=(function(){var h,p,m;for(m=[],d=h=0,p=this.file.maxp.numGlyphs;0<=p?h<p:h>p;d=0<=p?++h:--h)m.push(r.readUInt32());return m}).call(this)}},s})(),yv=function(a,s){this.raw=a,this.length=a.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},wv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="name",s.prototype.parse=function(r){var o,u,l,d,h,p,m,y,w,j,g;for(r.pos=this.offset,r.readShort(),o=r.readShort(),p=r.readShort(),u=[],d=0;0<=o?d<o:d>o;d=0<=o?++d:--d)u.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+p+r.readShort()});for(m={},d=w=0,j=u.length;w<j;d=++w)l=u[d],r.pos=l.offset,y=r.readString(l.length),h=new yv(y,l),m[g=l.nameID]==null&&(m[g]=[]),m[l.nameID].push(h);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},s})(),Nv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="maxp",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},s})(),Sv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="hmtx",s.prototype.parse=function(r){var o,u,l,d,h,p,m;for(r.pos=this.offset,this.metrics=[],o=0,p=this.file.hhea.numberOfMetrics;0<=p?o<p:o>p;o=0<=p?++o:--o)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var y,w;for(w=[],o=y=0;0<=l?y<l:y>l;o=0<=l?++y:--y)w.push(r.readInt16());return w})(),this.widths=(function(){var y,w,j,g;for(g=[],y=0,w=(j=this.metrics).length;y<w;y++)d=j[y],g.push(d.advance);return g}).call(this),u=this.widths[this.widths.length-1],m=[],o=h=0;0<=l?h<l:h>l;o=0<=l?++h:--h)m.push(this.widths.push(u));return m},s.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},s})(),L1=[].slice,jv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(r){var o,u,l,d,h,p,m,y,w,j;return r in this.cache?this.cache[r]:(d=this.file.loca,o=this.file.contents,u=d.indexOf(r),(l=d.lengthOf(r))===0?this.cache[r]=null:(o.pos=this.offset+u,h=(p=new Ko(o.read(l))).readShort(),y=p.readShort(),j=p.readShort(),m=p.readShort(),w=p.readShort(),this.cache[r]=h===-1?new Av(p,y,j,m,w):new _v(p,h,y,j,m,w),this.cache[r]))},s.prototype.encode=function(r,o,u){var l,d,h,p,m;for(h=[],d=[],p=0,m=o.length;p<m;p++)l=r[o[p]],d.push(h.length),l&&(h=h.concat(l.encode(u)));return d.push(h.length),{table:h,offsets:d}},s})(),_v=(function(){function a(s,r,o,u,l,d){this.raw=s,this.numberOfContours=r,this.xMin=o,this.yMin=u,this.xMax=l,this.yMax=d,this.compound=!1}return a.prototype.encode=function(){return this.raw.data},a})(),Av=(function(){function a(s,r,o,u,l){var d,h;for(this.raw=s,this.xMin=r,this.yMin=o,this.xMax=u,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;h=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&h;)d.pos+=1&h?4:2,128&h?d.pos+=8:64&h?d.pos+=4:8&h&&(d.pos+=2)}return a.prototype.encode=function(){var s,r,o;for(r=new Ko(L1.call(this.raw.data)),s=0,o=this.glyphIDs.length;s<o;++s)r.pos=this.glyphOffsets[s];return r.data},a})(),kv=(function(a){function s(){return s.__super__.constructor.apply(this,arguments)}return _s(s,Yi),s.prototype.tag="loca",s.prototype.parse=function(r){var o,u;return r.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?(function(){var l,d;for(d=[],u=0,l=this.length;u<l;u+=2)d.push(2*r.readUInt16());return d}).call(this):(function(){var l,d;for(d=[],u=0,l=this.length;u<l;u+=4)d.push(r.readUInt32());return d}).call(this)},s.prototype.indexOf=function(r){return this.offsets[r]},s.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},s.prototype.encode=function(r,o){for(var u=new Uint32Array(this.offsets.length),l=0,d=0,h=0;h<u.length;++h)if(u[h]=l,d<o.length&&o[d]==h){++d,u[h]=l;var p=this.offsets[h],m=this.offsets[h+1]-p;m>0&&(l+=m)}for(var y=new Array(4*u.length),w=0;w<u.length;++w)y[4*w+3]=255&u[w],y[4*w+2]=(65280&u[w])>>8,y[4*w+1]=(16711680&u[w])>>16,y[4*w]=(4278190080&u[w])>>24;return y},s})(),Cv=(function(){function a(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return a.prototype.generateCmap=function(){var s,r,o,u,l;for(r in u=this.font.cmap.tables[0].codeMap,s={},l=this.subset)o=l[r],s[r]=u[o];return s},a.prototype.glyphsFor=function(s){var r,o,u,l,d,h,p;for(u={},d=0,h=s.length;d<h;d++)u[l=s[d]]=this.font.glyf.glyphFor(l);for(l in r=[],u)(o=u[l])!=null&&o.compound&&r.push.apply(r,o.glyphIDs);if(r.length>0)for(l in p=this.glyphsFor(r))o=p[l],u[l]=o;return u},a.prototype.encode=function(s,r){var o,u,l,d,h,p,m,y,w,j,g,L,N,A,_;for(u in o=C1.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(s),g={0:0},_=o.charMap)g[(p=_[u]).old]=p.new;for(L in j=o.maxGlyphID,d)L in g||(g[L]=j++);return y=(function(T){var D,F;for(D in F={},T)F[T[D]]=D;return F})(g),w=Object.keys(y).sort((function(T,D){return T-D})),N=(function(){var T,D,F;for(F=[],T=0,D=w.length;T<D;T++)h=w[T],F.push(y[h]);return F})(),l=this.font.glyf.encode(d,N,g),m=this.font.loca.encode(l.offsets,N),A={cmap:this.font.cmap.raw(),glyf:l.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},a})();Ct.API.PDFObject=(function(){var a;function s(){}return a=function(r,o){return(Array(o+1).join("0")+r).slice(-o)},s.convert=function(r){var o,u,l,d;if(Array.isArray(r))return"["+(function(){var h,p,m;for(m=[],h=0,p=r.length;h<p;h++)o=r[h],m.push(s.convert(o));return m})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+a(r.getUTCFullYear(),4)+a(r.getUTCMonth(),2)+a(r.getUTCDate(),2)+a(r.getUTCHours(),2)+a(r.getUTCMinutes(),2)+a(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(u in l=["<<"],r)d=r[u],l.push("/"+u+" "+s.convert(d));return l.push(">>"),l.join(`
`)}return""+r},s})();const Lv=({book:a,onClose:s})=>{const[r,o]=ne.useState(0),[u,l]=ne.useState(18),[d,h]=ne.useState(!1);ne.useEffect(()=>{const y=document.getElementById("book-content-area");y&&(y.scrollTop=0)},[r]);const p=()=>{const y=new Ct;y.setFontSize(24),y.text(a.title||"Untitled Story",105,100,{align:"center"}),y.setFontSize(12),y.text("Generated by StoryWeaver",105,110,{align:"center"}),a.chapters.forEach((w,j)=>{y.addPage(),y.setFontSize(18),y.text(`Chapter ${j+1}: ${w.title}`,20,20),y.setFontSize(12);const g=y.splitTextToSize(w.content||"",170);y.text(g,20,30)}),y.save(`${a.title||"story"}.pdf`),h(!1)},m=()=>{let y=`${a.title||"Untitled Story"}

`;a.chapters.forEach((L,N)=>{y+=`Chapter ${N+1}: ${L.title}
`,y+=`${"-".repeat(20)}
`,y+=`${L.content||""}

`,y+=`${"=".repeat(20)}

`});const w=new Blob([y],{type:"text/plain"}),j=URL.createObjectURL(w),g=document.createElement("a");g.href=j,g.download=`${a.title||"story"}.txt`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(j),h(!1)};return!a.chapters||a.chapters.length===0?i.jsx("div",{className:"absolute inset-0 z-50 bg-brand-bg flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("p",{className:"text-brand-text-muted mb-4",children:"No chapters found in this book."}),i.jsx("button",{onClick:s,className:"px-4 py-2 bg-brand-secondary text-white rounded-lg",children:"Close"})]})}):i.jsxs("div",{className:"absolute inset-0 z-50 bg-brand-bg flex flex-col animate-in zoom-in-95 duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 bg-brand-surface/80 backdrop-blur-md z-20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ss,{className:"w-6 h-6 text-brand-secondary"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-serif font-bold text-lg text-brand-text leading-tight",children:a.title||"Untitled Story"}),i.jsxs("p",{className:"text-xs text-brand-text-muted",children:["Chapter ",r+1," of ",a.chapters.length]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-brand-text-muted hover:text-white transition text-sm font-medium",children:[i.jsx(ro,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),d&&i.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-brand-surface border border-white/10 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("button",{onClick:p,className:"w-full text-left px-4 py-3 hover:bg-white/5 text-brand-text text-sm flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-red-400",children:"PDF"})," Document"]}),i.jsxs("button",{onClick:m,className:"w-full text-left px-4 py-3 hover:bg-white/5 text-brand-text text-sm flex items-center gap-2 border-t border-white/5",children:[i.jsx("span",{className:"font-bold text-blue-400",children:"TXT"})," Plain Text"]})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-white/5 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>l(Math.max(14,u-2)),className:"w-8 h-8 flex items-center justify-center text-brand-text-muted hover:text-white font-serif text-sm",children:"A-"}),i.jsx("button",{onClick:()=>l(Math.min(28,u+2)),className:"w-8 h-8 flex items-center justify-center text-brand-text-muted hover:text-white font-serif text-lg",children:"A+"})]}),i.jsx("button",{onClick:s,className:"p-2 text-brand-text-muted hover:text-white transition rounded-full hover:bg-white/10",children:i.jsx(tl,{className:"w-6 h-6"})})]})]}),i.jsx("div",{id:"book-content-area",className:"flex-grow overflow-y-auto custom-scrollbar p-4 md:p-12 bg-brand-bg relative",onClick:()=>h(!1),children:i.jsxs("div",{className:"max-w-3xl mx-auto bg-brand-surface/30 p-8 md:p-16 rounded-lg shadow-2xl min-h-full border border-white/5",children:[i.jsxs("div",{className:"mb-12 text-center",children:[i.jsxs("span",{className:"text-brand-secondary text-xs font-bold uppercase tracking-[0.2em] mb-2 block",children:["Chapter ",r+1]}),i.jsx("h3",{className:"font-serif text-3xl md:text-4xl font-bold text-brand-text",children:a.chapters[r].title}),i.jsx("div",{className:"w-16 h-1 bg-brand-secondary/50 mx-auto mt-6 rounded-full"})]}),i.jsx("div",{className:"prose prose-invert prose-lg max-w-none font-serif leading-loose text-brand-text/90 whitespace-pre-wrap",style:{fontSize:`${u}px`},children:a.chapters[r].content||i.jsx("span",{className:"italic opacity-50",children:"This scene has no text yet."})}),i.jsx("div",{className:"mt-16 flex justify-center",children:i.jsx("span",{className:"text-brand-text-muted text-2xl opacity-50",children:"***"})})]})}),i.jsxs("div",{className:"p-4 border-t border-white/10 bg-brand-surface/80 backdrop-blur-md flex justify-between items-center z-20",children:[i.jsxs("button",{onClick:()=>o(Math.max(0,r-1)),disabled:r===0,className:"flex items-center gap-2 px-4 py-3 rounded-xl hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed text-brand-text font-medium transition",children:[i.jsx(Vc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),i.jsx("div",{className:"h-1.5 w-32 md:w-64 bg-white/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-brand-secondary transition-all duration-300 ease-out",style:{width:`${(r+1)/a.chapters.length*100}%`}})}),i.jsxs("button",{onClick:()=>o(Math.min(a.chapters.length-1,r+1)),disabled:r===a.chapters.length-1,className:"flex items-center gap-2 px-4 py-3 rounded-xl hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed text-brand-text font-medium transition",children:[i.jsx("span",{className:"hidden sm:inline",children:"Next"}),i.jsx(Bl,{className:"w-5 h-5"})]})]})]})},Ev=({scenes:a,allCharacters:s,onGenerateImage:r,onGenerateCharacterImage:o})=>{const[u,l]=ne.useState(0),[d,h]=ne.useState(!0),p=a[u],m=Pc.useMemo(()=>!p||!p.characterIds?[]:s.filter(j=>p.characterIds.includes(j.id)),[p,s]),y=()=>{u<a.length-1&&l(u+1)},w=()=>{u>0&&l(u-1)};return a.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted p-10 text-center",children:[i.jsx("div",{className:"p-6 bg-brand-surface rounded-full mb-4 opacity-50",children:i.jsx(si,{className:"w-16 h-16"})}),i.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Scenes Available"}),i.jsx("p",{children:"Create scenes in the Story view to experience them here."})]}):i.jsxs("div",{className:"flex flex-col h-full max-h-[calc(100vh-6rem)] gap-4 p-4 lg:p-0",children:[i.jsxs("div",{className:"flex-grow relative rounded-2xl overflow-hidden shadow-2xl border border-white/10 bg-black group",children:[p.headerImage?i.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 ease-in-out",style:{backgroundImage:`url(${p.headerImage})`},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"})}):i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-bg to-brand-surface flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-brand-text-muted mb-4 opacity-50 italic",children:"No visual generated for this scene."}),i.jsxs("button",{onClick:()=>r(p),className:"flex items-center gap-2 bg-brand-secondary/20 hover:bg-brand-secondary text-brand-secondary hover:text-white px-6 py-3 rounded-full transition border border-brand-secondary/30",children:[i.jsx(Gr,{className:"w-5 h-5"}),"Generate Scene Art"]})]})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center items-end px-10 pb-[180px] gap-4 lg:gap-16 pointer-events-none",children:m.map((j,g)=>i.jsxs("div",{className:"relative flex flex-col items-center transition-all duration-500 transform translate-y-0",children:[j.headerImage?i.jsx("img",{src:j.headerImage,alt:j.name,className:"w-32 h-32 lg:w-64 lg:h-64 object-cover rounded-2xl shadow-2xl border-2 border-white/10 transform hover:scale-105 transition pointer-events-auto"}):i.jsxs("div",{className:"w-32 h-32 lg:w-48 lg:h-64 bg-brand-surface/80 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20 flex flex-col items-center justify-center text-center p-4 pointer-events-auto",children:[i.jsx(Zc,{className:"w-12 h-12 text-brand-text-muted mb-2 opacity-50"}),i.jsx("span",{className:"text-xs text-brand-text-muted font-bold",children:j.name}),i.jsx("button",{onClick:()=>o(j),className:"mt-2 text-[10px] bg-brand-secondary text-white px-2 py-1 rounded hover:bg-opacity-80 transition",children:"Generate"})]}),i.jsx("div",{className:"mt-2 bg-black/60 backdrop-blur-md px-3 py-1 rounded-lg border border-white/10 text-xs lg:text-sm font-bold text-white shadow-lg",children:j.name})]},j.id))}),"const [isTextVisible, setIsTextVisible] = useState(true); // ... (existing code)",i.jsxs("div",{className:`absolute bottom-6 left-4 right-4 lg:left-12 lg:right-12 transition-all duration-300 ease-in-out flex flex-col ${d?"min-h-[140px] max-h-[35vh] bg-brand-surface/90 border border-white/10 p-6":"h-12 w-auto self-start bg-transparent border-none p-0"}`,children:[i.jsxs("div",{className:`flex justify-between items-center ${d?"mb-2":"absolute bottom-0 left-0 bg-brand-surface/90 backdrop-blur-xl border border-white/10 rounded-full px-4 py-2 shadow-lg"}`,children:[d&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-xl font-serif font-bold text-brand-secondary drop-shadow-sm truncate max-w-[200px]",children:p.title}),i.jsxs("span",{className:"text-xs font-mono text-brand-text-muted bg-black/20 px-2 py-1 rounded",children:["Scene ",u+1,"/",a.length]})]}),i.jsx("button",{onClick:()=>h(!d),className:`text-xs font-bold uppercase tracking-wider text-brand-text-muted hover:text-white transition flex items-center gap-2 ${!d&&"w-full h-full"}`,children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Hide Text"})," ",i.jsx(cf,{className:"w-4 h-4"})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-brand-secondary",children:"Show Text"})," ",i.jsx(vp,{className:"w-4 h-4"})]})})]}),d&&i.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2",children:i.jsx("p",{className:"text-lg font-serif leading-relaxed text-brand-text/90 whitespace-pre-wrap",children:p.fullText||p.summary||i.jsx("span",{className:"italic opacity-50",children:"No text available for this scene."})})})]}),i.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-4 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[i.jsx("button",{onClick:w,disabled:u===0,className:"pointer-events-auto w-12 h-12 rounded-full bg-black/50 hover:bg-brand-secondary text-white flex items-center justify-center backdrop-blur-md border border-white/10 transition-all transform hover:scale-110 disabled:opacity-0 disabled:pointer-events-none",children:i.jsx(Vc,{className:"w-6 h-6"})}),i.jsx("button",{onClick:y,disabled:u===a.length-1,className:"pointer-events-auto w-12 h-12 rounded-full bg-black/50 hover:bg-brand-secondary text-white flex items-center justify-center backdrop-blur-md border border-white/10 transition-all transform hover:scale-110 disabled:opacity-0 disabled:pointer-events-none",children:i.jsx(Bl,{className:"w-6 h-6"})})]})]}),i.jsx("div",{className:"h-24 flex gap-3 overflow-x-auto custom-scrollbar pb-2 px-2",children:a.map((j,g)=>i.jsxs("button",{onClick:()=>l(g),className:`relative min-w-[140px] rounded-xl overflow-hidden border-2 transition-all duration-200 group flex-shrink-0 ${g===u?"border-brand-secondary scale-105 shadow-lg shadow-brand-secondary/20":"border-transparent opacity-60 hover:opacity-100"}`,children:[j.headerImage?i.jsx("img",{src:j.headerImage,className:"w-full h-full object-cover",alt:j.title}):i.jsx("div",{className:"w-full h-full bg-brand-surface flex items-center justify-center text-brand-text-muted text-xs italic px-2 text-center",children:j.title}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex items-end p-2",children:i.jsxs("span",{className:"text-[10px] font-bold text-white truncate w-full text-left",children:[g+1,". ",j.title]})})]},j.id))})]})},Op=()=>i.jsxs("svg",{className:"animate-spin h-8 w-8 text-brand-secondary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Tv=({onComplete:a,existingCharacters:s})=>{const[r,o]=ne.useState(1),[u,l]=ne.useState("Superhero"),[d,h]=ne.useState({role:"hero"}),[p,m]=ne.useState({role:"co-star"}),[y,w]=ne.useState({role:"villain"}),[j,g]=ne.useState(!1),L=ne.useRef(null),N=ne.useRef(null),A=ne.useRef(null),_=ie=>new Promise(se=>{const I=new FileReader;I.onload=()=>{const O=I.result;typeof O=="string"&&se(O.split(",")[1]||O)},I.readAsDataURL(ie)}),T=async(ie,se)=>{var O;const I=(O=ie.target.files)==null?void 0:O[0];if(I){const Y=await _(I);(se==="hero"?h:se==="co-star"?m:w)(oe=>({...oe,image:Y}))}},D=(ie,se)=>{const I=s.find(O=>O.id===ie);if(I){const O=se==="hero"?h:se==="co-star"?m:w;let Y;I.headerImage&&I.headerImage.startsWith("data:image")&&(Y=I.headerImage.split(",")[1]),O({name:I.name,description:`${I.initialInfo} ${I.visualStats?`Appearance: ${I.visualStats.height}, ${I.visualStats.build}, ${I.visualStats.distinguishingFeatures}`:""}`,image:Y,role:se})}},F=async()=>{if(d.description){g(!0);try{const ie=await xx(d.description,u);w({name:ie.name,description:ie.desc,image:ie.image,role:"villain"})}catch(ie){console.error(ie)}finally{g(!1)}}},B=()=>r===1?!!d.name&&!!d.description&&!!d.image:r===2?!!p.name&&!!p.description&&!!p.image:r===3?!!y.name&&!!y.description&&!!y.image:!1,ce=()=>{r<3?o(r+1):a(d,p,y,u)},U=ie=>ie.startsWith("/9j/")?"image/jpeg":ie.startsWith("iVBORw0KGgo")?"image/png":"image/jpeg",q=(ie,se,I,O)=>i.jsxs("div",{className:"glass-panel p-8 rounded-2xl border border-white/10 animate-in fade-in slide-in-from-right-8 duration-500",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("h3",{className:"text-3xl font-banger text-brand-secondary uppercase tracking-wider drop-shadow-md",children:["Casting The ",ie]}),s.length>0&&i.jsxs("div",{className:"relative group",children:[i.jsxs("select",{className:"appearance-none bg-brand-bg/50 border border-brand-primary/50 text-brand-text-muted text-sm rounded-lg px-4 py-2 pr-8 hover:text-white hover:border-brand-secondary cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-secondary/50",onChange:Y=>D(Y.target.value,ie),defaultValue:"",children:[i.jsx("option",{value:"",disabled:!0,children:"Import from Story..."}),s.map(Y=>i.jsxs("option",{value:Y.id,children:[Y.name," (",Y.type,")"]},Y.id))]}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-brand-text-muted",children:i.jsx(_p,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[i.jsxs("div",{className:"flex-shrink-0 w-full md:w-auto flex flex-col items-center gap-4",children:[i.jsx("div",{onClick:()=>{var Y;return(Y=O.current)==null?void 0:Y.click()},className:"relative w-64 h-64 rounded-2xl overflow-hidden border-2 border-dashed border-white/20 hover:border-brand-secondary cursor-pointer group transition-all duration-300 shadow-2xl bg-black/20",children:se.image?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:`data:${U(se.image)};base64,${se.image}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",alt:ie}),i.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center text-white gap-2",children:[i.jsx(df,{className:"w-8 h-8"}),i.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Change Photo"})]})]}):i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-brand-text-muted group-hover:text-brand-secondary transition-colors gap-3",children:[i.jsx("div",{className:"p-4 bg-white/5 rounded-full group-hover:bg-brand-secondary/20 transition-colors",children:i.jsx(Zc,{className:"w-12 h-12"})}),i.jsx("span",{className:"font-bold text-sm uppercase tracking-wider",children:"Upload Portrait"})]})}),i.jsx("button",{onClick:()=>{var Y;return(Y=O.current)==null?void 0:Y.click()},className:"text-xs bg-brand-primary/50 hover:bg-brand-secondary hover:text-white text-brand-text-muted px-4 py-2 rounded-full transition border border-white/5",children:se.image?"Replace Image":"Select Image File"}),i.jsx("input",{type:"file",ref:O,onChange:Y=>T(Y,ie),className:"hidden",accept:"image/*"})]}),i.jsxs("div",{className:"flex-grow w-full space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Character Name"}),i.jsx("input",{value:se.name||"",onChange:Y=>I({...se,name:Y.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition text-lg font-medium",placeholder:`Name the ${ie}...`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Visual Description"}),i.jsx("textarea",{value:se.description||"",onChange:Y=>I({...se,description:Y.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",placeholder:"Describe features, costume, colors, and accessories...",rows:4})]}),ie==="villain"&&r===3&&i.jsxs("button",{onClick:F,disabled:j||!d.description,className:"w-full flex items-center justify-center gap-2 bg-red-900/30 hover:bg-red-900/50 border border-red-500/30 text-red-400 font-bold py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:[j?i.jsx(Op,{}):i.jsx(Gr,{className:"w-5 h-5"}),j?"Concocting Evil...":"Generate Villain based on Hero"]})]})]})]});return i.jsxs("div",{className:"max-w-5xl mx-auto p-6 lg:p-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h1",{className:"text-5xl font-banger text-transparent bg-clip-text bg-gradient-to-r from-brand-secondary to-brand-accent drop-shadow-sm mb-2",children:"Infinite Heroes"}),i.jsx("p",{className:"text-brand-text-muted font-serif text-lg",children:"Assemble your cast and forge a legend."})]}),i.jsx("div",{className:"flex justify-center gap-4 mb-10",children:["Hero","Co-Star","Villain"].map((ie,se)=>{const I=r===se+1,O=r>se+1;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-banger text-xl transition-all duration-300 ${I?"bg-brand-secondary text-white scale-110 shadow-lg shadow-brand-secondary/30":O?"bg-green-500 text-white":"bg-brand-primary/30 text-brand-text-muted"}`,children:O?i.jsx(Jo,{className:"w-6 h-6"}):se+1}),i.jsx("span",{className:`font-bold uppercase tracking-wider text-sm hidden md:block ${I?"text-white":"text-brand-text-muted/50"}`,children:ie}),se<2&&i.jsx("div",{className:"w-12 h-0.5 bg-white/10 mx-2 hidden md:block"})]},se)})}),i.jsxs("div",{className:"min-h-[500px]",children:[r===1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-8 max-w-xs mx-auto",children:[i.jsx("label",{className:"block text-center text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-2",children:"Comic Genre"}),i.jsxs("select",{value:u,onChange:ie=>l(ie.target.value),className:"w-full bg-brand-surface border border-brand-secondary/50 text-brand-text text-center font-banger text-xl py-2 rounded-xl focus:ring-2 focus:ring-brand-secondary",children:[i.jsx("option",{children:"Superhero"}),i.jsx("option",{children:"Sci-Fi"}),i.jsx("option",{children:"Fantasy"}),i.jsx("option",{children:"Noir"}),i.jsx("option",{children:"Horror"}),i.jsx("option",{children:"Cyberpunk"})]})]}),q("hero",d,h,L)]}),r===2&&q("co-star",p,m,N),r===3&&q("villain",y,w,A)]}),i.jsx("div",{className:"mt-10 flex justify-end",children:i.jsxs("button",{onClick:ce,disabled:!B(),className:"group flex items-center gap-3 bg-gradient-to-r from-brand-secondary to-brand-accent text-white font-banger text-2xl px-10 py-4 rounded-xl shadow-lg shadow-brand-secondary/20 hover:scale-105 hover:shadow-brand-secondary/40 transition-all disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed",children:[r===3?"LAUNCH CREATOR":"NEXT STEP",i.jsx(Bl,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})})]})},D2=({imageUrl:a,narrative:s,pageIndex:r})=>{if(!(a&&a.length>100))return i.jsxs("div",{className:"w-full h-full bg-white flex flex-col items-center justify-center border-4 border-black p-4 text-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[image:radial-gradient(circle,#000_1px,transparent_1px)] bg-[length:10px_10px]"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[i.jsx("div",{className:"w-16 h-16 mb-4 text-black animate-pulse",children:i.jsx(Gr,{className:"w-full h-full"})}),i.jsxs("p",{className:"font-banger text-2xl text-black tracking-widest mb-2",children:["INKING PAGE ",r,"..."]}),i.jsx("p",{className:"font-comic text-sm text-gray-600",children:"The AI artist is drawing this panel."})]})]});const u=l=>l.startsWith("/9j/")?"image/jpeg":l.startsWith("iVBORw0KGgo")?"image/png":"image/jpeg";return i.jsxs("div",{className:"w-full h-full relative overflow-hidden border-4 border-black bg-white group",children:[i.jsx("img",{src:`data:${u(a)};base64,${a}`,className:"w-full h-full object-cover",alt:`Page ${r}`}),i.jsx("div",{className:"gloss-overlay"}),i.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between pointer-events-none",children:[(s==null?void 0:s.caption)&&i.jsx("div",{className:"bg-brand-comic-yellow border-2 border-black p-3 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] max-w-[80%] self-start transform -rotate-1",children:i.jsx("p",{className:"font-comic font-bold text-sm uppercase text-black leading-snug",children:s.caption})}),(s==null?void 0:s.dialogue)&&i.jsx("div",{className:"bg-white border-2 border-black p-4 rounded-[50%] shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] self-end max-w-[70%] speech-bubble text-center mt-auto mb-12 mr-4",children:i.jsx("p",{className:"font-comic font-bold text-base text-black leading-tight",children:s.dialogue})})]}),i.jsx("div",{className:"absolute bottom-2 right-2 font-banger text-black bg-white border border-black px-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] z-20",children:r}),i.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto z-30",children:[i.jsx("button",{onClick:()=>{const l=document.createElement("a");l.href=`data:${u(a)};base64,${a}`,l.download=`comic_page_${r}.png`,l.click()},className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-cyan hover:text-white transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Download Image",children:i.jsx(ro,{className:"w-4 h-4"})}),i.jsx("button",{className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-cyan hover:text-white transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Regenerate Image",children:i.jsx(d1,{className:"w-4 h-4"})}),i.jsx("button",{className:"bg-white border-2 border-black p-1.5 hover:bg-brand-comic-yellow hover:text-black transition shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] active:translate-x-[1px] active:translate-y-[1px] active:shadow-none",title:"Edit Text",children:i.jsx($u,{className:"w-4 h-4"})})]})]})},Ov=({faces:a})=>{const[s,r]=ne.useState(0),o=[];for(let d=0;d<a.length;d+=2)o.push({front:a[d],back:a[d+1]});const u=()=>{s<o.length&&r(s+1)},l=d=>{d.stopPropagation(),s>0&&r(s-1)};return i.jsxs("div",{className:"w-full h-full flex items-center justify-center comic-scene overflow-hidden bg-slate-900 p-8",children:[i.jsxs("div",{className:`book w-[300px] h-[450px] md:w-[400px] md:h-[600px] ${s>0?"translate-x-[50%]":""}`,children:[i.jsx("div",{className:"absolute inset-0 bg-white border-l-4 border-gray-300 rounded-r-lg shadow-2xl",style:{transform:"translateZ(-2px)"}}),o.map((d,h)=>{var y,w,j,g,L,N,A;const p=o.length-h,m=h<s;return i.jsxs("div",{className:`paper cursor-pointer ${m?"flipped":""}`,style:{zIndex:m?h:p},onClick:u,children:[i.jsxs("div",{className:"front border-l border-gray-200",children:[i.jsx(D2,{imageUrl:(y=d.front)==null?void 0:y.imageUrl,narrative:(w=d.front)==null?void 0:w.narrative,pageIndex:((j=d.front)==null?void 0:j.pageIndex)||0}),((g=d.front)==null?void 0:g.type)==="cover"&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[i.jsx("h1",{className:"font-banger text-6xl text-brand-comic-yellow drop-shadow-[4px_4px_0px_#000] stroke-black",children:"INFINITE"}),i.jsx("h1",{className:"font-banger text-6xl text-white drop-shadow-[4px_4px_0px_#000]",children:"HEROES"}),i.jsx("div",{className:"mt-8 bg-brand-comic-red text-white font-banger px-4 py-1 border-2 border-black transform rotate-3",children:"TAP TO OPEN"})]})]}),i.jsx("div",{className:"back border-r border-gray-200",onClick:l,children:d.back?i.jsx(D2,{imageUrl:(L=d.back)==null?void 0:L.imageUrl,narrative:(N=d.back)==null?void 0:N.narrative,pageIndex:((A=d.back)==null?void 0:A.pageIndex)||0}):i.jsx("div",{className:"w-full h-full bg-white flex items-center justify-center font-banger text-2xl",children:"THE END"})})]},h)})]}),i.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-4",children:[i.jsx("button",{onClick:d=>{d.stopPropagation(),s>0&&r(s-1)},className:"bg-white border-2 border-black font-banger px-4 py-2 hover:bg-gray-100 disabled:opacity-50",disabled:s===0,children:"PREV"}),i.jsx("button",{onClick:d=>{d.stopPropagation(),s<o.length&&r(s+1)},className:"bg-brand-comic-cyan border-2 border-black font-banger px-4 py-2 hover:brightness-110 disabled:opacity-50",disabled:s===o.length,children:"NEXT"})]})]})},Rv=({faces:a})=>{const s=a.filter(r=>r.type==="story");return i.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-brand-surface border-l border-white/10",children:[i.jsx("h3",{className:"font-banger text-xl text-white mb-4 tracking-wider",children:"STORY MAP"}),i.jsxs("div",{className:"space-y-4 relative",children:[i.jsx("div",{className:"absolute top-2 bottom-2 left-2 w-0.5 bg-white/20"}),s.map((r,o)=>{var u,l;return i.jsxs("div",{className:"relative pl-6",children:[i.jsx("div",{className:`absolute left-0 top-1 w-4 h-4 rounded-full border-2 border-brand-bg ${r.isLoading?"bg-yellow-400 animate-pulse":"bg-brand-comic-cyan"}`}),i.jsxs("div",{className:"bg-white/5 p-3 rounded border border-white/10 hover:bg-white/10 transition",children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsxs("span",{className:"font-banger text-sm text-brand-secondary",children:["PAGE ",r.pageIndex]}),r.isLoading&&i.jsx("span",{className:"text-xs text-yellow-400 animate-pulse",children:"GENERATING..."})]}),i.jsx("p",{className:"text-xs text-gray-300 font-comic line-clamp-3",children:((u=r.narrative)==null?void 0:u.caption)||((l=r.narrative)==null?void 0:l.dialogue)||"Writing..."})]})]},r.id)})]})]})},Mv=({pageIndex:a,genre:s})=>{const r=ne.useRef(null);ne.useEffect(()=>(r.current=new(window.AudioContext||window.webkitAudioContext),()=>{var l;(l=r.current)==null||l.close()}),[]);const o=()=>{if(!r.current)return;const l=r.current,d=l.createOscillator(),h=l.createGain();d.type="sine",d.frequency.setValueAtTime(800,l.currentTime),d.frequency.exponentialRampToValueAtTime(100,l.currentTime+.3),h.gain.setValueAtTime(.2,l.currentTime),h.gain.exponentialRampToValueAtTime(.01,l.currentTime+.3),d.connect(h),h.connect(l.destination),d.start(),d.stop(l.currentTime+.3)},u=()=>{if(!r.current)return;const l=r.current,d=l.createOscillator(),h=l.createGain();s.toLowerCase().includes("horror")?(d.type="sawtooth",d.frequency.setValueAtTime(50,l.currentTime),h.gain.setValueAtTime(.1,l.currentTime),h.gain.linearRampToValueAtTime(0,l.currentTime+2)):s.toLowerCase().includes("comedy")?(d.type="triangle",d.frequency.setValueAtTime(400,l.currentTime),d.frequency.linearRampToValueAtTime(600,l.currentTime+.1),h.gain.setValueAtTime(.1,l.currentTime),h.gain.linearRampToValueAtTime(0,l.currentTime+.5)):(d.type="square",d.frequency.setValueAtTime(100,l.currentTime),h.gain.setValueAtTime(.05,l.currentTime),h.gain.exponentialRampToValueAtTime(.01,l.currentTime+.5)),d.connect(h),h.connect(l.destination),d.start(),d.stop(l.currentTime+2)};return ne.useEffect(()=>{a>0&&(o(),Math.random()>.7&&u())},[a]),null},zv=({storyPremise:a,scenes:s})=>{const[r,o]=ne.useState([]),[u,l]=ne.useState(!1),[d,h]=ne.useState(null),p=ne.useRef(!1),m=L=>{const N=[{id:"cover",type:"cover",imageUrl:L.image,pageIndex:0,choices:[],isLoading:!1},{id:"p1",type:"story",pageIndex:1,choices:[],isLoading:!0},{id:"p2",type:"story",pageIndex:2,choices:[],isLoading:!0}];return o(N),N},y=ne.useCallback(async(L,N,A)=>{var ce;if(!p.current)return;const _=L.findIndex(U=>U.isLoading);if(_===-1){l(!1);return}const T=L[_],D=T.pageIndex||1;l(!0),h(null);const F=L.slice(0,_).filter(U=>U.narrative).map(U=>{var q,ie;return`Page ${U.pageIndex}: ${((q=U.narrative)==null?void 0:q.caption)||""} ${((ie=U.narrative)==null?void 0:ie.dialogue)||""}`}).join(`
`),B=`STORY PREMISE: ${a||"Original Adventure"}

        RELEVANT SCENES: ${(s==null?void 0:s.slice(0,3).map(U=>U.summary).join("; "))||"None"}`;try{const U=A.map(J=>J.name),q=((ce=A.find(J=>J.role==="villain"))==null?void 0:ce.description)||"Evil villain",ie=await gx(F,D,N,U,q,B),se=[...L];se[_]={...T,narrative:ie},o(se);const I=A.find(J=>J.role==="hero"),O=A.find(J=>J.role==="co-star"),Y=A.find(J=>J.role==="villain"),E=await bx(ie,N,I,O,Y),oe=[...se];oe[_]={...se[_],imageUrl:E,isLoading:!1},D<10?oe.push({id:`p${D+1}`,type:"story",pageIndex:D+1,choices:[],isLoading:!0}):oe.push({id:"back",type:"back_cover",pageIndex:11,choices:[],isLoading:!1}),o(oe),y(oe,N,A)}catch(U){console.error("Generation Error",U),h(U.message||"Failed to generate page"),l(!1)}},[a,s]);return{faces:r,isGenerating:u,error:d,startGeneration:(L,N)=>{p.current=!0;const A=N.find(_=>_.role==="hero");if(A){const _=m(A);y(_,L,N)}},stopGeneration:()=>{p.current=!1,l(!1)},regeneratePage:(L,N,A)=>{const _=[...r],T=_.findIndex(D=>D.pageIndex===L);if(T!==-1){_[T]={..._[T],isLoading:!0,imageUrl:void 0,narrative:void 0};const D=_.slice(0,T+1);D[T]={...D[T],isLoading:!0,imageUrl:void 0,narrative:void 0},o(D),p.current=!0,y(D,N,A)}}}},Dv=({storyPremise:a,scenes:s,characters:r})=>{var _;const[o,u]=ne.useState("setup"),[l,d]=ne.useState("Superhero"),[h,p]=ne.useState([]),{faces:m,isGenerating:y,error:w,startGeneration:j,stopGeneration:g,regeneratePage:L}=zv({storyPremise:a,scenes:s}),N=(T,D,F,B)=>{p([T,D,F]),d(B),u("create"),j(B,[T,D,F])},A=()=>{const T=[...m].reverse().find(D=>D.type==="story"&&!D.isLoading);T&&L(T.pageIndex,l,h)};return i.jsx("div",{className:"w-full h-full flex flex-col relative",children:o==="setup"?i.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:i.jsx(Tv,{onComplete:N,existingCharacters:r||[]})}):i.jsxs("div",{className:"flex-grow flex overflow-hidden animate-in fade-in duration-700",children:[i.jsx(Mv,{pageIndex:m.filter(T=>!T.isLoading).length,genre:l}),i.jsxs("div",{className:"flex-grow relative flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20 pointer-events-none"}),i.jsx("div",{className:"absolute top-4 left-4 z-10 flex gap-2",children:i.jsxs("button",{onClick:()=>{g(),u("setup")},className:"glass-panel px-4 py-2 rounded-full text-white hover:bg-white/10 flex items-center gap-2 font-bold transition border border-white/10",children:[i.jsx(Vc,{className:"w-4 h-4"})," BACK TO SETUP"]})}),w&&i.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-20 bg-red-500/90 text-white px-6 py-3 rounded-lg shadow-xl backdrop-blur-md border border-red-400",children:[i.jsx("p",{className:"font-bold flex items-center gap-2",children:" Generation Failed"}),i.jsx("p",{className:"text-sm opacity-90",children:w}),i.jsx("button",{onClick:A,className:"mt-2 bg-white/20 hover:bg-white/30 px-3 py-1 rounded text-sm w-full transition",children:"Try Again"})]}),y&&i.jsxs("div",{className:"absolute top-4 right-4 z-10 glass-panel px-4 py-2 rounded-full flex items-center gap-2 border border-brand-secondary/30",children:[i.jsx(Gr,{className:"w-4 h-4 text-brand-secondary animate-spin"}),i.jsxs("span",{className:"text-xs font-bold text-brand-secondary uppercase tracking-wider",children:["Generating Page ",(_=m.find(T=>T.isLoading))==null?void 0:_.pageIndex,"..."]})]}),i.jsx("div",{className:"relative z-0 transform scale-90 lg:scale-100 transition-transform duration-500",children:i.jsx(Ov,{faces:m})}),!y&&m.length>3&&i.jsx("div",{className:"absolute bottom-8 right-8 z-10",children:i.jsxs("button",{onClick:A,className:"glass-panel px-4 py-2 rounded-full text-white hover:bg-white/10 flex items-center gap-2 font-bold transition border border-white/10",title:"Regenerate the last page",children:[i.jsx("span",{className:"w-4 h-4",children:""})," REGENERATE PAGE"]})})]}),i.jsx("div",{className:"w-80 hidden xl:block h-full border-l border-white/10 glass-panel z-10",children:i.jsx(Rv,{faces:m})})]})})},Iv=({activeView:a,setActiveView:s,isSidebarOpen:r,setIsSidebarOpen:o,theme:u,setShowThemeSettings:l,setShowOnboarding:d})=>{const{saveProject:h,loadProject:p,saveStatus:m}=ao(),y=ne.useRef(null),w=j=>{var L;const g=(L=j.target.files)==null?void 0:L[0];g&&p(g),y.current&&(y.current.value="")};return i.jsx("div",{className:`${r?"w-80":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out relative z-20`,children:i.jsxs("div",{className:`h-full w-80 flex flex-col glass-panel border-r border-white/10 overflow-hidden ${r?"opacity-100":"opacity-0"} transition-opacity duration-200`,children:[i.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-white/5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-brand-secondary to-brand-accent flex items-center justify-center shadow-lg shadow-brand-secondary/20",children:i.jsx(Ss,{className:"w-5 h-5 text-white"})}),i.jsx("h1",{className:"font-serif font-bold text-xl tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-brand-secondary to-brand-accent",children:"StoryWeaver"})]}),i.jsx("button",{onClick:()=>o(!1),"aria-label":"Close Sidebar",className:"p-1.5 hover:bg-white/10 rounded-md transition-colors text-brand-text-muted hover:text-brand-text",children:i.jsx(Vc,{className:"w-5 h-5"})})]}),i.jsxs("nav",{className:"flex-grow px-3 space-y-2 mt-4",children:[i.jsxs("a",{href:"/",className:"w-full flex items-center gap-3 p-3 rounded-xl text-brand-text-muted hover:text-brand-text hover:bg-white/5 transition-all duration-200",children:[i.jsx(Vc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Back to Dashboard"})]}),i.jsx("div",{className:"h-px bg-white/10 my-2 mx-2"}),i.jsxs("button",{onClick:()=>s("story"),title:"Story Context",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="story"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Ss,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Story Context"})]}),i.jsxs("button",{onClick:()=>s("characters"),title:"Characters",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="characters"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Yc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Characters"})]}),i.jsxs("button",{onClick:()=>s("items"),title:"Items",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="items"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold text-xs border border-current rounded-full",children:"I"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Items"})]}),i.jsxs("button",{onClick:()=>s("map"),title:"Story Map",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="map"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Xo,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Story Map"})]}),i.jsxs("button",{onClick:()=>s("world"),title:"Visual Inspiration",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="world"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Uc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Visual Inspiration"})]}),i.jsxs("button",{onClick:()=>s("timeline"),title:"Timeline",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="timeline"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(uf,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Timeline"})]}),i.jsxs("button",{onClick:()=>s("visual"),title:"Visual View",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="visual"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Uc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Visual View"})]}),i.jsxs("button",{onClick:()=>s("comic"),title:"Comic Creator",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="comic"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Bb,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Comic Creator"})]}),i.jsxs("button",{onClick:()=>s("notes"),title:"Notes",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="notes"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(i1,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Notes"})]}),i.jsxs("button",{onClick:()=>s("video"),title:"Video Creator",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="video"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(Uc,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Video Creator"})]}),i.jsxs("button",{onClick:()=>s("assets"),title:"Asset Library",className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-200 ${a==="assets"?"bg-brand-secondary/10 text-brand-secondary border border-brand-secondary/20":"text-brand-text-muted hover:text-brand-text hover:bg-white/5"}`,children:[i.jsx(si,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block font-medium text-sm",children:"Asset Library"})]})]}),i.jsxs("div",{className:"p-4 border-t border-white/5 space-y-2",children:[i.jsxs("button",{onClick:()=>h(),disabled:m==="saving",className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition group",children:[i.jsx(Xc,{className:`w-5 h-5 ${m==="saved"?"text-green-400":""}`}),i.jsx("span",{className:"hidden lg:block text-sm font-medium",children:m==="saving"?"Zipping...":m==="saved"?"Saved!":"Save Project"})]}),i.jsxs("button",{onClick:()=>{var j;return(j=y.current)==null?void 0:j.click()},className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[i.jsx(_p,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Load Project"})]}),i.jsx("input",{type:"file",ref:y,onChange:w,accept:".zip,.json",title:"Load Project File",className:"hidden"}),i.jsxs("button",{onClick:()=>l(!0),title:"Appearance",className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[u==="dark"?i.jsx(Cp,{className:"w-5 h-5"}):i.jsx(c1,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Appearance"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center lg:justify-start gap-3 p-3 rounded-xl text-brand-text-muted hover:text-white hover:bg-white/5 transition",children:[i.jsx(Db,{className:"w-5 h-5"}),i.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Guide"})]})]})]})})},Bv=({character:a,onSave:s,onClose:r})=>{var q,ie;const[o,u]=ne.useState("stats"),[l,d]=ne.useState(!1),[h,p]=ne.useState(a.visualStats||{height:"",build:"",hairColor:"",eyeColor:"",distinguishingFeatures:""}),[m,y]=ne.useState(a.outfits||[]),[w,j]=ne.useState(a.activeOutfitId||((ie=(q=a.outfits)==null?void 0:q[0])==null?void 0:ie.id)||""),[g,L]=ne.useState(""),[N,A]=ne.useState(""),_=ne.useRef(null),T=ne.useRef(null),D=()=>{s(a.id,{visualStats:h,outfits:m,activeOutfitId:w}),r()},F=async se=>{var O;const I=(O=se.target.files)==null?void 0:O[0];if(I){d(!0);try{const Y=await Wh(I,"PHYSICAL_TRAITS");Y.description&&p(E=>({...E,distinguishingFeatures:(E.distinguishingFeatures+`
`+Y.description).trim()}))}catch(Y){console.error("Analysis failed",Y)}finally{d(!1)}}},B=()=>{if(!g.trim())return;const se={id:`outfit_${Date.now()}`,name:g,description:N},I=[...m,se];y(I),w||j(se.id),L(""),A("")},ce=se=>{y(I=>I.filter(O=>O.id!==se)),w===se&&j("")},U=async se=>{var O;const I=(O=se.target.files)==null?void 0:O[0];if(I){d(!0);try{const Y=await Wh(I,"OUTFIT_DETAILS");Y.description&&A(Y.description)}catch(Y){console.error("Analysis failed",Y)}finally{d(!1)}}};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full max-w-4xl h-[85vh] flex flex-col border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:i.jsx(u1,{className:"w-6 h-6 text-brand-secondary"})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-brand-text font-serif",children:["Visual Profile: ",a.name]}),i.jsx("p",{className:"text-xs text-brand-text-muted",children:"Manage appearance for image generation consistency."})]})]}),i.jsx("button",{onClick:r,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5",children:i.jsx(tl,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"flex h-full overflow-hidden",children:[i.jsxs("div",{className:"w-48 border-r border-white/10 p-4 flex flex-col gap-2 bg-brand-bg/30",children:[i.jsxs("button",{onClick:()=>u("stats"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition ${o==="stats"?"bg-brand-secondary/20 text-white":"text-brand-text-muted hover:bg-white/5"}`,children:[i.jsx(Zc,{className:"w-4 h-4"})," Body & Face"]}),i.jsxs("button",{onClick:()=>u("outfits"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition ${o==="outfits"?"bg-brand-secondary/20 text-white":"text-brand-text-muted hover:bg-white/5"}`,children:[i.jsx(p2,{className:"w-4 h-4"})," Wardrobe"]})]}),i.jsxs("div",{className:"flex-grow p-6 overflow-y-auto custom-scrollbar bg-brand-bg/20",children:[o==="stats"&&i.jsx("div",{className:"space-y-6 max-w-2xl",children:i.jsxs("div",{className:"bg-brand-surface/40 p-4 rounded-xl border border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-brand-text",children:"Physical Attributes"}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>{var se;return(se=_.current)==null?void 0:se.click()},disabled:l,className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition",children:[l?i.jsx(Gr,{className:"w-3 h-3 animate-spin"}):i.jsx(df,{className:"w-3 h-3"}),l?"Analyzing...":"Analyze Image"]}),i.jsx("input",{type:"file",ref:_,className:"hidden",accept:"image/*",onChange:F})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Height"}),i.jsx("input",{type:"text",value:h.height,onChange:se=>p({...h,height:se.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. 6'2, Tall"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Body Build"}),i.jsx("input",{type:"text",value:h.build,onChange:se=>p({...h,build:se.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Muscular, Slender"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Hair Color/Style"}),i.jsx("input",{type:"text",value:h.hairColor,onChange:se=>p({...h,hairColor:se.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Short black, curly red"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Eye Color"}),i.jsx("input",{type:"text",value:h.eyeColor,onChange:se=>p({...h,eyeColor:se.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary",placeholder:"e.g. Piercing blue"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-brand-text-muted uppercase mb-1",children:"Distinguishing Features"}),i.jsx("textarea",{rows:4,value:h.distinguishingFeatures,onChange:se=>p({...h,distinguishingFeatures:se.target.value}),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm focus:ring-1 focus:ring-brand-secondary resize-none",placeholder:"Scars, tattoos, glasses, facial structure..."})]})]})}),o==="outfits"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(se=>i.jsxs("div",{onClick:()=>j(se.id),className:`p-4 rounded-xl border transition-all cursor-pointer group relative ${w===se.id?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-surface/40 border-white/5 hover:border-white/20"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(p2,{className:`w-4 h-4 ${w===se.id?"text-brand-secondary":"text-brand-text-muted"}`}),i.jsx("h4",{className:"font-bold text-brand-text",children:se.name})]}),w===se.id&&i.jsx("span",{className:"text-[10px] bg-brand-secondary text-white px-2 py-0.5 rounded-full",children:"Active"})]}),i.jsx("p",{className:"text-sm text-brand-text-muted line-clamp-3",children:se.description}),i.jsx("button",{onClick:I=>{I.stopPropagation(),ce(se.id)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 p-1.5 bg-red-900/50 text-red-400 hover:text-white rounded-lg transition",children:i.jsx(Fl,{className:"w-3 h-3"})})]},se.id))}),i.jsxs("div",{className:"bg-brand-bg/30 border-2 border-dashed border-white/10 rounded-xl p-6",children:[i.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-4 flex items-center gap-2",children:[i.jsx(Zo,{className:"w-4 h-4"})," Add New Outfit"]}),i.jsxs("div",{className:"flex gap-4 mb-4",children:[i.jsx("input",{type:"text",value:g,onChange:se=>L(se.target.value),placeholder:"Outfit Name (e.g. Battle Armor)",className:"flex-1 bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm"}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>{var se;return(se=T.current)==null?void 0:se.click()},disabled:l,className:"h-full flex items-center gap-2 bg-brand-primary/50 hover:bg-brand-primary text-white px-4 py-2 rounded-lg transition text-sm",title:"Upload image to describe outfit",children:l?i.jsx(Gr,{className:"w-4 h-4 animate-spin"}):i.jsx(si,{className:"w-4 h-4"})}),i.jsx("input",{type:"file",ref:T,className:"hidden",accept:"image/*",onChange:U})]})]}),i.jsx("textarea",{value:N,onChange:se=>A(se.target.value),rows:3,placeholder:"Detailed description of clothing, colors, materials...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-lg px-3 py-2 text-sm mb-4 resize-none"}),i.jsx("button",{onClick:B,disabled:!g.trim(),className:"w-full bg-brand-secondary/20 hover:bg-brand-secondary text-brand-secondary hover:text-white font-bold py-2 rounded-lg transition disabled:opacity-50",children:"Add Outfit"})]})]})]})]}),i.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl",children:[i.jsx("button",{onClick:r,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition",children:"Cancel"}),i.jsxs("button",{onClick:D,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20",children:[i.jsx(Xc,{className:"w-5 h-5"})," Save Visuals"]})]})]})})},Pv=a=>{switch(a){case wt.PROTAGONIST:return"#fbbF24";case wt.ANTAGONIST:return"#f87171";case wt.DEUTERAGONIST:return"#6ee7b7";case wt.MENTOR:return"#60a5fa";case wt.LOVE_INTEREST:return"#f472b6";case wt.FOIL:return"#c084fc";default:return"#9ca3af"}},Uv=({data:a})=>{const l=Math.min(400,300)/2-40,d=ne.useMemo(()=>{const h=new Map,p=2*Math.PI/a.nodes.length;return a.nodes.forEach((m,y)=>{const w=200+l*Math.cos(y*p-Math.PI/2),j=150+l*Math.sin(y*p-Math.PI/2);h.set(m.id,{x:w,y:j})}),h},[a.nodes,200,150,l]);return i.jsxs("svg",{viewBox:"0 0 400 300",className:"w-full h-auto",children:[a.links.map((h,p)=>{const m=d.get(h.source),y=d.get(h.target);if(!m||!y)return null;const w=(m.x+y.x)/2,j=(m.y+y.y)/2,g={stroke:"#4b5563",strokeWidth:h.strength==="Strong"?2:1,strokeDasharray:h.strength==="Weak"?"4 2":"none"};return i.jsxs("g",{children:[i.jsx("line",{x1:m.x,y1:m.y,x2:y.x,y2:y.y,style:g}),i.jsx("text",{x:w,y:j,fill:"#d1d5db",fontSize:"8",textAnchor:"middle",dominantBaseline:"middle",className:"font-sans",paintOrder:"stroke",stroke:"#16213e",strokeWidth:"2px",strokeLinecap:"butt",strokeLinejoin:"miter",children:h.dynamic})]},`${h.source}-${h.target}-${p}`)}),a.nodes.map(h=>{const p=d.get(h.id);if(!p)return null;const m=Pv(h.type);return i.jsxs("g",{children:[i.jsx("circle",{cx:p.x,cy:p.y,r:"15",fill:m,stroke:"#16213e",strokeWidth:"2"}),i.jsx("text",{x:p.x,y:p.y+25,fill:"#f3f4f6",fontSize:"10",textAnchor:"middle",className:"font-bold font-serif",children:h.name})]},h.id)})]})},Fv=({generatedContent:a,isLoading:s,loadingMessage:r,error:o,onGenerateTimeline:u,onUpdateScene:l,onSave:d})=>{const[h,p]=ne.useState("idle"),[m,y]=ne.useState(!1),[w,j]=ne.useState(!1),g=()=>{if(!(a!=null&&a.content))return"";const{content:D,type:F}=a;if(typeof D=="string")return D;if(Array.isArray(D)){if(F==="OUTLINE"){const B=D;let ce="",U="";return B.forEach(q=>{q.act!==U&&(U=q.act,ce+=`
## ${U} ##

`),ce+=`Title: ${q.title}
Summary: ${q.summary}

`}),ce}return D.map(B=>`Title: ${B.title}
Summary: ${B.summary}`).join(`

`)}if(typeof D=="object"){if("name"in D&&"appearance"in D){const B=D;return`Name: ${B.name}

Appearance: ${B.appearance}

History: ${B.history}

Significance: ${B.significance}`}return JSON.stringify(D,null,2)}return""},L=()=>{const D=g();D&&(navigator.clipboard.writeText(D),p("copied"),setTimeout(()=>p("idle"),2e3))},N=()=>{const D=g();if(D){const F=new Blob([D],{type:"text/plain"}),B=URL.createObjectURL(F),ce=document.createElement("a");ce.href=B;const U=(a==null?void 0:a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase())||"generated_content";ce.download=`${U}.txt`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(B)}},A=()=>{typeof(a==null?void 0:a.content)=="string"&&u(a.content)},_=()=>{a&&a.type===gt.SETTING_GENERATOR&&a.sourceId&&l&&typeof a.content=="string"&&(l(a.sourceId,{settingDescription:a.content}),y(!0),setTimeout(()=>y(!1),3e3))},T=()=>{if(!a)return null;if(a.type==="RELATIONSHIP_WEB_VISUAL"&&typeof a.content=="object"&&"nodes"in a.content)return i.jsx(Uv,{data:a.content});if(a.type===gt.OUTLINE_GENERATOR&&Array.isArray(a.content)){const B=a.content.reduce((ce,U)=>((ce[U.act]=ce[U.act]||[]).push(U),ce),{});return i.jsx("div",{className:"space-y-4",children:Object.entries(B).map(([ce,U])=>i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-bold text-brand-secondary font-serif mb-2 border-b border-brand-primary/50 pb-1",children:ce}),i.jsx("div",{className:"space-y-3",children:U.map((q,ie)=>i.jsxs("div",{className:"bg-brand-bg/40 p-3 rounded-lg border-l-4 border-brand-primary hover:bg-brand-bg/60 transition",children:[i.jsx("h5",{className:"font-bold text-brand-text",children:q.title}),i.jsx("p",{className:"text-sm text-brand-text-muted font-serif mt-1",children:q.summary})]},ie))})]},ce))})}if(a.type==="OBJECT_DATA"&&typeof a.content=="object"&&"name"in a.content){const F=a.content;return i.jsxs("div",{className:"space-y-4 text-brand-text-muted font-serif",children:[i.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[i.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"Appearance"}),i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:F.appearance})]}),i.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[i.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"History"}),i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:F.history})]}),i.jsxs("div",{className:"bg-brand-bg/30 p-3 rounded-lg border border-brand-primary/20",children:[i.jsx("h4",{className:"font-bold text-brand-text text-sm uppercase tracking-wider mb-1",children:"Significance"}),i.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:F.significance})]})]})}if(a.type==="TIMELINE"&&typeof a.content=="string")return i.jsx("p",{className:"whitespace-pre-wrap font-serif leading-relaxed text-brand-secondary/90",children:a.content});if(Array.isArray(a.content))return i.jsx("div",{className:"space-y-3",children:a.content.map((F,B)=>i.jsxs("div",{className:"bg-brand-bg/40 p-3 rounded-lg border-l-4 border-brand-secondary hover:bg-brand-bg/60 transition",children:[i.jsx("h4",{className:"font-bold text-brand-text",children:F.title}),i.jsx("p",{className:"text-sm text-brand-text-muted font-serif mt-1",children:F.summary})]},B))});let D=a.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br />");return i.jsx("div",{className:"prose prose-invert max-w-none prose-p:text-brand-text prose-strong:text-brand-text-muted whitespace-pre-wrap font-serif leading-relaxed text-base",dangerouslySetInnerHTML:{__html:D}})};return i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsx("div",{className:"flex items-center gap-3",children:a&&!s&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:L,title:"Copy to Clipboard",className:"text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60",children:h==="copied"?i.jsx("span",{className:"text-xs text-green-400 font-bold px-1",children:"Copied!"}):i.jsx(i1,{className:"w-4 h-4"})}),i.jsx("button",{onClick:N,title:"Download as Text",className:"text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60",children:i.jsx(ro,{className:"w-4 h-4"})}),d&&i.jsx("button",{onClick:()=>{a&&(d(a),j(!0),setTimeout(()=>j(!1),2e3))},title:"Save to Materials",className:`text-brand-text-muted hover:text-white transition bg-brand-bg/40 p-2 rounded-full hover:bg-brand-bg/60 ${w?"text-green-400":""}`,children:w?i.jsx("span",{className:"text-xs font-bold px-1",children:"Saved!"}):i.jsx(a1,{className:"w-4 h-4"})}),a.type===gt.SETTING_GENERATOR&&a.sourceId&&i.jsxs("button",{onClick:_,disabled:m,className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold transition ${m?"bg-green-500/20 text-green-400":"bg-brand-secondary/20 text-brand-secondary hover:bg-brand-secondary hover:text-white"}`,children:[i.jsx(Xo,{className:"w-3 h-3"}),m?"Updated Scene!":"Update Scene Setting"]})]})})}),i.jsxs("div",{className:"bg-brand-primary/30 rounded-xl border border-brand-primary/40 flex-grow p-6 overflow-y-auto relative min-h-[200px] custom-scrollbar shadow-inner",children:[s&&i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-brand-surface/80 backdrop-blur-sm z-10 rounded-xl",children:[i.jsx(Op,{}),i.jsx("p",{className:"mt-3 text-brand-text-muted font-medium animate-pulse",children:r||"Weaving magic..."})]}),o&&i.jsx("div",{className:"text-red-400 p-4 bg-red-900/30 border border-red-500/30 rounded-xl whitespace-pre-wrap",children:o}),!s&&!o&&!a&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-brand-text-muted/50",children:[i.jsx(Ss,{className:"w-20 h-20 mb-4 opacity-20"}),i.jsx("p",{className:"text-lg font-semibold",children:"Your story awaits."}),i.jsx("p",{className:"text-sm opacity-70",children:"Select a tool to start generating content."})]}),a&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-2xl font-bold text-brand-secondary font-serif border-b border-white/10 pb-2",children:a.title}),T(),a.type===gt.PLOT_IDEAS&&!s&&i.jsx("div",{className:"pt-6 text-center",children:i.jsxs("button",{onClick:A,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-500 hover:to-teal-500 text-white font-bold py-3 px-6 rounded-full transition duration-300 flex items-center gap-2 mx-auto shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[i.jsx(uf,{className:"w-5 h-5"}),"Generate Story Timeline"]})})]})]})]})},qv=({generatedContent:a,onClose:s,isLoading:r,loadingMessage:o,error:u,onGenerateTimeline:l,onUpdateScene:d,onSave:h})=>i.jsx(tf,{isOpen:!0,onClose:s,title:a.title||"Generated Output",maxWidth:"4xl",children:i.jsx("div",{className:"max-h-[70vh] flex flex-col",children:i.jsx(Fv,{generatedContent:a,isLoading:r,loadingMessage:o,error:u,onGenerateTimeline:l,onUpdateScene:d,onSave:p=>{h(p),s()}})})}),lp=[{name:"Cosmic (Default)",primary:"99 102 241",secondary:"139 92 246",accent:"56 189 248",hex:"#8B5CF6"},{name:"Nature",primary:"16 185 129",secondary:"5 150 105",accent:"132 204 22",hex:"#10B981"},{name:"Sunset",primary:"249 115 22",secondary:"234 88 12",accent:"251 113 133",hex:"#F97316"},{name:"Ocean",primary:"59 130 246",secondary:"37 99 235",accent:"34 211 238",hex:"#3B82F6"},{name:"Berry",primary:"219 39 119",secondary:"190 24 93",accent:"244 114 182",hex:"#DB2777"}],Hv=({isOpen:a,onClose:s,currentTheme:r,onToggleTheme:o,currentThemeColorName:u,onSelectThemeColor:l})=>a?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"w-full max-w-md bg-brand-surface border border-white/10 rounded-2xl shadow-2xl p-6 relative animate-in zoom-in-95 duration-200",children:[i.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-brand-text-muted hover:text-white transition",children:i.jsx(tl,{className:"w-5 h-5"})}),i.jsx("h2",{className:"text-2xl font-serif font-bold text-brand-text mb-6",children:"Appearance"}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Display Mode"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>r!=="light"&&o(),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition ${r==="light"?"bg-brand-secondary/10 border-brand-secondary text-brand-secondary":"bg-white/5 border-transparent text-brand-text-muted hover:bg-white/10"}`,children:[i.jsx(Cp,{className:"w-6 h-6"}),i.jsx("span",{className:"font-medium",children:"Light"})]}),i.jsxs("button",{onClick:()=>r!=="dark"&&o(),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition ${r==="dark"?"bg-brand-secondary/10 border-brand-secondary text-brand-secondary":"bg-white/5 border-transparent text-brand-text-muted hover:bg-white/10"}`,children:[i.jsx(c1,{className:"w-6 h-6"}),i.jsx("span",{className:"font-medium",children:"Dark"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Accent Color"}),i.jsx("div",{className:"grid grid-cols-5 gap-3",children:lp.map(d=>i.jsx("button",{onClick:()=>l(d),className:`group relative w-full aspect-square rounded-full flex items-center justify-center transition-transform hover:scale-110 ${u===d.name?"ring-2 ring-white ring-offset-2 ring-offset-brand-bg":""}`,style:{backgroundColor:d.hex},title:d.name,children:u===d.name&&i.jsx(Pb,{className:"w-5 h-5 text-white drop-shadow-md"})},d.name))})]})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 flex justify-end",children:i.jsx("button",{onClick:s,className:"px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-opacity-90 transition font-medium",children:"Done"})})]})}):null,Gv=Array.from({length:21},(a,s)=>s*50),Vv=["1:2","9:16","2:3","3:4","5:6","1:1","6:5","4:3","3:2","16:9","2:1"],Yv=["5","6","6.1","7"],Wv=({scene:a,onGenerateStoryboard:s,onGenerateSketch:r,onUpdateShot:o,onClose:u,isGenerating:l})=>{const[d,h]=ne.useState(null),p=ne.useRef(null),[m,y]=ne.useState(null),[w,j]=ne.useState(100),[g,L]=ne.useState("16:9"),[N,A]=ne.useState("6"),_=(U,q)=>{navigator.clipboard.writeText(U),h(q),setTimeout(()=>h(null),2e3)},T=U=>{var ie;const q=(ie=U.target.files)==null?void 0:ie[0];if(q&&m){const se=new FileReader;se.onloadend=()=>{o(m,{finalImage:se.result}),y(null)},se.readAsDataURL(q)}},D=U=>{var q;y(U),(q=p.current)==null||q.click()},F=a.storyboard||[],B=!!a.script,ce=!!a.settingDescription;return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-brand-bg w-full h-full max-w-[95vw] max-h-[95vh] rounded-2xl shadow-2xl border border-white/10 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-brand-surface",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-brand-secondary/20 rounded-lg text-brand-secondary",children:i.jsx(Pl,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-brand-text font-serif",children:["Storyboard: ",a.title]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[i.jsx("span",{className:`px-2 py-0.5 rounded ${B?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:B?"Script Ready":"No Script"}),i.jsx("span",{className:`px-2 py-0.5 rounded ${ce?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:ce?"Setting Ready":"No Setting"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex gap-2 mr-2",children:[i.jsx("select",{value:N,onChange:U=>A(U.target.value),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Midjourney Version",children:Yv.map(U=>i.jsxs("option",{value:U,children:["v",U]},U))}),i.jsx("select",{value:g,onChange:U=>L(U.target.value),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Aspect Ratio",children:Vv.map(U=>i.jsx("option",{value:U,children:U},U))}),i.jsx("select",{value:w,onChange:U=>j(Number(U.target.value)),className:"bg-black/20 border border-white/10 rounded px-2 py-1 text-xs text-brand-text focus:outline-none focus:border-brand-secondary",title:"Stylize",children:Gv.map(U=>i.jsxs("option",{value:U,children:["s",U]},U))})]}),i.jsxs("button",{onClick:()=>s({stylize:w,aspectRatio:g,version:N}),disabled:l,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2 px-6 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[l?i.jsx(Op,{}):i.jsx(Gr,{className:"w-5 h-5"}),F.length>0?"Regenerate Shots":"Generate Storyboard"]}),i.jsx("button",{onClick:u,className:"p-2 text-brand-text-muted hover:text-white transition rounded-lg hover:bg-white/5",title:"Close","aria-label":"Close",children:i.jsx(tl,{className:"w-8 h-8"})})]})]}),i.jsx("div",{className:"flex-grow overflow-y-auto p-6 bg-brand-bg/50 custom-scrollbar",children:F.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-brand-text-muted opacity-50",children:[i.jsx(Pl,{className:"w-24 h-24 mb-4"}),i.jsx("p",{className:"text-lg",children:"No shots generated yet."}),i.jsx("p",{className:"text-sm max-w-md text-center mt-2",children:"The AI will analyze the script, setting, and characters to create a cinematic shot list with sketches."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:F.map((U,q)=>i.jsxs("div",{className:"bg-brand-surface rounded-xl border border-white/5 overflow-hidden flex flex-col shadow-lg group hover:border-brand-secondary/30 transition-all duration-300",children:[i.jsxs("div",{className:"p-3 bg-black/20 border-b border-white/5 flex justify-between items-center",children:[i.jsxs("span",{className:"text-xs font-mono text-brand-text-muted bg-white/5 px-2 py-1 rounded",children:["Shot ",q+1]}),i.jsx("span",{className:"font-bold text-sm text-brand-secondary",children:U.shotType})]}),i.jsxs("div",{className:"relative aspect-video bg-black flex items-center justify-center overflow-hidden",children:[U.finalImage?i.jsx("img",{src:U.finalImage,alt:"Final",className:"w-full h-full object-cover"}):U.sketchImage?i.jsx("img",{src:U.sketchImage.startsWith("data:")?U.sketchImage:`data:image/jpeg;base64,${U.sketchImage}`,alt:"Sketch",className:"w-full h-full object-cover opacity-80 grayscale contrast-125"}):i.jsxs("div",{className:"text-center p-4",children:[i.jsxs("p",{className:"text-xs text-brand-text-muted mb-2 italic",children:['"',U.visualDescription,'"']}),i.jsx("button",{onClick:()=>r(U.id,U.visualDescription),className:"text-xs bg-brand-primary/50 hover:bg-brand-secondary text-white px-3 py-1.5 rounded-full transition",children:"Generate Sketch"})]}),i.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[i.jsx("button",{onClick:()=>D(U.id),className:"p-2 bg-white/10 hover:bg-brand-secondary rounded-full text-white transition",title:"Upload Midjourney Image",children:i.jsx(si,{className:"w-5 h-5"})}),!U.sketchImage&&!U.finalImage&&i.jsx("button",{onClick:()=>r(U.id,U.visualDescription),className:"p-2 bg-white/10 hover:bg-brand-secondary rounded-full text-white transition",title:"Generate Pencil Sketch",children:i.jsx(Gr,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"p-4 flex-grow flex flex-col gap-2 bg-brand-bg/30",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-brand-text-muted",children:"Midjourney Prompt"}),i.jsx("button",{onClick:()=>_(U.midjourneyPrompt,U.id),className:`text-xs flex items-center gap-1 ${d===U.id?"text-green-400":"text-brand-text-muted hover:text-white"}`,children:d===U.id?"Copied!":i.jsxs(i.Fragment,{children:[i.jsx(ro,{className:"w-3 h-3 rotate-180"})," Copy"]})})]}),i.jsx("p",{className:"text-xs text-brand-text-muted font-mono bg-black/30 p-2 rounded border border-white/5 line-clamp-3 hover:line-clamp-none transition-all cursor-text select-all",children:U.midjourneyPrompt})]})]},U.id))})}),i.jsx("input",{type:"file",ref:p,className:"hidden",accept:"image/*",onChange:T,"aria-label":"Upload Image",title:"Upload Image"})]})})},$v={[gt.DIALOGUE_GENERATOR]:{title:"Dialogue Generator",description:"Select exactly two characters to generate a conversation.",minChars:2,maxChars:2,minScenes:0,showChars:!0,showScenes:!1},[gt.TRANSITION]:{title:"Scene Transition",description:"Select exactly two scenes to generate a narrative bridge between them.",minChars:0,minScenes:2,maxScenes:2,showChars:!1,showScenes:!0},[gt.RELATIONSHIP_WEB]:{title:"Relationship Web",description:"Select at least two characters to map their dynamics.",minChars:2,minScenes:0,showChars:!0,showScenes:!1},[gt.CHAPTER]:{title:"Chapter Writer",description:"Select the characters present in this chapter and any previous scenes for context.",minChars:1,minScenes:0,showChars:!0,showScenes:!0},[gt.PLOT_IDEAS]:{title:"Plot Ideas",description:"Select key characters and scenes to ground the plot suggestions.",minChars:0,minScenes:0,showChars:!0,showScenes:!0},[gt.MIDJOURNEY_PROMPTS]:{title:"Midjourney Prompt Writer",description:"Select a scene to visualize and the characters present. Uses character profiles and uploaded images for accuracy.",minChars:0,minScenes:1,maxScenes:1,showChars:!0,showScenes:!0},[gt.SETTING_GENERATOR]:{title:"Describe a Setting",description:"Select a specific scene to generate a detailed, multi-sensory description of its location.",minChars:0,minScenes:1,maxScenes:1,showChars:!1,showScenes:!0}},Xv=a=>{const s={className:"w-4 h-4"};switch(a){case"Protagonist":return i.jsx(wp,{...s,className:"w-4 h-4 text-amber-400"});case"Antagonist":return i.jsx(Np,{...s,className:"w-4 h-4 text-red-400"});case"Mentor":return i.jsx(jp,{...s,className:"w-4 h-4 text-blue-400"});case"Love Interest":return i.jsx(Sp,{...s,className:"w-4 h-4 text-pink-400"});default:return i.jsx(Zc,{...s,className:"w-4 h-4 text-gray-400"})}},Zv=({tool:a,characters:s,scenes:r,initialSelectedCharIds:o,initialSelectedSceneIds:u,onConfirm:l,onClose:d})=>{const h=$v[a],[p,m]=ne.useState(new Set(o)),[y,w]=ne.useState(new Set(u)),[j,g]=ne.useState(!1);if(ne.useEffect(()=>{if(!h)return;const A=p.size,_=y.size;let T=!0;A<h.minChars&&(T=!1),h.maxChars!==void 0&&A>h.maxChars&&(T=!1),_<h.minScenes&&(T=!1),h.maxScenes!==void 0&&_>h.maxScenes&&(T=!1),g(T)},[p,y,h]),!h)return null;const L=A=>{const _=new Set(p);_.has(A)?_.delete(A):_.add(A),m(_)},N=A=>{const _=new Set(y);h.maxScenes===1?(_.clear(),_.add(A)):_.has(A)?_.delete(A):_.add(A),w(_)};return i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:i.jsxs("div",{className:"glass-panel bg-brand-surface/95 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-white/10",children:[i.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10 bg-gradient-to-r from-brand-surface/50 to-brand-bg/50",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-brand-text flex items-center gap-2",children:[a===gt.MIDJOURNEY_PROMPTS?i.jsx(df,{className:"w-5 h-5 text-brand-secondary"}):a===gt.SETTING_GENERATOR?i.jsx(l1,{className:"w-5 h-5 text-brand-secondary"}):i.jsx(Gr,{className:"w-5 h-5 text-brand-secondary"}),h.title]}),i.jsx("p",{className:"text-sm text-brand-text-muted mt-1",children:h.description})]}),i.jsx("button",{onClick:d,className:"text-brand-text-muted hover:text-white transition p-1 rounded-lg hover:bg-white/5",children:i.jsx(tl,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-grow overflow-y-auto p-6 custom-scrollbar",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.showChars&&i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-between items-center mb-3",children:i.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider",children:["Characters ",i.jsxs("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${p.size>=h.minChars&&(h.maxChars===void 0||p.size<=h.maxChars)?"bg-green-500/20 text-green-400":"bg-brand-primary/40 text-brand-text-muted"}`,children:[p.size," / ",h.maxChars?h.maxChars:""]})]})}),i.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 max-h-[50vh] custom-scrollbar",children:s.length===0?i.jsx("p",{className:"text-sm italic text-brand-text-muted",children:"No characters available."}):s.map(A=>i.jsxs("div",{onClick:()=>L(A.id),className:`p-3 rounded-lg border transition-all cursor-pointer flex items-center gap-3 ${p.has(A.id)?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-bg/40 border-transparent hover:bg-brand-bg/60 hover:border-white/5"}`,children:[i.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border transition ${p.has(A.id)?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/50"}`,children:p.has(A.id)&&i.jsx(Jo,{className:"w-4 h-4 text-white"})}),i.jsx("div",{className:"flex-grow min-w-0",children:i.jsxs("div",{className:"flex items-center gap-2",children:[Xv(A.type),i.jsx("span",{className:`font-medium truncate ${p.has(A.id)?"text-brand-text":"text-brand-text-muted"}`,children:A.name})]})})]},A.id))})]}),h.showScenes&&i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-between items-center mb-3",children:i.jsxs("h3",{className:"text-sm font-bold text-brand-text-muted uppercase tracking-wider",children:["Scenes ",i.jsxs("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${y.size>=h.minScenes&&(h.maxScenes===void 0||y.size<=h.maxScenes)?"bg-green-500/20 text-green-400":"bg-brand-primary/40 text-brand-text-muted"}`,children:[y.size," / ",h.maxScenes?h.maxScenes:""]})]})}),i.jsx("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 max-h-[50vh] custom-scrollbar",children:r.length===0?i.jsx("p",{className:"text-sm italic text-brand-text-muted",children:"No scenes available."}):r.map((A,_)=>i.jsxs("div",{onClick:()=>N(A.id),className:`p-3 rounded-lg border transition-all cursor-pointer flex items-center gap-3 ${y.has(A.id)?"bg-teal-500/10 border-teal-500 ring-1 ring-teal-500/30":"bg-brand-bg/40 border-transparent hover:bg-brand-bg/60 hover:border-white/5"}`,children:[i.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border transition ${y.has(A.id)?"bg-teal-500 border-teal-500":"border-brand-text-muted/50"}`,children:y.has(A.id)&&i.jsx(Jo,{className:"w-4 h-4 text-white"})}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs text-brand-text-muted font-mono",children:["#",_+1]}),i.jsx("span",{className:`font-medium truncate ${y.has(A.id)?"text-brand-text":"text-brand-text-muted"}`,children:A.title})]}),i.jsx("p",{className:"text-xs text-brand-text-muted truncate opacity-70",children:A.summary})]})]},A.id))})]})]})}),i.jsxs("div",{className:"p-5 border-t border-white/10 flex justify-end gap-3 bg-brand-bg/20 rounded-b-xl",children:[i.jsx("button",{onClick:d,className:"px-5 py-2.5 rounded-xl text-brand-text-muted hover:bg-brand-primary/50 hover:text-white transition font-medium border border-transparent hover:border-white/5",children:"Cancel"}),i.jsxs("button",{onClick:()=>l(p,y),disabled:!j,className:"flex items-center gap-2 bg-brand-secondary text-white font-bold py-2.5 px-8 rounded-xl hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Gr,{className:"w-5 h-5"}),"Generate"]})]})]})})},Jv=({onGenerate:a,isLoading:s,characters:r,scenes:o,selectedCharacterIds:u,selectedSceneIds:l,onBatchUpdateSelection:d,hasContent:h})=>{const[p,m]=ne.useState(null),y=[{id:gt.CHAPTER,label:"Generate Chapter",icon:i.jsx(Ss,{className:"w-5 h-5"}),description:"Writes the next chapter based on selected characters and scenes.",color:"bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-rose-900/20",needsModal:!0},{id:gt.DIALOGUE_GENERATOR,label:"Dialogue Generator",icon:i.jsx(Mb,{className:"w-5 h-5"}),description:"Generates a dialogue snippet between two characters.",color:"bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 shadow-sky-900/20",needsModal:!0},{id:gt.MIDJOURNEY_PROMPTS,label:"Midjourney Prompt Writer",icon:i.jsx(df,{className:"w-5 h-5"}),description:"Generates a list of detailed visual prompts for scenes and characters.",color:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 shadow-indigo-900/20",needsModal:!0},{id:gt.SETTING_GENERATOR,label:"Describe a Setting",icon:i.jsx(l1,{className:"w-5 h-5"}),description:"Generates a rich, multi-sensory description of a specific scene's location.",color:"bg-gradient-to-r from-teal-400 to-cyan-500 hover:from-teal-500 hover:to-cyan-600 shadow-teal-900/20",needsModal:!0},{id:gt.RELATIONSHIP_WEB,label:"Relationship Web",icon:i.jsx(Cb,{className:"w-5 h-5"}),description:"Analyzes the dynamics between selected characters.",color:"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 shadow-purple-900/20",needsModal:!0},{id:gt.PLOT_IDEAS,label:"Plot Ideas",icon:i.jsx(yp,{className:"w-5 h-5"}),description:"Brainstorms new plot twists and ideas for your story.",color:"bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 shadow-amber-900/20",needsModal:!0},{id:gt.TRANSITION,label:"Generate Transition",icon:i.jsx(r1,{className:"w-5 h-5"}),description:"Generates a narrative transition between two scenes.",color:"bg-gradient-to-r from-emerald-400 to-teal-500 hover:from-emerald-500 hover:to-teal-600 shadow-emerald-900/20",needsModal:!0},{id:gt.MAP_GENERATOR,label:"Generate World Map",icon:i.jsx(Xo,{className:"w-5 h-5"}),description:"Analyzes all content to generate a world map with key locations.",color:"bg-gradient-to-r from-blue-400 to-indigo-500 hover:from-blue-500 hover:to-indigo-600 shadow-blue-900/20",needsModal:!1}],w=[{id:gt.OUTLINE_GENERATOR,label:"Generate Outline",icon:i.jsx(zb,{className:"w-5 h-5"}),description:"Generates a structured story outline based on your premise and characters.",color:"bg-gradient-to-r from-fuchsia-500 to-rose-500 hover:from-fuchsia-600 hover:to-rose-600 shadow-fuchsia-900/20",needsModal:!1},{id:gt.OBJECT_GENERATOR,label:"Invent Object/MacGuffin",icon:i.jsx(o1,{className:"w-5 h-5"}),description:"Creates a unique object or artifact with history and significance.",color:"bg-gradient-to-r from-indigo-400 to-violet-500 hover:from-indigo-500 hover:to-violet-600 shadow-indigo-900/20",needsModal:!1}],j=A=>{const _=u.size,T=l.size;switch(A){case gt.DIALOGUE_GENERATOR:return _===2;case gt.RELATIONSHIP_WEB:return _>=2;case gt.TRANSITION:return T===2;case gt.MIDJOURNEY_PROMPTS:case gt.SETTING_GENERATOR:return T===1;case gt.CHAPTER:return _>0&&T>0;default:return!1}},g=A=>{A.needsModal?m(A.id):a(A.id)},L=(A,_)=>{d("character",A),d("scene",_),p&&a(p,{characterIds:A,sceneIds:_}),m(null)},N=A=>{const _=s,T=j(A.id);return i.jsxs("button",{onClick:()=>g(A),disabled:_,className:`w-full flex items-center justify-start gap-3 text-white text-sm font-bold py-3 px-5 rounded-xl transition-all duration-300 border disabled:opacity-50 disabled:cursor-not-allowed 
                ${_?"bg-gray-700 border-white/10":T?`${A.color} border-white/40 ring-2 ring-white/20 scale-[1.02] shadow-xl`:`${A.color} border-white/10 shadow-lg hover:scale-[1.02] hover:border-white/20`}`,title:A.description,children:[i.jsxs("div",{className:"p-1.5 bg-white/20 rounded-lg backdrop-blur-sm relative",children:[A.icon,T&&i.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-white rounded-full animate-pulse shadow-sm"})]}),i.jsxs("div",{className:"flex flex-col items-start text-left",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[A.label,T&&i.jsx("span",{className:"text-[10px] bg-white/20 px-1.5 py-0.5 rounded-full uppercase tracking-wider font-extrabold",children:"Best Match"})]}),T&&i.jsx("span",{className:"text-[10px] font-normal opacity-90 mt-0.5",children:"Recommended based on selection"})]})]},A.id)};return i.jsxs(i.Fragment,{children:[p&&i.jsx(Zv,{tool:p,characters:r,scenes:o,initialSelectedCharIds:u,initialSelectedSceneIds:l,onClose:()=>m(null),onConfirm:L}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("div",{className:"grid grid-cols-1 gap-3",children:y.map(N)}),i.jsxs("div",{className:"pt-2",children:[i.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-brand-text-muted mb-3 border-b border-white/10 pb-2",children:"Brainstorming"}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:w.map(N)})]})]})]})},Qv=({onGenerate:a,isLoading:s})=>{const[r,o]=ne.useState(""),u=l=>{r.trim()&&a(r,l)};return i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("textarea",{value:r,onChange:l=>o(l.target.value),rows:4,placeholder:"Ask the AI to do anything with your story context... e.g., 'Write a scene where Kaelen confronts the Baron' or 'Suggest a new title for the story'.",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none",disabled:s}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx("button",{onClick:()=>u("selection"),disabled:s||!r.trim(),className:"w-full flex items-center justify-center gap-2 text-white font-bold py-2.5 px-4 rounded-xl transition duration-300 bg-blue-600/80 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-md border border-white/5",title:"Uses selected characters, scenes, and materials as context.",children:"Generate from Selection"}),i.jsx("button",{onClick:()=>u("all"),disabled:s||!r.trim(),className:"w-full flex items-center justify-center gap-2 text-white font-bold py-2.5 px-4 rounded-xl transition duration-300 bg-purple-600/80 hover:bg-purple-500 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-md border border-white/5",title:"Uses your story premise and ALL characters, scenes, and materials as context.",children:"Generate from All"})]})]})},Kv=({materials:a,onSelect:s})=>{const{deleteSavedMaterial:r}=ao(),o=l=>{const d={className:"w-4 h-4 text-brand-text-muted"};switch(l){case gt.CHAPTER:return i.jsx(Ss,{...d});case"CHARACTER_PROFILE":return i.jsx(xp,{...d});case"TIMELINE":return i.jsx(uf,{...d});case gt.SCENE_WRITER:return i.jsx(qu,{...d});case"IMAGE":return i.jsx(si,{...d});case"VIDEO":return i.jsx(Uc,{...d});default:return i.jsx(a1,{...d})}},u=(l,d)=>{if(l.stopPropagation(),typeof d.content!="string")return;const h=document.createElement("a");if(d.type==="IMAGE"||d.type.includes("VIDEO")){let p=d.content;!p.startsWith("data:")&&!p.startsWith("http")&&(p=`data:image/png;base64,${d.content}`),h.href=p,h.download=`${d.title.replace(/[^a-z0-9]/gi,"_")}.${d.type==="IMAGE"?"png":"mp4"}`}else{const p=new Blob([d.content],{type:"text/plain"});h.href=URL.createObjectURL(p),h.download=`${d.title.replace(/[^a-z0-9]/gi,"_")}.txt`}document.body.appendChild(h),h.click(),document.body.removeChild(h)};return a.length===0?i.jsx("div",{className:"p-4 text-center text-brand-text-muted text-xs italic border border-white/5 rounded-lg bg-white/5",children:"No recent generations yet. Start creating!"}):i.jsx("div",{className:"space-y-3",children:a.slice(0,10).map(l=>i.jsxs("div",{onClick:()=>s(l),className:"group relative flex items-start gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-brand-secondary/30 transition-all cursor-pointer overflow-hidden",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-black/20 flex items-center justify-center overflow-hidden border border-white/10",children:l.type==="IMAGE"&&typeof l.content=="string"?i.jsx("img",{src:l.content.startsWith("data:")?l.content:`data:image/png;base64,${l.content}`,alt:l.title,className:"w-full h-full object-cover"}):o(l.type)}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("h4",{className:"text-sm font-medium text-brand-text truncate pr-6",children:l.title}),i.jsx("p",{className:"text-[10px] text-brand-text-muted uppercase tracking-wider mt-0.5",children:l.type.replace(/_/g," ")})]}),i.jsxs("div",{className:"absolute right-2 top-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-brand-surface/90 rounded-lg p-1 backdrop-blur-sm shadow-lg border border-white/10",children:[i.jsx("button",{onClick:d=>u(d,l),className:"p-1.5 hover:bg-white/10 rounded text-brand-text-muted hover:text-brand-secondary transition",title:"Download",children:i.jsx(ro,{className:"w-3 h-3"})}),i.jsx("button",{onClick:d=>{d.stopPropagation(),r(l.id)},className:"p-1.5 hover:bg-red-500/10 rounded text-brand-text-muted hover:text-red-400 transition",title:"Delete",children:i.jsx(Fl,{className:"w-3 h-3"})})]})]},l.id))})},ey=({isRightPanelOpen:a,setIsRightPanelOpen:s,onGenerate:r,onGenerateWithContext:o,onGenerateTimeline:u,selectedCharacterIds:l,selectedSceneIds:d,onBatchUpdateSelection:h,filteredMaterials:p,onSaveMaterial:m,onViewImage:y})=>{const{isLoading:w,loadingMessage:j,error:g,generatedContent:L,setGeneratedContent:N,characters:A,scenes:_,deleteSavedMaterial:T,updateScene:D}=ao();return i.jsxs("aside",{className:`fixed inset-y-0 right-0 z-40 w-80 lg:w-96 glass-panel border-l border-white/10 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${a?"translate-x-0":"translate-x-full"}`,children:[i.jsx("button",{onClick:()=>s(!a),className:"absolute top-1/2 -left-3 w-6 h-12 bg-brand-surface border border-white/10 rounded-l-lg flex items-center justify-center text-brand-text-muted hover:text-white cursor-pointer z-50 shadow-md",title:"Toggle Assistant",children:a?i.jsx(Bl,{className:"w-4 h-4"}):i.jsx(Vc,{className:"w-4 h-4"})}),i.jsx("div",{className:"p-5 border-b border-white/5 bg-brand-surface/50 backdrop-blur-xl",children:i.jsxs("h2",{className:"text-lg font-bold text-brand-text flex items-center gap-2",children:[i.jsx(Gr,{className:"w-5 h-5 text-brand-secondary"}),"AI Assistant"]})}),i.jsxs("div",{className:"flex-grow overflow-y-auto p-4 custom-scrollbar space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Toolkit"}),i.jsx(Jv,{onGenerate:r,isLoading:w,characters:A,scenes:_,selectedCharacterIds:l,selectedSceneIds:d,onBatchUpdateSelection:h,hasContent:_.length>0})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Chat / Command"}),i.jsx(Qv,{onGenerate:o,isLoading:w})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3",children:"Recent Generations"}),i.jsx(Kv,{materials:p,onSelect:F=>{F.type==="IMAGE"?y(F):(N({title:F.title,content:F.content,type:F.type,sourceId:void 0}),s(!0))}})]})]})]})},ty=[{name:"Sci-Fi",premise:"In a future where humanity has colonized Mars, a lone scientist discovers an ancient alien artifact that threatens to unravel the fabric of reality."},{name:"Fantasy",premise:"A young elf, exiled from her forest home, must team up with a grizzled dwarf warrior to stop a blight that corrupts everything it touches."},{name:"Mystery",premise:"In the rain-soaked streets of a 1940s city, a cynical private detective takes on a case of a missing heiress that leads him into a web of conspiracy and betrayal."}],ny=({storyPremise:a,setStoryPremise:s,storyTextToAnalyze:r,setStoryTextToAnalyze:o,onAnalyze:u,isLoading:l})=>i.jsxs("div",{className:"flex flex-col gap-6 h-full",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"story-premise",className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Story Premise"}),i.jsx("textarea",{id:"story-premise",value:a,onChange:d=>s(d.target.value),rows:3,placeholder:"A world where memories can be traded as currency...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition resize-none"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:ty.map(d=>i.jsxs("button",{type:"button",onClick:()=>s(d.premise),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted px-3 py-1.5 rounded-full hover:bg-brand-secondary hover:text-white hover:border-brand-secondary transition",children:[d.name," Idea"]},d.name))})]}),i.jsxs("div",{className:"flex-grow flex flex-col",children:[i.jsx("label",{htmlFor:"story-importer",className:"block text-sm font-semibold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Story Importer"}),i.jsx("textarea",{id:"story-importer",value:r,onChange:d=>o(d.target.value),placeholder:"Paste your existing story, chapters, or notes here...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-3 text-brand-text focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition flex-grow resize-none min-h-[120px]"})]}),i.jsx("button",{onClick:u,disabled:l,className:"w-full flex items-center justify-center gap-2 bg-brand-secondary text-white font-bold py-3 px-4 rounded-xl hover:bg-opacity-90 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-brand-secondary/20",children:l?"Analyzing...":"Analyze Story"})]}),ay=({storyPremise:a,setStoryPremise:s,storyTextToAnalyze:r,setStoryTextToAnalyze:o,onAnalyze:u,isLoading:l,characters:d,scenes:h,savedMaterials:p,items:m,onCompileBook:y,onGenerate:w,filteredScenes:j,selectedSceneIds:g,onToggleSelect:L,onUpdateScene:N,onDeleteScene:A,onGenerateSceneDetails:_,onGenerateSceneImage:T,onOpenStoryboard:D,reorderScenes:F,onOpenSplitView:B,addScene:ce})=>{const{loadProject:U}=ao(),[q,ie]=ne.useState(Da.CINEMATIC),se=ne.useRef(null);return i.jsxs("div",{className:"flex flex-col gap-8",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:i.jsx(ny,{storyPremise:a,setStoryPremise:s,storyTextToAnalyze:r,setStoryTextToAnalyze:o,onAnalyze:u,isLoading:l})}),i.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5 flex flex-col justify-center items-center text-center space-y-4",children:[i.jsx("h3",{className:"text-xl font-serif font-bold text-brand-text",children:"Story Statistics"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-brand-secondary",children:d.length}),i.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Characters"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-brand-accent",children:h.length}),i.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Scenes"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:p.length}),i.jsx("p",{className:"text-xs text-brand-text-muted uppercase tracking-wider",children:"Saved Items"})]})]}),h.length>0&&i.jsxs("button",{onClick:y,className:"mt-4 flex items-center gap-2 bg-gradient-to-r from-brand-secondary to-brand-accent text-white font-bold py-2 px-6 rounded-full hover:opacity-90 transition shadow-lg transform hover:scale-105",children:[i.jsx(Ss,{className:"w-5 h-5"}),"Read Story"]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-end mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-2xl font-serif font-bold text-brand-text",children:"Scene List"}),i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:q,onChange:I=>ie(I.target.value),className:"appearance-none bg-brand-surface border border-white/10 text-xs px-3 py-1.5 rounded-full text-brand-text pr-8 focus:ring-1 focus:ring-brand-secondary outline-none","aria-label":"Image Style",children:Object.values(Da).map(I=>i.jsx("option",{value:I,children:I},I))}),i.jsx(si,{className:"w-3 h-3 absolute right-3 top-1/2 -translate-y-1/2 text-brand-text-muted pointer-events-none"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>w(gt.REASSESS_FLOW),disabled:l||h.length<2,className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition border border-white/10",children:[i.jsx(Eb,{className:"w-3 h-3"})," Reassess Flow"]}),i.jsx("input",{type:"file",ref:se,onChange:I=>{var Y;const O=(Y=I.target.files)==null?void 0:Y[0];O&&U(O),se.current&&(se.current.value="")},accept:".json",className:"hidden","aria-label":"Import Project"}),i.jsxs("button",{onClick:()=>{var I;return(I=se.current)==null?void 0:I.click()},className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-1.5 rounded-full transition border border-white/10",children:[i.jsx(_p,{className:"w-3 h-3"})," Import"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[j.map((I,O)=>i.jsx(Lp,{scene:I,isSelected:g.has(I.id),onToggleSelect:()=>L(I.id,"scene"),onUpdate:N,onDelete:()=>A(I.id),onExport:()=>{},allCharacters:d,allItems:m,isLoading:l,onGenerateDetails:_,onGenerateImage:Y=>T(Y,q),onOpenStoryboard:Y=>D(Y.id),isFirst:O===0,isLast:O===h.length-1,layout:"vertical",onMove:Y=>{if(Y==="up"&&O>0){const E=[...h];[E[O],E[O-1]]=[E[O-1],E[O]],F(E)}else if(Y==="down"&&O<h.length-1){const E=[...h];[E[O],E[O+1]]=[E[O+1],E[O]],F(E)}},onOpenSplitView:()=>B("scene",I.id)},I.id)),i.jsxs("button",{onClick:ce,className:"h-full min-h-[200px] border-2 border-dashed border-white/10 rounded-xl text-brand-text-muted hover:text-white hover:border-brand-secondary/50 hover:bg-brand-secondary/5 transition flex flex-col justify-center items-center gap-3 group",children:[i.jsx("div",{className:"p-3 bg-white/5 rounded-full group-hover:bg-white/10 transition",children:i.jsx(Zo,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-medium",children:"Add New Scene"})]})]})]})]})},E1={[wt.PROTAGONIST]:"The main character the story follows, whose fate is most closely tied to the resolution of the plot.",[wt.ANTAGONIST]:"The primary character or force that opposes the protagonist, creating the central conflict of the story.",[wt.DEUTERAGONIST]:"A secondary main character who is crucial to the plot and often serves as a close companion or counterpoint to the protagonist.",[wt.MENTOR]:"A wise and experienced character who guides, teaches, or provides aid to the protagonist.",[wt.LOVE_INTEREST]:"A character with whom another key character, often the protagonist, has a romantic relationship or tension.",[wt.FOIL]:"A character who contrasts with the protagonist to highlight particular qualities or traits of the main character.",[wt.SUPPORTING_CHARACTER]:"A recurring character who has a significant role in the story but is not the primary focus.",[wt.MINOR_CHARACTER]:"A character with a small, often brief role, used to advance the plot or reveal information about other characters."},ry=[{name:"Reluctant Hero",info:"A simple farmhand who discovers they are the chosen one destined to defeat a great evil, but they would rather live a quiet life.",traits:"Humble, Brave, Stubborn"},{name:"Charismatic Villain",info:"A charming and intelligent leader who believes their ruthless methods are a necessary evil to bring order to a chaotic world.",traits:"Cunning, Eloquent, Ruthless"},{name:"Quirky Mentor",info:"An eccentric old wizard who has forgotten more about magic than most will ever know, offering cryptic but profound advice.",traits:"Wise, Eccentric, Forgetful"}],iy={[wt.PROTAGONIST]:["Brave","Determined","Reluctant","Idealistic","Resilient","Empathetic"],[wt.ANTAGONIST]:["Ruthless","Cunning","Ambitious","Vengeful","Manipulative","Obsessive"],[wt.DEUTERAGONIST]:["Loyal","Supportive","Pragmatic","Protective","Reliable","Grounded"],[wt.MENTOR]:["Wise","Patient","Mysterious","Strict","Encouraging","World-weary"],[wt.LOVE_INTEREST]:["Charming","Compassionate","Independent","Witty","Devoted","Gentle"],[wt.FOIL]:["Reckless","Cynical","Arrogant","Cowardly","Chaotic","Optimistic"],[wt.SUPPORTING_CHARACTER]:["Friendly","Helpful","Observant","Funny","Resourceful","Dependable"],[wt.MINOR_CHARACTER]:["Talkative","Grumpy","Nervous","Suspicious","Clumsy","Forgettable"]},sy=({onCreateCharacter:a,isLoading:s})=>{var se;const[r,o]=ne.useState(""),[u,l]=ne.useState(wt.PROTAGONIST),[d,h]=ne.useState(""),[p,m]=ne.useState(""),[y,w]=ne.useState(""),[j,g]=ne.useState(""),[L,N]=ne.useState(null),[A,_]=ne.useState(null),[T,D]=ne.useState(!1),F=ne.useRef(null),B=I=>{if(I.preventDefault(),!r.trim()||!d.trim()){g("Name and initial info cannot be empty.");return}g(""),a(r,u,d,p,y,A||void 0),o(""),h(""),m(""),w(""),N(null),_(null)},ce=I=>{o(I.name),h(I.info),m(I.traits),w("")},U=I=>{p?p.toLowerCase().includes(I.toLowerCase())||m(O=>`${O}, ${I}`):m(I)},q=I=>{var Y;const O=(Y=I.target.files)==null?void 0:Y[0];if(O){N(O);const E=new FileReader;E.onloadend=()=>{_(E.result)},E.readAsDataURL(O)}},ie=async()=>{if(L){D(!0),g("");try{const I=await Wh(L);I.description&&h(O=>O?`${O}

[Visuals]: ${I.description}`:`[Visuals]: ${I.description}`),I.traits&&m(O=>O?`${O}, ${I.traits}`:I.traits)}catch(I){console.error(I),g("Failed to analyze image.")}finally{D(!1)}}};return i.jsx("div",{className:"flex flex-col gap-4",children:i.jsxs("form",{onSubmit:B,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"char-name",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Name"}),i.jsx("input",{id:"char-name",type:"text",value:r,onChange:I=>o(I.target.value),placeholder:"e.g., Kaelen the Shadowmancer",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"char-type",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Type"}),i.jsx("select",{id:"char-type",value:u,onChange:I=>l(I.target.value),className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition",children:Object.values(wt).map(I=>i.jsx("option",{value:I,children:I},I))}),i.jsx("p",{className:"text-xs text-brand-text-muted mt-2 p-3 bg-brand-primary/30 rounded-lg border border-brand-primary/30",children:E1[u]})]}),i.jsxs("div",{className:"bg-brand-primary/30 p-4 rounded-xl border border-brand-primary/40",children:[i.jsx("label",{className:"block text-sm font-semibold text-brand-text-muted mb-3",children:"Character Portrait (Optional)"}),i.jsxs("div",{className:"flex gap-4 items-start",children:[i.jsx("div",{onClick:()=>{var I;return(I=F.current)==null?void 0:I.click()},className:"w-24 h-24 flex-shrink-0 bg-brand-bg/50 border-2 border-dashed border-brand-text-muted/50 rounded-xl flex items-center justify-center cursor-pointer hover:border-brand-secondary hover:bg-brand-primary/50 transition overflow-hidden",children:A?i.jsx("img",{src:A,alt:"Preview",className:"w-full h-full object-cover"}):i.jsx(si,{className:"w-8 h-8 text-brand-text-muted"})}),i.jsx("input",{type:"file",ref:F,onChange:q,accept:"image/*",className:"hidden"}),i.jsxs("div",{className:"flex-grow pt-1",children:[i.jsx("p",{className:"text-xs text-brand-text-muted mb-3 leading-relaxed",children:"Upload an image to generate traits or use as the profile header."}),i.jsxs("button",{type:"button",onClick:ie,disabled:!L||T,className:"text-xs flex items-center gap-2 bg-brand-secondary/90 text-white px-3 py-2 rounded-lg hover:bg-brand-secondary transition disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[i.jsx(o1,{className:"w-3 h-3"}),T?"Analyzing Visuals...":"Analyze Image for Traits"]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"char-traits",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Key Traits"}),i.jsx("input",{id:"char-traits",type:"text",value:p,onChange:I=>m(I.target.value),placeholder:"e.g., Brave, Cunning, Loyal",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 items-center",children:[i.jsx("span",{className:"text-xs text-brand-text-muted font-semibold mr-1",children:"Quick Traits:"}),(se=iy[u])==null?void 0:se.map(I=>i.jsx("button",{type:"button",onClick:()=>U(I),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted hover:text-white hover:border-brand-secondary hover:bg-brand-secondary/80 px-2.5 py-1 rounded-full transition duration-200",children:I},I))]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"char-info",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Initial Info & Core Idea"}),i.jsx("textarea",{id:"char-info",value:d,onChange:I=>h(I.target.value),rows:3,placeholder:"A disgraced knight seeking redemption, haunted by the ghost of the king he failed to protect.",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"char-backstory",className:"block text-sm font-semibold text-brand-text-muted mb-1.5",children:"Character Backstory (Optional)"}),i.jsx("textarea",{id:"char-backstory",value:y,onChange:I=>w(I.target.value),rows:3,placeholder:"Detailed history, childhood, or key past events...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),i.jsx($h,{title:"Use a Template",defaultCollapsed:!0,children:i.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:ry.map(I=>i.jsx("button",{type:"button",onClick:()=>ce(I),className:"text-xs bg-brand-primary/40 text-brand-text-muted px-2 py-1 rounded-md hover:bg-brand-primary hover:text-white transition border border-transparent hover:border-brand-primary",children:I.name},I.name))})}),j&&i.jsx("p",{className:"text-red-400 text-sm p-2 bg-red-900/20 border border-red-900/30 rounded-md",children:j}),i.jsxs("button",{type:"submit",disabled:s||T,className:"w-full flex items-center justify-center gap-2 bg-brand-secondary text-white font-bold py-3 px-4 rounded-xl hover:bg-opacity-90 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-brand-secondary/20",children:[i.jsx(xp,{className:"w-5 h-5"}),s?"Generating...":"Create Character Profile"]})]})})},oy=a=>{switch(a){case wt.PROTAGONIST:return"#fbbF24";case wt.ANTAGONIST:return"#f87171";case wt.DEUTERAGONIST:return"#6ee7b7";case wt.MENTOR:return"#60a5fa";case wt.LOVE_INTEREST:return"#f472b6";case wt.FOIL:return"#c084fc";default:return"#9ca3af"}},ly=(a,s)=>{const r={className:"w-5 h-5 flex-shrink-0",style:{color:s}};switch(a){case wt.PROTAGONIST:return i.jsx(wp,{...r});case wt.ANTAGONIST:return i.jsx(Np,{...r});case wt.DEUTERAGONIST:return i.jsx(Yc,{...r});case wt.SUPPORTING_CHARACTER:return i.jsx(Yc,{...r});case wt.MENTOR:return i.jsx(jp,{...r});case wt.LOVE_INTEREST:return i.jsx(Sp,{...r});case wt.FOIL:return i.jsx(n1,{...r});case wt.MINOR_CHARACTER:return i.jsx(Zc,{...r});default:return null}},cy=()=>i.jsx("div",{className:"space-y-3",children:Object.values(wt).map(a=>{const s=oy(a),r=ly(a,s),o=E1[a];return i.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-white/5 transition",children:[r,i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-sm",style:{color:s},children:a}),i.jsx("p",{className:"text-xs text-brand-text-muted leading-relaxed",children:o})]})]},a)})}),uy=({onCreateCharacter:a,isLoading:s,filteredCharacters:r,selectedCharacterIds:o,onToggleSelect:u,onDeleteCharacter:l,onUpdateCharacter:d,onGenerateCharacterImage:h,onOpenVisuals:p,onOpenSplitView:m})=>{const[y,w]=ne.useState(Da.CONCEPT_ART);return i.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"xl:col-span-2 glass-card p-6 rounded-2xl border border-white/5",children:[i.jsx("h2",{className:"text-xl font-serif font-bold mb-4",children:"Character Builder"}),i.jsx(sy,{onCreateCharacter:a,isLoading:s})]}),i.jsxs("div",{className:"xl:col-span-1 glass-card p-6 rounded-2xl border border-white/5",children:[i.jsx("h2",{className:"text-xl font-serif font-bold mb-4",children:"Archetypes"}),i.jsx(cy,{})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-end mb-4",children:[i.jsx("h2",{className:"text-2xl font-serif font-bold",children:"Cast of Characters"}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("select",{value:y,onChange:j=>w(j.target.value),className:"appearance-none bg-brand-surface border border-white/10 text-xs px-3 py-1.5 rounded-full text-brand-text pr-8 focus:ring-1 focus:ring-brand-secondary outline-none","aria-label":"Image Style",children:Object.values(Da).map(j=>i.jsx("option",{value:j,children:j},j))}),i.jsx(si,{className:"w-3 h-3 absolute right-3 top-1/2 -translate-y-1/2 text-brand-text-muted pointer-events-none"})]})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:r.length>0?r.map(j=>i.jsx(f1,{character:j,isSelected:o.has(j.id),onToggleSelect:()=>u(j.id,"character"),onDelete:()=>l(j.id),onUpdate:d,onExport:()=>{},onGenerateImage:g=>h(g,y),onOpenVisuals:g=>p(g),onOpenSplitView:()=>m("character",j.id)},j.id)):i.jsxs("div",{className:"col-span-full text-center py-20 text-brand-text-muted",children:[i.jsx(Yc,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),i.jsx("p",{children:"No characters found. Create one to get started!"})]})})]})]})},dy=({mapData:a,selectedLocationIds:s,onToggleSelectLocation:r,onUpdateLocation:o,onExport:u,onViewScenes:l,isAddingPin:d,onAddPin:h})=>{const[p,m]=ne.useState(a.locations[0]||null),[y,w]=ne.useState(!1),[j,g]=ne.useState("");ne.useEffect(()=>{p?(g(p.description),w(!1)):a.locations.length>0?m(a.locations[0]):m(null)},[p,a.locations]);const L=()=>{p&&(o(p.id,{description:j}),w(!1))},N=A=>{if(d&&h){const _=A.currentTarget.getBoundingClientRect(),T=(A.clientX-_.left)/_.width*100,D=(A.clientY-_.top)/_.height*100;h(T,D)}};return i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("div",{className:"glass-card p-4 rounded-lg border border-white/10 bg-brand-surface/40 w-full",children:i.jsx("p",{className:"text-sm text-brand-text-muted font-serif italic leading-relaxed",children:a.worldDescription})}),i.jsx("button",{onClick:u,title:"Export Map Data",className:"ml-4 text-brand-text-muted hover:text-white transition p-2 rounded-lg hover:bg-white/10 border border-transparent hover:border-white/20",children:i.jsx(ro,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:`relative w-full aspect-video bg-[#0f172a] rounded-xl border border-brand-primary/50 overflow-hidden shadow-2xl group select-none ${d?"cursor-crosshair ring-2 ring-brand-primary ring-offset-2 ring-offset-black":""}`,onClick:N,children:[i.jsx("div",{className:"absolute inset-0 opacity-20 bg-[size:40px_40px] bg-[image:linear-gradient(rgba(56,189,248,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(56,189,248,0.1)_1px,transparent_1px)]"}),i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_20%,rgba(15,23,42,0.8)_100%)] pointer-events-none"}),i.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-10 pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[i.jsx("path",{d:"M0,50 Q25,20 50,50 T100,50",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"}),i.jsx("path",{d:"M0,70 Q40,40 70,70 T100,30",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"}),i.jsx("path",{d:"M0,30 Q30,60 60,30 T100,80",fill:"none",stroke:"currentColor",strokeWidth:"0.5",className:"text-brand-accent"})]}),a.locations.map(A=>i.jsx("button",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-300 z-10 group/pin left-[--x] top-[--y]",style:{"--x":`${A.x}%`,"--y":`${A.y}%`},onClick:_=>{_.stopPropagation(),m(A)},children:i.jsxs("div",{className:"relative flex flex-col items-center",children:[(p==null?void 0:p.id)===A.id&&i.jsx("span",{className:"absolute w-8 h-8 bg-brand-secondary/30 rounded-full animate-ping"}),i.jsx(h2,{className:`w-6 h-6 transition-transform duration-300 hover:scale-125 ${(p==null?void 0:p.id)===A.id?"text-brand-secondary drop-shadow-[0_0_10px_rgba(var(--color-secondary),1)]":"text-brand-text-muted hover:text-white"}`}),i.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover/pin:block z-20 whitespace-nowrap",children:[i.jsxs("div",{className:"bg-brand-surface/90 backdrop-blur-md border border-white/10 text-brand-text text-xs px-3 py-2 rounded-lg shadow-xl max-w-[200px]",children:[i.jsx("div",{className:"font-bold mb-1",children:A.name}),i.jsx("div",{className:"text-brand-text-muted text-[10px] whitespace-normal line-clamp-2 leading-tight",children:A.description})]}),i.jsx("div",{className:"w-2 h-2 bg-brand-surface/90 rotate-45 absolute left-1/2 -translate-x-1/2 -bottom-1 border-r border-b border-white/10"})]}),i.jsx("span",{className:`mt-1 text-[10px] font-bold tracking-wider uppercase shadow-black drop-shadow-md ${(p==null?void 0:p.id)===A.id?"text-brand-secondary":"text-brand-text-muted/70 group-hover/pin:text-white"}`,children:A.name})]})},A.id))]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-brand-text-muted uppercase tracking-wider mb-3 pb-2 border-b border-white/10",children:"Location Details"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.locations.map(A=>i.jsxs("div",{onClick:()=>m(A),className:`relative p-4 rounded-xl border transition-all duration-300 cursor-pointer group overflow-hidden ${(p==null?void 0:p.id)===A.id?"bg-brand-secondary/10 border-brand-secondary ring-1 ring-brand-secondary/30":"bg-brand-surface/40 border-white/5 hover:border-white/20 hover:bg-brand-surface/60"}`,children:[i.jsx("div",{className:`absolute top-3 right-3 w-3 h-3 rounded-full border ${(p==null?void 0:p.id)===A.id?"bg-brand-secondary border-brand-secondary":"border-brand-text-muted/30"}`}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(h2,{className:`w-4 h-4 ${(p==null?void 0:p.id)===A.id?"text-brand-secondary":"text-brand-text-muted"}`}),i.jsx("h4",{className:`font-bold text-sm ${(p==null?void 0:p.id)===A.id?"text-brand-text":"text-brand-text-muted group-hover:text-brand-text"}`,children:A.name})]}),(p==null?void 0:p.id)===A.id&&y?i.jsx("textarea",{value:j,onChange:_=>g(_.target.value),rows:3,onClick:_=>_.stopPropagation(),className:"w-full bg-black/20 border border-white/10 rounded-md p-2 text-xs text-brand-text focus:outline-none focus:border-brand-secondary resize-none","aria-label":"Location Description"}):i.jsx("p",{className:"text-xs text-brand-text-muted font-serif leading-relaxed line-clamp-4",children:A.description}),(p==null?void 0:p.id)===A.id&&i.jsx("div",{className:"mt-3 pt-2 border-t border-white/5 flex justify-end gap-2",children:y?i.jsx("button",{onClick:_=>{_.stopPropagation(),L()},className:"text-green-400 hover:text-green-300 text-xs font-bold px-2 py-1 rounded bg-green-900/20",children:"Save"}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:_=>{_.stopPropagation(),w(!0)},className:"text-brand-text-muted hover:text-white text-xs flex items-center gap-1 px-2 py-1 rounded hover:bg-white/5",children:[i.jsx($u,{className:"w-3 h-3"})," Edit"]}),l&&i.jsxs("button",{onClick:_=>{_.stopPropagation(),l(A.name)},className:"text-brand-secondary hover:text-white text-xs flex items-center gap-1 px-2 py-1 rounded hover:bg-brand-secondary/20",children:[i.jsx(Ss,{className:"w-3 h-3"})," View Scenes"]})]})})]},A.id))})]})]})},fy=({onGenerate:a,isLoading:s,mapData:r,selectedLocationIds:o,onToggleSelectLocation:u,onUpdateLocation:l,onExportData:d,onViewLocationScenes:h})=>{const[p,m]=ne.useState(!1),[y,w]=ne.useState(!1);return i.jsxs("div",{className:"h-full flex flex-col animate-in fade-in slide-in-from-bottom-4 duration-500 space-y-4",children:[i.jsxs("div",{className:"glass-panel p-4 rounded-xl border border-white/10 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:i.jsx(Xo,{className:"w-6 h-6 text-brand-secondary"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-serif font-bold text-white",children:"Story Map"}),i.jsx("p",{className:"text-xs text-brand-text-muted",children:"Geography & Locations"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>w(!y),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition ${y?"bg-brand-primary text-white":"bg-white/5 text-brand-text-muted hover:text-white hover:bg-white/10"}`,title:"Add Manual Location",children:[i.jsx(Zo,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Add Pin"})]}),i.jsxs("button",{onClick:()=>m(!p),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition ${p?"bg-white/10 text-white":"bg-white/5 text-brand-text-muted hover:text-white hover:bg-white/10"}`,title:"Map Settings",children:[i.jsx(Fb,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),i.jsx("div",{className:"h-6 w-px bg-white/10 mx-2"}),i.jsxs("button",{onClick:()=>a(gt.MAP_GENERATOR),disabled:s,className:"flex items-center gap-2 bg-brand-secondary text-white text-sm font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 transition shadow-lg shadow-brand-secondary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Xo,{className:"w-4 h-4"}),s?"Generating...":"Generate Map"]})]})]}),p&&i.jsxs("div",{className:"glass-panel p-4 rounded-xl border border-white/10 animate-in slide-in-from-top-2",children:[i.jsx("h3",{className:"text-sm font-bold text-brand-text mb-3",children:"Generation Settings"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Terrain Type"}),i.jsxs("select",{title:"Terrain Type",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[i.jsx("option",{children:"Fantasy (Forests, Mountains)"}),i.jsx("option",{children:"Sci-Fi (Planets, Space Stations)"}),i.jsx("option",{children:"Modern (Cities, Roads)"}),i.jsx("option",{children:"Post-Apocalyptic (Ruins, Wastelands)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Climate"}),i.jsxs("select",{title:"Climate",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[i.jsx("option",{children:"Temperate"}),i.jsx("option",{children:"Tropical"}),i.jsx("option",{children:"Arid / Desert"}),i.jsx("option",{children:"Arctic / Tundra"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-brand-text-muted mb-1",children:"Map Style"}),i.jsxs("select",{title:"Map Style",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:ring-1 focus:ring-brand-secondary outline-none",children:[i.jsx("option",{children:"Parchment / Hand Drawn"}),i.jsx("option",{children:"Satellite / Realistic"}),i.jsx("option",{children:"Blueprint / Schematic"}),i.jsx("option",{children:"Holographic"})]})]})]})]}),i.jsx("div",{className:"flex-grow glass-card rounded-2xl border border-white/5 overflow-hidden relative flex flex-col",children:r?i.jsx(dy,{mapData:r,selectedLocationIds:o,onToggleSelectLocation:j=>u(j,"location"),onUpdateLocation:l,onExport:()=>d("json"),onViewScenes:h,isAddingPin:y,onAddPin:(j,g)=>{console.log(`Add pin at ${j}, ${g}`),w(!1)}}):i.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-brand-text-muted",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-4",children:i.jsx(Xo,{className:"w-10 h-10 opacity-50"})}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"No Map Generated"}),i.jsx("p",{className:"text-sm opacity-70 max-w-md text-center",children:`Use the "Generate Map" button to create a world based on your story's context, or check your settings above.`})]})})]})},hy=[{name:"Story Ideas",prompt:"Generate some potential story ideas, themes, and character concepts based on this video."},{name:"Scene Description",prompt:"Analyze the cinematography, color palette, and setting in this video to create a rich, descriptive scene for a story."},{name:"Character Study",prompt:"Based on the main figure in this video, create a character profile, including their likely motivations, flaws, and backstory."}],py=({onAnalyze:a,isLoading:s})=>{const[r,o]=ne.useState("file"),[u,l]=ne.useState(null),[d,h]=ne.useState(""),[p,m]=ne.useState("Generate some potential story ideas, themes, and character concepts based on this video."),[y,w]=ne.useState(""),j=L=>{var A;const N=(A=L.target.files)==null?void 0:A[0];N&&(l(N),w(""))},g=()=>{if(r==="file"&&!u){w("Please select a video file to upload.");return}if(r==="url"&&!d.trim()){w("Please enter a YouTube URL.");return}if(!p.trim()){w("Please provide a prompt for the analysis.");return}w(""),a(r==="file"?u:null,r==="url"?d:"",p)};return i.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[i.jsxs("div",{className:"flex bg-brand-bg/40 rounded-lg p-1 border border-white/5",children:[i.jsx("button",{onClick:()=>o("file"),className:`w-1/2 py-1.5 rounded-md text-sm font-semibold transition ${r==="file"?"bg-brand-secondary text-white shadow-sm":"text-brand-text-muted hover:text-white"}`,children:"Upload Video"}),i.jsx("button",{onClick:()=>o("url"),className:`w-1/2 py-1.5 rounded-md text-sm font-semibold transition ${r==="url"?"bg-brand-secondary text-white shadow-sm":"text-brand-text-muted hover:text-white"}`,children:"YouTube URL"})]}),r==="file"?i.jsxs("div",{children:[i.jsx("label",{htmlFor:"video-upload",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Video File"}),i.jsx("input",{id:"video-upload",type:"file",accept:"video/*",onChange:j,className:"w-full text-sm text-brand-text file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/50 file:text-brand-secondary hover:file:bg-brand-primary transition cursor-pointer"}),u&&i.jsxs("p",{className:"text-xs text-brand-text-muted mt-2 pl-1",children:["Selected: ",i.jsx("span",{className:"text-brand-text",children:u.name})]})]}):i.jsxs("div",{children:[i.jsx("label",{htmlFor:"video-url",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"YouTube Video URL"}),i.jsx("input",{id:"video-url",type:"text",value:d,onChange:L=>h(L.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"video-prompt",className:"block text-xs font-bold text-brand-text-muted mb-2 uppercase tracking-wider",children:"Analysis Prompt"}),i.jsx("textarea",{id:"video-prompt",value:p,onChange:L=>m(L.target.value),rows:3,className:"w-full bg-brand-bg/50 border border-brand-primary/50 rounded-xl px-4 py-2.5 focus:ring-2 focus:ring-brand-secondary/50 focus:border-brand-secondary transition"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:hy.map(L=>i.jsx("button",{type:"button",onClick:()=>m(L.prompt),className:"text-xs bg-brand-primary/40 border border-brand-primary/50 text-brand-text-muted px-2.5 py-1 rounded-full hover:bg-brand-secondary hover:text-white hover:border-brand-secondary transition",children:L.name},L.name))})]}),y&&i.jsx("p",{className:"text-red-400 text-sm bg-red-900/20 p-2 rounded-lg border border-red-500/20",children:y}),i.jsxs("button",{onClick:g,disabled:s,className:"w-full flex items-center justify-center gap-2 bg-purple-600/90 text-white font-bold py-3 px-4 rounded-xl hover:bg-purple-500 transition duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg shadow-purple-900/20",children:[i.jsx(Lb,{className:"w-5 h-5"}),s?"Analyzing...":"Analyze for Inspiration"]})]})},my=({isLoading:a,onAnalyzeVideo:s})=>i.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-brand-secondary/20 rounded-lg",children:i.jsx(Uc,{className:"w-6 h-6 text-brand-secondary"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-serif font-bold text-white",children:"Visual Inspiration"}),i.jsx("p",{className:"text-xs text-brand-text-muted",children:"Video Analysis & Mood Boards"})]})]}),i.jsx(py,{onAnalyze:s,isLoading:a})]}),i.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5 opacity-50",children:[i.jsx("h3",{className:"text-lg font-bold text-brand-text mb-2",children:"World Lore (Coming Soon)"}),i.jsx("p",{className:"text-sm text-brand-text-muted",children:"Define the history, laws of physics, and magic systems of your world."})]})]}),gy=({scenes:a,allCharacters:s,selectedSceneIds:r,onToggleSelect:o,onUpdateScene:u,onDeleteScene:l,onAddScene:d,onReorderScenes:h,onExportScene:p,isLoading:m,onGenerateDetails:y,onGenerateImage:w,onMoveScene:j})=>{const g=ne.useRef(null),L=ne.useRef(null),N=(F,B)=>{g.current=B,F.dataTransfer.effectAllowed="move"},A=()=>{if(g.current&&L.current&&g.current!==L.current){const F=[...a],B=a.findIndex(q=>q.id===g.current),ce=a.findIndex(q=>q.id===L.current),[U]=F.splice(B,1);F.splice(ce,0,U),h(F)}g.current=null,L.current=null},[_,T]=Pc.useState(null),D=(F,B,ce)=>{L.current=B,T(ce)};return i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 pb-4",children:[a.map((F,B)=>i.jsxs("div",{className:"relative",draggable:!0,onDragStart:ce=>N(ce,F.id),onDragEnter:ce=>D(ce,F.id,B),onDragOver:ce=>ce.preventDefault(),onDragEnd:()=>{A(),T(null)},children:[_===B&&g.current!==F.id&&i.jsx("div",{className:"absolute -left-2 top-0 bottom-0 w-1 bg-brand-secondary rounded-full shadow-[0_0_10px_rgba(var(--color-secondary),0.8)] z-20 animate-pulse"}),i.jsx("div",{className:"absolute -top-2 -left-2 z-10 bg-brand-surface border border-brand-primary/50 text-xs font-mono text-brand-text-muted px-2 py-0.5 rounded-full shadow-sm",children:B+1}),i.jsx(Lp,{scene:F,isSelected:r.has(F.id),onToggleSelect:()=>o(F.id),onUpdate:u,onDelete:l,onExport:p,allCharacters:s,isLoading:m,onGenerateDetails:y,onGenerateImage:w,layout:"horizontal",onMove:j,isFirst:B===0,isLast:B===a.length-1})]},F.id)),i.jsxs("button",{onClick:d,title:"Add New Scene",className:"h-full min-h-[140px] flex flex-col items-center justify-center bg-brand-primary/10 border-2 border-dashed border-brand-primary/30 text-brand-text-muted hover:bg-brand-secondary/10 hover:text-brand-secondary hover:border-brand-secondary/50 transition-all duration-300 rounded-lg group gap-2",children:[i.jsx("div",{className:"p-3 bg-brand-primary/20 rounded-full group-hover:bg-brand-secondary/20 transition-colors",children:i.jsx(Zo,{className:"w-6 h-6"})}),i.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Add Scene"})]})]})},by=({onGenerate:a,scenes:s,allCharacters:r,selectedSceneIds:o,onToggleSelect:u,onUpdateScene:l,onDeleteScene:d,onAddScene:h,onReorderScenes:p,isLoading:m,onGenerateDetails:y,onGenerateImage:w})=>i.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:i.jsxs("div",{className:"glass-card p-6 rounded-2xl border border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-serif font-bold",children:"Story Timeline"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("button",{onClick:()=>a(gt.PLOT_IDEAS),className:"flex items-center gap-2 text-xs bg-brand-primary/50 hover:bg-brand-primary text-white px-3 py-2 rounded-lg transition",children:[i.jsx(yp,{className:"w-3 h-3"})," Brainstorm Plots"]})})]}),s.length>0?i.jsx(gy,{scenes:s,allCharacters:r,selectedSceneIds:o,onToggleSelect:j=>u(j,"scene"),onUpdateScene:l,onDeleteScene:d,onAddScene:h,onReorderScenes:p,onExportScene:()=>{},isLoading:m,onGenerateDetails:y,onGenerateImage:w,onMoveScene:(j,g)=>{}}):i.jsxs("div",{className:"text-center py-20 text-brand-text-muted",children:[i.jsx(uf,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),i.jsx("p",{children:"Add scenes to visualize your timeline."})]})]})}),xy=()=>{const{notes:a,addNote:s,updateNote:r,deleteNote:o}=ao(),[u,l]=ne.useState(null),[d,h]=ne.useState(""),p=ne.useMemo(()=>{if(!d)return a;const j=d.toLowerCase();return a.filter(g=>g.title.toLowerCase().includes(j)||g.content.toLowerCase().includes(j))},[a,d]),m=ne.useMemo(()=>a.find(j=>j.id===u),[a,u]),y=()=>{const j={id:`note_${Date.now()}`,title:"New Note",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(j),l(j.id)},w=(j,g)=>{j.stopPropagation(),window.confirm("Are you sure you want to delete this note?")&&(o(g),u===g&&l(null))};return i.jsxs("div",{className:"flex h-full animate-in fade-in duration-500",children:[i.jsxs("div",{className:"w-1/3 border-r border-white/10 flex flex-col bg-brand-surface/30 backdrop-blur-sm",children:[i.jsxs("div",{className:"p-4 border-b border-white/10 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold font-serif text-brand-text",children:"Notes"}),i.jsxs("button",{onClick:y,className:"p-2 bg-brand-primary hover:bg-brand-primary-hover text-white rounded-lg transition-colors flex items-center gap-2 text-sm font-medium",children:[i.jsx(Zo,{className:"w-4 h-4"}),"New Note"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-text-muted"}),i.jsx("input",{type:"text",placeholder:"Search notes...",value:d,onChange:j=>h(j.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg pl-9 pr-3 py-2 text-sm text-brand-text focus:ring-1 focus:ring-brand-secondary outline-none transition-all"})]})]}),i.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2",children:p.length===0?i.jsx("div",{className:"text-center text-brand-text-muted py-8 text-sm",children:"No notes found."}):p.map(j=>i.jsxs("div",{onClick:()=>l(j.id),className:`group p-3 rounded-lg cursor-pointer transition-all border ${u===j.id?"bg-brand-primary/10 border-brand-primary/30":"hover:bg-white/5 border-transparent hover:border-white/5"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("h3",{className:`font-medium truncate ${u===j.id?"text-brand-primary":"text-brand-text"}`,children:j.title||"Untitled Note"}),i.jsx("button",{onClick:g=>w(g,j.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",children:i.jsx(Fl,{className:"w-3.5 h-3.5"})})]}),i.jsx("p",{className:"text-xs text-brand-text-muted line-clamp-2",children:j.content||"No content..."}),i.jsx("div",{className:"mt-2 text-[10px] text-brand-text-muted/50",children:new Date(j.updatedAt).toLocaleDateString()})]},j.id))})]}),i.jsx("div",{className:"w-2/3 flex flex-col bg-brand-bg/50",children:m?i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"p-6 border-b border-white/10",children:[i.jsx("input",{type:"text",value:m.title,onChange:j=>r(m.id,{title:j.target.value}),className:"w-full bg-transparent text-3xl font-serif font-bold text-brand-text placeholder-brand-text-muted/30 outline-none",placeholder:"Note Title"}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-brand-text-muted",children:[i.jsxs("span",{children:["Last edited: ",new Date(m.updatedAt).toLocaleString()]}),m.relatedType&&i.jsxs("span",{className:"px-2 py-0.5 bg-brand-surface rounded-full border border-white/5",children:["Linked to ",m.relatedType]})]})]}),i.jsx("div",{className:"flex-grow p-6",children:i.jsx("textarea",{value:m.content,onChange:j=>r(m.id,{content:j.target.value}),className:"w-full h-full bg-transparent text-brand-text placeholder-brand-text-muted/30 outline-none resize-none leading-relaxed custom-scrollbar",placeholder:"Start writing..."})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-4",children:i.jsx(Zo,{className:"w-8 h-8 opacity-50"})}),i.jsx("p",{className:"text-lg font-medium",children:"Select a note or create a new one"})]})})]})},vy=()=>{const{items:a,addItem:s,updateItem:r,deleteItem:o,storyPremise:u}=ao(),[l,d]=ne.useState(null),[h,p]=ne.useState(""),[m,y]=ne.useState(!1),[w,j]=ne.useState(""),[g,L]=ne.useState(""),N=a.find(F=>F.id===l),A=()=>{if(!w.trim())return;const F={id:`item_${Date.now()}`,name:w,appearance:g||"No description provided.",history:"",significance:"",notes:""};s(F),j(""),L(""),d(F.id)},_=(F,B)=>{F.stopPropagation(),window.confirm("Are you sure you want to delete this item?")&&(o(B),l===B&&d(null))},T=async()=>{if(N){y(!0);try{const F=await vx(N);r(N.id,{image:F})}catch(F){console.error(F),alert("Failed to generate image. Please try again.")}finally{y(!1)}}},D=a.filter(F=>F.name.toLowerCase().includes(h.toLowerCase())||F.appearance.toLowerCase().includes(h.toLowerCase()));return i.jsxs("div",{className:"flex h-full animate-in fade-in duration-500",children:[i.jsxs("div",{className:"w-1/3 border-r border-white/10 flex flex-col bg-brand-surface/30 backdrop-blur-sm",children:[i.jsxs("div",{className:"p-4 border-b border-white/10 space-y-4",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("h2",{className:"text-xl font-bold font-serif text-brand-text",children:"Items & Artifacts"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",placeholder:"New Item Name",value:w,onChange:F=>j(F.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-brand-text placeholder-brand-text-muted focus:ring-1 focus:ring-brand-secondary outline-none"}),i.jsxs("button",{onClick:A,disabled:!w.trim(),className:"w-full py-2 bg-brand-primary hover:bg-brand-primary-hover disabled:opacity-50 text-white rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium","aria-label":"Create New Item",children:[i.jsx(Zo,{className:"w-4 h-4"}),"Create Item"]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-brand-text-muted"}),i.jsx("input",{type:"text",placeholder:"Search items...",value:h,onChange:F=>p(F.target.value),className:"w-full bg-brand-bg/50 border border-white/10 rounded-lg pl-9 pr-3 py-2 text-sm text-brand-text focus:ring-1 focus:ring-brand-secondary outline-none transition-all"})]})]}),i.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-2 space-y-2",children:D.length===0?i.jsx("div",{className:"text-center text-brand-text-muted py-8 text-sm",children:"No items found."}):D.map(F=>i.jsxs("div",{onClick:()=>d(F.id),className:`group p-3 rounded-lg cursor-pointer transition-all border ${l===F.id?"bg-brand-primary/10 border-brand-primary/30":"hover:bg-white/5 border-transparent hover:border-white/5"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("h3",{className:`font-medium truncate ${l===F.id?"text-brand-primary":"text-brand-text"}`,children:F.name}),i.jsx("button",{onClick:B=>_(B,F.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 hover:text-red-400 rounded transition-all",title:"Delete Item",children:i.jsx(Fl,{className:"w-3.5 h-3.5"})})]}),i.jsx("p",{className:"text-xs text-brand-text-muted line-clamp-2",children:F.appearance})]},F.id))})]}),i.jsx("div",{className:"w-2/3 flex flex-col bg-brand-bg/50",children:N?i.jsxs("div",{className:"flex flex-col h-full overflow-y-auto custom-scrollbar",children:[i.jsxs("div",{className:"h-48 bg-black/40 relative group shrink-0",children:[N.image?i.jsx("img",{src:N.image.startsWith("data:")?N.image:`data:image/png;base64,${N.image}`,alt:N.name,className:"w-full h-full object-cover"}):i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-brand-text-muted",children:[i.jsx(si,{className:"w-12 h-12 mb-2 opacity-50"}),i.jsx("span",{className:"text-sm",children:"No image available"})]}),i.jsx("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent flex justify-end",children:i.jsxs("button",{onClick:T,disabled:m,className:"p-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm transition-colors text-xs flex items-center gap-2 disabled:opacity-50",title:"Generate Item Image",children:[i.jsx(Gr,{className:`w-3 h-3 ${m?"animate-spin":""}`}),m?"Generating...":"Generate Image"]})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"item-name-input",className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-1",children:"Item Name"}),i.jsx("input",{id:"item-name-input",type:"text",value:N.name,onChange:F=>r(N.id,{name:F.target.value}),className:"w-full bg-transparent text-3xl font-serif font-bold text-brand-text outline-none border-b border-transparent focus:border-white/10 py-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Visual Description"}),i.jsx("textarea",{value:N.appearance,onChange:F=>r(N.id,{appearance:F.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Describe how the object looks..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"History & Origin"}),i.jsx("textarea",{value:N.history,onChange:F=>r(N.id,{history:F.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Where did this item come from?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Significance & Powers"}),i.jsx("textarea",{value:N.significance,onChange:F=>r(N.id,{significance:F.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Why is this item important?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs uppercase tracking-wider text-brand-text-muted mb-2",children:"Additional Notes"}),i.jsx("textarea",{value:N.notes,onChange:F=>r(N.id,{notes:F.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-brand-text text-sm outline-none focus:border-brand-secondary/50 min-h-[100px]",placeholder:"Any other details..."})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-text-muted",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-4",children:i.jsx(Gr,{className:"w-8 h-8 opacity-50"})}),i.jsx("p",{className:"text-lg font-medium",children:"Select an item or create a new one"})]})})]})},yy=({selectedCharacterIds:a,selectedSceneIds:s,selectedMaterialIds:r})=>{const{storyPremise:o,storyTextToAnalyze:u,characters:l,scenes:d,mapData:h,savedMaterials:p,setCharacters:m,setScenes:y,setMapData:w,setSavedMaterials:j,setGeneratedContent:g,setIsLoading:L,setLoadingMessage:N,setError:A,createCharacter:_,updateScene:T}=ao(),[D,F]=ne.useState(null),B=ne.useCallback(()=>{A(null),g(null)},[A,g]),ce=ne.useCallback(async(oe,J,ae,he,fe,ge)=>{L(!0),N("Creating character profile..."),B();try{const P=await Wb(oe,J,ae,he,fe),C={id:`char_${Date.now()}`,name:oe,type:J,initialInfo:ae,traits:he,headerImage:ge,...P};_(C);const G={title:`Character Profile: ${oe}`,content:`**Traits:** ${he}

**History:**
${P.history}

**Character Arc:**
${P.arc}`,type:"CHARACTER_PROFILE",sourceId:C.id};g(G),j($=>[{id:`material_${Date.now()}`,type:"CHARACTER_PROFILE",title:G.title,content:G.content},...$])}catch(P){console.error(P),A("Failed to generate character profile. Please check your connection and try again.")}finally{L(!1),N("")}},[_,g,j,L,N,A,B]),U=ne.useCallback(async()=>{if(!u.trim()){A("Please paste some story text to analyze.");return}L(!0),B(),m([]),y([]);try{N("Analyzing: Sending story to AI...");const oe=await $b(o,u);N("Analyzing: Processing results...");const J=[],ae={};for(let ge=0;ge<oe.characters.length;ge++){const P=oe.characters[ge],C=`char_${Date.now()}_${ge}`;ae[P.name]=C,J.push({id:C,name:P.name,type:P.type,initialInfo:P.description,traits:P.traits,history:P.history||P.description,arc:P.arc||"Not yet defined."})}m(J);const he=oe.scenes.map((ge,P)=>{const C=[];return ge.characters_present&&Array.isArray(ge.characters_present)&&ge.characters_present.forEach(G=>{if(ae[G])C.push(ae[G]);else{const $=Object.keys(ae).find(ee=>ee.includes(G)||G.includes(ee));$&&C.push(ae[$])}}),{id:`scene_${Date.now()}_${P}`,title:ge.title,summary:ge.summary,fullText:ge.fullText,characterIds:[...new Set(C)],isTransition:!1}});y(he);const fe={title:"Analysis Complete",content:`Identified ${oe.characters.length} characters and ${oe.scenes.length} scenes. Characters have been automatically linked to scenes where they appear.`,type:"ANALYSIS_SUMMARY"};g(fe),j(ge=>[{id:`material_${Date.now()}`,type:"ANALYSIS_SUMMARY",title:fe.title,content:fe.content},...ge])}catch(oe){console.error(oe),A("Failed to analyze the story. The structure might be complex or an API error occurred."),g(null)}finally{L(!1),N("")}},[o,u,m,y,g,j,L,N,A,B]),q=ne.useCallback(async(oe,J)=>{const ae=(J==null?void 0:J.characterIds)||a,he=(J==null?void 0:J.sceneIds)||s,fe=l.filter(C=>ae.has(C.id)),ge=d.filter(C=>he.has(C.id)),P=p.filter(C=>r.has(C.id));if(B(),oe===gt.RELATIONSHIP_WEB&&fe.length<2){A("Please select at least two characters.");return}if(oe===gt.TRANSITION&&ge.length!==2){A("Please select exactly two scenes.");return}if(oe===gt.DIALOGUE_GENERATOR&&fe.length!==2){A("Please select exactly two characters.");return}if((oe===gt.OBJECT_GENERATOR||oe===gt.OUTLINE_GENERATOR)&&!o.trim()){A("Please provide a story premise.");return}if(oe===gt.MIDJOURNEY_PROMPTS&&ge.length!==1){A("Please select exactly one scene for prompt generation.");return}if(oe===gt.SETTING_GENERATOR&&ge.length!==1&&J){A("Please select exactly one scene for setting description.");return}L(!0);try{let C=null;const G=d.map($=>$.fullText).join(`

`);switch(oe){case gt.CHAPTER:N("Weaving the next chapter..."),C={title:"Generated Chapter",content:await Xb(o,G,fe,ge),type:gt.CHAPTER};break;case gt.RELATIONSHIP_WEB:N("Mapping character relationships..."),C={title:"Character Relationship Web",content:await Zb(fe),type:"RELATIONSHIP_WEB_VISUAL"};break;case gt.PLOT_IDEAS:N("Brainstorming plot ideas..."),C={title:"Plot Ideas & Twists",content:await Jb(o,G,fe),type:gt.PLOT_IDEAS};break;case gt.TRANSITION:{N("Crafting a transition...");const Ee=await Qb(ge);C={title:"Scene Transition",content:Ee,type:gt.TRANSITION};const Re=[];d.forEach((me,W)=>{he.has(me.id)&&Re.push(W)});const qe=Math.min(...Re),Xe={id:`transition_${Date.now()}`,title:"Transition",summary:Ee,fullText:Ee,characterIds:[],isTransition:!0},M=[...d];M.splice(qe+1,0,Xe),y(M);break}case gt.MAP_GENERATOR:N("Generating world map...");const Se=`Premise: ${o}

Scenes:
${d.map(Ee=>`Title: ${Ee.title}
Summary: ${Ee.summary}`).join(`
---
`)}

Characters:
${l.map(Ee=>`Name: ${Ee.name}
History: ${Ee.history}`).join(`
---
`)}`,je=await Kb(Se);w(je),C={title:"World Map Generated",content:`Successfully generated a map with ${je.locations.length} locations.`,type:"MAP_DATA"};break;case gt.REASSESS_FLOW:N("Reassessing narrative flow..."),C={title:"Narrative Flow Analysis",content:await ex(o,d),type:gt.REASSESS_FLOW};break;case gt.DIALOGUE_GENERATOR:{N("Generating dialogue...");const Ee=await tx(fe[0],fe[1]);C={title:`Dialogue: ${fe[0].name} & ${fe[1].name}`,content:Ee,type:gt.DIALOGUE_GENERATOR};break}case gt.OBJECT_GENERATOR:{N("Inventing an object...");const Ee=await nx(o);C={title:`Invented Object: ${Ee.name}`,content:Ee,type:"OBJECT_DATA"};break}case gt.SETTING_GENERATOR:{N("Describing a setting...");const Ee=ge.length===1?{title:ge[0].title,summary:ge[0].summary}:void 0,Re=await ax(o,Ee);C={title:Ee?`Setting: ${Ee.title}`:"Generated Setting",content:Re,type:gt.SETTING_GENERATOR,sourceId:ge.length===1?ge[0].id:void 0};break}case gt.OUTLINE_GENERATOR:{N("Generating story outline...");const Ee=P.find(Xe=>Xe.type===gt.PLOT_IDEAS),Re=Ee?String(Ee.content):void 0;C={title:"Generated Story Outline",content:await rx(o,fe,Re),type:gt.OUTLINE_GENERATOR};break}case gt.MIDJOURNEY_PROMPTS:{N("Crafting Midjourney shot list...");const Ee=await ix(ge[0],fe);C={title:`Midjourney Prompts: ${ge[0].title}`,content:Ee,type:gt.MIDJOURNEY_PROMPTS};break}}C&&(g(C),j($=>[{id:`material_${Date.now()}`,type:C.type,title:C.title,content:C.content},...$]))}catch(C){console.error(C),A(`Failed to perform action: ${oe}. Please try again.`)}finally{L(!1),N("")}},[a,s,r,l,d,p,o,B,A,L,N,y,w,g,j]),ie=ne.useCallback(async(oe,J)=>{if(!oe.trim()){A("Please enter a prompt.");return}L(!0),N(`Generating with ${J} context...`),B();try{let ae=`STORY PREMISE:
${o||"Not set."}

`;if(J==="all")l.forEach(ge=>{ae+=`Name: ${ge.name} (${ge.type})
Traits: ${ge.traits}
---
`}),d.forEach(ge=>{ae+=`Title: ${ge.title}
Summary: ${ge.summary}
---
`}),h&&h.locations.forEach(ge=>{ae+=`Name: ${ge.name}
Description: ${ge.description}
---
`});else{const ge=l.filter(C=>a.has(C.id)),P=d.filter(C=>s.has(C.id));ge.length>0&&ge.forEach(C=>{ae+=`Name: ${C.name}
Traits: ${C.traits}
---
`}),P.length>0&&P.forEach(C=>{ae+=`Title: ${C.title}
Summary: ${C.summary}
---
`})}const he=await sx(oe,ae),fe={title:`Generated from: "${oe}"`,content:he,type:gt.CHAPTER};g(fe),j(ge=>[{id:`material_${Date.now()}`,type:fe.type,title:fe.title,content:fe.content},...ge])}catch(ae){console.error(ae),A("Failed to generate text.")}finally{L(!1),N("")}},[o,l,d,h,a,s,L,N,A,B,g,j]),se=ne.useCallback(async(oe,J)=>{L(!0),N(`Generating image for "${oe.title}"...`),B();try{const ae=l.filter(fe=>{var ge;return(ge=oe.characterIds)==null?void 0:ge.includes(fe.id)}),he=await ox(oe,ae,J);F({imageUrl:he,source:{type:"scene",id:oe.id},title:oe.title})}catch(ae){console.error(ae),A("Failed to generate image.")}finally{L(!1),N("")}},[l,L,N,A,B,F]),I=ne.useCallback(async(oe,J)=>{L(!0),N(`Generating portrait for ${oe.name}...`),B();try{const ae=await lx(oe,J);F({imageUrl:ae,source:{type:"character",id:oe.id},title:oe.name})}catch(ae){console.error(ae),A("Failed to generate image.")}finally{L(!1),N("")}},[L,N,A,B,F]),O=ne.useCallback(async(oe,J,ae)=>{L(!0),N("Analyzing video for inspiration..."),B();try{const fe={title:"Video Analysis",content:await cx(oe,J,ae),type:"VIDEO_ANALYSIS"};g(fe),j(ge=>[{id:`material_${Date.now()}`,type:"VIDEO_ANALYSIS",title:fe.title,content:fe.content},...ge])}catch(he){console.error(he),A("Failed to analyze video.")}finally{L(!1),N("")}},[L,N,A,B,g,j]),Y=ne.useCallback(async oe=>{L(!0),N("Generating story timeline..."),A(null);try{const J=await ux(oe),ae=J.map((he,fe)=>({id:`scene_timeline_${Date.now()}_${fe}`,title:he.title,summary:he.summary,fullText:`Plot Point: ${he.title}

${he.summary}`,characterIds:[]}));y(he=>[...he,...ae]),g({title:"Timeline Generated",content:`Successfully generated ${J.length} timeline points.`,type:"TIMELINE"})}catch(J){console.error(J),A("Failed to generate timeline.")}finally{L(!1),N("")}},[L,N,A,y,g]),E=ne.useCallback(async oe=>{const J=d.find(ae=>ae.id===oe);if(!J||!J.characterIds||J.characterIds.length===0){A("This scene needs characters assigned to it before it can be written.");return}L(!0),N(`Writing scene: "${J.title}"...`),B();try{const ae=l.filter(G=>J.characterIds.includes(G.id)),he=d.findIndex(G=>G.id===oe),ge=d.slice(0,he).map(G=>`Title: ${G.title}
Summary: ${G.summary}`).join(`

`),P=await dx(o,ge,J,ae);T(oe,{fullText:P});const C={title:`Generated Scene: ${J.title}`,content:P,type:gt.SCENE_WRITER};g(C),j(G=>[{id:`material_${Date.now()}`,type:C.type,title:C.title,content:C.content},...G])}catch(ae){console.error(ae),A("Failed to generate scene details.")}finally{L(!1),N("")}},[d,l,o,L,N,A,B,T,g,j]);return{handleCreateCharacter:ce,handleAnalyzeStory:U,handleGenerate:q,handleGenerateWithContext:ie,handleGenerateSceneImage:se,handleGenerateCharacterImage:I,handleAnalyzeVideo:O,handleGenerateTimeline:Y,handleGenerateSceneDetails:E,generatedImage:D,setGeneratedImage:F}};function wy(){const{id:a}=_5(),{storyPremise:s,setStoryPremise:r,storyTextToAnalyze:o,setStoryTextToAnalyze:u,characters:l,setCharacters:d,scenes:h,setScenes:p,mapData:m,setMapData:y,savedMaterials:w,setSavedMaterials:j,compiledBook:g,setCompiledBook:L,isLoading:N,setIsLoading:A,loadingMessage:_,setLoadingMessage:T,error:D,setError:F,generatedContent:B,setGeneratedContent:ce,updateCharacter:U,deleteCharacter:q,addScene:ie,updateScene:se,deleteScene:I,reorderScenes:O,updateLocation:Y,deleteSavedMaterial:E,loadProject:oe,resetStory:J,notes:ae,items:he}=ao();ne.useEffect(()=>{J(),a&&(async()=>{A(!0);try{const st=await to.get(`/stories/${a}`);st.data&&(st.data.storyPremise&&r(st.data.storyPremise),st.data.characters&&d(st.data.characters),st.data.scenes&&p(st.data.scenes),st.data.savedMaterials&&j(st.data.savedMaterials),st.data.mapData&&y(st.data.mapData))}catch(st){console.error("Failed to load story",st),F("Failed to load story.")}finally{A(!1)}})()},[a]),ne.useEffect(()=>{if(!a)return;const tt={storyPremise:s,characters:l,scenes:h,savedMaterials:w,mapData:m,notes:ae,items:he},st=setTimeout(async()=>{try{await to.put(`/stories/${a}`,{title:s.split(".")[0]||"Untitled Story",data:tt})}catch(en){console.error("Auto-save failed",en)}},2e3);return()=>clearTimeout(st)},[a,s,l,h,w,m,ae,he]);const[fe,ge]=ne.useState(()=>typeof window<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme"):window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"),[P,C]=ne.useState(!1),[G,$]=ne.useState(()=>{if(typeof window<"u"&&localStorage.getItem("themeColor"))try{return JSON.parse(localStorage.getItem("themeColor"))}catch{return lp[0]}return lp[0]}),[ee,be]=ne.useState("story"),[Se,je]=ne.useState(!1),[Ae,Ee]=ne.useState(!0),[Re,qe]=ne.useState(!0),[Xe,M]=ne.useState(null),[me,W]=ne.useState(null),[le,te]=ne.useState(null),[de,ke]=ne.useState(new Set),[Le,xe]=ne.useState(new Set),[Oe,De]=ne.useState(new Set),[Ge,at]=ne.useState(new Set),[ct,dt]=ne.useState(""),[ft,Lt]=ne.useState({characters:!0,scenes:!0,locations:!0,materials:!0});ne.useRef(null);const{handleCreateCharacter:rt,handleAnalyzeStory:Cn,handleGenerate:ht,handleGenerateWithContext:an,handleGenerateSceneImage:zt,handleGenerateCharacterImage:St,handleAnalyzeVideo:Ba,handleGenerateTimeline:Ht,handleGenerateSceneDetails:lr,generatedImage:Tt,setGeneratedImage:In}=yy({selectedCharacterIds:de,selectedSceneIds:Le,selectedMaterialIds:Oe});ne.useEffect(()=>{fe==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.remove("light")):(document.documentElement.classList.remove("dark"),document.body.classList.add("light")),localStorage.setItem("theme",fe)},[fe]),ne.useEffect(()=>{G&&(document.documentElement.style.setProperty("--color-primary",G.primary),document.documentElement.style.setProperty("--color-secondary",G.secondary),document.documentElement.style.setProperty("--color-accent",G.accent))},[G]),ne.useEffect(()=>{localStorage.getItem("storyWeaver_onboarding_complete")||je(!0)},[]),ne.useEffect(()=>{N&&Ee(!0)},[N]);const Zn=()=>{if(h.length===0){F("You need scenes to compile a story!");return}const tt={title:s.split(".")[0]||"My Story",chapters:h.map(st=>({title:st.title,content:st.fullText||st.summary}))};L(tt),be("book")},Gt=()=>{localStorage.setItem("storyWeaver_onboarding_complete","true"),je(!1)},_t=()=>{ge(tt=>tt==="dark"?"light":"dark")},qt=tt=>{$(tt),localStorage.setItem("themeColor",JSON.stringify(tt))},Si=tt=>{dt(tt),Lt(st=>({...st,scenes:!0,characters:!1,materials:!1,locations:!1})),be("story")},Jn=async(tt,st)=>{const en=h.find(Pt=>Pt.id===tt);if(en){A(!0);try{const Pt=l.filter(Sn=>{var Qn;return(Qn=en.characterIds)==null?void 0:Qn.includes(Sn.id)});let nn={...en};if(!nn.settingDescription){T("Generating scene setting...");const Sn=await fx(nn);nn.settingDescription=Sn}if(!nn.script){T("Generating screenplay...");const Sn=await hx(nn,Pt);nn.script=Sn}T("Visualizing shots...");const ka=await px(nn,Pt,st);nn.storyboard=ka,p(Sn=>Sn.map(Qn=>Qn.id===tt?nn:Qn)),M(tt)}catch(Pt){console.error(Pt),F("Failed to generate storyboard.")}finally{A(!1),T("")}}},Wa=async(tt,st,en)=>{var nn;const Pt=h.find(ka=>ka.id===tt);if(Pt)try{const ka=await mx(en),Sn=(nn=Pt.storyboard)==null?void 0:nn.map(Qn=>Qn.id===st?{...Qn,sketchImage:ka}:Qn);se(tt,{storyboard:Sn})}catch(ka){console.error("Sketch failed",ka)}},Aa=(tt,st,en)=>{var ka;const Pt=h.find(Sn=>Sn.id===tt);if(!Pt)return;const nn=(ka=Pt.storyboard)==null?void 0:ka.map(Sn=>Sn.id===st?{...Sn,...en}:Sn);se(tt,{storyboard:nn})},Nt=()=>{!Tt||!Tt.source||(Tt.source.type==="scene"?se(Tt.source.id,{headerImage:Tt.imageUrl}):U(Tt.source.id,{headerImage:Tt.imageUrl}),In(null))},$a=tt=>{if(!Tt&&!tt)return;const st=tt||(Tt==null?void 0:Tt.imageUrl),en=(Tt==null?void 0:Tt.title)||"Saved Image";st&&(j(Pt=>[{id:`material_${Date.now()}`,type:"IMAGE",title:`Image: ${en}`,content:st},...Pt]),In(null))},cr=tt=>{tt.type==="IMAGE"&&In({imageUrl:tt.content,title:tt.title})},la=tt=>{j(st=>[{id:`material_${Date.now()}`,type:tt.type,title:tt.title,content:tt.content},...st])},dn=(tt,st)=>{(st==="character"?ke:st==="scene"?xe:st==="location"?at:De)(Pt=>{const nn=new Set(Pt);return nn.has(tt)?nn.delete(tt):nn.add(tt),nn})},Ln=(tt,st)=>{tt==="character"?ke(st):xe(st)},xa=tt=>{q(tt),ke(st=>{const en=new Set(st);return en.delete(tt),en})},Yr=tt=>{I(tt),xe(st=>{const en=new Set(st);return en.delete(tt),en})},ca=tt=>{const st={storyPremise:s,characters:l,scenes:h,mapData:m,savedMaterials:w},en=new Blob([JSON.stringify(st,null,2)],{type:"application/json"}),Pt=URL.createObjectURL(en),nn=document.createElement("a");nn.href=Pt,nn.download="storyweaver_export.json",nn.click()},ln=ne.useMemo(()=>{if(!ft.characters||!ct)return l;const tt=ct.toLowerCase();return l.filter(st=>st.name.toLowerCase().includes(tt)||st.traits.toLowerCase().includes(tt))},[l,ct,ft.characters]),bn=ne.useMemo(()=>{if(!ft.scenes||!ct)return h;const tt=ct.toLowerCase();return h.filter(st=>st.title.toLowerCase().includes(tt)||st.summary.toLowerCase().includes(tt))},[h,ct,ft.scenes]),ua=ne.useMemo(()=>{if(!ft.materials||!ct)return w;const tt=ct.toLowerCase();return w.filter(st=>st.title.toLowerCase().includes(tt))},[w,ct,ft.materials]),[fn,Xa]=ne.useState(!1),yr=ne.useMemo(()=>h.reduce((tt,st)=>{var en;return tt+(((en=st.fullText)==null?void 0:en.split(/\s+/).length)||0)},0),[h]),Wr=fn?!1:Re,ur=fn?!1:Ae,Za=Xe?h.find(tt=>tt.id===Xe):null,Ja=me?l.find(tt=>tt.id===me):null;return i.jsxs("div",{className:"flex h-screen w-screen bg-brand-bg text-brand-text overflow-hidden font-sans transition-colors duration-300",children:[i.jsx("div",{className:`${Wr?"w-64":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out border-r border-white/10 relative z-20 bg-brand-surface/95 backdrop-blur-md`,children:i.jsx("div",{className:"w-64 h-full overflow-hidden",children:i.jsx(Iv,{activeView:ee,setActiveView:be,isSidebarOpen:Wr,setIsSidebarOpen:qe,theme:fe,setShowThemeSettings:C,setShowOnboarding:je})})}),Ja&&i.jsx(Bv,{character:Ja,onSave:U,onClose:()=>W(null)}),B&&i.jsx(qv,{generatedContent:B,onClose:()=>ce(null),isLoading:N,loadingMessage:_,error:D,onGenerateTimeline:Ht,onUpdateScene:se,onSave:la}),i.jsxs("main",{className:"flex-grow flex flex-col relative transition-all duration-300",children:[i.jsxs("header",{className:`h-16 px-6 flex items-center justify-between border-b border-white/10 transition-all duration-300 ${fn?"bg-transparent border-transparent hover:bg-brand-surface/30 hover:backdrop-blur-md hover:border-white/10":"bg-brand-surface/50 backdrop-blur-md"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[!fn&&!Re&&i.jsx("button",{onClick:()=>qe(!0),className:"p-2 -ml-2 hover:bg-white/10 rounded-md text-brand-text-muted transition","aria-label":"Open Sidebar",children:i.jsx(Bl,{className:"w-5 h-5"})}),i.jsx("h1",{className:`text-lg font-serif font-bold tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-brand-secondary to-purple-400 ${fn?"opacity-50 hover:opacity-100 transition-opacity":""}`,children:s?s.split(".")[0].length>40?s.split(".")[0].substring(0,40)+"...":s.split(".")[0]:"StoryWeaver"}),i.jsx("div",{className:"h-6 w-px bg-white/10 mx-2"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(jx,{}),i.jsx(_x,{currentCount:yr})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>Xa(!fn),className:`p-2 rounded-lg flex items-center gap-2 transition-all duration-300 ${fn?"bg-brand-secondary text-white shadow-lg shadow-brand-secondary/20 hover:scale-105":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,title:fn?"Exit Focus Mode":"Enter Focus Mode",children:fn?i.jsxs(i.Fragment,{children:[i.jsx(Vb,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm font-medium",children:"Exit Focus"})]}):i.jsx(Gb,{className:"w-5 h-5"})}),!fn&&i.jsx("button",{onClick:()=>Ee(!Ae),className:`p-2 rounded-lg transition ${Ae?"text-brand-secondary bg-brand-secondary/10":"text-brand-text-muted hover:text-white hover:bg-white/5"}`,"aria-label":"Toggle Right Panel",children:i.jsx(Pl,{className:"w-5 h-5"})})]})]}),i.jsx(Hv,{isOpen:P,onClose:()=>C(!1),currentTheme:fe,onToggleTheme:_t,currentThemeColorName:G.name,onSelectThemeColor:qt}),i.jsx(Lx,{theme:fe}),Se&&i.jsx(Ex,{onComplete:Gt}),Tt&&i.jsx(kx,{imageUrl:Tt.imageUrl,title:Tt.title,onClose:()=>In(null),onSetHeader:Tt.source?Nt:void 0,onSave:$a}),Za&&i.jsx(Wv,{scene:Za,onGenerateStoryboard:()=>Jn(Za.id),onGenerateSketch:(tt,st)=>Wa(Za.id,tt,st),onUpdateShot:(tt,st)=>Aa(Za.id,tt,st),onClose:()=>M(null),isGenerating:N}),i.jsx("div",{className:"flex flex-grow overflow-hidden relative",children:i.jsx("div",{className:`flex-grow overflow-y-auto custom-scrollbar transition-all duration-300 ${fn?"p-0":"p-6 lg:p-10"} ${le?"w-1/2 border-r border-white/10":"w-full"}`,children:i.jsxs("div",{className:`mx-auto h-full transition-all duration-500 ${fn?"max-w-4xl py-12 px-12 bg-brand-surface/30 backdrop-blur-sm rounded-xl border border-white/5 shadow-2xl my-6":"max-w-6xl space-y-8 pb-24"}`,children:[ee!=="book"&&ee!=="visual"&&ee!=="comic"&&!fn&&i.jsx("div",{className:"mb-6",children:i.jsx(Cx,{query:ct,onQueryChange:dt,filters:ft,onFilterChange:Lt})}),ee==="book"&&g&&i.jsx(Lv,{book:g,onClose:()=>be("story")}),ee==="story"&&i.jsx(ay,{storyPremise:s,setStoryPremise:r,storyTextToAnalyze:o,setStoryTextToAnalyze:u,onAnalyze:Cn,isLoading:N,characters:l,scenes:h,items:he,savedMaterials:w,onCompileBook:Zn,onGenerate:ht,filteredScenes:bn,selectedSceneIds:Le,onToggleSelect:dn,onUpdateScene:se,onDeleteScene:Yr,onGenerateSceneDetails:lr,onGenerateSceneImage:zt,onOpenStoryboard:tt=>M(tt),reorderScenes:O,onOpenSplitView:(tt,st)=>te({type:tt,id:st}),addScene:ie}),ee==="characters"&&i.jsx(uy,{onCreateCharacter:rt,isLoading:N,filteredCharacters:ln,selectedCharacterIds:de,onToggleSelect:dn,onDeleteCharacter:xa,onUpdateCharacter:U,onGenerateCharacterImage:St,onOpenVisuals:tt=>W(tt.id),onOpenSplitView:(tt,st)=>te({type:tt,id:st})}),ee==="map"&&i.jsx("div",{className:"h-full",children:i.jsx(fy,{onGenerate:ht,isLoading:N,mapData:m,selectedLocationIds:Ge,onToggleSelectLocation:dn,onUpdateLocation:Y,onExportData:ca,onViewLocationScenes:Si})}),ee==="world"&&i.jsx("div",{className:"h-full",children:i.jsx(my,{isLoading:N,onAnalyzeVideo:Ba})}),ee==="timeline"&&i.jsx(by,{onGenerate:ht,scenes:h,allCharacters:l,selectedSceneIds:Le,onToggleSelect:dn,onUpdateScene:se,onDeleteScene:Yr,onAddScene:ie,onReorderScenes:O,isLoading:N,onGenerateDetails:lr,onGenerateImage:zt}),ee==="visual"&&i.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:i.jsx(Ev,{scenes:h,allCharacters:l,onGenerateImage:zt,onGenerateCharacterImage:St})}),ee==="comic"&&i.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:i.jsx(Dv,{storyPremise:s,scenes:h,characters:l})}),ee==="notes"&&i.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:i.jsx(xy,{})}),ee==="items"&&i.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:i.jsx(vy,{})}),ee==="video"&&i.jsx("div",{className:"h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:le&&!fn&&i.jsxs("div",{className:"w-1/2 flex flex-col border-l border-white/10 bg-brand-surface/50 backdrop-blur-xl animate-in slide-in-from-right duration-300 relative z-10",children:[i.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[i.jsxs("h3",{className:"font-serif font-bold text-lg flex items-center gap-2",children:[i.jsx(Pl,{className:"w-5 h-5 text-brand-secondary"}),le.type==="character"?"Character Details":"Scene Editor"]}),i.jsx("button",{onClick:()=>te(null),"aria-label":"Close Split View",className:"p-1.5 hover:bg-white/10 rounded-lg text-brand-text-muted hover:text-white transition",children:i.jsx(Bl,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6",children:[le.type==="character"&&(()=>{const tt=l.find(st=>st.id===le.id);return tt?i.jsx(f1,{character:tt,isSelected:de.has(tt.id),onToggleSelect:()=>dn(tt.id,"character"),onDelete:()=>xa(tt.id),onUpdate:U,onExport:()=>{},onGenerateImage:St,onOpenVisuals:st=>W(st.id)}):i.jsx("div",{className:"text-brand-text-muted",children:"Character not found."})})(),le.type==="scene"&&(()=>{const tt=h.find(st=>st.id===le.id);return tt?i.jsxs("div",{className:"space-y-6",children:[i.jsx(Lp,{scene:tt,isSelected:Le.has(tt.id),onToggleSelect:()=>dn(tt.id,"scene"),onUpdate:se,onDelete:()=>Yr(tt.id),onExport:()=>{},allCharacters:l,allItems:he,isLoading:N,onGenerateDetails:lr,onGenerateImage:zt,onOpenStoryboard:st=>M(st.id),isFirst:!1,isLast:!1,layout:"vertical"}),i.jsxs("div",{className:"glass-card p-4 rounded-xl border border-white/5",children:[i.jsx("h4",{className:"font-bold text-brand-text mb-2",children:"Quick Notes"}),i.jsx("textarea",{className:"w-full h-40 bg-brand-bg/50 border border-white/10 rounded-lg p-3 text-sm focus:ring-1 focus:ring-brand-secondary outline-none resize-none",placeholder:"Jot down ideas for this scene..."})]})]}):i.jsx("div",{className:"text-brand-text-muted",children:"Scene not found."})})()]})]})})]})})})]}),i.jsx("div",{className:`${ur?"w-80":"w-0"} flex-shrink-0 transition-all duration-300 ease-in-out border-l border-white/10 relative z-20 bg-brand-surface/90 backdrop-blur-md`,children:i.jsx("div",{className:"w-80 h-full overflow-hidden",children:i.jsx(ey,{isRightPanelOpen:ur,setIsRightPanelOpen:Ee,onGenerate:ht,onGenerateWithContext:an,onViewImage:cr,onGenerateTimeline:Ht,selectedCharacterIds:de,selectedSceneIds:Le,onBatchUpdateSelection:Ln,filteredMaterials:ua,onSaveMaterial:la})})})]})}const I2=({children:a})=>{const{isAuthenticated:s}=lf();return s?i.jsx(i.Fragment,{children:a}):i.jsx(P5,{to:"/login"})};function Ny(){return console.log("App component rendering"),i.jsx(wb,{children:i.jsx(ub,{children:i.jsxs(F5,{children:[i.jsx(Pu,{path:"/login",element:i.jsx(Ab,{})}),i.jsx(Pu,{path:"/register",element:i.jsx(kb,{})}),i.jsx(Pu,{path:"/",element:i.jsx(I2,{children:i.jsx(f2,{children:i.jsx(Yb,{})})})}),i.jsx(Pu,{path:"/editor/:id",element:i.jsx(I2,{children:i.jsx(f2,{children:i.jsx(wy,{})})})})]})})})}const T1=document.getElementById("root");if(!T1)throw new Error("Could not find root element to mount to");const Sy=$g.createRoot(T1);Sy.render(i.jsx(Pc.StrictMode,{children:i.jsx(Ny,{})}));export{gn as _,Pd as c,cp as g};
